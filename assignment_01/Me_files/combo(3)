var wrappedFn = function () {
(function(){function n(e,t){var n=NeoConfig,r=n&&n.stat&&n.statThrottlePct,i=n&&n.ymstat||"/stats/ymstat",s=[],o;XMLHttpRequest&&r&&(o=new XMLHttpRequest,o.open("POST",i),o.setRequestHeader("Content-Type","text/plain"),o.timeout=2e3,s.push("key="+t,"bucketId="+n.expBucketId,"farm="+(n.farm?n.farm.substr(1):"xxxx"),"env="+n.mailEnv,"browser="+n.browser),o.send(e+"~blocks~counter~1~"+s.join(",")))}function r(e,t,n){window.console&&console.log&&console.log(e),window.globals&&typeof globals.report=="function"&&globals.report(e,t,1,1,1,n)}var e=function(t){function c(e,t,n){var o;typeof t=="string"&&(t=[t]);for(o=0;o<t.length;o++)t[o].search(/combo(.php)?\?/)>0&&(s=1);if(s){r===1&&++i>6&&(i=2);switch(i){case 2:for(o=0;o<t.length;o++)t[o]=t[o].replace(/combo(.php)?\?/,"nocombo?");break;case 3:n.timeOut=20;case 4:setTimeout(function(){n.onFailure.call(n.context,{win:window,data:n})},n.timeout/2);return;case 5:setTimeout(function(){n.onTimeout.call(n.context,{win:window,data:n})},n.timeOut);return;case 6:n.timeout=10}}return e.call(this,t,n)}try{var n,r,i,s,o=0,u=t.Get.script,a=window.location.search.substring(1).split("&"),f={all:1,404:2,fastfailure:3,failure:4,timeout:5,fasttimeout:6};e=0;for(;o<a.length;o++)n=a[o].split("="),n[0]==="modfailure"&&n.length===2&&(i=r=f[n[1].toLowerCase()]);r&&(t.Get.script=function(e,t){return c.call(this,u,e,t)})}catch(l){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-use:1",l,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-use:1")}},t=YUI.use;YUI.use=YUI.prototype.use=function(){var i,s=this,o=0,u=s.Env,a=u._used,f=u._attached,l=Array.prototype.slice.call(arguments,0),c=l.pop(),h=!0,p,d;e&&e(s),typeof c!="function"&&(l.push(c),c=0);var v=null;try{while(i=l[o++])if(!a[i]||!f[i])return p=new Promise(function(e,n){v=n,d=function(t){l.pop(),e(t)},l.push(d),h=!1,t.apply(s,l)}),c&&p.then(function(){try{c.call(s,s,{success:!0})}catch(e){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-use:2",e,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-use:2"),n("yui:error","cb"),n("yui:error:cb",l.join(",")),r("Exception in use "+l.join(",")+" callback: "+e.toString(),"YUI_CB_EXCEPTION",e)}}),p}catch(m){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-use:3",m,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-use:3"),typeof v=="function"&&v(s),n("yui:error","use"),n("yui:error:use:"+i,l.join(",")),r("Exception in use "+i+" with args "+l.join(",")+": "+m.toString(),"YUI_USE_EXCEPTION",m)}if(c)try{p=Promise.resolve(s),c.call(s,s,{success:!0})}catch(m){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-use:4",m,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-use:4"),p=Promise.reject(s),n("yui:error","cb"),n("yui:error:cb",l.join(",")),r("Exception in use "+l.join(",")+" callback: "+m.toString(),"YUI_CB_EXCEPTION",m)}return p||(p=Promise.resolve(s)),p}})();


YUI.add("comms-log4js",function(e){function i(e,t){var n=[],i=0,s=0,o={};return{useAppender:function(t,n){var i=o[t];if(!i){if(i=r[t])n=i(this,n,e);i=o[t]=n,i.refresh&&i.refresh()}return i},log:function(e){var r,u=n[s++]={msg:e,id:++i};this.noDate||(u.ts=new Date),s>=t&&(s=0);for(r in o)o[r].notify(u)},getEntries:function(){return n=n.concat(n.splice(0,s)),s=n.length,s>=t&&(s=0),n}}}function s(e,t){function n(e){try{var n=e.msg,i=new XMLHttpRequest;i.open("POST",r),t.jsonReq&&i.setRequestHeader("Content-type","application/json"),i.send(n)}catch(s){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-comms-shared-src-log4js-log4js:1",s,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-comms-shared-src-log4js-log4js:1")}}t=t||{};var r=t.url||"/neo/logger",i=t.include,s=t.exclude,o=t.maxCount||5,u=t.jsonReq||!1;return i=i&&i.split(",")||[],s=s&&s.split(",")||[],{notify:function(e){function c(e){for(;l<e.length;l++){t=e[l];if(t==="*"||f.indexOf(t)!==-1)return 1}}var t,r,u,a=i.length,f=e.msg,l=0;r=c(i),u=c(s),o&&(r||!a&&!u)&&n(e)}}}var t=e.namespace("comms"),n={},r={ajax:s};t.log4js={getLogger:function(e,t,r,s){e=e||"[default]",t=t||1e3;var o=n[e];return o||(o=n[e]=i(e,t)),r&&o.useAppender(r,s),o},register:function(e,t){r[e]=t}}},"1.0");


YUI.add("launch-utils",function(e){var t=e.log,n=e.comms.log4js.getLogger,r=n("ylogLogger",1e3),i=e.namespace("common.Utils");e.log=YUI.prototype.log=function(e){r.log(e),t.apply(this,arguments)},i.traceMsg=function(t,n){i.startConsole(n),r.log(t)},i.startConsole=function(t){t&&e.use("comms-log4js-appenders-console",function(){r.useAppender("console").show()})},i.netError=function(e){NeoConfig.log_error_yapache&&n("netLogger",1,"ajax").log(e)}},"1.0",{requires:["comms-log4js"]});


YUI.add("mail-modules",function(e){e.use(function(e){function a(){var t,n,r,i;if(NeoConfig.convMods)for(var s in NeoConfig.convMods){r=s.split("$"),t=NeoConfig.convMods[s],n=e.comps[r[1]];if(n&&t)if(r[0]=="PATH")n.path=t;else if(r[0]=="REQ"){i=t.split("$");if(i[0]==="")n.requires.push(i[1]);else for(var o=0;o<n.requires.length;o++)if(n["requires"][o]==i[0]){n.requires[o]=i[1];break}}}}function y(){d++>2&&d<7&&p++,f=(NeoConfig.yloaderTimeout||7500)*p,NeoConfig.low_bandwidth&&(f=f*2+2)}function b(){var e,t,n,r,i,s,o,u=NeoConfig.retryOriginPerc,a=0,p=[],d=window,g=d.globals||{};return d.globals=g,e=g.failures={},u||u===0||(u=101),o=Math.random()*100<u,t=function(t,u,d,g){function L(){A("edge"),y();try{u&&u.apply(this,arguments)}catch(e){}O(0,1)}function A(e){l="",c=0}function O(e,t){if(s&&t==2){i=s+1e4-(new Date).getTime(),i>0&&(n=n||setTimeout(O,i));if(n)return}else n&&t==1&&clearTimeout(n),n=0;setTimeout(function(){s=(new Date).getTime(),(r=p.shift())&&r.Y.use.apply(r.Y,r.a)},0)}function M(e){u&&u.errorFn?g.push(u):g.push(L),p.push({Y:t,a:g}),O(0,e)}function _(){var e,n,r=0;while(e=g[r++])if(!S[e]){b=T[e];if(!b)(function(e){t.use("common-utils-error",function(t){t.common.Utils.error.report("No Module Info: "+e,"YUI_MODULE_INFO_MISSING",1,1,1)})})(e),YUI.add(e);else{if(b.type=="js"){if(!b.noRegister)return;n=b,YUI.add(e)}n=n||b}}b=n}function D(e,n){var r,i,s,o,u=e.fullpath,a=e.name,l=f/4;if(!u){if(i=N[e.group]){if(!(r=i.origin)){(r=i.root)&&r.indexOf("nq/")==0&&(r="storm/"+r.substring(3)),r.indexOf("f=/n/")==0&&(r="storm/"+r.substring(5));if(r.length<3){n(2);return}}}else r="yui3/build/";u=location.protocol+"//"+location.host+"/"+r+e.path}t.UA.webkit&&(u+="?.rand="+(new Date).getTime()),s={autopurge:!0,timeout:l,onSuccess:function(){!o&&S[a]?(o=1,A("origin"),n(1)):this.onFailure()},onFailure:function(){o||(o=1,n(2))}},s.onTimeout=s.onFailure,t.Get.script(u,s)}var b,w,E=t.Env,S=YUI.Env.mods,x=E._loader,T=x.moduleInfo,N=x.groups,C,k=E._missed?E._missed.length:0;k>0&&t.use("common-utils-error",function(e){for(C=0;C<k;C++)e.common.Utils.error.report("Missing Module: "+E._missed[C],"YUI_MODULE_MISSING",1,1,1),e.common.Utils.log({m:"Module Missing",module:E._missed[C]},!0,"MissingModule")}),L.errorFn=1,g=t.clone(g),_(g);if(b&&b.type=="js"&&!b.noRegister){e[b.name]=e[b.name]||0,e[b.name]++,l||(l=b.name,h++),c++,m==v?f<61e3&&(f*=2):b=0,m=v,w={timeout:f,maxURLLength:m},t._config(w);if(b){o?D(b,M):M(2);return}}M(a++<5?1:2)},t}e.mix(e.namespace("comps"),{"ac-advanced-search-entry":{path:"mail/ui/searchautocomplete/advanced-search-ac-adapter_54_10489.js",requires:["mail-ui-advanced-search"]},"ac-entity-search":{path:"mail/ui/searchautocomplete/entity-search_54_10489.js",requires:["mail-common-utils-settings"]},"ac-message-search":{path:"mail/ui/searchautocomplete/message-search_54_10489.js",requires:["mail-ui-search-model","mail-ui-messageaction","common-utils","ymma-stats"]},"ac-widget":{path:"contacts/autocomplete/acWidget_5_1881.js",requires:["overlay","node-event-simulate","comms-ui-autocomplete-plugin","comms-ui-autocomplete","contacts-api-utils","contacts-api","filter-contacts","common-utils","comms-intl-bidihighlight"]},"boss-ult":{path:"mail/ui/boss/boss-ult_54_10489.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap"]},"calendar-ui-addEvent-controller":{path:"calendar/ui/addEvent/addEventController_54_10489.js",requires:["event-base","yui-log","attribute","calendar-ui-addEvent-utils","calendar-ui-addEvent-view","calendar-ui-addEvent-model","mail-controller-compose-text"]},"calendar-ui-addEvent-listener":{path:"calendar/ui/addEvent/addEventListener_54_10489.js",requires:["yui-log","event-base","calendar-ui-addEvent-controller"]},"calendar-ui-addEvent-model":{path:"calendar/ui/addEvent/addEventModel_54_10489.js",requires:["yui-log","attribute","calendar-ui-addEvent-utils"]},"calendar-ui-addEvent-utils":{path:"calendar/ui/addEvent/addEventUtils_54_10489.js",requires:["common-net-sessionmgr","common-utils"]},"calendar-ui-addEvent-view":{path:"calendar/ui/addEvent/addEventView_5_1308.js",requires:["common-utils","_shared_module_calendar_dialog_add_event_mail_rollup","modal-calendar_css","modal_css","comms-ui-dialog-base"]},"calendar-ui-calendarview":{path:"calendar/ui/calendarview_54_10489.js",requires:["mail-ui-basewidget","node-event-simulate","querystring-stringify-simple","comms-crossframe","mail-common-utils-features"]},comet:{path:"common/net/cometd-yui3_54_10530.js",requires:["base","io","json","async-queue","cookie","jsonp","jsonp-url"]},"common-net-crossframe":{path:"common/net/crossframe_54_10489.js",requires:["common-utils"]},"common-net-diag":{path:"common/net/diag_54_10489.js",requires:["common-net-session","common-utils"]},"common-net-error":{path:"common/net/error_5_2169.js",requires:["common-net-error-base","common-net-errorevent","common-net-sessionmgr","common-ui-dialog-helper","json-stringify","common-persist-user-data","launch-utils","common-utils","mail-common-utils-features","common-ui-notification-v2","_shared_module_offscreen_bin_notification_single_inline_text"]},"common-net-error-base":{path:"common/net/error-base_54_10489.js",requires:["common-utils","common-user-session"]},"common-net-errorevent":{path:"common/net/errorevent_54_10489.js"},"common-net-sendresponse":{path:"common/net/sendresponse_54_10489.js",requires:["json-stringify","io"]},"common-net-session":{path:"common/net/session_54_10489.js",requires:["node","event-custom","common-utils","mail-model-datastore"]},"common-net-sessionmgr":{path:"common/net/sessionmgr_54_10489.js",requires:["event-custom-base","common-net-session","common-net-error-base","json-parse","ymma-stats"]},"common-persist-cookie-data":{path:"common/persist/cookieData_54_10489.js",requires:["cookie","attribute","common-persist-neo-data"]},"common-persist-neo-data":{path:"common/persist/neoData_54_10489.js",requires:["attribute"]},"common-persist-user-data":{path:"common/persist/userData_54_10489.js",requires:["attribute","mail-net-transport"
,"json","common-utils"]},"common-ui-anchored-header":{path:"common/ui/listview/anchored-header_54_10489.js"},"common-ui-contentwidget":{path:"common/ui/contentwidget/contentwidget_5_1215.js",requires:["event-key"]},"common-ui-conv-listview":{path:"common/ui/listview/conv-listview_5_2165.js",requires:["base-base","node","event-focus","common-utils","mail-common-utils-features","common-ui-anchored-header","common-ui-timechunk"]},"common-ui-conv-listview-ext":{path:"common/ui/listview/conv-listview-ext_5_2210.js",requires:["common-ui-conv-listview","common-ui-notification","mail-common-utils-features","common-utils"]},"common-ui-dd":{path:"common/ui/dd/dd_54_10489.js",requires:["node","common-utils"]},"common-ui-diagpanel":{path:"common/ui/contentwidget/diagpanel_54_10489.js",requires:["common-utils"]},"common-ui-dialog-helper":{path:"common/ui/dialoghelper/dialoghelper_54_10673.js",requires:["common-utils","modal_css","comms-ui-dialog-base","_shared_module_offscreen_bin_modal","_shared_module_offscreen_bin_modal_btn_ok"]},"common-ui-listview":{path:"common/ui/listview/listview_5_2165.js",requires:["base-base","node","event-focus","common-utils","mail-common-utils-features","common-ui-anchored-header","common-ui-timechunk"]},"common-ui-listview-ext":{path:"common/ui/listview/listview-ext_5_2210.js",requires:["common-ui-listview","mail-common-utils-features","common-utils"]},"common-ui-lozengeDD":{path:"common/ui/lozenge/lozenge-DD_54_10489.js",requires:["common-ui-dd","common-utils"]},"common-ui-menu-helper":{path:"common/ui/menuhelper/menuhelper_5_786.js",requires:["common-utils","comms-ui-menu-base","_shared_module_offscreen_bin_menus_loading"]},"common-ui-navtabs":{path:"common/ui/tabview/navtabs_5_2191.js",requires:["common-ui-tabs-base","common-utils","common-net-session","minty_module_tabs_navtabs_removable"]},"common-ui-notification":{path:"common/ui/notifications/notification_54_10489.js",requires:["common-utils"]},"common-ui-notification-v2":{path:"common/ui/notifications/notification-v2_5_2136.js",requires:["common-utils","common-ui-dialog-helper","overlay","event-outside","event-mouseenter"]},"common-ui-tabs-base":{path:"common/ui/tabview/tabview_5_2214.js",requires:["mail-ui-basewidget","minty_module_tabs_tab_removable","comms-ui-nodefocus-base","common-utils","mail-ui-common-string-utils","ymma-stats"]},"common-ui-tabs-overflow":{path:"common/ui/tabview/taboverflow_5_1283.js",requires:["common-ui-menu-helper","_shared_module_offscreen_bin_inbox"]},"common-ui-tabs-tray":{path:"common/ui/tabview/tray_54_10489.js",requires:["common-ui-tabs-base"]},"common-ui-timechunk":{path:"common/ui/listview/timechunk_5_2083.js"},"common-ui-toolbar-base":{path:"common/ui/toolbar/toolbar_5_2023.js",requires:["attribute","event-custom-base","common-utils","comms-ui-nodefocus-base","ymma-stats","common-ui-tabs-base","mail-common-utils-features"]},"common-user-session":{path:"common/user/session_54_10489.js",requires:["common-persist-cookie-data","common-utils"]},"common-utils":{path:"common/utils/utils_5_2214.js",requires:["querystring-parse-simple","querystring-stringify-simple","launch-utils"]},"common-utils-apihook":{path:"common/utils/apihook_54_10489.js",requires:["common-utils"]},"common-utils-error":{path:"common/utils/error_54_10489.js",requires:["common-ui-tabs-base","comms-utils-stack-tracer","ymma-stats","mail-ui-recorder"]},"common-utils-rapid":{path:"common/utils/rapid_5_2098.js",requires:["common-utils","common-utils-rapid-viewmap","common-utils-rapid-clickmap","mail-common-utils-features","common-ui-tabs-base"]},"common-utils-rapid-clickmap":{path:"common/utils/rapid-clickmap_5_2123.js"},"common-utils-rapid-doc":{path:"common/utils/rapid-doc_5_2123.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap","search-ult","boss-ult","conv-optout-ult","live-nation-ult","hovercard-ult","shopping-ads-ult","s2s-ult","snow-ult","onboarding-ult","newsfeed-ult","mail-common-connected-accounts-ult","folder-menu-ult","composeassist-ult"]},"common-utils-rapid-viewmap":{path:"common/utils/rapid-viewmap_5_1237.js",requires:["common-utils-rapid-clickmap"]},"common-utils-stats":{path:"common/utils/stats_54_10489.js"},"comms-aop-tracer":{path:"comms/shared/src/aop/aspects/tracer_54_10489.js",requires:["comms-log4js","comms-log4js-appenders-traceconsole"]},"comms-aop-weaver":{path:"comms/shared/src/aop/weaver_54_10489.js"},"comms-bidi-textentry":{path:"comms/shared/src/bidi-textentry/js/bidi-textentry_54_10489.js",requires:["plugin","event-valuechange","comms-intl-bidi","comms-node-setdir"]},"comms-crossframe":{path:"comms/shared/src/crossframe/crossframe_54_10489.js",requires:["json","crossframe"]},"comms-editor-autobidi":{path:"comms/shared/src/editor-autobidi/js/editor-autobidi_54_10489.js",requires:["editor-base","comms-intl-bidi"]},"comms-intl-bidi":{path:"comms/shared/src/intl-bidi/js/intl-bidi_54_10489.js"},"comms-intl-bidihighlight":{path:"comms/shared/src/intl-bidihighlight/js/intl-bidihighlight_54_10489.js"},"comms-log4js":{path:"comms/shared/src/log4js/log4js_54_10489.js"},"comms-log4js-appenders-console":{path:"comms/shared/src/log4js/console_54_10489.js",requires:["comms-log4js"]},"comms-log4js-appenders-traceconsole":{path:"comms/shared/src/log4js/traceconsole_54_10489.js",requires:["comms-log4js"]},"comms-lozenge":{path:"comms/shared/src/lozenge/js/lozenge_54_10489.js",requires:["node","widget","substitute","comms-utils"]},"comms-lozenge-address":{path:"comms/shared/src/lozenge-address/js/lozenge-address_54_10489.js",requires:["base-build","comms-lozenge"]},"comms-lozenge-edit":{path:"comms/shared/src/lozenge-edit/js/lozenge-edit_54_10489.js",requires:["base-build","comms-lozenge"]},"comms-node-setdir":{path:"comms/shared/src/node-setdir/js/node-setdir_54_10489.js",requires:["classnamemanager","node-base","node-style"]},"comms-ui-autocomplete":{path:"comms/shared/src/autocomplete/js/autocomplete-widget_54_10489.js",requires:["overlay","comms-ui-autocomplete-plugin","node-event-simulate"
]},"comms-ui-autocomplete-plugin":{path:"comms/shared/src/autocomplete/js/autocomplete-plugin_54_10489.js",requires:["node","plugin","event-valuechange","event-key"]},"comms-ui-clipboard-plugin":{path:"comms/shared/src/clipboard/js/clipboard-plugin_54_10489.js",requires:["node","plugin","substitute"]},"comms-ui-dialog-base":{path:"comms/shared/src/ui/dialog/js/dialog_54_10489.js",requires:["node","overlay"]},"comms-ui-editable-overlay-plugin":{path:"comms/shared/src/editable/js/editable-overlay-plugin_54_10489.js",requires:["comms-ui-editable-plugin","comms-utils"]},"comms-ui-editable-plugin":{path:"comms/shared/src/editable/js/editable-plugin_54_10489.js",requires:["node","plugin"]},"comms-ui-envelope":{path:"comms/shared/src/envelope/envelope_54_10489.js",requires:["env-indicator_css"]},"comms-ui-feedback-widget":{path:"comms/shared/src/feedback/js/feedback-widget_5_1003.js",requires:["node","widget","widget-position","widget-position-constrain","widget-stack"]},"comms-ui-lozenge":{path:"comms/shared/src/lozengeOld/js/hLozenge_5_1569.js",requires:["comms-ui-lozenge_css","common-utils","comms-utils","mail-common-utils-features","isXobnifiedCheck","node"]},"comms-ui-menu-base":{path:"comms/shared/src/ui/menu/js/menu_5_2209.js"},"comms-ui-model":{path:"comms/shared/src/ui/model/js/model_54_10489.js",requires:["json"]},"comms-ui-nodefocus":{path:"comms/shared/src/ui/nodefocus/js/nodefocus_54_10489.js",requires:["plugin","node","event-key"]},"comms-ui-nodefocus-base":{path:"comms/shared/src/ui/nodefocus/js/base_54_10489.js",requires:["plugin","node","event-key"]},"comms-ui-store-javascript":{path:"comms/shared/src/ui/model/js/stores/javascript-store_54_10489.js",requires:["comms-ui-model","json"]},"comms-ui-tooltips-widget":{path:"comms/shared/src/tooltips/js/tooltips-widget_54_10489.js",requires:["node","common-utils","widget","widget-position","widget-position-constrain","widget-stack","event-mouseenter"]},"comms-utils":{path:"comms/shared/src/utils/js/utils_5_2136.js"},"comms-utils-stack-tracer":{path:"comms/shared/src/utils/js/stack-tracer_54_10489.js"},"composeassist-ult":{path:"mail/ui/composeassist/composeassist-ult_5_2098.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap"]},"contacts-api":{path:"comms/shared/src/contacts-api/api_5_1957.js",requires:["contacts-api-adapter","contacts-api-config","contacts-api-cache","contacts-api-utils"]},"contacts-api-adapter":{path:"comms/shared/src/contacts-api/api-adapter_5_1957.js",requires:["contacts-api-io","contacts-api-cache","contacts-api-urigenerator","contacts-api-config","json","common-utils"]},"contacts-api-cache":{path:"comms/shared/src/contacts-api/api-cache_5_1881.js",requires:["contacts-api-config","common-utils-stats"]},"contacts-api-config":{path:"comms/shared/src/contacts-api/api-config_5_2136.js",requires:["attribute"]},"contacts-api-io":{path:"comms/shared/src/contacts-api/io_5_1788.js",requires:["contacts-api-urigenerator","json"]},"contacts-api-urigenerator":{path:"comms/shared/src/contacts-api/urigenerator_5_1957.js",requires:["contacts-api-utils","mail-common-utils-settings","mail-common-utils-features"]},"contacts-api-utils":{path:"comms/shared/src/contacts-api/api-utils_5_1881.js",requires:["contacts-api-cache","common-utils-stats"]},"contacts-ui-addcontact-add":{path:"comms/shared/src/addContact/js/addcontactdialogadd_54_10489.js",requires:["node-event-simulate","common-utils","_shared_module_offscreen_bin_contacts_modal_kiosk_add_modal_kiosk_addcontact"]},"contacts-ui-addcontact-confirm":{path:"comms/shared/src/addContact/js/addcontactconfirm_54_10489.js",requires:["common-utils","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_ft","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_hd","_shared_module_contact_card_confirm","_shared_module_contact_fragments_dl_email","_shared_module_contact_fragments_dl_yim","_shared_module_contact_fragments_dl_mobile","_shared_module_contact_fragments_photo","mod-contact-card_css"]},"contacts-ui-addcontactdialog":{path:"comms/shared/src/addContact/js/addcontactdialog_5_1308.js",requires:["array-extras","comms-ui-dialog-base","contacts-api","contacts-ui-addcontact-add","contacts-ui-addcontact-confirm","modal_css","comms-utils"]},"contacts-ui-choosecontactdialog":{path:"contacts/ui/choosecontactdialog/choosecontactdialog_54_10489.js",requires:["async-queue","node-event-simulate","comms-ui-dialog-base","common-utils","contacts-api-utils","contacts-api-config","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_modal_kiosk_choosecontact","modal_css","mod-contacts_css","mod-contact-chooser_css","comms-intl-bidi"]},"contacts-ui-contact-popup":{path:"contacts/ui/contactpopup/contact-popup_5_2191.js",requires:["overlay","common-utils","contacts-api-utils","mail-ui-messagepane-utils","mod-contact-card_css","_shared_module_contact_card_email_rollup","comms-utils","swfdetect","common-ui-menu-helper","_shared_module_offscreen_bin_contacts_menu_contact_compact_compose","_shared_module_offscreen_bin_contacts_menu_contact_compact_compose_fresh","_shared_module_offscreen_bin_contacts_menu_contact_compact_fresh"]},"contacts-ui-contactsevents":{path:"contacts/ui/contactseventstranslator/contactsEvents_54_10489.js"},"contacts-ui-contactseventstranslator":{path:"contacts/ui/contactseventstranslator/contactsEventsTranslator_54_10489.js",requires:["contacts-ui-contactsevents","contacts-ui-contactsview"]},"contacts-ui-contactsview":{path:"contacts/ui/contactsview/contactsview_54_10489.js",requires:["mail-ui-basewidget","node-event-simulate"]},"contacts-ui-hovercard-addedit":{path:"contacts/ui/hovercard/hovercard-addedit_5_1562.js",requires:["node-base","node-event-delegate","attribute-base","event-base","comms-utils","contacts-api-utils","contacts-api","xobni-contacts-search-api","_shared_module_offscreen_bin_contacts_modal_contact_edit"
,"_shared_module_offscreen_bin_contacts_modal_contact_add","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_smtp","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_tel","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_other","_shared_module_offscreen_bin_contacts_modal_contact_fragments_menu_email_types","_shared_module_offscreen_bin_contacts_modal_contact_fragments_menu_phone_types","common-ui-menu-helper","common-ui-dialog-helper"]},"contacts-ui-hovercard-datastore":{path:"contacts/ui/hovercard/hovercard-datastore_5_2205.js",requires:["cache-base","xobni-utilities","xobni-contacts-search-api"]},"contacts-ui-hovercard-onboard":{path:"contacts/ui/hovercard/hovercard-onboard_54_10544.js",requires:["event-mouseenter","mail-ui-onboarding","contacts-api-utils","contacts-api","mail-persist-meta-data","hovercard_css","minty_module_offscreen_bin_hovercard_callout"]},"contacts-ui-hovercard-plugin":{path:"contacts/ui/hovercard/hovercard-plugin_5_2191.js",requires:["node","widget","widget-position","widget-position-constrain","widget-stack","event-mouseenter","common-utils","comms-utils","contacts-ui-hovercard-datastore","mail-common-connected-accounts","hovercard-ult","isXobnifiedCheck","xobni-contacts-search-api","mail-common-utils-settings","mail-common-utils-features","_shared_module_offscreen_bin_contacts_hovercard","_shared_module_offscreen_bin_contacts_hovercard_mini","hovercard_css"]},"conv-optout-ult":{path:"mail/ui/optout/conv-optout-ult_54_10489.js",requires:["common-utils-rapid-clickmap"]},crossframe:{path:"comms/shared/src/crossframe/crossframe-base_54_10489.js"},"darla-utils":{path:"mail/ui/darla/utils_5_1922.js"},"datasource-sync":{path:"comms/shared/src/autocomplete/demo/federated-autocomplete-providers_54_10489.js",requires:["array-extras"]},"federated-autocomplete":{path:"comms/shared/src/autocomplete/js/federated-autocomplete_54_10489.js",requires:["autocomplete","mail-persist-meta-data","common-utils"]},"federated-autocomplete-acwidget-shim":{path:"comms/shared/src/autocomplete/js/federated-autocomplete-widgetshim_54_10489.js",requires:["federated-autocomplete"]},"filter-contacts":{path:"contacts/autocomplete/filtercontacts_5_1881.js",requires:["contacts-api-utils","contacts-api","common-utils"]},"filter-contacts-federated-ac-adapter":{path:"mail/ui/searchautocomplete/filtercontacts-federated-ac-adapter_5_2185.js",requires:["filter-contacts","ac-entity-search","ymma-stats"]},"folder-menu-ult":{path:"mail/ui/foldersview/folder-menu-ult_5_1670.js",requires:["common-utils-rapid-clickmap"]},"gallery-event-pasted":{path:"mail/ui/common/galleryEventPasted_54_10489.js",requires:["event-synthetic"]},"hovercard-ult":{path:"contacts/ui/contactpopup/hovercard-ult_54_10489.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap"]},"info-collector":{path:"mail/debug/info-collector_54_10489.js",requires:["io"]},"input-mask":{path:"mail/ui/common/inputMask_54_10489.js",requires:["event-valuechange","event-base-ie","gallery-event-pasted","event-focus","event-base"]},isXobnifiedCheck:{path:"comms/shared/src/xobniContacts/isXobnifiedCheck_5_1346.js",requires:["io-base","common-utils","xobni-utilities","mail-persist-meta-data"]},"launch-utils":{path:"common/launch/utils_54_10489.js",requires:["comms-log4js"]},"live-nation-ult":{path:"mail/ui/ads/live-nation-ult_54_10489.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap"]},"mail-captcha-data-controller":{path:"compose_v3/captcha/data/controller_54_10489.js",requires:["common-utils","captcha_css","comms-ui-dialog-base","common-ui-dialog-helper","mail-captcha-data-view","attribute","oop"]},"mail-captcha-data-view":{path:"compose_v3/captcha/data/view_54_10489.js",requires:["common-ui-dialog-helper","attribute","common-utils","captcha_css","_shared_module_send_confirm_captcha","_shared_module_send_confirm_captcha_blocked"]},"mail-captcha-turnkey-iframe":{path:"compose_v3/captcha/turnkey/Iframe_54_10489.js",requires:["node","common-utils"]},"mail-captcha-turnkey-parser":{path:"compose_v3/captcha/turnkey/Parser_54_10489.js",requires:["json-parse","common-utils"]},"mail-captcha-turnkey-view":{path:"compose_v3/captcha/turnkey/View_54_10489.js",requires:["common-ui-dialog-helper","mail-captcha-turnkey-iframe","oop","node"]},"mail-common-autocompose-list":{path:"mail/common/autocomposelist_54_10489.js"},"mail-common-cachewarmer":{path:"mail/common/cachewarmer_54_10489.js",requires:["async-queue","loader","common-net-session","mail-controller-messages"]},"mail-common-connected-accounts":{path:"mail/common/connected-accounts_5_1238.js",requires:["io-base","event-base","node-base","ymma-stats","xobni-utilities","common-net-session","xobni-utilities","isXobnifiedCheck","xobni-contacts-search-api","common-ui-dialog-helper","mail-common-connected-accounts-ult","_shared_module_offscreen_bin_modal_connected_accounts","_shared_module_offscreen_bin_modal_ln_upsell"]},"mail-common-connected-accounts-ult":{path:"mail/common/connected-accounts-ult_5_1050.js",requires:["common-utils-rapid-clickmap"]},"mail-common-corpmail":{path:"mail/common/corpmail_54_10489.js"},"mail-common-downloader-v1":{path:"mail/common/downloader_v1_54_10489.js",requires:["common-utils","mail-controller-messages","_shared_module_offscreen_bin_modal_attach_download_rollup","common-ui-dialog-helper","comms-ui-dialog-base"]},"mail-common-downloader-v2":{path:"mail/common/downloader_v2_54_10489.js",requires:["common-utils","mail-controller-messages","common-ui-dialog-helper","comms-ui-dialog-base","datatype"]},"mail-common-hidef-profiles":{path:"mail/common/hidef_profiles_54_10489.js",requires:["common-net-session"]},"mail-common-inline-edit":{path:"mail/common/edit-control_54_10489.js"},"mail-common-lowbandwidth":{path:"mail/common/lowbandwidth_54_10489.js",requires:["node"]},"mail-common-newscookie":{path:"mail/common/newscookie_5_1153.js",requires:["node","cookie"]},"mail-common-pixiedust":{path:"mail/common/pixiedust_54_10489.js"
},"mail-common-precache-ranking":{path:"mail/common/precache-ranking_54_10489.js",requires:["mail-ui-messagelist-base"]},"mail-common-precache-thread":{path:"mail/common/precache-thread_54_10489.js",requires:["mail-ui-convlist-base"]},"mail-common-precache-unread":{path:"mail/common/precache-unread_54_10489.js",requires:["mail-ui-messagelist-base"]},"mail-common-tracker":{path:"mail/common/tracker_54_10489.js",requires:["mail-common-utils-features"]},"mail-common-utils-callbacks":{path:"common/utils/callbacks_54_10489.js"},"mail-common-utils-deferred":{path:"common/utils/deferred_54_10489.js",requires:["mail-common-utils-callbacks","array-extras"]},"mail-common-utils-features":{path:"common/utils/features_54_10489.js"},"mail-common-utils-settings":{path:"common/utils/settings_54_10489.js"},"mail-common-yml":{path:"mail/common/yml_54_10489.js"},"mail-compose-syncer":{path:"compose_v3/controllers/Syncer_5_2204.js",requires:["common-utils","mail-common-utils-features"]},"mail-controller-base":{path:"mail/controller/base_5_885.js",requires:["mail-net-transport","common-net-error-base","common-utils","common-utils-apihook"]},"mail-controller-compose":{path:"mail/controller/composectrl_5_2100.js",requires:["mail-controller-base","mail-model-compose","mail-model-send","common-persist-user-data","mail-persist-meta-data","mail-ui-common-fonts","_shared_module_compose_reply"]},"mail-controller-compose-text":{path:"mail/controller/composetext_54_10489.js",requires:["common-persist-user-data","mail-controller-compose"]},"mail-controller-compose-v3":{path:"compose_v3/controllers/ComposeController_5_2156.js",requires:["mail-ui-fullcompose-v3","mail-models-validators-send","mail-model-datastore","mail-models-draft","mail-model-attachment","mail-services-compose","mail-services-plugins","mail-compose-syncer","mail-controller-reply-processor","mail-controller-html-processor","mail-controller-text-processor","mail-controller-signature-processor","mail-controller-spell-processor","mail-ui-mailcompose-header-form-list-helper","mail-controller-composecontent-helper","mail-controller-inlineimage-processor","mail-common-utils-features","rte-file-utils","mail-ui-mailview-base","mail-ui-folder-utils"]},"mail-controller-composecontent-helper":{path:"compose_v3/controllers/composeContentHelper_5_2103.js",requires:["mail-model-attachment"]},"mail-controller-contact-processor":{path:"compose_v3/controllers/ContactProcessor_5_997.js",requires:["mail-models-draft","comms-utils","common-persist-user-data","contacts-api-utils","common-net-sessionmgr","contacts-api","contacts-api-config"]},"mail-controller-conv-adapter":{path:"compose_v3/controllers/convAdapter_54_10912.js",requires:["mail-model-convstore","mail-model-datastore","mail-controller-messages","common-utils"]},"mail-controller-conversations":{path:"mail/controller/conversation_5_1622.js",requires:["launch-utils","mail-controller-parkqueue","mail-controller-base","mail-controller-folders","common-persist-user-data","mail-model-convstore","mail-model-datastore"]},"mail-controller-conversations-ops":{path:"mail/controller/conversationsops_5_2134.js",requires:["mail-controller-base","mail-model-convstore","json-stringify","array-extras"]},"mail-controller-conversations-ops-drafts":{path:"mail/controller/conversationsops-draft_54_10489.js",requires:["mail-core-net-policies-conv-write-policy","mail-core-net-transport","mail-model-datastore","mail-model-convstore","mail-core-net-helpers-batch-request-helper","mail-core-net-helpers-cascade-request-helper"]},"mail-controller-filters-v3":{path:"mail/controller/filters_v3_54_10587.js",requires:["mail-core-net-policies-list-filters-policy","mail-core-net-transport","mail-core-net-helpers-v3-request-helper"]},"mail-controller-folders":{path:"mail/controller/folders_5_1640.js",requires:["mail-common-utils-features","mail-model-datastore","mail-controller-base","common-persist-user-data","mail-common-utils-settings","mail-ui-folder-utils"]},"mail-controller-folders-v3":{path:"mail/controller/folders_v3_5_2209.js",requires:["mail-core-net-policies-list-folders-policy","mail-core-net-transport","mail-model-datastore","mail-controller-base","common-persist-user-data","mail-common-utils-settings","common-persist-user-data","mail-core-net-helpers-batch-request-helper","mail-core-net-helpers-v3-request-helper","escape","mail-ui-folder-utils"]},"mail-controller-html-processor":{path:"compose_v3/controllers/HtmlProcessor_5_1031.js",requires:["_shared_module_compose_reply"]},"mail-controller-imapin":{path:"mail/controller/imap-in_5_2164.js",requires:["mail-model-datastore","mail-ui-folder-utils"]},"mail-controller-inlineimage-processor":{path:"compose_v3/controllers/InlineImageProcessor_54_10489.js"},"mail-controller-messages":{path:"mail/controller/messages_5_1890.js",requires:["launch-utils","ymma-stats","mail-controller-parkqueue","mail-controller-base","mail-controller-folders","common-persist-user-data"]},"mail-controller-messages-ops":{path:"mail/controller/messagesops_5_2134.js",requires:["mail-controller-base","mail-model-datastore","json-stringify"]},"mail-controller-mrd":{path:"mail/controller/mrd_5_2191.js",requires:["common-utils","mail-ui-shortcuts"]},"mail-controller-parkqueue":{path:"mail/controller/parkqueue_54_10489.js"},"mail-controller-processbody":{path:"mail/controller/processbody_5_1032.js",requires:["common-utils","common-utils-stats"]},"mail-controller-reply-processor":{path:"compose_v3/controllers/ReplyProcessor_5_2100.js",requires:["mail-models-draft","comms-utils","mail-model-attachment","mail-controller-messages","mail-controller-text-processor","common-persist-user-data","mail-persist-meta-data","mail-models-serializers-draft-gdm-unserializer","mail-ui-common-fonts","_shared_module_compose_reply","mail-controller-signature-processor","mail-ui-mailcompose-header-form-list-helper"]},"mail-controller-sendconfirm":{path:"mail/controller/sendconfirm_5_2087.js",requires:["mail-controller-base","mail-model-send"
,"mail-model-datastore","contacts-api-utils","contacts-api","mail-controller-messages-ops","common-utils-stats"]},"mail-controller-signature-processor":{path:"compose_v3/controllers/SignatureProcessor_54_10489.js",requires:["mail-controller-text-processor","common-persist-user-data","common-utils"]},"mail-controller-spell-processor":{path:"compose_v3/controllers/SpellProcessor_54_10489.js",requires:["mail-model-spellcorrections","common-net-sessionmgr","common-persist-user-data","json-parse"]},"mail-controller-spellcheck":{path:"mail/controller/spellcheck_54_10489.js",requires:["mail-controller-base","mail-model-compose","common-net-sessionmgr","common-persist-user-data","json-parse"]},"mail-controller-text-processor":{path:"compose_v3/controllers/TextProcessor_54_10489.js",requires:["common-utils","node"]},"mail-controller-tictacs":{path:"mail/controller/tictacs_54_10489.js"},"mail-core-feature":{path:"mail/core/feature_54_10489.js",requires:["mail-common-utils-features"]},"mail-core-net-helpers-batch-request-helper":{path:"compose_v3/core/net/helpers/BatchRequestHelper_54_10489.js"},"mail-core-net-helpers-cascade-request-helper":{path:"compose_v3/core/net/helpers/CascadeRequestHelper_54_10489.js",requires:["common-utils"]},"mail-core-net-helpers-multipart-request-wrapper":{path:"compose_v3/core/net/helpers/MultipartRequestWrapper_54_10489.js"},"mail-core-net-helpers-v3-request-helper":{path:"compose_v3/core/net/helpers/V3RequestHelper_54_10587.js"},"mail-core-net-policies-compose-policy":{path:"compose_v3/core/net/policies/ComposePolicy_54_10489.js"},"mail-core-net-policies-conv-write-policy":{path:"compose_v3/core/net/policies/ConvWritePolicy_54_10489.js"},"mail-core-net-policies-list-filters-policy":{path:"compose_v3/core/net/policies/ListFiltersPolicy_54_10587.js"},"mail-core-net-policies-list-folders-policy":{path:"compose_v3/core/net/policies/ListFoldersPolicy_54_10489.js"},"mail-core-net-request":{path:"compose_v3/core/net/Request_5_2168.js",requires:["io","json","common-utils","common-net-error","common-net-session","common-user-session","mail-error-v3","mail-core-net-helpers-multipart-request-wrapper"]},"mail-core-net-transport":{path:"compose_v3/core/net/Transport_54_10489.js",requires:["mail-core-net-request","common-utils"]},"mail-debug":{path:"mail/debug/debug_54_10796.js",requires:["comms-log4js","comms-log4js-appenders-console","info-collector","common-net-diag","_shared_module_offscreen_bin_menus_debug"]},"mail-error":{path:"mail/controller/error_54_10645.js",requires:["common-net-error","mail-common-utils-features","mail-errormap","ymma-stats","json-stringify","escape","_shared_module_offscreen_bin_modal_launch_error_rollup","common-ui-notification-v2"]},"mail-error-v3":{path:"mail/controller/error_v3_54_10489.js",requires:["mail-error","common-ui-tabs-base","common-net-error","mail-errormap","ymma-stats","json-stringify","_shared_module_offscreen_bin_modal_launch_error_rollup"]},"mail-errormap":{path:"mail/controller/errormap_5_1533.js",requires:["common-utils","mail-common-utils-features","json-stringify","common-net-error","_shared_module_offscreen_bin_notification_tae_text","mail-common-utils-settings"]},"mail-model-attachment":{path:"compose_v3/models/Attachment_5_2079.js",requires:["common-utils","event-custom"]},"mail-model-compose":{path:"mail/model/composemodel_54_10489.js",requires:["base","common-persist-user-data"]},"mail-model-convstore":{path:"mail/model/convstore_5_1622.js",requires:["common-utils"]},"mail-model-datastore":{path:"mail/model/datastore_5_2214.js",requires:["common-utils","json-stringify","event-custom","mail-common-utils-features","mail-ui-folder-utils"]},"mail-model-send":{path:"mail/model/sendmodel_54_10489.js",requires:["base"]},"mail-model-spellcorrections":{path:"compose_v3/models/SpellCorrections_54_10489.js",requires:["event-custom","oop"]},"mail-models-attachment-preprocessor":{path:"compose_v3/models/serializers/AttachmentResponsePreProcessor_54_10489.js",requires:["mail-model-attachment"]},"mail-models-draft":{path:"compose_v3/models/Draft_5_1215.js",requires:["common-utils","event-custom","json","oop"]},"mail-models-serializers-draft-formdata-serializer":{path:"compose_v3/models/serializers/DraftFormData_54_10489.js"},"mail-models-serializers-draft-gdm-unserializer":{path:"compose_v3/models/serializers/DraftGdmUnserializer_5_1425.js",requires:["mail-model-attachment"]},"mail-models-serializers-draft-messageV3-unserializer":{path:"compose_v3/models/serializers/DraftMessageV3Unserializer_5_1425.js",requires:["common-utils"]},"mail-models-serializers-draft-payloadpart-serializer":{path:"compose_v3/models/serializers/DraftPayloadPartSerializer_54_10489.js",requires:["mail-models-draft"]},"mail-models-serializers-draft-ref-att-serializer":{path:"compose_v3/models/serializers/DraftRefAttSerializer_54_10489.js",requires:["mail-models-draft"]},"mail-models-validators-send":{path:"compose_v3/models/validators/SendValidator_54_10887.js",requires:["comms-utils","common-utils"]},"mail-net-ETP":{path:"mail/net/etp_54_10489.js"},"mail-net-diag":{path:"mail/net/diag_54_10489.js",requires:["common-net-diag","json-stringify","json-parse"]},"mail-net-queue":{path:"mail/net/queue_5_885.js",requires:["mail-net-transport"]},"mail-net-transport":{path:"mail/net/transport_5_885.js",requires:["ymma-stats","common-net-sessionmgr","json-stringify","common-persist-neo-data"]},"mail-persist-meta-data":{path:"mail/persist/metaData_54_10489.js",requires:["attribute","mail-net-transport","mail-common-utils-features"]},"mail-persist-user-preferences":{path:"mail/persist/userPreferences_54_10489.js",requires:["attribute","mail-net-transport","json"]},"mail-platform":{path:"mail/core/platform_54_10489.js",requires:["mail-core-feature"]},"mail-recent-searches":{path:"mail/ui/searchautocomplete/recent-searches_5_2185.js",requires:["common-utils","mail-persist-meta-data"]},"mail-recent-searches-federated-ac-adapter":{path:"mail/ui/searchautocomplete/recent-searches-federated-ac-adapter_54_10530.js"
,requires:["mail-recent-searches","ac-entity-search","ymma-stats"]},"mail-recent-searches-header":{path:"mail/ui/searchautocomplete/recent-searches-header_54_10489.js",requires:["array-extras","mail-recent-searches"]},"mail-rte-caret-plugin":{path:"compose_v3/rte/rte-caret-plugin_5_1914.js"},"mail-rte-inline-image-plugin":{path:"compose_v3/rte/rte-inline-image-plugin_5_1791.js",requires:["node","rte-file-utils","rte-inline-image","event-custom","comms-utils","mail-common-utils-features","mail-common-utils-settings","_shared_module_rte_well_content_inline_image_ctrl_overlay","_shared_module_rte_well_content_inline_image_markup","_shared_module_rte_well_content_inline_image_saved"]},"mail-service-uploader-form":{path:"mail/common/uploader_form_54_10489.js"},"mail-service-uploader-utils":{path:"mail/common/uploader-utils_54_10489.js",requires:["common-utils-stats","common-net-sessionmgr"]},"mail-service-uploader-v1":{path:"mail/common/uploader_54_10489.js",requires:["mail-controller-compose","mail-model-compose","common-utils","swfdetect","mail-service-uploader-utils"]},"mail-service-uploader-yui":{path:"mail/common/uploader_yui_54_10489.js",requires:["mail-service-uploader-v1","uploader-deprecated","event-base"]},"mail-services-attach-io":{path:"compose_v3/services/AttachmentIO_54_10489.js",requires:["io","json-parse","json-stringify"]},"mail-services-calservice":{path:"compose_v3/services/CalService_54_10489.js",requires:["common-net-sessionmgr","mail-core-net-transport","mail-controller-reply-processor","common-utils","mail-core-net-policies-compose-policy","_shared_module_compose_calendarReply","mail-core-net-helpers-batch-request-helper","mail-models-serializers-draft-ref-att-serializer","mail-model-attachment"]},"mail-services-compose":{path:"compose_v3/services/Compose_5_2087.js",requires:["common-utils","json","json-parse","mail-core-net-policies-compose-policy","mail-core-net-transport","mail-models-serializers-draft-formdata-serializer","mail-models-serializers-draft-payloadpart-serializer","mail-core-net-helpers-batch-request-helper","mail-core-net-helpers-cascade-request-helper","mail-controller-conv-adapter","mail-models-serializers-draft-gdm-unserializer","mail-models-attachment-preprocessor","mail-models-serializers-draft-messageV3-unserializer","mail-controller-messages-ops"]},"mail-services-message-service":{path:"mail/services/message-service_54_10489.js",requires:["mail-controller-messages"]},"mail-services-plugins":{path:"compose_v3/services/Plugins_54_10489.js",requires:["event-custom"]},"mail-services-v3":{path:"mail/services/v3_54_10489.js",requires:["io"]},"mail-track":{path:"common/utils/track_5_1739.js",requires:["common-utils"]},"mail-ui-accounts":{path:"mail/ui/accounts/accounts_54_10489.js",requires:["common-utils","common-persist-user-data"]},"mail-ui-actions-marker":{path:"mail/ui/actions/marker_54_10489.js",requires:["comms-aop-tracer"]},"mail-ui-ad-feedback-dialog":{path:"mail/ui/darla/adFeedbackDialog_54_10489.js",requires:["mail-persist-meta-data","common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_ad_feedback_rollup","modal_css"]},"mail-ui-ad-sponsored-feedback-dialog":{path:"mail/ui/moneyball/mbFeedback_54_10489.js",requires:["mail-persist-meta-data","common-utils","comms-ui-dialog-base","modal_css","_shared_module_offscreen_bin_modal_mbFeedback"]},"mail-ui-ad-toolbar":{path:"mail/ui/ads/toolbar_5_1137.js",requires:["common-ui-toolbar-base"]},"mail-ui-ad-upsell-dialog":{path:"mail/ui/darla/adUpsellDialog_54_10489.js",requires:["mail-persist-meta-data","common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_upsell_rollup","modal_css"]},"mail-ui-adfree-mail-dialog":{path:"mail/ui/darla/adFreeMailDialog_54_10489.js",requires:["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_adfree_rollup","_shared_module_offscreen_bin_modal_btn_remove_ads_bucket_rollup","_shared_module_offscreen_bin_modal_btn_manage_service_bucket_rollup","modal_css"]},"mail-ui-ads-live-nation":{path:"mail/ui/ads/live-nation_5_1788.js",requires:["common-utils","common-net-sessionmgr","json-parse","escape","_shared_module_ad_live_nation","mail-common-utils-features","common-ui-tabs-base","live-nation_css","live-nation-ult"]},"mail-ui-ads-mobilizer":{path:"mail/ui/ads/mobilizer_54_10489.js",requires:["input-mask","jsonp","common-utils","minty_module_ads_mobilizer","minty_module_ads_mobilizerpane","mail-persist-meta-data"]},"mail-ui-advanced-search":{path:"mail/ui/advancedsearch/advanced-search_54_10489.js",requires:["common-utils","mail-ui-advanced-search-widget"]},"mail-ui-advanced-search-ac-widget":{path:"mail/ui/advancedsearch/advanced-search-autocomplete-widget_5_1788.js",requires:["ac-widget"]},"mail-ui-advanced-search-widget":{path:"mail/ui/advancedsearch/advanced-search-widget_54_10489.js",requires:["ac-widget","common-utils","minty_module_search_advanced_search","datatype-date","mail-ui-advanced-search-ac-widget","node-event-simulate"]},"mail-ui-advancedSearchController":{path:"mail/ui/msearch/advancedSearch/advancedSearchController_5_1308.js",requires:["common-utils","mail-ui-advancedSearchView","plugin","ac-widget","filter-contacts","autocomplete_css","_shared_module_offscreen_bin_compose","comms-utils"]},"mail-ui-advancedSearchView":{path:"mail/ui/msearch/advancedSearch/advancedSearchView_5_2119.js",requires:["common-utils","_shared_module_search_empty_rollup","_shared_module_search_empty_smart_view_rollup","_shared_module_search_empty_tae_rollup","_shared_module_search_empty_contact_rollup","_shared_module_search_empty_with_adv_btn_rollup","attribute-base","event-base","mail-common-utils-features"]},"mail-ui-attachment-filetype":{path:"mail/ui/attachments/filetype_54_10489.js"},"mail-ui-authorview-v3":{path:"compose_v3/views/authorview-v3_5_1758.js",requires:["mail-controller-base","mail-controller-reply-processor","_shared_module_compose_title","mail-common-utils-features","mail-controller-compose-v3"]},"mail-ui-autocompose"
:{path:"mail/ui/mailcompose/message/autocomposeview_5_2191.js",requires:["common-utils","mail-common-autocompose-list","common-ui-menu-helper","_shared_module_offscreen_bin_menus_compose_genre","mail-ui-onboarding","comms-ui-tooltips-widget","comms-ui-tooltips-widget","minty_module_offscreen_bin_autocompose_callout","minty_module_offscreen_bin_autocompose_btntip","ymma-stats"]},"mail-ui-backbutton":{path:"mail/ui/workspace/backbutton_54_10529.js"},"mail-ui-basewidget":{path:"mail/ui/basewidget/basewidget_54_10489.js",requires:["common-ui-contentwidget"]},"mail-ui-boss":{path:"mail/ui/boss/boss_54_10595.js",requires:["event-hover","mail-common-utils-features","boss-ult"]},"mail-ui-boss-multitask":{path:"mail/ui/boss/multitask_54_10489.js",requires:["mail-ui-boss","minty_module_boss_preview_overlay","common-persist-cookie-data","escape","boss-multitask_css"]},"mail-ui-boss-screensaver":{path:"mail/ui/boss/screensaver_54_10489.js",requires:["mail-ui-boss","boss-extras_css"]},"mail-ui-boss-screensaver-console":{path:"mail/ui/boss/screensaver-console_54_10489.js",requires:["mail-ui-boss-themes","mail-ui-boss-screensaver"]},"mail-ui-boss-screensaver-halloween":{path:"mail/ui/boss/screensaver-halloween_54_10489.js",requires:["mail-ui-boss-screensaver-photos"]},"mail-ui-boss-screensaver-photos":{path:"mail/ui/boss/screensaver-photos_54_10489.js",requires:["overlay","mail-ui-boss-themes","mail-ui-boss-screensaver"]},"mail-ui-boss-themes":{path:"mail/ui/boss/themes_54_10489.js",requires:["overlay","common-persist-cookie-data","minty_module_boss_themes_strip","mail-ui-themes-cfg","boss-themes_css"]},"mail-ui-bulk-progress":{path:"mail/ui/msearch/utils/bulkProgress_54_10489.js",requires:["common-ui-dialog-helper","_shared_module_offscreen_bin_progress_bar","mail-ui-basewidget"]},"mail-ui-button-ctxt":{path:"mail/ui/buttonctxt/buttonctxt_5_1511.js",requires:["common-ui-toolbar-base","mail-common-utils-features"]},"mail-ui-captcha-controller":{path:"mail/ui/captcha/controller_54_10489.js",requires:["common-utils","captcha_css","comms-ui-dialog-base","common-ui-dialog-helper","mail-ui-captcha-view"]},"mail-ui-captcha-view":{path:"mail/ui/captcha/view_54_10489.js",requires:["captcha_css","_shared_module_send_confirm_captcha","_shared_module_send_confirm_captcha_blocked"]},"mail-ui-chrome-dss-ext":{path:"mail/ui/ads/chromedssext_54_10489.js",requires:["mail-persist-meta-data","common-utils","minty_module_ads_chrome_dss_ext"]},"mail-ui-common-fonts":{path:"mail/ui/common/fonts_54_10489.js",requires:["mail-persist-meta-data"]},"mail-ui-common-string-utils":{path:"mail/ui/common/stringUtils_5_1665.js",requires:["common-utils"]},"mail-ui-composetictacapi":{path:"compose_v3/views/ComposeTictacApi_5_1339.js",requires:["event-custom","common-ui-menu-helper","mail-services-plugins","mail-controller-reply-processor","mail-common-utils-features"]},"mail-ui-composeview-attach":{path:"mail/ui/composeview/compose-attach_54_10489.js",requires:["swfdetect","mail-service-uploader-utils"]},"mail-ui-composeview-compose-loader":{path:"mail/ui/composeview/compose-loader_5_2191.js",requires:["mail-platform","common-utils","common-utils-stats","mail-services-message-service","tictac-attach-main"]},"mail-ui-composeview-spellcheck-v3":{path:"compose_v3/views/compose-spellcheck-v3_54_10489.js",requires:["node","plugin","mail-controller-spell-processor","mail-models-draft","mail-model-spellcorrections","comms-ui-menu-base","common-ui-menu-helper","_shared_module_offscreen_bin_compose_menu_spell_langs"]},"mail-ui-contentmatch-controller":{path:"mail/ui/contentmatch/Controller_54_10489.js",requires:["mail-ui-searchads-cap","array-extras","mail-ui-contentmatch-model","mail-ui-contentmatch-text-ads-view"]},"mail-ui-contentmatch-d2s":{path:"mail/ui/contentmatch/d2s/d2s_54_10489.js",requires:["mail-ui-messagekeywords"]},"mail-ui-contentmatch-model":{path:"mail/ui/contentmatch/Model_54_10489.js",requires:["io","datatype-xml","mail-services-v3"]},"mail-ui-contentmatch-text-ads-view":{path:"mail/ui/contentmatch/textAdsView_54_10489.js",requires:["common-utils","minty_module_shell_ad_searchads"]},"mail-ui-conv-maillist-model":{path:"mail/ui/maillist/conv/conv-maillistmodel_54_10489.js",requires:["common-ui-conv-listview"]},"mail-ui-conv-maillist-view":{path:"mail/ui/maillist/conv/conv-maillistview_5_1752.js",requires:["common-ui-conv-listview","common-utils"]},"mail-ui-conv-optout":{path:"mail/ui/optout/conv-optout_54_10489.js",requires:["common-utils","mail-common-utils-features","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_conv_optout","conv-optout_css","mail-common-tracker","conv-optout-ult"]},"mail-ui-convevents":{path:"mail/ui/mailview/conv/convevents_5_2185.js",requires:["mail-controller-conversations","contacts-api-utils","mail-controller-conversations-ops","mail-model-convstore","mail-ui-mailevents","mail-common-utils-features","mail-ui-folder-utils"]},"mail-ui-convlist-base":{path:"mail/ui/maillist/conv/convlist_5_2209.js",requires:["mail-ui-maillist","mail-ui-conv-maillist-model","mail-ui-conv-maillist-view","mail-controller-conversations","mail-common-utils-features","mail-ui-listview-controls","common-utils"]},"mail-ui-convpane-base":{path:"mail/ui/mailpane/conv/convpane_5_2209.js",requires:["_shared_module_thread_thread_pane","common-utils","mail-model-datastore","mail-controller-messages","mail-controller-conversations","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils","mail-model-convstore"]},"mail-ui-convpane-bind":{path:"mail/ui/mailpane/conv/bind_54_10489.js"},"mail-ui-convpane-error":{path:"mail/ui/mailpane/conv/error_5_1788.js",requires:["common-utils","_shared_module_thread_thread_display_rollup","mail-ui-pane-utils"]},"mail-ui-convpane-next-prev":{path:"mail/ui/mailpane/conv/convnextprevious_5_1763.js",requires:["mail-ui-common-string-utils","mail-ui-convpane-base","mail-ui-mailpane-next-prev","mail-model-convstore","mail-controller-conversations","common-utils"
,"common-utils-stats"]},"mail-ui-convpane-read":{path:"mail/ui/mailpane/conv/convpaneread_5_2191.js",requires:["_shared_module_thread_thread_display_rollup","common-persist-user-data","common-ui-tabs-base","common-utils-stats","contacts-api","contacts-api-utils","mail-persist-meta-data","mail-platform","mail-ui-common-fonts","mail-ui-convpane-base","mail-ui-convpane-bind","mail-ui-mailpane-read","mail-ui-messagepane-utils","mail-ui-messagepane-warnings","mod-conversation-history_css","mail-common-utils-features","mail-common-utils-settings","mail-ui-pane-utils","common-utils"]},"mail-ui-convs-confirm-dialog":{path:"mail/ui/maillist/tutorial/convsConfirmDialog_54_10489.js",requires:["mail-persist-meta-data","common-utils","comms-ui-dialog-base","minty_module_conversations_modal_convs_confirm_rollup","modal_css"]},"mail-ui-convview-base":{path:"mail/ui/mailview/conv/convview_5_2114.js",requires:["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-convlist-base","mail-ui-convpane-base","minty_module_toolbar_inbox_default_thread_rollup","dom-screen","mail-ui-common-string-utils","mail-common-utils-features","common-utils"]},"mail-ui-darla":{path:"mail/ui/darla/neodarla_5_2130.js",requires:["node-base","darla-base","common-utils","common-persist-cookie-data","mail-common-utils-features","mail-common-utils-settings","mail-track","minty_module_ads_spritz_leave_behind"]},"mail-ui-desktop-notifications":{path:"mail/ui/desktopnotifications/desktopnotifications_54_10645.js",requires:["node","common-ui-notification-v2","mail-persist-meta-data"]},"mail-ui-dmsearch-controller":{path:"mail/ui/dmsearch/dmsearchController_5_2185.js",requires:["event-base","mail-ui-dmsearch-view","mail-ui-sponsoredsearch-model","mail-ui-dmsearch-model","mail-common-utils-features"]},"mail-ui-dmsearch-model":{path:"mail/ui/dmsearch/dmsearchModel_5_2185.js",requires:["common-net-sessionmgr","mail-common-utils-settings"]},"mail-ui-dmsearch-view":{path:"mail/ui/dmsearch/dmsearchView_5_1057.js",requires:["node-base","node-event-delegate","attribute-base","event-base","minty_module_list_view_ad_search","minty_module_list_view_ad_skysearch","minty_module_list_view_ad_mas_search","minty_module_shell_ad_searchads","minty_module_list_view_ad_buckets_serp","minty_module_list_view_ad_buckets_serp_ratings","mail-common-utils-features"]},"mail-ui-emptyFolderController":{path:"mail/ui/msearch/emptyFolder/emptyFolderController_54_10489.js",requires:["mail-ui-emptyFolderView"]},"mail-ui-emptyFolderView":{path:"mail/ui/msearch/emptyFolder/emptyFolderView_54_10489.js",requires:["common-utils","_shared_module_folder_empty_rollup","attribute-base","event-base"]},"mail-ui-execute-search-utils":{path:"mail/ui/msearch/utils/executeSearchUtils_5_2185.js",requires:["xobni-contacts-search"]},"mail-ui-factory-base":{path:"mail/ui/factory/factory_54_10489.js"},"mail-ui-fb-token-refresh":{path:"mail/ui/fbtoken/refresh_5_1788.js",requires:["cookie","node","event","jsonp","ymma-stats","mail-common-utils-settings"]},"mail-ui-flow-recorder":{path:"mail/debug/flow-recorder_5_1913.js",requires:["mail-ui-recorder","common-utils-rapid","mail-common-utils-features","mail-common-utils-settings"]},"mail-ui-folder-menu":{path:"mail/ui/foldersview/folder-menu_5_2106.js",requires:["_shared_module_offscreen_bin_menus_folder_menu","common-utils","mail-ui-folder-utils","folder-menu_css","node-event-simulate","mail-controller-folders","folder-menu-ult"]},"mail-ui-folder-utils":{path:"mail/ui/foldersview/folder-utils_5_2164.js",requires:["common-utils","mail-common-utils-features"]},"mail-ui-folderevents":{path:"mail/ui/foldersview/folderevents_5_2187.js",requires:["common-utils","mail-controller-folders","common-ui-dialog-helper","comms-bidi-textentry","mail-common-utils-features","mail-model-datastore"]},"mail-ui-folders-onboarding":{path:"mail/ui/onboarding/folder-management-onboarding_5_2210.js",requires:["common-utils","mail-ui-onboarding","mail-persist-meta-data","minty_module_offscreen_bin_folders_callout","minty_module_offscreen_bin_folders_callout_two","folders-onboarding_css"]},"mail-ui-foldersview-base":{path:"mail/ui/foldersview/foldersview_5_2216.js",requires:["yui-throttle","common-utils","mail-controller-folders","attribute","node","mail-persist-meta-data","common-persist-user-data","mail-ui-accounts","common-ui-tabs-base","mail-common-utils-features","node-event-simulate","node-focusmanager","mail-model-datastore","mail-ui-folder-utils"]},"mail-ui-foldersview-bind":{path:"mail/ui/foldersview/bind_5_2209.js",requires:["mail-controller-folders","mail-persist-meta-data"]},"mail-ui-format-popout":{path:"compose_v3/rte/rte-format-popout_5_2058.js",requires:["mail-persist-meta-data"]},"mail-ui-fullcompose-v3":{path:"compose_v3/views/composeview-v3_5_2209.js",requires:["mail-ui-mailcompose-v3","mail-ui-messagepane-utils","attachments-fresh_css","mail-ui-tray","escape","mail-ui-composeview-attach","editor-base","mail-common-utils-features","editor-para","editor-br","node","stylesheet","mail-controller-reply-processor","mail-controller-signature-processor","mail-controller-html-processor","common-persist-user-data","mail-models-draft","contacts-api-utils","contacts-api","filter-contacts","plugin","comms-bidi-textentry","comms-editor-autobidi","comms-intl-bidi","editor-bidi","_shared_module_compose_fresh_conv","_shared_module_toolbar_compose_fresh","_shared_module_compose_loading","_shared_module_offscreen_bin_compose","_shared_module_offscreen_bin_compose_menu_spellcheck","_shared_module_offscreen_bin_compose_modal_cancel_compose","_shared_module_rte_well_content_format_fresh","_shared_module_rte_well_content_format_pop_out","_shared_module_rte_well_content_emoticons_fresh","_shared_module_rte_well_content_fontnamesize_fresh","_shared_module_rte_well_content_attachments_fresh","_shared_module_rte_well_tabs_compose_fresh","_shared_module_offscreen_bin_notification_notifications","_shared_module_compose_dropzone","common-ui-toolbar-base"
,"common-ui-menu-helper","_shared_module_offscreen_bin_compose_menu_list","_shared_module_offscreen_bin_compose_menu_text_align","_shared_module_offscreen_bin_compose_menu_indent","mail-views-send-validation-error-handlers","mail-ui-composetictacapi","rte-file-utils","mail-ui-mailview-base"]},"mail-ui-games-widget":{path:"mail/ui/games/widget_5_2147.js",requires:["jsonp","node","array-extras","common-utils","minty_module_games_widget","minty_module_games_single_game","mail-ui-games-widget","games-widget_css"]},"mail-ui-greylist":{path:"mail/ui/greylist/greylist_5_982.js",requires:["ymma-stats"]},"mail-ui-header":{path:"mail/ui/header/header_5_2214.js",requires:["node","mail-ui-header-base","mail-ui-header-utils","common-utils","common-persist-user-data"]},"mail-ui-header-base":{path:"mail/ui/header/header_base_54_10489.js"},"mail-ui-header-roughseas":{path:"mail/ui/header/header-roughseas_54_10489.js",requires:["common-utils"]},"mail-ui-header-utils":{path:"mail/ui/header/headerUtils_5_2214.js",requires:["common-utils","common-persist-user-data","mail-common-utils-settings"]},"mail-ui-imap-in":{path:"mail/ui/imap-in/imap-in_5_2092.js",requires:["common-utils","mail-controller-imapin"]},"mail-ui-inboxmenu-base":{path:"mail/ui/inboxmenu/inboxmenu_5_2114.js",requires:["common-utils","mail-ui-folder-utils","mail-ui-foldersview-base","mail-common-utils-features"]},"mail-ui-inhelp":{path:"mail/ui/inhelp/in-product-help_5_2214.js"},"mail-ui-list-item-editor":{path:"mail/ui/actions/list-item-editor_5_2209.js",requires:["common-utils","comms-bidi-textentry","mail-common-utils-features","mail-ui-folder-utils","_shared_module_offscreen_bin_renamer","_shared_module_offscreen_bin_searcher","_shared_module_offscreen_bin_tooltip_validation","list-item-editor_css","escape","overlay"]},"mail-ui-list-mgr":{path:"mail/ui/msearch/model/listmgr_54_10586.js",requires:["mail-common-utils-features","mail-persist-meta-data"]},"mail-ui-listview-controls":{path:"mail/ui/maillist/base/listview-controls_5_1137.js"},"mail-ui-log":{path:"mail/debug/maillog_54_10489.js",requires:["ymma-stats","comms-log4js","common-utils"]},"mail-ui-log-events":{path:"mail/debug/maillog-events_54_10489.js",requires:["mail-ui-log"]},"mail-ui-mail-helper":{path:"mail/ui/mailhelper_5_2087.js",requires:["common-utils"]},"mail-ui-mailSearchController":{path:"mail/ui/msearch/mailSearchController_5_2185.js",requires:["json","mail-ui-basewidget","common-utils","mail-ui-searchutils","mail-ui-search-model","mail-ui-list-mgr","mail-recent-searches","mail-ui-dmsearch-controller","mail-common-utils-features","mail-services-v3","search-ult"]},"mail-ui-mailcompose-base-header-v3":{path:"compose_v3/views/ComposeHeader-v3_5_2156.js",requires:["comms-ui-lozenge","ac-widget","_shared_module_offscreen_bin_compose","mail-controller-reply-processor","_shared_module_offscreen_bin_notification_notifications","mail-controller-compose-text","contacts-api","_shared_module_compose_message_header_fresh","mail-models-validators-send","mail-ui-basewidget","mail-common-utils-features","mail-ui-mailcompose-header-form-list-helper","mail-model-datastore","mail-common-utils-settings","mail-ui-pane-utils"]},"mail-ui-mailcompose-header-form-list-helper":{path:"compose_v3/controllers/FromListHelper_5_2142.js",requires:["comms-utils","common-persist-user-data","mail-persist-meta-data"]},"mail-ui-mailcompose-v3":{path:"compose_v3/views/mailcompose-v3_5_1922.js",requires:["autocomplete_css","common-persist-user-data","mail-persist-meta-data","mail-controller-messages","mail-model-datastore","mail-controller-reply-processor","_shared_module_compose_message_header_fresh","mail-ui-mailcompose-base-header-v3","comms-utils","mail-ui-basewidget","editor-inline","mail-services-message-service","mail-error-v3","mail-common-utils-features"]},"mail-ui-mailevents":{path:"mail/ui/mailview/base/mailevents_5_2185.js",requires:["mail-controller-messages","mail-controller-messages-ops","common-utils","common-ui-tabs-base","mail-model-datastore","comms-utils","_shared_module_offscreen_bin_notification_notifications","common-ui-notification","querystring-parse","mail-common-utils-features","mail-ui-unsubscribe"]},"mail-ui-maillist":{path:"mail/ui/maillist/base/maillist_5_1428.js",requires:["common-ui-contentwidget","mail-controller-folders","common-persist-user-data","mail-ui-common-string-utils","mail-ui-accounts","mail-model-datastore","io","event-valuechange","mail-common-utils-features"]},"mail-ui-maillist-listview":{path:"mail/ui/maillist/base/maillist-listview_54_10489.js",requires:["plugin","mail-ui-messagelist-base"]},"mail-ui-maillist-model":{path:"mail/ui/maillist/base/maillistmodel_54_10489.js",requires:["common-ui-listview"]},"mail-ui-maillist-view":{path:"mail/ui/maillist/base/maillistview_5_1752.js",requires:["common-ui-listview","common-utils"]},"mail-ui-mailmarkup-base":{path:"mail/ui/mailview/base/markup_54_10489.js",requires:["node"]},"mail-ui-mailpane-base":{path:"mail/ui/mailpane/base/mailpane_5_2089.js",requires:["common-utils","mail-model-datastore","mail-controller-messages","mail-ui-basewidget","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]},"mail-ui-mailpane-next-prev":{path:"mail/ui/mailpane/base/mailnextprevious_54_10489.js",requires:["mail-ui-common-string-utils","common-utils","common-utils-stats"]},"mail-ui-mailpane-read":{path:"mail/ui/mailpane/base/mailread_5_2185.js",requires:["mail-ui-common-string-utils","common-utils","common-utils-stats","mail-controller-base"]},"mail-ui-mailuibind-base":{path:"mail/ui/mailview/base/uibind_54_10489.js",requires:["node"]},"mail-ui-mailview-base":{path:"mail/ui/mailview/base/mailview_5_2130.js",requires:["mail-ui-basewidget","common-persist-user-data","mail-ui-messagepane-utils","mail-model-datastore","common-utils","mail-common-utils-features","mail-ui-pane-utils"]},"mail-ui-maintenancenotification":{path:"mail/ui/maintenancenotification/maintenancenotification_5_2093.js",requires:["common-ui-notification"
]},"mail-ui-mb-controller":{path:"mail/ui/moneyball/mbController_54_10489.js",requires:["mail-ui-mb-list-view","mail-ui-mb-search-list-view","mail-ui-mb-list-img-view","mail-common-utils-features","mail-ui-mb-list-native-view"]},"mail-ui-mb-feedback-view":{path:"mail/ui/moneyball/mbFeedbackView_5_2214.js",requires:["node","mail-ui-mb-view","common-utils","mail-common-utils-settings"]},"mail-ui-mb-list-img-view":{path:"mail/ui/moneyball/mbListImgView_5_2214.js",requires:["mail-ui-mb-list-view","mail-common-utils-features","minty_module_list_view_ad_buckets_mb_list_img"]},"mail-ui-mb-list-native-view":{path:"mail/ui/moneyball/mbListNativeView_5_2214.js",requires:["mail-ui-mb-list-view","minty_module_list_view_ad_mb_native","minty_module_ads_native_ad_forward","minty_module_list_view_ad_buckets_mb_right_rail_save_ad","minty_module_offscreen_bin_native_ad_callout","minty_module_offscreen_bin_native_ad_star","mail-ui-onboarding","mail-common-utils-features","_shared_module_offscreen_bin_notification_native_ad_star","mail-ui-mail-helper","common-ui-tabs-base","mail-ui-nativeads-read"]},"mail-ui-mb-list-view":{path:"mail/ui/moneyball/mbListView_5_2113.js",requires:["mail-ui-mb-view","minty_module_list_view_ad_mb","minty_module_list_view_ad_mb_native","minty_module_list_view_ad_mb_native_img","minty_module_list_view_ad_mb_native_vert_prev","mail-common-utils-features"]},"mail-ui-mb-model":{path:"mail/ui/moneyball/mbModel_5_2214.js",requires:["common-net-sessionmgr","common-utils","event-base","mail-common-utils-features"]},"mail-ui-mb-msg-read-view":{path:"mail/ui/moneyball/mbMsgReadView_54_10489.js",requires:["mail-ui-mb-view","minty_module_moneyball_msg_read_img"]},"mail-ui-mb-rec-view":{path:"mail/ui/moneyball/mbRecView_54_10489.js",requires:["event-resize","mail-ui-mb-view","minty_module_list_view_ad_mbrec"]},"mail-ui-mb-right-rail-carousel-view":{path:"mail/ui/moneyball/mbRightRailCarouselView_54_10489.js",requires:["array-extras","common-utils","mail-ui-mb-right-rail-view","minty_module_moneyball_right_rail","minty_module_moneyball_right_rail_carousel","minty_module_list_view_ad_buckets_mb_right_rail_save_ad"]},"mail-ui-mb-right-rail-view":{path:"mail/ui/moneyball/mbRightRailView_54_10489.js",requires:["array-extras","common-utils","event-resize","mail-ui-mb-view","minty_module_moneyball_right_rail"]},"mail-ui-mb-search-list-view":{path:"mail/ui/moneyball/mbSearchListView_54_10489.js",requires:["mail-ui-mb-view","minty_module_list_view_ad_mb"]},"mail-ui-mb-view":{path:"mail/ui/moneyball/mbView_5_2214.js",requires:["node","mail-ui-mb-model","common-utils","node-event-delegate"]},"mail-ui-message-encodings":{path:"mail/ui/messagesview/message-encodings_54_10489.js",requires:["common-utils"]},"mail-ui-message-timedalertdialog":{path:"mail/ui/messagesview/message-timedalertdialogs_54_10489.js",requires:["mail-modules","mail-templates","common-utils","common-ui-dialog-helper"]},"mail-ui-messageaction":{path:"mail/ui/msearch/model/messageactions_54_10489.js",requires:["mail-controller-messages","mail-controller-messages-ops","common-utils","mail-model-datastore","ymma-stats","common-ui-tabs-base"]},"mail-ui-messagecategories":{path:"mail/ui/messagecategories/messagecategories_54_10489.js",requires:["array-extras","mail-ui-messagecategories-vespa"]},"mail-ui-messagecategories-vespa":{path:"mail/ui/messagecategories/vespa_54_10489.js",requires:["array-extras","json-parse","common-net-sessionmgr"]},"mail-ui-messageevents":{path:"mail/ui/mailview/message/messageevents_5_2185.js",requires:["mail-controller-messages","mail-controller-messages-ops","mail-model-datastore","mail-ui-mailevents","mail-common-utils-features","mail-ui-folder-utils"]},"mail-ui-messagekeywords":{path:"mail/ui/messagekeywords/messagekeywords_54_10489.js",requires:["mail-ui-searchads-cap","array-extras"]},"mail-ui-messagelist-base":{path:"mail/ui/maillist/message/messagelist_5_2088.js",requires:["mail-ui-maillist","mail-ui-maillist-model","mail-ui-maillist-view","mail-controller-messages","mail-common-utils-features","mail-ui-listview-controls","mail-ui-maillist-listview","mail-ui-pane-utils"]},"mail-ui-messagelistdomains":{path:"mail/ui/messagelistdomains/messagelistdomains_54_10489.js",requires:["mail-ui-messagepane-utils"]},"mail-ui-messagepane-base":{path:"mail/ui/mailpane/message/messagepane_5_1250.js",requires:["common-utils","mail-model-datastore","mail-controller-messages","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]},"mail-ui-messagepane-bind":{path:"mail/ui/mailpane/message/bind_5_960.js"},"mail-ui-messagepane-error":{path:"mail/ui/mailpane/message/error_5_1788.js",requires:["common-utils","_shared_module_message_display_fresh_rollup"]},"mail-ui-messagepane-next-prev":{path:"mail/ui/mailpane/message/nextprevious_5_1763.js",requires:["mail-ui-common-string-utils","mail-ui-messagepane-base","mail-ui-mailpane-next-prev","mail-model-datastore","mail-controller-messages","common-utils","common-utils-stats"]},"mail-ui-messagepane-read":{path:"mail/ui/mailpane/message/messagepaneread_5_2147.js",requires:["common-persist-user-data","mail-persist-meta-data","mail-ui-messagepane-warnings","mail-ui-mailpane-read","mail-ui-pane-utils","contacts-api","contacts-api-utils","common-utils-stats","mail-ui-messagepane-utils","mod-conversation-history_css","mail-ui-attachment-filetype","mail-ui-common-fonts","common-ui-tabs-base","mail-common-utils-settings","ymma-stats"]},"mail-ui-messagepane-utils":{path:"mail/ui/messagepane/utils_5_1665.js",requires:["common-utils-stats","mail-ui-messagepane-utils-shared"]},"mail-ui-messagepane-utils-shared":{path:"mail/ui/messagepane/shared_54_10489.js"},"mail-ui-messagepane-warnings":{path:"mail/ui/messagepane/warnings_5_2185.js",requires:["common-utils"]},"mail-ui-messagesview-base":{path:"mail/ui/mailview/message/messagesview_5_2114.js",requires:["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-messagelist-base"
,"mail-ui-messagepane-base","dom-screen","mail-ui-common-string-utils","mail-common-utils-features","_shared_module_message_pane_fresh","common-utils"]},"mail-ui-messagesview-dd":{path:"mail/ui/messagesview/messagesview-dd_54_10586.js",requires:["mail-model-datastore","common-utils","node-base","common-ui-dd","_shared_module_offscreen_bin_drag_drop"]},"mail-ui-messagesview-quickfilter":{path:"mail/ui/messagesview/quickfilter_5_2145.js",requires:["common-utils","common-persist-user-data","mail-controller-folders","_shared_module_offscreen_bin_modal_quick_filters","common-ui-dialog-helper","mail-controller-messages-ops","mail-ui-common-string-utils","common-net-session","mail-model-datastore","mail-common-utils-features"]},"mail-ui-messagesview-resize":{path:"mail/ui/messagesview/messagesview-resize_54_10489.js",requires:["common-persist-cookie-data","stylesheet","node","common-ui-dd","common-persist-user-data","mail-common-utils-features"]},"mail-ui-messagesview-search":{path:"mail/ui/msearch/messagesviewSearch_5_1551.js",requires:["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-messagepane-base","dom-screen","mail-ui-common-string-utils","common-utils"]},"mail-ui-messagesview-vertical":{path:"mail/ui/messagesview/vertical_5_1245.js",requires:["mail-ui-messagesview-resize"]},"mail-ui-messenger":{path:"mail/ui/messenger/messenger_54_10489.js",requires:["common-utils","swfdetect"]},"mail-ui-nativeads-read":{path:"mail/ui/ads/nativeAdsRead_5_1673.js",requires:["mail-ui-basewidget","_shared_module_ads_display","common-ui-toolbar-base","mail-ui-ad-toolbar","minty_module_toolbar_fragments_native_ad_group_rollup"]},"mail-ui-navkeys":{path:"mail/ui/navkeys/navkeys_5_2103.js",requires:["mail-controller-folders","event-custom-complex","mail-common-utils-features"]},"mail-ui-newsfeed-controller":{path:"mail/ui/newsfeed/newsFeedController_54_10552.js",requires:["mail-ui-newsfeed-view","io"]},"mail-ui-newsfeed-model":{path:"mail/ui/newsfeed/newsFeedModel_5_2029.js",requires:["common-net-sessionmgr","common-utils","event-base","mail-ui-newsfeed-slingstone"]},"mail-ui-newsfeed-slingstone":{path:"mail/ui/newsfeed/slingstone_5_1379.js",requires:["array-extras","json-parse","common-net-sessionmgr","common-utils"]},"mail-ui-newsfeed-view":{path:"mail/ui/newsfeed/newsFeedView_5_2191.js",requires:["mail-ui-newsfeed-model","common-utils","mail-ui-mb-model","minty_module_newsfeed_listview","minty_module_newsfeed_filterbar","minty_module_moneyball_newsfeed_mb","minty_module_newsfeed_storyview","mail-ui-basewidget","mail-ui-trending-controller","datatype-date","minty_module_list_view_ad_buckets_newsfeed_save_ad","newsfeed-ult","mail-common-utils-features","mail-ui-mail-helper","mail-common-utils-settings"]},"mail-ui-onboarding":{path:"mail/ui/onboarding/onboarding_5_2204.js",requires:["common-utils","json-parse","node-event-simulate","onboarding_css"]},"mail-ui-onboarding-compose-assist":{path:"mail/ui/onboarding/composeAssist_5_1554.js",requires:["common-utils","mail-ui-onboarding","minty_module_offscreen_bin_compose_assist_callout","mail-ui-workspace-ext","compose-assist-onboarding_css"]},"mail-ui-onboarding-holiday-themes":{path:"mail/ui/onboarding/holiday-themes_54_10489.js",requires:["common-utils","mail-ui-onboarding","minty_module_offscreen_bin_holiday_themes_callout"]},"mail-ui-onboarding-nav":{path:"mail/ui/onboarding/nav_54_10489.js",requires:["common-utils","mail-ui-onboarding","minty_module_offscreen_bin_nav_callout","mail-ui-workspace-ext","nav-onboarding_css"]},"mail-ui-pane-utils":{path:"mail/ui/mailpane/base/paneutils_5_2147.js",requires:["mail-controller-messages","common-utils","mail-persist-meta-data"]},"mail-ui-pane-utils-s2s":{path:"mail/ui/mailpane/base/s2s_54_10544.js",requires:["overlay","common-utils","common-utils-stats","mail-ui-pane-utils","_shared_module_offscreen_bin_s2s","mail-common-utils-features","s2s-ult"]},"mail-ui-player":{path:"mail/debug/player_54_10605.js",requires:["mail-ui-recorder","minty_module_ui_player_controls","minty_module_ui_player_click_record","ui-player_css","common-utils","common-utils-rapid","common-utils-rapid-doc"]},"mail-ui-print":{path:"mail/ui/print/print_54_10489.js",requires:["mail-controller-messages","_shared_module_offscreen_bin_print_print_rollup"]},"mail-ui-proxyevents":{path:"mail/ui/mailview/conv/proxyevents_54_10489.js",requires:["mail-ui-mailevents","mail-ui-messageevents","mail-ui-convevents"]},"mail-ui-recorder":{path:"mail/debug/recorder_5_2116.js",requires:["ymma-stats","common-utils","mail-common-utils-features"]},"mail-ui-richcompose-view":{path:"compose_v3/views/richcompose_view_5_2191.js",requires:["mail-persist-meta-data","composeassist-ult"]},"mail-ui-rr-backfill-controller":{path:"mail/ui/ads/rr-backfill-controller_5_1080.js",requires:["mail-ui-darla","mail-ui-shopping-rr-controller"]},"mail-ui-rte-formatter-v3":{path:"compose_v3/rte/rte-formatter-v3_5_1710.js",requires:["mail-ui-format-popout","_shared_module_rte_well_content_format_pop_out","mail-common-utils-features"]},"mail-ui-rte-linkeditor-v3":{path:"compose_v3/rte/rte-linkeditor-v3_54_10489.js",requires:["plugin","common-ui-dialog-helper","_shared_module_compose_link_editor","escape"]},"mail-ui-rte-smartscroll":{path:"mail/ui/mailcompose/rte/rte-smartscroll_5_1917.js",requires:["editor-base","mail-common-utils-features"]},"mail-ui-rteview-v3":{path:"compose_v3/rte/rteview-v3_54_10489.js",requires:["attribute-base","event-base","node-base","node-event-delegate","common-utils","mail-ui-basewidget","mail-ui-rte-linkeditor-v3","mail-ui-rte-smartscroll","mail-ui-mailview-base","mail-ui-ym-rte"]},"mail-ui-search-model":{path:"mail/ui/msearch/model/msws_5_2182.js",requires:["mail-ui-searchutils","json","mail-ui-common-string-utils","datatype-date"]},"mail-ui-searchGroupsController":{path:"mail/ui/msearch/searchGroups/searchGroupsController_54_10529.js",requires:["common-utils","mail-ui-searchGroupsView","ymma-stats"]},"mail-ui-searchGroupsView":{path
:"mail/ui/msearch/searchGroups/searchGroupsView_54_10489.js",requires:["common-utils","_shared_module_shell_navigation_search_rollup","mail-ui-common-string-utils","ymma-stats"]},"mail-ui-searchListController":{path:"mail/ui/msearch/searchList/searchListController_5_2185.js",requires:["common-utils","mail-ui-searchListView","mail-ui-listview-controls"]},"mail-ui-searchListView":{path:"mail/ui/msearch/searchList/searchListView_5_1554.js",requires:["stylesheet","datatype-date","mail-controller-folders","mail-controller-messages","mail-ui-common-string-utils","mail-ui-attachment-filetype","mail-ui-searchutils","_shared_module_search_didyoumean_rollup","ac-entity-search","isXobnifiedCheck","mail-common-utils-features","xobni-contacts-search","common-ui-anchored-header","mail-persist-meta-data","common-ui-timechunk"]},"mail-ui-searchads-cap":{path:"mail/ui/searchads/cap_54_10489.js",requires:["json-parse","mail-services-v3"]},"mail-ui-searchbar":{path:"mail/ui/msearch/searchbar_5_2185.js",requires:["common-utils","node-pluginhost","ac-entity-search"]},"mail-ui-searchdesc":{path:"mail/ui/msearch/searchdesc_54_10489.js"},"mail-ui-searchmyworld":{path:"mail/ui/predictivesearch/searchmyworld_5_2165.js",requires:["json-parse","mail-services-v3","predictive-search_css","mail-common-utils-features"]},"mail-ui-searchmyworld-srp":{path:"mail/ui/predictivesearch/searchmyworld-srp_5_812.js",requires:["mail-ui-searchmyworld"]},"mail-ui-searchutils":{path:"mail/ui/msearch/utils/searchUtils_54_10489.js",requires:["common-utils","common-persist-user-data"]},"mail-ui-sendconfirmview-base-conv":{path:"mail/ui/sendconfirm/sendconfirm-base-conv_5_2191.js",requires:["_shared_module_offscreen_bin_notification_notifications","_shared_module_send_confirm_captcha_blocked","_shared_module_send_confirm_rollup","common-ui-notification","common-utils","comms-lozenge-address","comms-ui-lozenge","mail-controller-sendconfirm","mail-platform","mail-ui-searchbar","minty_module_toolbar_inbox_sent_msg_rollup","mail-common-utils-features"]},"mail-ui-shopping-controller":{path:"mail/ui/shoppingads/shoppingAdsController_5_2123.js",requires:["io","common-utils","mail-ui-shopping-list-view","mail-ui-shopping-rr-view"]},"mail-ui-shopping-list-view":{path:"mail/ui/shoppingads/shoppingListView_5_2123.js",requires:["io","common-utils","mail-ui-shopping-view","mail-ui-shopping-model","shopping-ads-ult","minty_module_shoppingads_list_img_ad","comms-utils","mail-ui-shopping-utils"]},"mail-ui-shopping-model":{path:"mail/ui/shoppingads/shoppingAdsModel_5_1025.js",requires:["mail-ui-shopping-utils","common-utils","event-base"]},"mail-ui-shopping-rr-controller":{path:"mail/ui/shoppingads/shoppingRRController_5_1025.js",requires:["io","mail-ui-shopping-model","mail-ui-shopping-view","mail-ui-shopping-rr-view"]},"mail-ui-shopping-rr-view":{path:"mail/ui/shoppingads/shoppingRRView_5_1025.js",requires:["io","common-utils","mail-ui-shopping-view","mail-ui-shopping-model","shopping-ads-ult","minty_module_shoppingads_rr_img_three_items","comms-utils","mail-ui-shopping-utils"]},"mail-ui-shopping-utils":{path:"mail/ui/shoppingads/shoppingAdsUtils_5_1025.js"},"mail-ui-shopping-view":{path:"mail/ui/shoppingads/shoppingView_5_2123.js",requires:["io","common-utils","mail-ui-shopping-model","shopping-ads-ult","comms-utils","mail-ui-shopping-utils"]},"mail-ui-shortcuts":{path:"mail/ui/shortcuts/shortcuts_5_2191.js",requires:["common-utils","mail-ui-messagepane-utils"]},"mail-ui-shortcuts-dialog":{path:"mail/ui/shortcuts/shortcutsdialog_5_1889.js",requires:["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_shortcuts_rollup","modal_css","mail-common-utils-features"]},"mail-ui-sidekick-controller":{path:"mail/ui/sidekick/sidekickController_5_1339.js",requires:["event-base","mail-ui-sidekick-model","mail-ui-sidekick-view"]},"mail-ui-sidekick-model":{path:"mail/ui/sidekick/sidekickModel_5_1339.js",requires:["event-base","common-net-sessionmgr","json-parse","common-utils"]},"mail-ui-sidekick-view":{path:"mail/ui/sidekick/sidekickView_5_1376.js",requires:["event-base","common-utils"]},"mail-ui-snowflakes":{path:"mail/ui/boss/snowflakes_5_1651.js",requires:["mail-common-utils-features","mail-common-utils-settings","mail-persist-meta-data","snow-ult"]},"mail-ui-sponsored-themes-countdown-model":{path:"mail/ui/sponsored-themes/countdown/model_54_10489.js"},"mail-ui-sponsored-themes-countdown-view":{path:"mail/ui/sponsored-themes/countdown/view_54_10489.js",requires:["minty_module_sponsored_themes_olympics_countdown","common-utils"]},"mail-ui-sponsored-themes-games-widget-model":{path:"mail/ui/sponsored-themes/games-widget/model_54_10489.js",requires:["array-extras","datatype-date-format"]},"mail-ui-sponsored-themes-games-widget-view":{path:"mail/ui/sponsored-themes/games-widget/view_54_10489.js",requires:["minty_module_sponsored_themes_olympics_games_widget","minty_module_sponsored_themes_olympics_single_medal_count","common-utils","scrollview-base","scrollview-paginator","minty_module_sponsored_themes_olympics_olympics_event_card"]},"mail-ui-sponsored-themes-view":{path:"mail/ui/sponsored-themes/view_54_10489.js",requires:["minty_module_shell_ad_sponads","minty_module_shell_ad_onboardingTooltip","minty_module_shell_ad_onboardingTooltipMountains","minty_module_shell_ad_onboardingTooltipSkier","minty_module_sponsored_themes_olympics_base","mail-ui-sponsored-themes-countdown-model","mail-ui-sponsored-themes-countdown-view","common-utils","mail-persist-meta-data","mail-ui-themes","mail-ui-sponsored-themes-games-widget-model","mail-ui-sponsored-themes-games-widget-view","mail-ui-themes-cfg"]},"mail-ui-sponsoredsearch-model":{path:"mail/ui/sponsoredsearch/sponsoredSearchModel_5_2185.js",requires:["common-net-sessionmgr","mail-common-utils-settings"]},"mail-ui-themes":{path:"mail/ui/themes/themes_54_10489.js",requires:["common-utils","comms-ui-dialog-base","_shared_module_offscreen_bin_modal_colors_rollup","json-parse","modal_css","options-pages_css"
,"mail-ui-themes-cfg"]},"mail-ui-themes-cfg":{path:"mail/ui/themes/themes-cfg_54_10489.js",requires:["common-utils","mail-common-utils-features"]},"mail-ui-toolbarController":{path:"mail/ui/msearch/toolbar/toolbarController_5_2031.js",requires:["common-utils","contacts-api","contacts-api-utils"]},"mail-ui-tos-disclosure":{path:"mail/ui/tos/disclosure_5_2058.js",requires:["ymma-stats","cookie"]},"mail-ui-tray":{path:"compose_v3/views/tray_5_2209.js",requires:["node","comms-utils","event-custom","common-ui-menu-helper","mail-services-plugins","_shared_module_compose_attach_item","_shared_module_compose_thumbnail_item","mail-services-attach-io","mail-common-utils-features"]},"mail-ui-trending-controller":{path:"mail/ui/trending/trendingController_5_2198.js",requires:["event-base","mail-ui-trending-utils","mail-ui-trending-view","mail-ui-trending-model"]},"mail-ui-trending-model":{path:"mail/ui/trending/trendingModel_54_10489.js",requires:["event-base","common-net-sessionmgr","json-parse","common-utils"]},"mail-ui-trending-utils":{path:"mail/ui/trending/trendingUtils_5_2199.js",requires:["mail-common-utils-settings","mail-common-utils-features","common-utils"]},"mail-ui-trending-view":{path:"mail/ui/trending/trendingView_5_2198.js",requires:["minty_module_trending_gifts","mail-ui-trending-utils","event-base","mail-common-utils-settings","array-extras","common-utils"]},"mail-ui-unsubscribe":{path:"mail/ui/actions/unsubscribe_5_1769.js",requires:["common-ui-dialog-helper","_shared_module_offscreen_bin_modal_unsubscribe","common-ui-notification"]},"mail-ui-workspace-base":{path:"mail/ui/workspace/workspace_5_2214.js",requires:["mail-platform","event-resize","mail-controller-tictacs","mail-modules","mail-templates","mail-ui-foldersview-base","common-ui-tabs-base","common-ui-toolbar-base","mail-ui-searchbar","common-utils-stats","mail-ui-common-string-utils","mail-common-tracker","ymma-stats","mail-ui-navkeys","mail-common-utils-features"]},"mail-ui-workspace-ext":{path:"mail/ui/workspace/workspace-ext_54_10489.js",requires:["mail-ui-workspace-base"]},"mail-ui-workspace-fresh":{path:"mail/ui/workspace/workspace-fresh_54_10489.js",requires:["mail-ui-workspace-base","comms-ui-tooltips-widget","widget-anim","_shared_module_offscreen_bin_tooltip_fresh"]},"mail-ui-workspace-horizontal-slider":{path:"mail/ui/workspace/workspacehslider_54_10489.js",requires:["node-base","common-persist-cookie-data","common-ui-dd"]},"mail-ui-workspace-postload":{path:"mail/ui/workspace/workspace-postload_5_1651.js",requires:["mail-ui-workspace-base"]},"mail-ui-workspace-rum":{path:"mail/ui/workspace/rum_5_1673.js",requires:["event","mail-common-utils-features"]},"mail-ui-workspace-stats":{path:"mail/ui/workspace/workspace-stats_54_10549.js",requires:["mail-ui-workspace-base"]},"mail-ui-ym-rte":{path:"compose_v3/rte/YMRTEYUI_5_2163.js",requires:["mail-rte-caret-plugin","mail-rte-inline-image-plugin","event-custom","mail-common-utils-features","mail-common-utils-settings","_shared_module_rte_well_content_inline_image_drop_zone","comms-utils"]},"mail-ui-zombie-controller":{path:"mail/ui/zombie/zombieController_54_10489.js",requires:["event-base","mail-ui-zombie-model","mail-ui-zombie-view"]},"mail-ui-zombie-model":{path:"mail/ui/zombie/zombieModel_54_10489.js",requires:["event-base","common-net-sessionmgr"]},"mail-ui-zombie-view":{path:"mail/ui/zombie/zombieView_54_10489.js",requires:["event-base","common-utils","mail-common-utils-features"]},"mail-views-send-validation-error-handlers":{path:"compose_v3/views/SendValidationErrorHandlers_5_1215.js",requires:["common-utils","node","mail-captcha-turnkey-view","mail-controller-reply-processor","mail-models-serializers-draft-gdm-unserializer"]},"newsfeed-ult":{path:"mail/ui/newsfeed/newsFeedUlt_54_10489.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap"]},"newsstream-ui-newsstreamview":{path:"newsstream/ui/newsstreamview_54_10489.js",requires:["mail-ui-basewidget"]},"notepad-ui-notepadview":{path:"notepad/ui/notepadview_54_10489.js",requires:["mail-ui-basewidget","node-event-simulate","querystring-stringify-simple"]},"onboarding-ult":{path:"mail/ui/onboarding/onboarding-ult_5_1580.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap"]},"profile-api":{path:"comms/shared/src/profile-api/js/api_54_10489.js",requires:["profile-api-config"]},"profile-api-config":{path:"comms/shared/src/profile-api/js/api-config_54_10489.js",requires:["attribute"]},"rte-file-utils":{path:"compose_v3/rte/rte-file-utils_5_2191.js"},"rte-inline-image":{path:"compose_v3/rte/rte-inline-image_5_1791.js",requires:["common-utils","escape","event-custom"]},"s2s-ult":{path:"mail/ui/mailpane/base/s2s-ult_54_10489.js",requires:["common-utils-rapid-clickmap"]},"scrum-board":{path:"comms/shared/tools/scrumBoard/scrumBoard_54_10489.js",requires:["bugzilla-table","node","json","substitute","dd-ddm-drop","dd-proxy","dd-drop","dd-delegate"]},"search-ult":{path:"mail/ui/msearch/search-ult_5_2079.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap"]},searchautocomplete:{path:"mail/ui/searchautocomplete/searchautocomplete_5_2185.js",requires:["ac-widget","filter-contacts","mail-recent-searches-header","mail-recent-searches","autocomplete_css","_shared_module_offscreen_bin_compose","common-utils","comms-utils","common-persist-user-data","mail-ui-searchbar","mail-ui-advanced-search","mail-persist-meta-data","isXobnifiedCheck","searchautocomplete-extra-modules"]},"searchautocomplete-extra-modules":{path:"mail/ui/searchautocomplete/searchautocomplete-extra-modules_54_10489.js",requires:["federated-autocomplete-acwidget-shim","filter-contacts-federated-ac-adapter","xobni-contacts-search","mail-recent-searches-federated-ac-adapter","ac-message-search","ac-advanced-search-entry","ac-entity-search"]},"shopping-ads-ult":{path:"mail/ui/shoppingads/shoppingAdsUlt_5_1025.js",requires:["common-utils-rapid-clickmap","common-utils-rapid-viewmap"]},"snow-ult":{path:"mail/ui/boss/snow-ult_54_10489.js"
,requires:["common-utils-rapid-clickmap"]},"template-renderer":{path:"comms/shared/src/utils/js/template-renderer_54_10489.js"},tracer:{path:"mail/debug/tracer_54_10489.js",requires:["comms-aop-weaver","comms-aop-tracer","mail-ui-actions-marker"]},"web-search-autocomplete":{path:"mail/ui/searchautocomplete/web-search-autocomplete_54_10489.js",requires:["array-extras"]},"xobni-contacts-search":{path:"mail/ui/searchautocomplete/xobni-contact-search_5_2185.js",requires:["querystring-stringify-simple","common-utils","xobni-contacts-search-api","ac-entity-search","contacts-api-utils","_shared_module_xobni_contact_search_results_rollup","ymma-stats","xobni-utilities","isXobnifiedCheck","common-net-session"]},"xobni-contacts-search-api":{path:"comms/shared/src/xobniContacts/xobni-contacts-search-api_5_2058.js",requires:["io-base","querystring-stringify-simple","json","ymma-stats","xobni-utilities","common-net-session"]},"xobni-utilities":{path:"comms/shared/src/xobniContacts/xobniUtils_5_1638.js",requires:["querystring","common-utils","common-net-session","mail-common-utils-settings"]},"ymma-stats":{path:"comms/shared/src/ymmastats/js/src/ymmastats_5_2182.js",requires:["mail-common-utils-settings","mail-common-utils-features"]}});var t={postlaunch:["mail-controller-folders-v3","mail-ui-nativeads-read","mail-ui-ad-toolbar","mail-controller-conversations-ops-drafts","mail-ui-imap-in","common-utils-error","mail-common-cachewarmer","mail-captcha-data-view","mail-captcha-data-controller","mail-error","mail-error-v3","mail-errormap","mail-ui-inboxmenu-base","mail-ui-folderevents","mail-ui-messenger","mail-ui-print","mail-ui-themes","mail-ui-toolbarController","mail-ui-onboarding","mail-ui-shortcuts-dialog","mail-ui-ad-upsell-dialog","mail-ui-adfree-mail-dialog","mail-ui-ad-feedback-dialog","mail-ui-ad-sponsored-feedback-dialog","mail-ui-darla","mail-ui-convs-confirm-dialog","common-ui-menu-helper","mail-ui-searchmyworld","common-ui-tabs-overflow","mail-ui-workspace-ext","mail-ui-foldersview-bind","mail-ui-messagesview-quickfilter","mail-controller-filters-v3","mail-ui-messagesview-search","mail-ui-messagekeywords","mail-ui-messagelistdomains","mail-ui-messagecategories","mail-ui-messagecategories-vespa","mail-ui-advanced-search","mail-ui-advanced-search-widget","mail-ui-advanced-search-ac-widget","mail-ui-sponsored-themes-view","mail-ui-sponsored-themes-countdown-model","mail-ui-sponsored-themes-countdown-view","mail-ui-sponsored-themes-games-widget-view","mail-ui-sponsored-themes-games-widget-model","mail-ui-games-widget","calendar-ui-calendarview","notepad-ui-notepadview","searchautocomplete","searchautocomplete-extra-modules","ac-message-search","federated-autocomplete","federated-autocomplete-acwidget-shim","web-search-autocomplete","mail-recent-searches-federated-ac-adapter","filter-contacts","filter-contacts-federated-ac-adapter","mail-recent-searches","mail-recent-searches-header","ac-advanced-search-entry","_shared_module_offscreen_bin_menus_spam","mail-ui-proxyevents","mail-ui-mb-controller","mail-ui-mb-view","mail-ui-mb-list-view","mail-ui-mb-list-img-view","mail-ui-mb-list-native-view","mail-ui-mb-rec-view","mail-ui-mb-right-rail-view","mail-ui-mb-right-rail-carousel-view","mail-ui-mb-search-list-view","mail-ui-mb-msg-read-view","mail-ui-mb-model","mail-ui-mb-feedback-view","gallery-event-pasted","input-mask","mail-ui-ads-mobilizer","mail-ui-common-fonts","mail-ui-composeview-compose-loader","mail-services-message-service","mail-ui-onboarding-nav","mail-ui-contentmatch-d2s","mail-ui-boss-multitask","mail-ui-boss-themes","mail-ui-boss-screensaver-console","mail-ui-boss-screensaver-halloween","mail-ui-boss-screensaver-photos","mail-ui-conv-optout","mail-ui-shopping-model","mail-ui-shopping-view","mail-ui-shopping-rr-view","mail-ui-shopping-list-view","mail-ui-shopping-controller","mail-ui-shopping-rr-controller","mail-ui-rr-backfill-controller","comet","mail-ui-ads-live-nation","mail-ui-pane-utils-s2s","mail-ui-chrome-dss-ext","mail-ui-onboarding-holiday-themes","mail-ui-onboarding-compose-assist","mail-ui-list-item-editor","mail-ui-folder-menu","mail-common-connected-accounts","mail-common-connected-accounts-ult","mail-ui-unsubscribe","mail-ui-folders-onboarding","mail-ui-maintenancenotification","mail-core-net-transport","mail-core-net-request","mail-controller-imapin","mail-ui-themes-cfg","mail-controller-messages-ops","ac-widget","comms-utils","isXobnifiedCheck","xobni-utilities","xobni-contacts-search","xobni-contacts-search-api","mail-ui-search-model","mail-ui-searchutils","mail-ui-messageaction","mail-ui-mailevents","mail-ui-messageevents","mail-ui-convevents","mail-controller-conversations-ops"],calendar:["calendar-ui-addEvent-utils","calendar-ui-addEvent-listener","calendar-ui-addEvent-controller","calendar-ui-addEvent-model","calendar-ui-addEvent-view","mail-controller-compose-text","mail-controller-compose","mail-model-compose","mail-ui-common-fonts"],compose:["mail-common-downloader-v1","mail-common-downloader-v2","mail-controller-compose","mail-controller-compose-text","mail-controller-reply-processor","mail-controller-contact-processor","mail-views-send-validation-error-handlers","mail-models-validators-send","mail-controller-spellcheck","mail-controller-spell-processor","mail-ui-composeview-attach","mail-ui-autocompose","mail-ui-authorview-v3","mail-ui-fullcompose-v3","mail-ui-mailcompose-base-header-v3","mail-ui-mailcompose-v3","mail-controller-compose-v3","mail-captcha-turnkey-view","mail-ui-composeview-spellcheck-v3","mail-ui-messageevents","mail-ui-convevents","mail-ui-mailevents","mail-ui-messagepane-error","mail-ui-messagepane-read","mail-ui-messagepane-warnings","mail-ui-messagepane-next-prev","mail-ui-convpane-next-prev","mail-ui-messagepane-bind","mail-ui-message-encodings","mail-ui-sendconfirmview-base-conv","mail-service-uploader-v1","mail-service-uploader-yui","mail-service-uploader-form","mail-service-uploader-utils","mail-ui-convpane-read","mail-ui-captcha-controller"
,"mail-ui-captcha-view","mail-ui-rteview-v3","mail-ui-rte-formatter-v3","mail-ui-rte-linkeditor-v3","mail-ui-tray","mail-ui-composetictacapi","mail-services-compose","mail-services-calservice","mail-core-net-transport","mail-core-net-request","mail-ui-mailcompose-header-form-list-helper","mail-rte-inline-image-plugin","mail-rte-caret-plugin","mail-ui-ym-rte","mail-model-compose","mail-ui-common-fonts","comms-utils","mail-controller-signature-processor","common-ui-menu-helper","mail-ui-onboarding","comms-ui-lozenge","isXobnifiedCheck","xobni-utilities","ac-widget","filter-contacts","mail-services-message-service","mail-error-v3","mail-error","mail-errormap","mail-controller-html-processor","mail-controller-conv-adapter","mail-controller-messages-ops","mail-ui-unsubscribe","mail-controller-conversations-ops","mail-ui-mailpane-read","mail-ui-mailpane-next-prev","comms-lozenge-address","comms-lozenge","mail-controller-sendconfirm","mail-ui-format-popout"],contacts:["contacts-ui-addcontact-add","contacts-ui-addcontact-confirm","contacts-ui-addcontactdialog","contacts-ui-choosecontactdialog","contacts-ui-contact-popup","contacts-ui-hovercard-plugin","contacts-ui-hovercard-datastore","contacts-ui-hovercard-addedit","contacts-ui-hovercard-onboard","comms-utils","common-ui-menu-helper","xobni-utilities","xobni-contacts-search-api","mail-common-connected-accounts","isXobnifiedCheck","mail-ui-onboarding"],search:["mail-ui-searchutils","mail-ui-bulk-progress","mail-ui-search-model","mail-ui-mailSearchController","mail-ui-searchListController","mail-ui-searchmyworld-srp","mail-ui-searchListView","mail-ui-advancedSearchController","mail-ui-advancedSearchView","mail-ui-searchGroupsController","mail-ui-dmsearch-controller","mail-ui-dmsearch-model","mail-ui-contentmatch-model","mail-ui-contentmatch-controller","mail-ui-contentmatch-text-ads-view","mail-ui-sponsoredsearch-model","mail-ui-dmsearch-view","mail-ui-searchGroupsView","mail-ui-emptyFolderController","mail-ui-execute-search-utils","mail-ui-emptyFolderView","mail-ui-list-mgr","mail-recent-searches","isXobnifiedCheck","xobni-utilities","xobni-contacts-search","xobni-contacts-search-api","mail-ui-searchmyworld","ac-widget","filter-contacts","comms-utils"],newsfeed:["mail-ui-newsfeed-slingstone","mail-ui-newsfeed-controller","mail-ui-newsfeed-model","mail-ui-newsfeed-view","mail-ui-mb-model","mail-ui-trending-controller","mail-ui-trending-model"],subcompose:["ac-widget","comms-lozenge","comms-ui-lozenge","comms-utils","comms-lozenge-address","comms-lozenge-edit","comms-ui-editable-overlay-plugin","mail-model-send","mail-controller-compose","mail-controller-sendconfirm","xobni-contacts-search","filter-contacts","isXobnifiedCheck","xobni-utilities","mail-model-compose","mail-ui-common-fonts","mail-controller-messages-ops","xobni-contacts-search-api"]},n={postlaunch_strings:{path:"intl/js/postlaunch/lang_"+NeoConfig.lang+"_5_2214"+".js"},calendar_strings:{path:"intl/js/calendar/lang_"+NeoConfig.lang+"_5_1642"+".js",requires:["postlaunch_strings","subcompose_strings"]},compose_strings:{path:"intl/js/compose/lang_"+NeoConfig.lang+"_5_2191"+".js",requires:["postlaunch_strings","subcompose_strings"]},contacts_strings:{path:"intl/js/contacts/lang_"+NeoConfig.lang+"_5_2125"+".js",requires:["postlaunch_strings"]},search_strings:{path:"intl/js/search/lang_"+NeoConfig.lang+"_5_2154"+".js",requires:["postlaunch_strings"]},newsfeed_strings:{path:"intl/js/newsfeed/lang_"+NeoConfig.lang+"_5_1642"+".js",requires:["postlaunch_strings"]},subcompose_strings:{path:"intl/js/subcompose/lang_"+NeoConfig.lang+"_5_1642"+".js",requires:["postlaunch_strings"]}};e.mix(e.comps,n);for(var r in t){var i=t[r];for(var s=0;s<i.length;s++){var o=i[s],u=e.comps[o];u&&(u.requires||(u.requires=[]),u.requires.push(r+"_strings"))}}a();var f,l="",c=0,h=0,p=1,d=0,v=NeoConfig.reducedUrlLength||255,m=NeoConfig.urlLength||2e3,g={mail:{name:"mail",comboBase:YUI_config.groups.mailMods.comboBase,root:YUI_config.groups.mailMods.root,base:YUI_config.groups.mailMods.base,combine:!0,modules:e.comps,origin:NeoConfig.originPath}};y(),delete e.Env._loader.rollups,e._config({requireRegistration:!0,loadErrorFn:b(),timeout:f,maxURLLength:m,groups:g})})},"1.0.0");


YUI.add("mail-templates",function(e){var t={mailTmpl:{name:"mailTmpl",comboBase:YUI_config.groups.mailMods.comboBase,root:YUI_config.groups.mailMods.root+"templates/js/",base:YUI_config.groups.mailMods.base+"templates/js/",combine:!0,modules:{_shared_module_ad_live_nation:{path:"_shared/module/ad/live-nation_54_10489.js"},_shared_module_ads_display:{path:"_shared/module/ads-display_5_1554.js"},_shared_module_ca_openhide:{path:"_shared/module/ca-openhide_5_2206.js"},_shared_module_calendar_dialog_add_event_mail_rollup:{path:"_shared/module/calendar/dialog/add-event-mail_rollup_54_10489.js"},_shared_module_calendar_menu_times:{path:"_shared/module/calendar/menu/times_54_10489.js"},_shared_module_compose_attach_item:{path:"_shared/module/compose/attach-item_5_2209.js"},_shared_module_compose_calendarReply:{path:"_shared/module/compose/calendarReply_54_10489.js"},_shared_module_compose_dropzone:{path:"_shared/module/compose/dropzone_54_10489.js"},_shared_module_compose_dummy_rollup:{path:"_shared/module/compose-dummy_rollup_5_2209.js"},_shared_module_compose_fresh:{path:"_shared/module/compose-fresh_54_10489.js",requires:["_shared_module_compose_message_header_fresh","_shared_module_rte_well_fresh","_shared_module_compose_message_body"]},_shared_module_compose_fresh_conv:{path:"_shared/module/compose-fresh-conv_5_784.js",requires:["_shared_module_compose_message_header_fresh","_shared_module_compose_message_body","_shared_module_rte_well_fresh_conv"]},_shared_module_compose_link_editor:{path:"_shared/module/compose/link-editor_54_10489.js"},_shared_module_compose_loading:{path:"_shared/module/compose/loading_54_10489.js"},_shared_module_compose_message_body:{path:"_shared/module/compose/message-body_5_2209.js",requires:["_shared_module_message_loading_error","_shared_module_rte_well_content_attachments_well_fresh"]},_shared_module_compose_message_header_fresh:{path:"_shared/module/compose/message-header-fresh_5_1766.js",requires:["_shared_module_compose_quick_reply_card_actions"]},_shared_module_compose_quick_reply_card_actions:{path:"_shared/module/compose/quick-reply-card-actions_54_10489.js"},_shared_module_compose_reply:{path:"_shared/module/compose/reply_54_10489.js"},_shared_module_compose_thumbnail_item:{path:"_shared/module/compose/thumbnail-item_5_2209.js"},_shared_module_compose_title:{path:"_shared/module/compose/title_54_10489.js"},_shared_module_contact_card_confirm:{path:"_shared/module/contact/card-confirm_54_10489.js",requires:["_shared_module_contact_fragments_photo","_shared_module_contact_fragments_activity","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info"]},_shared_module_contact_card_email_rollup:{path:"_shared/module/contact/card-email_rollup_54_10489.js"},_shared_module_contact_card_lg:{path:"_shared/module/contact/card-lg_54_10489.js",requires:["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_follow","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info"]},_shared_module_contact_card_md:{path:"_shared/module/contact/card-md_54_10489.js",requires:["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info","_shared_module_contact_fragments_follow"]},_shared_module_contact_card_sm:{path:"_shared/module/contact/card-sm_54_10489.js",requires:["_shared_module_contact_fragments_activity","_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name","_shared_module_contact_fragments_info","_shared_module_contact_fragments_follow"]},_shared_module_contact_fragments_activity:{path:"_shared/module/contact/fragments/activity_54_10489.js"},_shared_module_contact_fragments_dl_email:{path:"_shared/module/contact/fragments/dl/email_54_10489.js"},_shared_module_contact_fragments_dl_mobile:{path:"_shared/module/contact/fragments/dl/mobile_54_10489.js"},_shared_module_contact_fragments_dl_yim:{path:"_shared/module/contact/fragments/dl/yim_54_10489.js"},_shared_module_contact_fragments_follow:{path:"_shared/module/contact/fragments/follow_54_10489.js"},_shared_module_contact_fragments_info:{path:"_shared/module/contact/fragments/info_54_10489.js",requires:["_shared_module_contact_fragments_dl_email","_shared_module_contact_fragments_dl_yim","_shared_module_contact_fragments_dl_mobile"]},_shared_module_contact_fragments_name:{path:"_shared/module/contact/fragments/name_54_10489.js"},_shared_module_contact_fragments_photo:{path:"_shared/module/contact/fragments/photo_54_10489.js"},_shared_module_feedback:{path:"_shared/module/feedback_54_10489.js"},_shared_module_folder_empty_rollup:{path:"_shared/module/folder-empty_rollup_54_10489.js"},_shared_module_folder_list_mailbox_list:{path:"_shared/module/folder-list/mailbox-list_5_1921.js"},_shared_module_message_display_fresh_rollup:{path:"_shared/module/message-display-fresh_rollup_5_960.js"},_shared_module_message_list_refresh_rollup:{path:"_shared/module/message-list-refresh_rollup_5_1137.js"},_shared_module_message_list_thread_expansion_error:{path:"_shared/module/message-list/thread_expansion_error_54_10489.js"},_shared_module_message_list_threaded_rollup:{path:"_shared/module/message-list-threaded_rollup_5_2210.js"},_shared_module_message_loading_error:{path:"_shared/module/message/loading-error_54_10489.js"},_shared_module_message_norton_logo:{path:"_shared/module/message/norton-logo_54_10489.js"},_shared_module_message_pane_fresh:{path:"_shared/module/message-pane-fresh_54_10489.js",requires:["_shared_module_message_prompt","_shared_module_message_display_fresh_rollup"]},_shared_module_message_prompt:{path:"_shared/module/message/prompt_54_10489.js"},_shared_module_offscreen_bin_compose:{path:"_shared/module/offscreen-bin/compose_54_10489.js"},_shared_module_offscreen_bin_compose_menu_color_picker:{path:"_shared/module/offscreen-bin/compose/menu-color-picker_54_10489.js"},_shared_module_offscreen_bin_compose_menu_indent
:{path:"_shared/module/offscreen-bin/compose/menu-indent_54_10489.js"},_shared_module_offscreen_bin_compose_menu_list:{path:"_shared/module/offscreen-bin/compose/menu-list_54_10489.js"},_shared_module_offscreen_bin_compose_menu_spell_langs:{path:"_shared/module/offscreen-bin/compose/menu-spell-langs_54_10489.js"},_shared_module_offscreen_bin_compose_menu_spellcheck:{path:"_shared/module/offscreen-bin/compose/menu-spellcheck_54_10489.js"},_shared_module_offscreen_bin_compose_menu_text_align:{path:"_shared/module/offscreen-bin/compose/menu-text-align_54_10489.js"},_shared_module_offscreen_bin_compose_modal_cancel_compose:{path:"_shared/module/offscreen-bin/compose/modal-cancel-compose_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon"]},_shared_module_offscreen_bin_compose_modal_check_spelling_rollup:{path:"_shared/module/offscreen-bin/compose/modal-check-spelling_rollup_54_10489.js"},_shared_module_offscreen_bin_contacts_hovercard:{path:"_shared/module/offscreen-bin/contacts/hovercard_5_2125.js"},_shared_module_offscreen_bin_contacts_hovercard_mini:{path:"_shared/module/offscreen-bin/contacts/hovercard-mini_54_10897.js"},_shared_module_offscreen_bin_contacts_menu_contact_compact_compose:{path:"_shared/module/offscreen-bin/contacts/menu-contact-compact-compose_54_10489.js",requires:["_shared_module_contact_fragments_photo","_shared_module_contact_fragments_name"]},_shared_module_offscreen_bin_contacts_menu_contact_compact_compose_fresh:{path:"_shared/module/offscreen-bin/contacts/menu-contact-compact-compose-fresh_54_10489.js"},_shared_module_offscreen_bin_contacts_menu_contact_compact_fresh:{path:"_shared/module/offscreen-bin/contacts/menu-contact-compact-fresh_54_10489.js"},_shared_module_offscreen_bin_contacts_modal_contact_add:{path:"_shared/module/offscreen-bin/contacts/modal-contact/add_54_10677.js",requires:["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_smtp","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_tel","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_other","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_contacts_modal_contact_edit:{path:"_shared/module/offscreen-bin/contacts/modal-contact/edit_5_1477.js",requires:["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_smtp","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_tel","_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_other","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_other:{path:"_shared/module/offscreen-bin/contacts/modal-contact/fragments/ep-other_54_10677.js"},_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_smtp:{path:"_shared/module/offscreen-bin/contacts/modal-contact/fragments/ep-smtp_54_10828.js"},_shared_module_offscreen_bin_contacts_modal_contact_fragments_ep_tel:{path:"_shared/module/offscreen-bin/contacts/modal-contact/fragments/ep-tel_54_10677.js"},_shared_module_offscreen_bin_contacts_modal_contact_fragments_menu_email_types:{path:"_shared/module/offscreen-bin/contacts/modal-contact/fragments/menu-email-types_54_10489.js"},_shared_module_offscreen_bin_contacts_modal_contact_fragments_menu_phone_types:{path:"_shared/module/offscreen-bin/contacts/modal-contact/fragments/menu-phone-types_54_10489.js"},_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_bd:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-bd_54_10489.js",requires:["minty_module_contacts_edit_error","minty_module_contacts_edit_name","minty_module_contacts_edit_basics_emails","minty_module_contacts_edit_basics_ims","minty_module_contacts_edit_basics_phones"]},_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_ft:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-ft_54_10489.js",requires:["_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_hd:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontact-hd_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon"]},_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_bd:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-bd_54_10489.js",requires:["_shared_module_contact_card_confirm"]},_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_ft:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-ft_54_10489.js",requires:["_shared_module_offscreen_bin_modal_btn_done"]},_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontactconfirm_hd:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-add/fragments/modal-kiosk-addcontactconfirm-hd_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon"]},_shared_module_offscreen_bin_contacts_modal_kiosk_add_modal_kiosk_addcontact:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-add/modal-kiosk-addcontact_54_10489.js",requires:["_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_add_fragments_modal_kiosk_addcontact_ft"]},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_count:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-count_54_10489.js"},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_filter:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-filter_54_10489.js"
},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_look_for:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-look-for_54_10489.js"},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane_54_10489.js",requires:["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_bd"]},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_bd:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-bd_54_10489.js"},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_hd:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-hd_54_10489.js"},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_loading:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/choose-pane-loading_54_10489.js"},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_bd:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-bd_54_10489.js",requires:["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_filter","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_look_for","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_pane_loading","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_choose_count"]},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_ft:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-ft_54_10489.js",requires:["_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_hd:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/fragments/modal-kiosk-choosecontact-hd_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon"]},_shared_module_offscreen_bin_contacts_modal_kiosk_choose_modal_kiosk_choosecontact:{path:"_shared/module/offscreen-bin/contacts/modal-kiosk-choose/modal-kiosk-choosecontact_54_10489.js",requires:["_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_hd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_bd","_shared_module_offscreen_bin_contacts_modal_kiosk_choose_fragments_modal_kiosk_choosecontact_ft"]},_shared_module_offscreen_bin_drag_drop:{path:"_shared/module/offscreen-bin/drag-drop_54_10489.js"},_shared_module_offscreen_bin_inbox:{path:"_shared/module/offscreen-bin/inbox_5_2209.js",requires:["_shared_module_offscreen_bin_menus_actions_fresh","_shared_module_offscreen_bin_menus_view","_shared_module_offscreen_bin_modal_attach_download","_shared_module_offscreen_bin_menus_tab_overflow","_shared_module_offscreen_bin_modal_set_encodings","_shared_module_offscreen_bin_menus_bubble_actions","_shared_module_offscreen_bin_menus_message_list_sortby","_shared_module_offscreen_bin_menus_message_list_cbox_select","_shared_module_offscreen_bin_menus_message_list_count"]},_shared_module_offscreen_bin_menus_actions_fresh:{path:"_shared/module/offscreen-bin/menus/actions-fresh_5_2114.js"},_shared_module_offscreen_bin_menus_bubble_actions:{path:"_shared/module/offscreen-bin/menus/bubble-actions_5_1699.js"},_shared_module_offscreen_bin_menus_compose_attach:{path:"_shared/module/offscreen-bin/menus/compose-attach_54_10489.js"},_shared_module_offscreen_bin_menus_compose_genre:{path:"_shared/module/offscreen-bin/menus/compose-genre_54_10489.js"},_shared_module_offscreen_bin_menus_debug:{path:"_shared/module/offscreen-bin/menus/debug_54_10489.js"},_shared_module_offscreen_bin_menus_external_links:{path:"_shared/module/offscreen-bin/menus/external-links_54_10489.js"},_shared_module_offscreen_bin_menus_folder_menu:{path:"_shared/module/offscreen-bin/menus/folder-menu_5_1998.js"},_shared_module_offscreen_bin_menus_loading:{path:"_shared/module/offscreen-bin/menus/loading_54_10489.js"},_shared_module_offscreen_bin_menus_message_list_cbox_select:{path:"_shared/module/offscreen-bin/menus/message-list-cbox-select_54_10489.js"},_shared_module_offscreen_bin_menus_message_list_count:{path:"_shared/module/offscreen-bin/menus/message-list-count_54_10489.js"},_shared_module_offscreen_bin_menus_message_list_sortby:{path:"_shared/module/offscreen-bin/menus/message-list-sortby_54_10489.js"},_shared_module_offscreen_bin_menus_mts_external_links:{path:"_shared/module/offscreen-bin/menus/mts-external-links_54_10489.js"},_shared_module_offscreen_bin_menus_options_fresh:{path:"_shared/module/offscreen-bin/menus/options-fresh_54_10489.js"},_shared_module_offscreen_bin_menus_predictive_search_close_menu:{path:"_shared/module/offscreen-bin/menus/predictive-search-close-menu_5_2063.js"},_shared_module_offscreen_bin_menus_reply_modes:{path:"_shared/module/offscreen-bin/menus/reply-modes_54_10489.js"},_shared_module_offscreen_bin_menus_sbc_external_links:{path:"_shared/module/offscreen-bin/menus/sbc-external-links_54_10489.js"},_shared_module_offscreen_bin_menus_spam:{path:"_shared/module/offscreen-bin/menus/spam_54_10489.js"},_shared_module_offscreen_bin_menus_tab_overflow:{path:"_shared/module/offscreen-bin/menus/tab-overflow_54_10489.js"},_shared_module_offscreen_bin_menus_view:{path:"_shared/module/offscreen-bin/menus/view_5_1137.js"},_shared_module_offscreen_bin_modal:{path:"_shared/module/offscreen-bin/modal_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon"]},_shared_module_offscreen_bin_modal_ad_feedback_rollup:{path:"_shared/module/offscreen-bin/modal-ad-feedback_rollup_54_10489.js"
},_shared_module_offscreen_bin_modal_adfree_rollup:{path:"_shared/module/offscreen-bin/modal-adfree_rollup_54_10489.js"},_shared_module_offscreen_bin_modal_attach_download:{path:"_shared/module/offscreen-bin/modal-attach-download_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon","_shared_module_message_norton_logo","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_modal_attach_download_rollup:{path:"_shared/module/offscreen-bin/modal-attach-download_rollup_54_10489.js"},_shared_module_offscreen_bin_modal_autocompose:{path:"_shared/module/offscreen-bin/modal-autocompose_54_10489.js"},_shared_module_offscreen_bin_modal_btn_cancel:{path:"_shared/module/offscreen-bin/modal-btn-cancel_54_10489.js"},_shared_module_offscreen_bin_modal_btn_continue:{path:"_shared/module/offscreen-bin/modal-btn-continue_54_10489.js"},_shared_module_offscreen_bin_modal_btn_done:{path:"_shared/module/offscreen-bin/modal-btn-done_54_10489.js"},_shared_module_offscreen_bin_modal_btn_generic:{path:"_shared/module/offscreen-bin/modal-btn-generic_54_10489.js"},_shared_module_offscreen_bin_modal_btn_manage_service_bucket_rollup:{path:"_shared/module/offscreen-bin/modal-btn-manage-service-bucket_rollup_54_10489.js"},_shared_module_offscreen_bin_modal_btn_ok:{path:"_shared/module/offscreen-bin/modal-btn-ok_54_10489.js"},_shared_module_offscreen_bin_modal_btn_remove_ads_bucket_rollup:{path:"_shared/module/offscreen-bin/modal-btn-remove-ads-bucket_rollup_54_10489.js"},_shared_module_offscreen_bin_modal_btn_save:{path:"_shared/module/offscreen-bin/modal-btn-save_54_10489.js"},_shared_module_offscreen_bin_modal_btns_done_cancel:{path:"_shared/module/offscreen-bin/modal-btns-done-cancel_54_10489.js",requires:["_shared_module_offscreen_bin_modal_btn_done","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_modal_btns_ok_cancel:{path:"_shared/module/offscreen-bin/modal-btns-ok-cancel_54_10489.js",requires:["_shared_module_offscreen_bin_modal_btn_ok","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_modal_close_icon:{path:"_shared/module/offscreen-bin/modal-close-icon_54_10489.js"},_shared_module_offscreen_bin_modal_colors_rollup:{path:"_shared/module/offscreen-bin/modal-colors_rollup_54_10489.js"},_shared_module_offscreen_bin_modal_connected_accounts:{path:"_shared/module/offscreen-bin/modal-connected-accounts_5_1115.js",requires:["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_ok"]},_shared_module_offscreen_bin_modal_conv_optout:{path:"_shared/module/offscreen-bin/modal-conv-optout_5_1245.js"},_shared_module_offscreen_bin_modal_launch_error_rollup:{path:"_shared/module/offscreen-bin/modal-launch-error_rollup_54_10489.js"},_shared_module_offscreen_bin_modal_ln_upsell:{path:"_shared/module/offscreen-bin/modal-ln-upsell_5_1115.js",requires:["_shared_module_offscreen_bin_modal_close_icon"]},_shared_module_offscreen_bin_modal_mbFeedback:{path:"_shared/module/offscreen-bin/modal-mbFeedback_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_ok","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_modal_onboard_rollup:{path:"_shared/module/offscreen-bin/modal-onboard_rollup_54_10489.js"},_shared_module_offscreen_bin_modal_quick_filters:{path:"_shared/module/offscreen-bin/modal-quick-filters_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btn_save","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_offscreen_bin_modal_set_encodings:{path:"_shared/module/offscreen-bin/modal-set-encodings_54_10489.js",requires:["_shared_module_offscreen_bin_modal_close_icon","_shared_module_offscreen_bin_modal_btns_done_cancel"]},_shared_module_offscreen_bin_modal_shortcuts_rollup:{path:"_shared/module/offscreen-bin/modal-shortcuts_rollup_5_2103.js"},_shared_module_offscreen_bin_modal_unsubscribe:{path:"_shared/module/offscreen-bin/modal-unsubscribe_5_1769.js"},_shared_module_offscreen_bin_modal_upsell_rollup:{path:"_shared/module/offscreen-bin/modal-upsell_rollup_54_10489.js"},_shared_module_offscreen_bin_notification_native_ad_star:{path:"_shared/module/offscreen-bin/notification/native-ad-star_54_10752.js"},_shared_module_offscreen_bin_notification_notifications:{path:"_shared/module/offscreen-bin/notification/notifications_54_10489.js"},_shared_module_offscreen_bin_notification_single_inline_text:{path:"_shared/module/offscreen-bin/notification/single-inline-text_54_10489.js"},_shared_module_offscreen_bin_notification_tae_text:{path:"_shared/module/offscreen-bin/notification/tae-text_5_1131.js"},_shared_module_offscreen_bin_print_print_rollup:{path:"_shared/module/offscreen-bin/print/print_rollup_54_10489.js"},_shared_module_offscreen_bin_progress_bar:{path:"_shared/module/offscreen-bin/progress-bar_54_10489.js"},_shared_module_offscreen_bin_renamer:{path:"_shared/module/offscreen-bin/renamer_5_2134.js"},_shared_module_offscreen_bin_s2s:{path:"_shared/module/offscreen-bin/s2s_54_10489.js"},_shared_module_offscreen_bin_searcher:{path:"_shared/module/offscreen-bin/searcher_5_2134.js"},_shared_module_offscreen_bin_shell_navigation_newfolder_body_rollup:{path:"_shared/module/offscreen-bin/shell-navigation/newfolder/body_rollup_54_10489.js"},_shared_module_offscreen_bin_shell_navigation_newfolder_header_rollup:{path:"_shared/module/offscreen-bin/shell-navigation/newfolder/header_rollup_54_10489.js"},_shared_module_offscreen_bin_tooltip_fresh:{path:"_shared/module/offscreen-bin/tooltip-fresh_54_10489.js"},_shared_module_offscreen_bin_tooltip_validation:{path:"_shared/module/offscreen-bin/tooltip-validation_5_1640.js"},_shared_module_rte_well_content_attach_item:{path:"_shared/module/rte-well/content/attach-item_54_10489.js"},_shared_module_rte_well_content_attachments:{path:"_shared/module/rte-well/content/attachments_54_10489.js",requires:["_shared_module_rte_well_content_attach_item"
,"_shared_module_rte_well_content_file_count"]},_shared_module_rte_well_content_attachments_fresh:{path:"_shared/module/rte-well/content/attachments-fresh_5_2078.js"},_shared_module_rte_well_content_attachments_well_fresh:{path:"_shared/module/rte-well/content/attachments-well-fresh_5_2209.js",requires:["_shared_module_rte_well_content_attach_item"]},_shared_module_rte_well_content_emoticons:{path:"_shared/module/rte-well/content/emoticons_54_10489.js"},_shared_module_rte_well_content_emoticons_fresh:{path:"_shared/module/rte-well/content/emoticons-fresh_54_10489.js"},_shared_module_rte_well_content_file_count:{path:"_shared/module/rte-well/content/file-count_54_10489.js",requires:["_shared_module_message_norton_logo"]},_shared_module_rte_well_content_fontnamesize_fresh:{path:"_shared/module/rte-well/content/fontnamesize-fresh_54_10489.js"},_shared_module_rte_well_content_format_fresh:{path:"_shared/module/rte-well/content/format-fresh_54_10489.js"},_shared_module_rte_well_content_format_pop_out:{path:"_shared/module/rte-well/content/format_pop_out_5_2206.js"},_shared_module_rte_well_content_inline_image_ctrl_overlay:{path:"_shared/module/rte-well/content/inline-image-ctrl-overlay_54_10489.js"},_shared_module_rte_well_content_inline_image_drop_zone:{path:"_shared/module/rte-well/content/inline-image-drop-zone_54_10489.js"},_shared_module_rte_well_content_inline_image_markup:{path:"_shared/module/rte-well/content/inline-image-markup_54_10489.js"},_shared_module_rte_well_content_inline_image_saved:{path:"_shared/module/rte-well/content/inline-image-saved_54_10489.js"},_shared_module_rte_well_fresh:{path:"_shared/module/rte-well-fresh_54_10489.js",requires:["_shared_module_rte_well_content_attachments_fresh","_shared_module_rte_well_content_format_fresh"]},_shared_module_rte_well_fresh_conv:{path:"_shared/module/rte-well-fresh-conv_5_2206.js",requires:["_shared_module_rte_well_content_attachments_fresh","_shared_module_rte_well_content_format_fresh","_shared_module_rte_well_content_format_pop_out","_shared_module_ca_openhide"]},_shared_module_rte_well_tabs_compose:{path:"_shared/module/rte-well/tabs/compose_54_10489.js"},_shared_module_rte_well_tabs_compose_fresh:{path:"_shared/module/rte-well/tabs/compose-fresh_54_10489.js"},_shared_module_search_didyoumean_rollup:{path:"_shared/module/search-didyoumean_rollup_54_10489.js"},_shared_module_search_empty_contact_rollup:{path:"_shared/module/search-empty-contact_rollup_54_10489.js"},_shared_module_search_empty_rollup:{path:"_shared/module/search-empty_rollup_54_10489.js"},_shared_module_search_empty_smart_view_rollup:{path:"_shared/module/search-empty-smart-view_rollup_54_10489.js"},_shared_module_search_empty_tae_rollup:{path:"_shared/module/search-empty-tae_rollup_54_10489.js"},_shared_module_search_empty_with_adv_btn_rollup:{path:"_shared/module/search-empty-with-adv-btn_rollup_54_10921.js"},_shared_module_search_with_snippet_rollup:{path:"_shared/module/search-with-snippet_rollup_5_1554.js"},_shared_module_send_confirm_captcha:{path:"_shared/module/send-confirm/captcha_54_10489.js",requires:["_shared_module_offscreen_bin_modal_btn_continue","_shared_module_offscreen_bin_modal_btn_cancel"]},_shared_module_send_confirm_captcha_blocked:{path:"_shared/module/send-confirm/captcha-blocked_54_10489.js"},_shared_module_send_confirm_rollup:{path:"_shared/module/send-confirm_rollup_54_10489.js"},_shared_module_shell_navigation_search_rollup:{path:"_shared/module/shell-navigation/search_rollup_54_10489.js"},_shared_module_thread_thread_display_rollup:{path:"_shared/module/thread/thread-display_rollup_5_2209.js"},_shared_module_thread_thread_pane:{path:"_shared/module/thread/thread-pane_5_2169.js",requires:["_shared_module_message_prompt","_shared_module_thread_thread_display_rollup"]},_shared_module_toolbar_compose:{path:"_shared/module/toolbar/compose_54_10489.js"},_shared_module_toolbar_compose_fresh:{path:"_shared/module/toolbar/compose-fresh_54_10489.js"},_shared_module_xobni_contact_search_results_rollup:{path:"_shared/module/xobni-contact-search-results_rollup_54_10489.js"},minty_module_ads_chrome_dss_ext:{path:"minty/module/ads/chrome_dss_ext_54_10489.js"},minty_module_ads_mobilizer:{path:"minty/module/ads/mobilizer_54_10489.js"},minty_module_ads_mobilizerpane:{path:"minty/module/ads/mobilizerpane_54_10489.js"},minty_module_ads_native_ad_forward:{path:"minty/module/ads/native-ad-forward_5_1137.js"},minty_module_ads_spritz_leave_behind:{path:"minty/module/ads/spritz-leave-behind_5_2169.js"},minty_module_boss_preview_overlay:{path:"minty/module/boss/preview-overlay_54_10489.js"},minty_module_boss_themes_strip:{path:"minty/module/boss/themes-strip_54_10489.js"},minty_module_contacts_edit_basics_emails:{path:"minty/module/contacts/edit/basics/emails_54_10489.js",requires:["minty_module_contacts_edit_select_lists_emails"]},minty_module_contacts_edit_basics_ims:{path:"minty/module/contacts/edit/basics/ims_54_10489.js",requires:["minty_module_contacts_edit_select_lists_ims"]},minty_module_contacts_edit_basics_phones:{path:"minty/module/contacts/edit/basics/phones_54_10489.js",requires:["minty_module_contacts_edit_select_lists_phones"]},minty_module_contacts_edit_error:{path:"minty/module/contacts/edit/error_54_10489.js"},minty_module_contacts_edit_name:{path:"minty/module/contacts/edit/name_54_10489.js"},minty_module_contacts_edit_select_lists_emails:{path:"minty/module/contacts/edit/select-lists/emails_54_10489.js"},minty_module_contacts_edit_select_lists_ims:{path:"minty/module/contacts/edit/select-lists/ims_54_10489.js"},minty_module_contacts_edit_select_lists_phones:{path:"minty/module/contacts/edit/select-lists/phones_54_10489.js"},minty_module_conversations_modal_convs_confirm_rollup:{path:"minty/module/conversations/modal-convs-confirm_rollup_54_10489.js"},minty_module_games_single_game:{path:"minty/module/games/single-game_5_2147.js"},minty_module_games_widget:{path:"minty/module/games/widget_5_2147.js"},minty_module_list_view_ad_buckets_mb_list_img
:{path:"minty/module/list-view-ad/buckets/mb-list-img_5_2214.js"},minty_module_list_view_ad_buckets_mb_right_rail_save_ad:{path:"minty/module/list-view-ad/buckets/mb_right_rail_save_ad_5_1673.js"},minty_module_list_view_ad_buckets_native_email_ad_dish:{path:"minty/module/list-view-ad/buckets/native_email_ad_dish_5_1533.js"},minty_module_list_view_ad_buckets_native_email_ad_match:{path:"minty/module/list-view-ad/buckets/native_email_ad_match_5_1957.js"},minty_module_list_view_ad_buckets_native_email_ad_uber:{path:"minty/module/list-view-ad/buckets/native_email_ad_uber_5_1915.js"},minty_module_list_view_ad_buckets_native_email_ad_zulily:{path:"minty/module/list-view-ad/buckets/native_email_ad_zulily_5_1788.js"},minty_module_list_view_ad_buckets_newsfeed_save_ad:{path:"minty/module/list-view-ad/buckets/newsfeed_save_ad_5_1595.js"},minty_module_list_view_ad_buckets_serp:{path:"minty/module/list-view-ad/buckets/serp_54_10489.js"},minty_module_list_view_ad_buckets_serp_ratings:{path:"minty/module/list-view-ad/buckets/serp_ratings_5_1057.js"},minty_module_list_view_ad_mas_search:{path:"minty/module/list-view-ad/mas-search_54_10489.js"},minty_module_list_view_ad_mb:{path:"minty/module/list-view-ad/mb_5_1618.js"},minty_module_list_view_ad_mb_native:{path:"minty/module/list-view-ad/mb-native_5_1618.js"},minty_module_list_view_ad_mb_native_feedback:{path:"minty/module/list-view-ad/mb-native-feedback_5_2214.js"},minty_module_list_view_ad_mb_native_img:{path:"minty/module/list-view-ad/mb-native-img_5_2113.js"},minty_module_list_view_ad_mb_native_vert_prev:{path:"minty/module/list-view-ad/mb-native-vert-prev_5_1533.js"},minty_module_list_view_ad_mbrec:{path:"minty/module/list-view-ad/mbrec_5_1618.js"},minty_module_list_view_ad_search:{path:"minty/module/list-view-ad/search_54_10489.js"},minty_module_list_view_ad_skysearch:{path:"minty/module/list-view-ad/skysearch_54_10489.js"},minty_module_moneyball_msg_read_img:{path:"minty/module/moneyball/msg-read-img_5_1618.js"},minty_module_moneyball_newsfeed_mb:{path:"minty/module/moneyball/newsfeed-mb_5_1618.js"},minty_module_moneyball_right_rail:{path:"minty/module/moneyball/right-rail_5_1618.js"},minty_module_moneyball_right_rail_carousel:{path:"minty/module/moneyball/right-rail-carousel_54_10489.js"},minty_module_newsfeed_filterbar:{path:"minty/module/newsfeed/filterbar_5_1882.js"},minty_module_newsfeed_listview:{path:"minty/module/newsfeed/listview_5_2029.js"},minty_module_newsfeed_loaderror:{path:"minty/module/newsfeed/loaderror_5_1477.js"},minty_module_newsfeed_storyview:{path:"minty/module/newsfeed/storyview_5_1005.js"},minty_module_offscreen_bin_autocompose_btntip:{path:"minty/module/offscreen-bin/autocompose-btntip_54_10489.js"},minty_module_offscreen_bin_autocompose_callout:{path:"minty/module/offscreen-bin/autocompose-callout_54_10489.js"},minty_module_offscreen_bin_compose_assist_callout:{path:"minty/module/offscreen-bin/compose-assist-callout_5_1494.js"},minty_module_offscreen_bin_convs_callout_rollup:{path:"minty/module/offscreen-bin/convs-callout_rollup_54_10489.js"},minty_module_offscreen_bin_folders_callout:{path:"minty/module/offscreen-bin/folders-callout_5_2211.js"},minty_module_offscreen_bin_folders_callout_two:{path:"minty/module/offscreen-bin/folders-callout-two_5_2211.js"},minty_module_offscreen_bin_holiday_themes_callout:{path:"minty/module/offscreen-bin/holiday-themes-callout_54_10489.js"},minty_module_offscreen_bin_hovercard_callout:{path:"minty/module/offscreen-bin/hovercard-callout_54_10489.js"},minty_module_offscreen_bin_multitask_callout_rollup:{path:"minty/module/offscreen-bin/multitask-callout_rollup_54_10489.js"},minty_module_offscreen_bin_native_ad_callout:{path:"minty/module/offscreen-bin/native-ad-callout_5_1554.js"},minty_module_offscreen_bin_native_ad_star:{path:"minty/module/offscreen-bin/native-ad-star_5_1137.js"},minty_module_offscreen_bin_nav_callout:{path:"minty/module/offscreen-bin/nav-callout_54_10489.js"},minty_module_offscreen_bin_newsfeed_callout:{path:"minty/module/offscreen-bin/newsfeed-callout_54_10489.js"},minty_module_offscreen_bin_peoplesearch_callout_rollup:{path:"minty/module/offscreen-bin/peoplesearch-callout_rollup_54_10489.js"},minty_module_offscreen_bin_searchsuggestion_callout:{path:"minty/module/offscreen-bin/searchsuggestion-callout_54_10489.js"},minty_module_offscreen_bin_themes_callout_rollup:{path:"minty/module/offscreen-bin/themes-callout_rollup_54_10489.js"},minty_module_offscreen_bin_tooltip_growth_onboarding:{path:"minty/module/offscreen-bin/tooltip-growth-onboarding_5_1704.js"},minty_module_search_advanced_search:{path:"minty/module/search/advanced-search_54_10489.js"},minty_module_shell_ad_onboardingTooltip:{path:"minty/module/shell-ad/onboardingTooltip_54_10489.js"},minty_module_shell_ad_onboardingTooltipMountains:{path:"minty/module/shell-ad/onboardingTooltipMountains_54_10489.js"},minty_module_shell_ad_onboardingTooltipSkier:{path:"minty/module/shell-ad/onboardingTooltipSkier_54_10489.js"},minty_module_shell_ad_searchads:{path:"minty/module/shell-ad/searchads_54_10489.js"},minty_module_shell_ad_sponads:{path:"minty/module/shell-ad/sponads_54_10489.js"},minty_module_shell_navigation_pane_account_item:{path:"minty/module/shell-navigation/pane/account-item_5_1100.js"},minty_module_shell_navigation_pane_account_menu:{path:"minty/module/shell-navigation/pane/account-menu_54_10489.js"},minty_module_shell_navigation_pane_inbox_sticky_refresh:{path:"minty/module/shell-navigation/pane/inbox-sticky-refresh_5_2089.js",requires:["_shared_module_folder_list_mailbox_list"]},minty_module_shoppingads_list_img_ad:{path:"minty/module/shoppingads/list-img-ad_5_1025.js"},minty_module_shoppingads_rr_img_three_items:{path:"minty/module/shoppingads/rr-img-three-items_5_1025.js"},minty_module_sponsored_themes_olympics_base:{path:"minty/module/sponsored-themes/olympics/base_54_10489.js"},minty_module_sponsored_themes_olympics_countdown:{path:"minty/module/sponsored-themes/olympics/countdown_54_10489.js"},minty_module_sponsored_themes_olympics_games_widget
:{path:"minty/module/sponsored-themes/olympics/games-widget_54_10489.js"},minty_module_sponsored_themes_olympics_olympics_event_card:{path:"minty/module/sponsored-themes/olympics/olympics-event-card_54_10489.js"},minty_module_sponsored_themes_olympics_single_medal_count:{path:"minty/module/sponsored-themes/olympics/single-medal-count_54_10489.js"},minty_module_tabs_navtabs_removable:{path:"minty/module/tabs/navtabs-removable_54_10489.js"},minty_module_tabs_tab_removable:{path:"minty/module/tabs/tab-removable_54_10489.js"},minty_module_toolbar_fragments_native_ad_group_rollup:{path:"minty/module/toolbar/fragments/native_ad_group_rollup_5_1215.js"},minty_module_toolbar_fragments_reply_group:{path:"minty/module/toolbar/fragments/reply_group_54_10489.js"},minty_module_toolbar_fragments_reply_group_conv:{path:"minty/module/toolbar/fragments/reply_group_conv_54_10586.js"},minty_module_toolbar_inbox:{path:"minty/module/toolbar/inbox_54_10489.js"},minty_module_toolbar_inbox_conversation_fresh_rollup:{path:"minty/module/toolbar/inbox/conversation-fresh_rollup_54_10489.js"},minty_module_toolbar_inbox_conversation_thread_rollup:{path:"minty/module/toolbar/inbox/conversation-thread_rollup_54_10489.js"},minty_module_toolbar_inbox_default_fresh_rollup:{path:"minty/module/toolbar/inbox/default-fresh_rollup_5_2114.js"},minty_module_toolbar_inbox_default_rollup:{path:"minty/module/toolbar/inbox/default_rollup_54_10489.js"},minty_module_toolbar_inbox_default_thread_rollup:{path:"minty/module/toolbar/inbox/default-thread_rollup_5_2114.js"},minty_module_toolbar_inbox_drafts_fresh_rollup:{path:"minty/module/toolbar/inbox/drafts-fresh_rollup_54_10489.js"},minty_module_toolbar_inbox_drafts_thread_rollup:{path:"minty/module/toolbar/inbox/drafts-thread_rollup_5_1137.js"},minty_module_toolbar_inbox_message_fresh:{path:"minty/module/toolbar/inbox/message-fresh_5_2114.js",requires:["minty_module_toolbar_fragments_reply_group"]},minty_module_toolbar_inbox_message_thread:{path:"minty/module/toolbar/inbox/message-thread_5_2114.js",requires:["minty_module_toolbar_fragments_reply_group_conv"]},minty_module_toolbar_inbox_search_fresh_rollup:{path:"minty/module/toolbar/inbox/search-fresh_rollup_54_10489.js"},minty_module_toolbar_inbox_search_rollup:{path:"minty/module/toolbar/inbox/search_rollup_54_10489.js"},minty_module_toolbar_inbox_search_thread_rollup:{path:"minty/module/toolbar/inbox/search-thread_rollup_54_10489.js"},minty_module_toolbar_inbox_sent_fresh_rollup:{path:"minty/module/toolbar/inbox/sent-fresh_rollup_54_10489.js"},minty_module_toolbar_inbox_sent_msg_rollup:{path:"minty/module/toolbar/inbox/sent-msg_rollup_54_10489.js"},minty_module_toolbar_inbox_sent_thread_rollup:{path:"minty/module/toolbar/inbox/sent-thread_rollup_5_1137.js"},minty_module_toolbar_inbox_spam_fresh_rollup:{path:"minty/module/toolbar/inbox/spam-fresh_rollup_54_10489.js"},minty_module_toolbar_inbox_spam_thread_rollup:{path:"minty/module/toolbar/inbox/spam-thread_rollup_5_1137.js"},minty_module_trending_gifts:{path:"minty/module/trending/gifts_5_2063.js"},minty_module_ui_player_click_record:{path:"minty/module/ui-player/click-record_54_10606.js"},minty_module_ui_player_controls:{path:"minty/module/ui-player/controls_54_10543.js"}}}};e.Env._loader?e.Env._loader._config({groups:t}):e._config({groups:t})},"1.0.0");


YUI.add("common-net-diag",function(e){e.namespace("common.net"),e.common.net.Diag=function(){function c(){return(new Date).getTime()}function h(t){function n(){var e,n;(e=i[t])&&!e.end&&(n=c()-e.start,n>u&&(e.stale=!0,a(["Session stale : ",t,":",e.key,"stale for",n," ms"].join(" ")),b("stalecheck")))}e.later(u,null,n)}function p(e,t){s[e]||(s[e]=[]),s[e].push(t)}function d(){var e,t=arguments[0],n=s["net:"+t],r="",i="",o,u=[];for(e=1;e<arguments.length;e++)u.push(arguments[e]);for(e=0;n&&e<n.length;e++)if(o=n[e].apply(null,u))r+=o.log&&o.log+";"||"",i+=o.dbgui&&o.dbgui+";"||"";return{log:r,dbgui:i}}function v(e,t,n){var r=e.id,s=d("start",e,t,n),o=t.method||(t.service||"")+e.request.url.match(/\/[^\/]*\?+/),u=s.log,f=s.dbgui||"";i[r]={id:r,key:o,desc:[f],start:e.start||c(),args:t&&t.args},b("start"),h(r),a(["net [start] id:",r,o,"desc:",f,u].join(" "))}function m(e,t){var n=i[e.id],r=d("complete",e,t),s=r.dbgui,o="",u=r.log||"";n&&(n.end=e.end||c(),s.length&&n.desc.push(s)),b("complete"),a(["net [complete] id:",n.id,n.key,"time :",o,u].join(" "))}function g(e,t,n){var r=i[e.id];r&&(r.end=e.end||c(),r.aborted=!0,r.timedout=n,b("abort"),a(["net [aborted] id: "+e.id,"timeout: ",n,r?r.end-r.start:-1,d("abort",e,t,n).log].join(" ")))}function y(e,t){var n=t.status,s=e.id,o=d("end",e,t),u=i[s],f=o.dbgui,l=o.log;u&&(f.length&&u.desc.push(f),b("done"),n!==r.abort&&r!==r.xhr&&a(["net [done] id:"+s,"total: "+(u.end?u.end-u.start:-1),"msecs http: "+t.status,l].join(" ")))}function b(){if(o){var e='<span style="color:red">Open sessions : </span>',t,n,r,s=[],u=[],a=[],c;for(n in i)c=i[n],c.done=c.end||c.abort,c.done?u.push(n):a.push(n);while(u.length&&u.length+a.length>10)delete i[u[0]],u.shift();for(n in i)c=i[n],r=c.stale&&'<span style="color:red">'+(c.end?c.aborted?c.timedout?"TIMEDOUT":"ABORTED":"DONE":"STALE")+"</span>"||!c.end&&"OPEN",t=["<br/>","[",c.id,"]",'<span style="color:blue">'+c.key+"</span>",r||"",c.desc.join("<br/>"),c.end?["<br/>client :",f,c.end-c.start,l,"ms"].join(" "):""].join(" "),s.push(t);s.reverse(),o.setBody(e+a.length+s.join(""))}}function w(){if(o)return;e.use("common-ui-diagpanel",function(){o=new e.common.ui.DiagPanel({},function(){o=null}),b("panelopen")})}var t=e.common,n=t.Utils,r=t.net.Status,i={},s={},o,u=NeoConfig.chkStaleReq||3e4,a=n.traceMsg,f='<span style="font-weight:bold">',l="</span>";e.on("net:start",v),e.on("net:complete",m),e.on("net:abort",g),e.on("net:end",y);var E={addLogger:p,showSessions:w};return E}()},"1.0.0",{requires:["common-net-session","common-utils"]});


YUI.add("common-net-session",function e(t){function N(e){try{t.fire.apply(t,e)}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:1",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:1"),t.use("common-utils-error",function(){r.error.report("netsession error",n,1,1,1)})}}function C(){return(new Date).getTime()}function k(){try{return a?new f:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:2",e,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:2")}return}function L(e){e._timeoutid&&(u.clearTimeout(e._timeoutid),e._timeoutid=l)}function A(e){try{var t=e._conn;t&&a&&delete t.onreadystatechange}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:3",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:3")}e._conn=l}function O(e,t,n){var r,i=e.match(/\?([\w\W])*/);return i=i&&i[0]?i[0].length>1?"&":"":"?",r=M(t,n),[e,r.length?i:"",r].join("")}function M(e,t){var r,i,s,o,u,a,f=[],l=_(e,t);for(r in e){a=l[r],u=a?encodeURIComponent(r):r,i=e[r];if(n.isArray(i))for(s=0,o=i.length;s<o;s++)f.push([u,a?encodeURIComponent(i[s]):i[s]].join("="));else f.push([u,a?encodeURIComponent(e[r]):e[r]].join("="))}return f.join("&")}function _(e,t){var r={},i;if(n.isObject(t))return t;if(t!==!1)for(i in e)r[i]=1;return r}function D(e){if(n.isString(e)){var t=this.responseHeaders,r=e.toLowerCase(),i;for(i in t)if(i.toLowerCase()===r)return t[i]}return l}function P(e){function n(e,t){var n=t;try{n=a[e]}catch(r){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:4",r,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:4")}return n}var r,i={},s=0,o,u,a=e._conn,f=a.status===1223,l,c,h,p,d,v;try{r={status:f?204:a.status,statusText:f?"No Content":n("statusText",""),callback:e._callback,request:e.request,responseHeaders:"",allHeadersText:"",getResponseHeader:D,responseText:n("responseText"),responseXML:n("responseXML"),id:e.id},l=a.getAllResponseHeaders(),v=l.split("\n"),o=v.length;if(r.status===340||r.status===342){switch(r.status){case 340:h=/"code":"(.*?)","message/g,p=h.exec(r.responseText),d=p&&p.length>1&&p[1]||"Unknown",r.status=500;break;case 342:r.status=502}t.fire("util:ymstats",{name:"http_status_map",tags:{httpStatus:a.status,farm:NeoConfig.farm.substr(1),code:d?d:"Unknown",browser:NeoConfig.browser}})}while(o--)c=v[s++],u=c.indexOf(":"),u!==-1&&(i[c.substring(0,u)]=c.substring(u+2));e.end&&e.start&&(r.curlTime=e.end-e.start),r.responseHeaders=i,r.allHeadersText=l}catch(m){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:5",m,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:5")}return r}function H(e,t,n){var r,i=e._conn,o,u="unknown",a=n&&n.name===d&&n.code,f=-1;try{t?(o=t.timeout?s.timeout:s.abort,u="abort"):(i&&(f=i.readyState),f<=3?(o=a,u="readyState."+f):r=P(e))}catch(c){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:6",c,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:6")}return r||(r={status:o||s.xhr,statusText:u,responseText:n&&n.message||l,callback:e._callback,request:e.request,getResponseHeader:D,id:e.id}),r}function B(e){r.assert(e._conn.readyState),e._conn.readyState===4&&(L(e),e.end=C(),N([m,e,e._callback]),F(e))}function j(e,t,n){function r(){N([y,e,t]),A(e),t=l,x--,x||N([b,1])}var i=e._callback||{},s=n?i.success:i.failure;s?s.call(i.scope,e,t,r):r()}function F(e,n){var r=0,i,s,o=e._conn;try{r=o&&o.status||0}catch(u){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:7",u,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:7"),t.fire("MailLog",{m:"Connection status unavailable"})}s=!n&&(r>=200&&r<300||r===1223),i=s?P(e):H(e,n),j(e,i,s)}function I(){var t,n;e.reqSeq++,t=e.reqSeq.toString(16),n=4-t.length;while(n--)t="0"+t;return NeoConfig.uuid?NeoConfig.uuid.replace("SEQN",t):""}t.namespace("common.net");var n=t.Lang,r=t.common.Utils,i=t.common.net,s=i.Status={},o=0,u=t.config.win||window,a=typeof XMLHttpRequest!="undefined",f=t.config&&t.config.net?t.config.net.XMLHttpRequest:window.XMLHttpRequest,l,c="GET",h,p=[],d="net:exc",v="net:start",m="net:complete",g="net:abort",y="net:end",b="net:idle",w="net:online",E="net:offline",S=35e3,x=0,T=t.one("body");e.reqSeq||(e.reqSeq=0),t.Node.DOM_EVENTS.online=t.Node.DOM_EVENTS.offline=1,T.on("online",function(){t.fire(w)}),T.on("offline",function(){t.fire(E)}),i.Session=function(e,t,n,r,i,s){var u=this,a;n=n?n.toUpperCase():c,a=n===c,u.request={url:e,urlparams:a?r||{}:{},post:a?l:r,mthd:n,enc:_(r,i),headers:{}},u._callback=t,!s&&s!==0?u.id=o:u.id=s,++o};var q=i.Session;q.formatQueryParams=M,q.genReqID=I,q.suspendRequests=function(e){h=e},q.resumeRequests=function(){h=l;while(p.length)p[0].send(),p.splice(0,1)},q.isIdle=function(){return x===0},q.prototype={_callback:{},_conn:l,tries:0,_timeoutid:l,start:0,end:0,addUrlParam:function(e,t,n){var r=this.request,i=r.urlparams;i[e]=t,n!==!1&&(r.enc[e]=1)},send:function(){var e=this,r=e.request,i=e._callback||{},o=r.mthd,a=i.method||"",f=r.url,c,m,g,y,w=t.common.net.Session,E;if(h){p.push(e);return}e.abort();try{e.tries++,r.rand=r.urlparams.r||(new Date).getTime(),r.urlparams.ymreqid=w.genReqID(),NeoConfig.expBucketId!=="0"&&(r.urlparams.ymbucketid=NeoConfig.expBucketId),f=O(f,r.urlparams,r.enc);if(f.length>=2048)throw{name:d,code:s.maxsize};e._conn=k(),c=e._conn,m=r.post,r.postdata=m=n.isFunction(m)?m():m,c.open(o,f,!0),e.applyHeaders(),c.onreadystatechange=
function(){e._conn&&B(e)},y=i.timeout,y&&(e._timeoutid=u.setTimeout(function(){e.abort(!0)},y)),e.end=0,e.start=C(),N([v,e,i,f]),c.send(m||""),x||N([b,0]),NeoConfig.sessionTracer&&o==="POST"&&(g=m.replace(/"simplebody":{.*},/,'"simplebody":{<filtered>},'),a==="SendMessage"&&(g="<filtered>"),t.mail.model.DataStore.Sessions.addRequest({method:a,url:f,postbody:g})),x++}catch(S){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-session:8",S,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-session:8"),E=H(e,l,S),u.setTimeout(function(){j(e,E)},0)}},setHeader:function(e,t){this.request.headers[e]=t},getHeaders:function(){var e=[],t,n=this.request.headers;for(t in n)e.push([t,n[t]].join("="));return e.join(";")},applyHeaders:function(){var e,n=this,i=n._conn,s=n.request.headers;if(i){r.assert(!r.isEmpty(s));for(e in s)i.setRequestHeader(e,s[e]);t.config&&t.config.net&&i.setRequestHeader("Cookie",t.config.net.cookie)}},abort:function(e){var t,n=this._conn;n&&(t=this,n.readyState!==0&&n.readyState!==4&&(L(t),A(t),n.abort(),N([g,t,t._callback,e]),F(t,{timeout:e})))}},t.mix(s,{timeout:-1,xhr:-2,maxsize:-3,abort:-4})},"1.0.0",{requires:["node","event-custom","common-utils","mail-model-datastore"]});


YUI.add("common-net-sessionmgr",function(e){var t=e.common.net;t.SessionMgr=function(){function d(e,t,n,r,i){var s;return e&&(s={code:e,message:t,detail:n,host:i,subcode:r}),s}function v(t){var n=t.responseText||"";n=n.replace(/<!--?(.*)?-->[\r\n]*$/,"");if(e.Lang.trim(n)===""){m(n,t);return}try{t.body=i.parse(n)}catch(r){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-sessionmgr:1",r,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-sessionmgr:1"),m(n,t,r.message)}}function m(t,n,r){var i,o,u,a=!1,f=!1,l=/^\s*<!doctype\s*[^>]*?>\s*/i,c=/\n/g,h=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;e.Lang.trim(t)===""?u="Empty JSON body":t.match(l)?(u="!DOCTYPE is presented at the beginning of json response",g(n,l),a=!0):t.match(h)?(u="Script is presented in json response",g(n,h),a=!0):t.match(c)?(u="New line char present in the response",g(n,c),a=!0):u="Unknown JSON parse error",e.fire("MailLog",{m:u}),i=r?"Response JSON parse error : "+r:"Empty JSON request";if(!a){o=s.parse;if(parseInt(NeoConfig.log_error_response,10)===1||e.Array.indexOf(NeoConfig.enable_resp_log_farms,NeoConfig.farm)>-1)f=!0;e.fire("MailLog",{m:i,errorType:u,resp:f?t:"filtered",header:n.allHeadersText,yid:NeoConfig.loginId}),n.fault=d(o,(r||"")+" Response parse failed.",{respTxt:t})}}function g(e,t){e.responseText=e.responseText.replace(t,""),v(e)}function y(e,t){var n=L.validate[e];n?n(t):t.body=t.responseXML||t.responseText}function b(e,t){var n,i=0,o,u=t.callback;e.multipart&&(t=u.parseMultiPartResponse(t)),n=s.getErrType(e,t);if(n){if(n===s.conn||n===s.unavailable)i=2;o=n===s.abort||n===s.timeout||n===s.login||n.indexOf(s.send)===0,t.fault={code:n}}else y(u.responseType,t);u.formatter&&u.formatter(e,t),u.retries=o?0:r.isNumber(u.retries)?u.retries:i}function w(t){var n=t.allHeadersText||"",r=e.Lang.trim(t.responseText),i;if(n.indexOf("Content-Type: text/html")>-1||(/^<html/i.test(r)||/^<!doctype html/i.test(r))&&(/<\/html>[\s]*$/i.test(r)||/<\/html>[\s]*[\r\n]*<!--?(.*)?-->[\r\n]*$/i.test(r)))return/<\/html>[\s]*$/i.test(r)?i="External":/<\/html>[\s]*[\r\n]*<!--?(.*)?-->[\r\n]*$/i.test(r)?i="Internal":i="Unknown",i}function E(e){e.fault=d(s.unknown)}function S(e){function t(){var e=this;e.success=e.failure=T,e.scope=L}return t.prototype=e,t.prototype.constructor=t,new t}function x(e){return e.constructor.prototype}function T(n,r,u){function T(){(g=h&&h.failure)&&g.call(v,a,d,n),u(),C()}var a=r,f=r.callback,h,p=r.status,d,v,m,g,y,w,S;y=e.Object.getValue(n,["request","postdata"]);if(y&&y.indexOf&&y.indexOf("BatchExecute")!==-1&&y.indexOf("spam")!==-1){try{y=i.parse(y)}catch(N){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-sessionmgr:2",N,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-sessionmgr:2"),y=null}w=e.Object.getValue(y,["params","0","call","0"]),e.Object.getValue(w,["FlagThreads","setFlags","spam"])?(S=e.Object.getValue(w,["FlagThreads","cids"]),e.fire("MailLog",{m:S.join(","),statusCode:n._conn&&n._conn.status},!0,"Mark Cov Spam")):e.Object.getValue(w,["FlagMessages","setFlags","spam"])&&(S=e.Object.getValue(w,["FlagMessages","mid"]),e.fire("MailLog",{m:S.join(","),statusCode:n._conn&&n._conn.status},!0,"Mark Msg Spam"))}try{b(n,a);if(a.fault&&n.tries<=f.retries)return a.fault.code===s.conn&&o.stat("httpconnerror","url=>"+a.request.url+",status=>"+p+",browser=>"+NeoConfig.browser+",tries=>"+n.tries),e.later(this._retryTimeout(n.tries),null,function(){n.send()}),e.fire("MailLog",{m:"Request failed, retrying in "+this._retryTimeout(n.tries)/1e3+" seconds",url:n.request.url,statusCode:n._conn.status}),!0;p!==200&&!a.fault&&E(a),h=a.callback=x(f),h&&(d=h.args,v=h.scope),a.fault?p===t.Status.abort?T():(e.fire(c,n,a),s._handle(n,a,T)):(e.fire(l,a),m=h&&h.success,m&&(m.call(v,a,d,n),u(),C()))}catch(N){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-sessionmgr:3",N,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-sessionmgr:3"),e.fire("MailLog",{m:"sessionmgr:onResponse exc : "+N.message})}}function N(e){f.push(e)}function C(){if(!a&&f.length){var e=f.shift();e&&e.send?e.send():C()}}function k(e,t){var n=t.data||"",i,s={},o,u=null,a;return t=t||{},i=t.on||{},n=t.data||"",o=t.method||"GET",s.service=t.service,s.serviceCredType=t.serviceCredType,s.scope=t.context,s.timeout=t.timeout,s.args=t.args,i.success&&(s.success=function(e,t){i.success(0,e,t)}),i.failure&&(s.failure=function(e,t){i.failure(0,e,t)}),s.responseType=t.responseType||"json",s.suppressCodes=t.suppressCodes||["*"],a=r.isUndefined(t.sync)?!0:!t.sync,L.request(e,n,s,o,u,a)}var n=t.Session,r=e.Lang,i=e.JSON,s=t.Error,o=e.common.Utils.ymmastats,u=NeoConfig.wssid,a,f=[],l="net:success",c="net:failure",h="net:suspended",p="net:resumed",L={request:function(e,n,r,i,s,o,l){var c,h,p,d;r=r||{},r.args||(r.args={}),p=S(r),c=new t.Session(e,p,i,n,s),c.multipart=l,c.setHeader("Content-Type","application/"+(p.responseType||"json")),u&&!r.suppressWssid&&c.addUrlParam("wssid",u,!1);if(r.urlParams)for(d in r.urlParams)r.urlParams.hasOwnProperty(d)&&c.addUrlParam(d,r.urlParams[d]);return c.callbackData=r.args,o?a||f.length?N(c):c.send():(h=c.send,c.send=function(){var e=this;e.send=h,a||f.length?N(e):h.apply(e)}),c},requestProxy:k,formatQueryParams:function(e,t){return n.formatQueryParams(e,t)},getWssid:function(){return u},setWssid:function(e){u=e;for(var t=0,n=f.length;t<n;t++)f[t].addUrlParam("wssid",u,!1)},makeFaultObject:d,validate:{json:v},isHtml:w,suspend:function(t){a=t,e.fire(h,t)},resume:function(){a=0,C(),e.fire(p)},queue:N,_qsize:function(){return f.length},_qclear:function(){f=[]},pingTest:function(){},_retryTimeout:function(e){return Math.pow(e,2)*1e3}};return L}()},"1.0.0",{requires:["event-custom-base","common-net-session","common-net-error-base","json-parse","ymma-stats"]});


YUI.add("common-net-error-base",function(e){function a(e){for(var t=0;t<o.length;t++)if(e===o[t])return!0}function f(e,t){t=t&&t.replace(/<br\/>/g,"\n").replace(/<p\/>/g,"\n"),t&&window.alert(t),e&&e()}e.namespace("common.net");var t=e.common,n=t.net,r=t.Utils,i="HTTPError.",s=n.Error=n.Error||{},o=[502,900,12002,12152,12007,12029,12030,12031,13030,0],u=s.handler=[];e.mix(s,{base:i,conn:i+"conn",ydod:i+"999",abort:"abort",timeout:"timeout",unknown:"unknown",login:"login",loginfail:"loginfail",parse:"parse",send:"xhrsend",wssid:"invalidwssid",unavailable:i+"503",isHttp:function(e){return/^HTTPError/.test(e)},isConn:function(e){return e==="HTTPError.conn"},isUnexpected:function(e,t){return!a(e)&&s.isHttp(t)&&e!==2&&e!==999&&e!==302},getErrType:function(e,r){var o=r.status,u=n.Status,f,l;return o!==200&&o!==500&&(o===u.xhr||o===u.maxsize?f=s.send+"."+r.statusText:o===u.abort?f=s.abort:o===u.timeout?f=s.timeout:(e.tries===1&&(l=(o===0||o===302)&&!t.UserSession.same()),f=l?s.login:a(o)?s.conn:i+o,r.status=l?401:o===0?13030:o)),f},_fireHandlers:function(){arguments[arguments.length-1]()},_handle:function(){var t=arguments;e.use("common-net-error",function(){s._fireHandlers.apply(s,t)})},onError:function(t,n){var i;return r.assert(t),n?(i=e.Array.indexOf(u,t))!==-1&&u.splice(i,1):(u.push(t),i=1),i>=0},show:f,showAlert:f})},"1.0.0",{requires:["common-utils","common-user-session"]});


YUI.add("common-net-error",function(e){function E(t,n,r,i,o){i=i||{},e.mix(i,{hd:r||l(strings.str_error_title,null,null,null,strings),bd:o?n:'<div class="dlg-error">'+n+"</div>"}),n?(s.assert(h),h?h.alert(i,{ok:{handler:t}}):a.showAlert(t,n,r,i)):t&&t()}function S(t,n,r,i,o){o=o||{},e.mix(o,{hd:i||l(strings.str_error_title,null,null,null,strings),bd:'<div class="dlg-error">'+r+"</div>"}),r?(s.assert(h),h?h.confirm(o,{ok:{handler:t},cancel:{handler:n}}):a.showAlert(t,r,i,o)):t&&t()}function x(n,i,s){function p(t){var n=t&&t.callback;if(t.id===f||n&&!n.suppressWssid)delete g[f],e.unsubscribe(u)}if(w)return o.queue(n),!0;var u,f=n.id,l,c=g[f]||0,h=i.fault;try{c===0&&(u=e.on("net:success",p)),g[f]=++c;if(c===t){h.code=a.wssid,h.message=["wssid net :",o.getWssid(),"resp :",s].join(" "),T({msg:strings.str_error_wstoken,stat:"BadWssid"});return}if(c>=t)return!0;s&&(l=r.getState(),l.newuser?k():(H(s),n.addUrlParam("wssid",s,!1),n.send()))}catch(d){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-net-error:1",d,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-net-error:1")}return!!s}function T(t){var n=t||{},r,i=n.url||p;e.later(0,null,function(){i?window.location=i:window.location.reload()}),r=document.body;while(r.children.length)r.removeChild(r.children[0])}function N(e){var t,n=e.request;if(n.mthd==="GET")return t=o.request(n.url,o.formatQueryParams(n.urlparams,n.enc),e.callback,"POST",n.enc),t.send(),!0;return}function C(e){var t,n="us",r=e&&['"',strings.str_cfg_url_arc_help+"?token=",e,"&.intl=",n,"&property=abuse_ops",'"'].join("");t=["<p class=userMessage >",strings.str_error_ydod_error,".<br/>",r?strings.str_error_ydod_token_link.replace("{linkURL}",r):"","</p>"].join(""),E(null,t,strings.str_error_ydod_title)}function k(){T({msg:l(strings.str_error_reload_user_change,{username:c.get("userSendPref.loggedInAlias")},null,null,strings),stat:"UserChange"})}function L(){w&&w.destroy(),b=w=null,r.getState().newuser?e.later(0,null,k):(r.update(),m?T({url:m,stat:"HostCorrection"}):e.fire("net:reloginSuccessful")),e.fire("util:ymstats",{name:"relogin_callback",tags:{farm:NeoConfig.farm.substr(1)}})}function A(t,n){n&&n._callback&&n._callback.service&&n._callback.service==="msws"&&(d="https://login.yahoo.com/config/refresh_cookie?.src=ym&.done=");var r=d+p.replace(/[^\/]+([?#]+|$)/,"relogin?"),i=function(){b&&b.close(),b=window.open(r,"_blank",NeoConfig.loginParams||"height=650,width=850,resizable,scrollbars=yes")},s=l(strings.str_error_title,null,null,null,strings),o={hd:s,bd:'<div class="dlg-error">'+(t||strings.str_error_relogin)+"</div>",suppressActive:!0,maskId:"opaque-overlay",noScroll:!0,hideClose:!0,disableEsc:!0};h&&h.alert(o,{ok:{handler:i,stopDestroy:!0,text:strings.str_error_signin}},function(t){w=t,window.reloginCallback=L,e.fire("net:reloginAttempted",{request:n})})}function O(e){var t=e&&e.request;o.suspend("relogin"),y=t&&t.id||-1,t&&o.queue(t)}function M(e){var t=e&&e.request;t&&o.queue(t)}function _(){o.resume()}function D(){return!!w}function P(){return A(),!0}function H(e){NeoConfig.wssid=e,o.setWssid(e)}function B(t,n,r){if(NeoConfig.isTestMail)return;if(w)return e.fire("net:reloginAlreadyActive",{request:t}),!0;var i=n||{};return t&&t.id===y?(s.assert(0,"cyclic login"),r&&r.fault&&(r.fault.code=a.loginfail),s.netError("net:ReloginCyclic_"+[e.JSON.stringify(t.request),r.responseText,t.id,y].join(" : ")),!1):(m=i.url,s.assert(h),j(t,r),A(i.msg,t),!0)}function j(t,n){var r,i,s;t=t||{},n=n||{},r={m:"net:Relogin",yid:NeoConfig.loginId,request:t,response:n,id:t.id,relgSrc:y},i=t.request&&t.request.url,/\/ws\/mail\//.test(i)||(r.reason="nonwsmail"),!/Credentials/.test(n.responseText)&&!/EC-4008/.test(n.responseText)&&(r.reason='"unknowncode'),e.fire("MailLogClean",r,1,"net:Relogin"),s=NeoConfig.farm&&NeoConfig.farm.substr(1),e.fire("util:ymstats",{name:"relogin",tags:{reason:r.reason,status:n.status,code:n.body&&n.body.code,farm:s,service:t._callback&&t._callback.service}})}function F(e,t,n){var r=t.responseHeaders,i=t.responseText||strings.str_error_Connect;e===302&&r&&r.Location?window.open(r.Location):n||I(e,t,{message:i})}function I(t,n,r){function i(e,t){var n,r={success:function(e){t(e.responseText)},failure:function(){t(s.escapeHtml(e))},suppressCodes:["*"],timeout:1e4},i="content="+encodeURIComponent(e)+"&restrictOff=true";n=o.request("yiv",i,r,"POST"),n.setHeader("Content-length",i.length),n.setHeader("Connection","close"),n.send()}function u(t){var i,s=a.isConn(c),o=r&&r.title&&l(r.title,null,null,null,strings)||l(strings["str_error_"+(s?"UnexpectedTitle":"MailErrorTitle")],n),u=f||strings["str_error_"+(s?"Connect":"MailUnexpectedResponse")],h=e.common.Utils.features,p=h.enabled("NotificationsV2"),d,v,m,g,y;s&&p?(d=e.UA.userAgent,v={menu_start:"<b>",menu_end:"</b>",gt:">",line_start:'<div class="tae-dialog network-help">',line_end:"</div>"},m={menu_start:"<b>",menu_end:"</b>",list_start:"<ol>",list_end:"</ol>",item_start:"<li>",item_end:"</li>",line_start:"<div>",line_end:"</div>"},d.indexOf("Win")!==-1&&d.indexOf("NT 5.")!==-1?y=l(strings.str_tae_winxpnetworkresolution,m,null,null,null,null):d.indexOf("Win")!==-1&&d.indexOf("NT 6.0")!==-1?y=l(strings.str_tae_winvistanetworkresolution,v,null,null,null,null):d.indexOf("Win")!==-1?y=l(strings.str_tae_win7networkresolution,v,null,null,null,null):d.indexOf("Mac")!==-1&&(y=l(strings.str_tae_macnetworkresolution,v,null,null,null,null)),g=l(e.ui.Templates._shared_module_offscreen_bin_notification_single_inline_text.base,{nf_text:strings.str_nointernetconn,inline_text:y},null,null,null,strings),e.common.ui.NotificationV2.notify(g,{type:"attention",close:!0,customClass:"single-inline",closeOnExternalClick:!0})):(i=[l(u,null,null,null,strings)],t&&i.push("<div>"+t+"</div>"),i=i.join(""),E(null,i,o,i.length>1e3&&{modal_classes:"lg",focusedNode:".default"},!0))}var f=r&&r.message,c=n.fault.code;a.isUnexpected(t,c)&&o.isHtml(n)?i(n.responseText,u):u()}function q
(e){var t=e.match(/[\&\?(amp;)>]wssid=([^<\&}\"]+)/i)||e.match(/^wssid=([^<\&}\"]+)/i)||e.match(/<WSSID>([\w\W]+)<\/WSSID>/i)||e.match(/"wssid":"(.*?)"/i);return t&&t[1]}function R(e,t,n){var r,i;for(r=0;t&&r<t.length;r++){i=t[r];if(i==="*"||n(i))return!1}for(r=0;e&&r<e.length;r++){i=e[r];if(i==="*"||n(i))return!0}}function U(e){var t=v;return e&&e.serviceCredType&&(t=v?e.serviceCredType!=="loose":e.serviceCredType==="strict"),t}function z(e,t,n,r,i,s){var o=r.callback||{},f,l,c,h,p=r.fault,d=p&&p.code,v=a.isConn(d),m=o.suppressNotification||R(o.suppressCodes,o.exceptCodes,function(e){return t===e});switch(t){case 402:f=x(n,r,i);break;case 401:l=U(o),l&&(f=B(n,i,r),s=!1);break;case 310:f=T(i);break;case 429:case 999:m||C(i);break;case u.maxsize:f=N(r);break;case 404:case u.abort:break;case 302:case 13030:F(t,r,m);break;case u.xhr:c=!0;default:m||I(t,r,i)}s&&!f&&(h=v?"E_HTTPConnect":c?"E_XHR":"E_HTTP"),e.done(f)}function W(e,t,n,r,i,s){var o=r||n.status,u=i||(o===402?q(n.responseText):o===999?null:n);z(e,o,t,n,u,s)}var t=3,n=e.common,r=n.UserSession,i=n.net,s=n.Utils,o=i.SessionMgr,u=i.Status,a=i.Error,f=a.handler,l=s.substitute,c=n.persist.UserData,h=n.ui&&n.ui.DialogHelper,p=document.location.href,d=l(strings.str_cfg_url_yahoo_relogin,null,null,null,strings),v=!0,m,g={},y,b,w=null;NeoConfig.isCorpmail&&(d=d.replace(/\?/,"?.partner=ycorp&")),a._fireHandlers=function(){var e,t,n,r=new i.ErrorEvent(arguments,W,a),s=[r];for(e=0,t=arguments.length-1;e<t;e++)s.push(arguments[e]);for(e=0;e<f.length;e++)if(r.isdone()||(n=f[e].apply(this,s)))break;!r.isdone()&&n!==r.asyncval&&r.callDefault(null,null,1)},e.on("net:reloginAttempted",O),e.on("net:reloginAlreadyActive",M),e.on("net:reloginSuccessful",_),e.mix(a,{relogin:B,simpleRelogin:P,isReloginActive:D,setWssid:H,reloadUserChange:k,show:E,showConfirm:S,suppress:R,logRelogin:j,_handle:function(){a._fireHandlers.apply(a,arguments)},_parseWssid:q},!0)},"1.0.0",{requires:["common-net-error-base","common-net-errorevent","common-net-sessionmgr","common-ui-dialog-helper","json-stringify","common-persist-user-data","launch-utils","common-utils","mail-common-utils-features","common-ui-notification-v2","_shared_module_offscreen_bin_notification_single_inline_text"]});


YUI.add("common-net-errorevent",function(e){e.namespace("common.net");var t=e.common.net,n=function(e,t,n){var r=this;r.args=e,r._def=function(e){t?t.apply(n,e):r.done()}};n.prototype={async:function(t){var n=this;return n.timer||(n.timer=e.later(NeoConfig.timerErrEv||1e4,null,function(){n.isdone()||(t?t():n.callDefault(null,null,1))})),-1},asyncval:-1,callDefault:function(e,t,n){var r,i,s,o=this;if(!o._h){s=o.args,i=[o];for(r=0;r<s.length-1;r++)i.push(s[r]);i.push(e),i.push(t),i.push(!!n),o._def(i)}},isdone:function(){return this._h},done:function(e){var t,n=this;n.timer&&n.timer.cancel(),n._h||(n._h=!0,n.retry=e,e||(t=n.args,t[t.length-1]()))}},t.ErrorEvent=n},"1.0.0",{requires:[]});


YUI.add("common-persist-neo-data",function(e){function n(e){var t={cookieDomain:{writeOnce:!0},cookiePath:{writeOnce:!0},cookieID:{writeOnce:!0},servername:{writeOnce:!0},farm:{writeOnce:!0},wssid:{writeOnce:!0},neoguid:{writeOnce:!0},hasAds:{writeOnce:!0},om:{writeOnce:!0},global_url_base:{writeOnce:!0},extraURLArgs:{writeOnce:!0},mailnetQueue:{writeOnce:!0}};this.addAttrs(t,e)}var t=e.namespace("common.persist");e.augment(n,e.Attribute),t.NeoData=new n(window.NeoConfig)},"1.0.0",{requires:["attribute"]});


YUI.add("common-persist-cookie-data",function(e){function i(e){return e=e||r,t.Cookies[e]?t.Cookies[e]:(t.Cookies[e]=new o(e),t.Cookies[e])}function s(i){i=i||r,e.Cookie.remove(i,{domain:n.get("cookieDomain"),path:n.get("cookiePath")}),t.Cookies[i]&&delete t.Cookies[i]}function o(t){this.name=t;if(e.Cookie.get(this.name)===null)this.name!=="T"&&this.name!=="Y"&&e.Cookie.set(this.name,"",this.getCookieArgs());else{var r=n.get("cookiePath");r&&r.length>2&&r[r.length-1]==="/"&&(r=r.slice(0,r.length-1),e.Cookie.remove(t,{domain:n.get("cookieDomain"),path:r}))}}var t=e.namespace("common.persist"),n=t.NeoData;t.Cookies=[];var r="YM.NEO_"+n.get("cookieID");o.prototype.getCookieArgs=function(){return{expires:new Date((new Date).getTime()+7776e6),domain:n.get("cookieDomain"),path:n.get("cookiePath")}},o.prototype.set=function(t,n){return e.Cookie.setSub(this.name,t,n,this.getCookieArgs())},o.prototype.get=function(t){return e.Cookie.getSub(this.name,t,this.getCookieArgs())},o.prototype.remove=function(t){return e.Cookie.removeSub(this.name,t)},e.augment(o,e.Attribute),t.getCookie=i,t.removeCookie=s},"1.0.0",{requires:["cookie","attribute","common-persist-neo-data"]});


YUI.add("common-persist-user-data",function(e){function t(e){this.attributeConfig={userFeaturePref:{},userUIPref:{},userSpamPref:{},userVacationPref:{},userSendPref:{},userPopPref:{},externalAccounts:{},disposableAddresses:{},aliases:{},otherYahooMboxes:{},blockedAddresses:{},switches:{},parentalControls:{},filters:{},loaded:{value:!1}},this.addAttrs(this.attributeConfig,e),e?this.set("loaded",!0):this.load()}function n(t){function l(){t.knownAddresses=null,t.detach(f+"*")}var n={},r=t.get("userSendPref.defaultFromAddress").toLowerCase(),i=t.get("externalAccounts.extAccount")||[],s=t.get("aliases.alias")||[],o=t.get("disposableAddresses").deaName||[],u=function(e){var t=e.address;t&&t!==""&&(n[t.toLowerCase()]=1)},a="Change",f="knownAddress|";return n[r]=1,e.Array.each(i,u),e.Array.each(s,u),e.Array.each(o,u),t.after(f+"userSendPref"+a,l),t.after(f+"externalAccounts"+a,l),t.after(f+"aliases"+a,l),t.after(f+"disposableAddresses"+a,l),n}e.namespace("common.persist"),t.prototype.load=function(t){var n=this;e.mail.net.Transport.request("GetUserData",{bidiDetection:NeoConfig.bidi},{success:function(r){var i;r=r.body.result.data;for(i in r)n.set(i,r[i]);n.set("loaded",!0),t&&e.fire("uData:change",r)},failure:function(){}},!0)},t.prototype.update=function(t){e.mail.ui.Workspace&&e.mail.ui.Workspace.moUpdate(t)},t.prototype.saveOne=function(e){var t,n,r,i,s={},o=this.get(e);n=e.split("."),r=n.length-1,i=s;for(t=0;t<r;t++)i[n[t]]={},i=i[n[t]];i[n[t]]=o,this.saveRequest(s)},t.prototype.save=function(){var e={},t,n,r=["userFeaturePref","userUIPref","userSpamPref","userVacationPref","userSendPref","userPopPref","blockedAddresses","switches","aliases"];for(n in r)t=r[n],t==="aliases"?e.alias=this.get("aliases.alias"):t==="userPopPref"?this.get(t+".popSetupEligible")&&(e[t]=this.get(t)):e[t]=this.get(t);this.saveRequest(e)},t.prototype.saveRequest=function(t){e.mail.net.Transport.request("SetUserData",{setdata:t},{success:function(){},failure:function(){}},!0)},t.prototype.knownAddresses=null,t.prototype.isUsersEmailAddress=function(e){var t=this;return t.knownAddresses||(t.knownAddresses=n(t)),t.knownAddresses[e.toLowerCase()]},e.augment(t,e.Attribute);if(NeoConfig.userDataObj){var r=NeoConfig.userDataObj.userSendPref,i=NeoConfig.userDataObj.externalAccounts,s=e.common.Utils.unescapeHtml,o,u,a;r&&(r.defaultFromName=s(r.defaultFromName));if(i){o=i.extAccount;if(o){a=o.length;for(u=0;u<a;u++)o[u].fromName=s(o[u].fromName),o[u].username=s(o[u].username)}}}e.common.persist.UserData=new t(NeoConfig.userDataObj)},"1.0.0",{requires:["attribute","mail-net-transport","json","common-utils"]});


YUI.add("common-ui-tabs-base",function(e){var t=e.Node.one,n=e.Node.create,r=e.Lang,i=!1,s=!1,o={convpane:".t-mail",messagepane:".t-mail",author:".t-draft",search:".t-search"},u=e.common.Utils.ymmastats,a=e.one("#nav"),f=function(){function H(t){e.fire("util:ymstats",{name:"nav",tags:{view:t}})}function B(){function n(t){if(window.history&&!e.UA.ie){var n=window.location.search&&window.location.search.substr(1)||"",r=n!==""?e.QueryString.parse(n):{},i=window.location.hash;t=="inbox"&&r.action?delete r.action:r.action=t,window.history.pushState({},"",window.location.pathname+"?"+e.QueryString.stringify(r)+window.location.hash)}}y=t(l),b=t(c),w=t(p),y.plug(e.comms.ui.NodeFocusBase,{descendants:"a",keys:{next:"39",previous:"37"}});if(!NeoConfig.multitask)return;y.delegate("click",function(t){var n=t.currentTarget.one("a").get("id"),r=j(n);if(!r)return;f.tabClicked=!0;if(t.target.hasClass("close-tab")){r.set("close",1);return}e.fire("tab:click",r),r.get("active")!==1&&(e.fire("util:ymstats",{name:"tabSwitchRecent"}),f.holdNavSwitch=1,f.hideOnLeave=1,m.detachTabHandlers(),$(r,null,!0),r._bindConvPaneListener())},".t-el"),t(h).on("mouseleave",function(){var t;f.hideOnLeave?(f.holdNavSwitch===1&&f.switchLaterNav&&(e.fire("navigation:switch",{type:f.switchLaterNav}),f.switchLaterNav=null),K(nt()),f.hideOnLeave=0):f.tabClicked&&(t=nt(),t.widget&&"search"===t.widgetType&&e.fire("navigation:switch",{type:"searchNav"})),f.tabClicked=!1,f.holdNavSwitch=0}),e.on("pagemodeChange",function(e){at(e)}),e.on("tabview:handleKeyDown",ot),e.on("key",ot,document,"down:"+A,f),e.on("keyup",st,document,f),e.on("tab:addRef",function(e){var t,n,r,i;t=f.refTabCheck(e.data),m.detachTabHandlers(),t&&(i=!!(t&&t.cfg&&t.cfg.widget),i&&(r=t.cfg.widget.rawAttr,r.fid=e.data.fid),t.set("close",1),i&&(e.widget=new t.cfg.widget.constructor(r))),t=f.addTab(e,X(e)),n=y.one(".t-el.active"),n&&n.removeClass(d),t.elTab.addClass(d)}),e.on("tab:removeRef",function(e){var t;t=f.refTabCheck(e.data),t&&t.set("close",1)}),e.on("nav:inbox",function(){$(j("tabinbox"),0,0,0,1),e.fire("mt:click",{action:"inbox_leftnav"}),n("inbox"),H("inbox")}),e.on("nav:contacts",function(){$(j("tabcontacts"),0,0,0,1),e.fire("mt:click",{action:"contacts_leftnav"}),n("contacts"),H("contacts")}),e.on("nav:calendar",function(){if(T.features.enabled("gCal")){e.one(".nav-item-calendar a").blur(),window.open(T.settings.value("corpcal_destination"),"_corpcal");return}$(j("tabcalendar"),0,0,0,1),e.fire("mt:click",{action:"calendar_leftnav"}),n("calendar"),H("calendar")}),e.on("nav:notepad",function(){$(j("tabnotepad"),0,0,0,1),e.fire("mt:click",{action:"notepad_leftnav"}),n("notepad"),H("notepad")}),e.on("nav:messenger",function(){e.fire("mt:click",{action:"msngr_nav"}),H("messenger")}),e.on("nav:newsfeed",function(){$(j("tabnewsfeed"),0,0,0,1),n("newsfeed"),H("newsfeed")})}function j(e){var t,n=E.length;for(t=0;t<n;t++)if(E[t].get("id")===e)return E[t];return null}function F(){var t=E.length,n,r,i=O;for(r=1;r<t;r++)E[r].isRemovable&&E[r].time<i&&(n=E[r],i=E[r].time);n&&(n.set("close",1),e.fire("util:ymstats",{name:"tabAutoClose",tags:{tabsEnabled:NeoConfig.tabs?1:0}}))}function I(){var e=0;b&&(e=b.all(".nav-tab-li.hidden").size());while(E.length-e>=M)F()}function q(e,t){E.push(t),S[e]||(S[e]={}),t.set("collection",e),S[e][t.get("id")]=t}function R(e,t){var n=S[e];if(n){var r=t.get("id");if(n[r])return delete n[r],!0}return!1}function U(t,n){var r;I(),t.tab&&(t.tab.addTabEl(),t.tab.set("title",t.p_label)),n.p_label=t.p_label,n.s_label=t.s_label,n.s_labelDir=t.s_labelDir,r=nt(),n.prevTabId=r?r.get("id"):-1,n.srcTabType=r?r.widgetType:"",t.widget&&t.widget!==n.get("widget")&&n.set("widget",t.widget);var i=t&&t.widget&&t.widget.widgetType||"content_widget";return q(i,n),y.fire("refresh"),e.fire("tab:add",n),n.fire("tab:add",{cfg:t,tab:n}),n}function z(e){return S[e]?S[e]:[]}function W(e){var t=this,n=t.getActiveTab(),r=n&&n.widget,i=r&&r.type,s=e&&e.fid||r&&r.fid,o,u;if(i==="messagepane")o="msgRdTb";else if(i==="convpane")o="thrdRdTb";else if(i==="author")o="cmpsTb";else if(i==="search")o="srchTb";else switch(s){case"Inbox":o="inbxTb";break;case"%40C%40Chats":o="chtTb";break;case"Draft":o="drftTb";break;case"Sent":o="sntTb";break;case"%40B%40Bulk":o="spmTb";break;case"Trash":o="trshTb";break;case"%40S%40Search":o="srchTb";break;default:u=n&&n.elContent.getAttribute("data-tid");switch(u){case"tabcontacts":o="cntctsTb";break;case"tabnotepad":o="ntpdTb";break;case"tabcalendar":o="clndrTb";break;case"tabnewsfeed":o="newsTb";break;default:o="fldrTb"}}return o}function X(e){return m&&m.detachTabHandlers(),new P(e)}function V(t){var n,r,i,s,o="mail";switch(t.widgetType){case"search":n="searchNav";break;case"author":n="none"}n||(s=t.widget&&t.widget.fid,s&&(r=e.one("#storm-listnav").one('> li[data-fid="'+s+'"]'),r&&(n="none")));if(!n){i=t.elContent.getAttribute("data-tid");switch(i){case"tabcontacts":case"tabnotepad":case"tabcalendar":case"tabnewsfeed":n=o=i.replace("tab","")}}n||(n="none"),e.fire("navigation:switch",{type:n}),a&&(a.all(".nav-item").removeClass("active"),a.one(".nav-item-"+o).addClass("active"))}function $(t,n,r,s,o,u){t&&t.get("id")==="tabcalendar"&&(t.darlaType||(t.darlaType="calendartab"));if(g&&g===t){g.get("active")||g.set("active",1),i=!1,e.fire("tab:reactivated",t.widget);return}if(g&&i&&g!==t){g.get("active")||(i=!1);return}if(!g||t.get("active")){g=t,g.get("active")||g.set("active",1),i=!1;return}g._evt["switchToTab-deactivateOldTab"]&&(e.detach(g._evt["switchToTab-deactivateOldTab"]),delete g._evt["switchToTab-deactivateOldTab"]),g._evt["switchToTab-deactivateOldTab"]=g.after("activeChange",function(s){e.detach(g._evt["switchToTab-deactivateOldTab"]),delete g._evt["switchToTab-deactivateOldTab"];if(s.newVal)return;t._evt["switchToTab-activateNewTab"]&&(e.detach(t._evt["switchToTab-activateNewTab"]),delete t._evt["switchToTab-activateNewTab"]),t._evt["switchToTab-activateNewTab"]=t.after("activeChange",function(){e.detach(t._evt["switchToTab-activateNewTab"
]),delete t._evt["switchToTab-activateNewTab"],i=!1,n&&n(t)}),e.fire("tabDeactivated",t),r||K(t),t.set("active",1)}),s&&t._bindConvPaneListener(),g.get("active")?(i=!0,Q(),g.set("active",0),NeoConfig.backButtonFull&&!u&&g.cfg.p_label!=="Folders"&&e.fire("initPage",{id:t.cfg.label})):i=!1,(!it()||v.getAttribute("data-open")!=="multitask"||o)&&V(t),e.fire("tab:resize"),e.fire("list-stat:tabDone",t.widget),NeoConfig.showNewsFeedOb&&!T.features.enabled("newsFeedOb3")&&this.tabs.length>4&&this.getActiveTabIndex()===0&&(e.fire("showNewsFeedOnboarding"),NeoConfig.showNewsFeedOb=0)}function J(t){var n,r,i,s=!1,o,u,a;g.prevTabId&&(o=j(g.prevTabId),o&&o.widgetType==="search"&&(s=!0,u=o)),i=E.length;if(t==="all"){a=e.one("#btn-back-to-search"),!u&&a&&a.hide();for(n=i-1;n>=0;n--)r=E[n],r.get("removable")&&r!==g&&(s&&r.get("id")!==u.get("id")||!s)&&r.set("close",1)}else for(n=i-1;n>=0;n--)r=E[n],r.get("removable")&&r!==g&&r.widgetType!=="convpane"&&r.widgetType!=="messagepane"&&r.set("close",1)}function K(e){if(NeoConfig.tabs)return;var t,n,r;NeoConfig.multitask&&(t=e.elTab,n=t.ancestor(".t-s-group"),n&&n.prepend(t),r=y.one(".t-el.active"),r&&r.removeClass(d),t.addClass(d),m=e,e.time=++O)}function Q(){g._evt["switchToTab-activeHaltedOldTab"]&&(e.detach(g._evt["switchToTab-activeHaltedOldTab"]),delete g._evt["switchToTab-activeHaltedOldTab"]),g._evt["switchToTab-activeHaltedOldTab"]=g.once("activeHalted",function(){e.detach(g._evt["switchToTab-activeHaltedOldTab"]),delete g._evt["switchToTab-activeHaltedOldTab"],i=!1})}function G(t,n){var r=0,i,s,o=t.get("id"),a,l,c=t.prevTabId;u.stat((t.widgetType?t.widgetType:"")+"_tab_close");while(E.length>r){i=E[r++],a=i.get("id");if(o===a){R(i.get("collection"),i),f.tabs=E=E.slice(0,r-1).concat(E.slice(r)),e.fire("tab:remove",a),r--;continue}a===c&&(l=i)}if(!l){s=E.length-1;while(s>0){if(!E[s]||!E[s].noDefault)break;s--}l=E[s]||E[0]}n.SwitchTab&&(g=null,e.fire("tabDeactivated",l),$(l,function(){y.fire("refresh")})),i=nt(),i&&(!it()||v.getAttribute("data-open")!=="multitask")&&V(i)}function Z(e){var t,n=E.length;while(n--){t=E[n].widget||{};if(e(t,E[n]))return E[n]}}function et(e,t){var n=E,r=n.length,i=t?-1:r,s=t?r-1:0,o=t?-1:1,u;for(u=s;u!==i;u+=o)if(e(n[u]))return n[u]}function tt(e){return!e||!e.widget||!e.widget.get||e.widget.get("canDeactivate")}function nt(){return g}function rt(){var e,t;for(t=E.length;t--;){e=E[t];if(e&&e.get("active"))return t}return-1}function it(){return NeoConfig.tabs||!NeoConfig.multitask?!1:!0}function st(t){var n=t.keyCode;(n===91||n===93)&&_>-1&&(K(nt()),it()&&v.getAttribute("data-open")==="multitask"&&e.fire("navigation:switch",{type:"none"})),f.holdNavSwitch===1&&f.switchLaterNav&&(e.fire("navigation:switch",{type:f.switchLaterNav}),f.switchLaterNav=null),f.holdNavSwitch=0,_=-1}function ot(t){function u(e,t,n){return e?t===0?n-1:t-1:t===n-1?0:t+1}function a(t){var n=nt(),r=n.elTab,i=NeoConfig.tabs,s=i?n.get("id"):r.get("id"),o,a,l,c,h=i?b.all(".nav-tab-li"):y.all(".t-el"),p,d=!1;if(h.size()===0)return;i?(c=t?"next":"previous",h.pop()):c=t?"previous":"next",h.each(function(e,t){i?e.hasClass("hidden")||(p=e.one("[data-tid]"),p&&p.getAttribute("data-tid")===s&&(o=t)):e.get("id")===s&&(o=t)}),e.Lang.isUndefined(o)?l=0:l=u(t,o,h.size());if(i){while(!d)a=h.item(l),a.hasClass("hidden")?l=u(t,l,h.size()):d=!0;a=j(a.one(".nav-tab").getAttribute("data-tid"))}else a=h.item(l),a=j(a.one("a").get("id"));a&&(f.holdNavSwitch=1,$(a,null,!0)),_=l}var n=t.keyCode,r=t.metaKey,i=t.ctrlKey,s=t.target,o=s.get("tagName");if(o==="INPUT"||o==="SELECT"||o==="TEXTAREA"||s.get("isContentEditable"))return;switch(n){case 219:!r&&!i&&!t.shiftKey&&!t.altKey&&(t.preventDefault(),it()&&e.fire("navigation:switch",{type:"multitask"}),a(!0));break;case 221:!r&&!i&&!t.shiftKey&&!t.altKey&&(t.preventDefault(),it()&&e.fire("navigation:switch",{type:"multitask"}),a(!1))}}function ut(){B()}function at(){var e=nt();e&&ft(e)}function ft(t){lt(t.hideToolbar);if(t.widgetType==="search"||t.widgetType==="messagepane"||t.widgetType==="convpane")e.fire("mbEvent:hide");else if(t.widgetType==="convlist"||t.widgetType==="messagelist")e.fire("mbEvent:rotate"),e.fire("rotateD2S")}function lt(e){e?v.addClass("notoolbar"):v.removeClass("notoolbar")}function ct(e){var t=et(function(t){if(t.data&&e[e.tabKey]===t.data[t.data.tabKey])return!0});return t}function ht(e){e.widget&&e.widget.set("close",1),e=null}var f=this,l="div.tabs ul",c="#tabs",h="#multitask .listnav-container",p="#shellinner",d="active",v=t("body"),m,g,y,b,w,E=[],S={},x=e.ui.Templates.minty_module_tabs_tab_removable.base,T=e.common.Utils,N=T.substitute,C=T.escapeHtml,k=T.unescapeHtml,L=T.removeHtml,A=[219,221],O=0,M=16,_=-1,D=e.mail.ui.common.StringUtils,P=function(t){function M(e,t){if(!e.inDoc())return;t?e.removeClass("offscreen"):e.addClass("offscreen")}function _(t){var n=t.newVal,r,s;if(n){if(!i.widget&&u.init){t.halt(!0),u.init(i,function(){var e;if(i.widget){b.siblings().each(function(t,n){n>0&&t.getStyle("visibility")==="visible"&&(e=!0)});if(e)return;i.widget.render(b),i.set("widget",i.widget),i.set("active",1)}});return}NeoConfig.multitask||e.later(0,null,function(){var e=t.currentTarget.widgetType;e==="convpane"||e==="messagepane"?J("all"):J("non-msg")}),i.isRemovable&&i.set("removable",!0),g=i,i===E[0]&&0&&i.widget&&i.widget.msgPane&&i.widget.msgPane.message&&(r={},r.cid=e.mail.model.ConvStore.Conversations.getPermCidPart(i.widget.msgPane.message.cid),r.fid=i.widget.msgPane.message.fid,s=ct(r),s&&s._bindConvPaneListener()),p.addClass(d),v.setAttrs({"aria-selected":!0,tabIndex:0});try{O.set("aria-labelledby",v.get("id"))}catch(o){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-tabview-tabview:1",o,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-tabview-tabview:1")}ft(i),e.fire("tabChange",i.widget),e.fire("tab:active",g.get("id"))}else e.fire("tabBlur",{widget:i.widget}),this.detachTabHandlers(),NeoConfig.vertPane&&b.get("id"
)==="inboxcontainer"&&b.setStyle("display","none"),b.setStyle("visibility","hidden"),NeoConfig.multitask&&NeoConfig.vertPane?setTimeout(function(){if(b.inDoc()){if(b.getStyle("visibility")!=="hidden")return;M(b,!1)}},0):M(b,!1),p.removeClass(d),v.setAttrs({"aria-selected":!1,tabIndex:-1})}function H(e){e.newVal===1&&(G(i,{SwitchTab:i===g}),p.hide(),b.hide())}function B(t){var n,r,s,o=i.widget?i.widget.scrolling||[]:[],u=o.length;for(s=0;s<u;s++)n=o[s],r=b.test(n)?b:b.one(n),r&&(r=e.Node.getDOMNode(r),t?S[n]>0&&(r.scrollTop=S[n]):S[n]=r.scrollTop)}function j(e){var t=p.one("a#"+o+" b")||p.one("a.uc b")||p.one("a#"+o)||p.one("a.uc"),n=p.one("a#"+o)||p.one("a.uc"),s,u,f,l,c,h,d,v,m,g=C(e);t&&r.trim(t.get("text"))!==r.trim(e)&&(e.indexOf("::")>=0?(s=e.split("::"),t.setContent(s[0]),e=s[0]+" <i>("+s[1]+")</i>"):(l=i.widget&&i.widget.msgPane,NeoConfig.hasConv?(c=l&&l.message&&l.message.msgs,h=c&&c.length>=1?c[0]:null):h=l&&l.message,d=h&&h.header,v=d&&d.from&&d.from.name,v=v?v:h&&h.from&&h.from.name,v=C(v),m=p.one("a*[data-action='navigate']"),v?m&&m.setHTML(v+"<br>"+g):t.setHTML(g)),f=k(L(e)),u=v?v+" - "+f:f,n.setAttribute("title",u),i.elContent.setAttribute("data-title",f),i.elContent.setAttribute("aria-label",f)),a=e,i.NAME=a+" Tab"}function F(e){var t=p.one("a#"+o)||p.one("a.uc");t&&t.setAttribute("dir",e)}var i=this,o=e.guid(),u=t||{},a=u.p_label||"",f=u.s_label||"",l=u.url||"#",c=u.content||"",h=u.widget,p=u.yTabEl||n(N(x,{tab_url:l,tab_id:o,tab_title:a+" - "+f,p_label:a!==""?a+"<br/>":"",s_label:f},null,null,strings)),v=p.one("a"),b=u.yTabContentEl||n('<div class="tab-content offscreen" style="visibility: hidden">'+c+"</div>"),S={},A,O=e.one('#main[role="tabpanel"]');u.yTabEl&&(o=u.yTabEl.one("a").get("id")),b&&u.inactive&&(b.setStyle("visibility","hidden"),M(b,!1),b.removeClass("hidden")),b.setAttribute("data-tid",o),h?(h.hasMsgList&&f?b.setAttribute("data-title",D.getSystemFolderName(f,f)):b.setAttribute("data-title",f),h.render(b)):b.setAttribute("data-title",D.getTabName(o)),this.cfg=u,this.elTab=p,this.invisible=u.invisible,this.reuse=u.reuse,this.isRemovable=u.isRemovable,this.widget=h,this.elContent=b,this.noDefault=u.noDefault?!0:!1,this.allowFullpage=!u.forcePane,this.hideToolbar=u.noToolbar,this.userClose=!1,this.data=u.data,this.widgetType=h&&h.type||u.widgetType,i.addTabEl(),m=this,a&&(this.NAME=a+" Tab"),u.yTabContentEl||w.appendChild(b),v.setAttrs({tabIndex:-1,"aria-selected":!1}),P.superclass.constructor.call(i),window.location.href.indexOf("mytray")>=0&&!s&&(s=!0,e.use("common-ui-tabs-tray",function(){e.mail.ui.Tray.init(i)})),i.after("closeChange",function(t){var n=t.newVal,r=i.get("reuse"),s,o;n?(NeoConfig.multitask&&(s=i._getParentTabGroup(p),o=i._getParentTabSGroup(p)),r?(p.addClass("hidden"),b.addClass("hidden")):(T.remove(b),T.remove(p),i._evt["switchToTab-activeHaltedOldTab"]&&(e.detach(i._evt["switchToTab-activeHaltedOldTab"]),delete i._evt["switchToTab-activeHaltedOldTab"]),i.detachDarla(),i.detachAll()),NeoConfig.multitask&&i._hideTabGroupIfEmpty(s,o),G(i,{SwitchTab:i===g}),NeoConfig.multitask&&!y.all(".t-el").size()&&y.one(".empty-tabs").removeClass("hidden")):r&&(p.removeClass("hidden"),b.removeClass("hidden"))},i),i.on("activeChange",_),i.after("activeChange",function(t){var n,r,i,s,o,u=function(e){return!e||!e.get("offsetWidth")||!e.get("offsetHeight")},a=function(){var e,t=nt();t&&t.widgetType==="search"&&(e=r.one(".list-view-item.selected input")||r.one(".list-view-item input"),e&&!u(e)&&e.focus())};if(t.newVal){NeoConfig.vertPane&&b.get("id")==="inboxcontainer"&&b.setStyle("display","block"),b.setStyle("visibility","visible"),M(b,!0);if(b.get("id")==="inboxcontainer")n=b.one("#msg-list"),T.isControlActive()||n&&n.focus();else if(r=b.one("#msg-list.result"))i=document.activeElement&&e.Node(document.activeElement),i&&NeoConfig.searchField&&i._node===NeoConfig.searchField._node?i.once("blur",function(){a()}):a()}}),i.on("unloadingChange",H),i.on("titleChange",function(t){t.prevVal!==t.newVal&&(j(t.newVal),e.fire("tab:title",i.get("id"),t.newVal))}),i.on("directionChange",function(e){e.oldVal!==e.newVal&&F(e.newVal)}),i.on("closeHalted",function(){i!==g&&$(i)}),i.after("closeHalted",function(){e.use("common-ui-dialog-helper",function(e){setTimeout(function(){var t={hd:strings.str_modal_tabdeactivate_title,bd:strings.str_modal_tabdeactivate_body},n=function(){i.set("forceClose",1),i.set("reuse",0),i.set("close",1)};e.common.ui.DialogHelper.confirm(t,{ok:{handler:n},cancel:{}})},0)})}),i.before("widgetChange",function(t){var n=t.newVal,r=t.prevVal,s={},o=!1,u=function(){var t;e.detach(i.widget._evt["widgetChange-Active"]),o?(t=n.get("rootNode"),t&&t.removeClass("hidden")):(t=i.widget.get("rootNode"),t&&t.addClass("hidden")),i.widget=null,i.once("widgetChange",function(){r.set("skipEvents.active-1",!0),n.set("active",1),o||n.render(i.elContent)}),i.detachDarla(),i.set("widget",n)};i.widget&&i.widget!==n?(t.halt(!0),i.iterateChildren(function(e){e===n&&(o=!0)}),o||i.set("children",i.get("children").concat([n])),i.widget._evt["widgetChange-Active"]&&e.detach(i._evt["widgetChange-Active"]),i.widget._evt["widgetChange-Active"]=i.widget.after("activeChange",u),s=n.get("skipEvents"),delete s["active-1"],n.set("skipEvents",s),i.widget.get("active")?i.widget.set("active",0):u()):(i.widget=n,i.widget.tab=i,i.get("children").length||i.set("children",[n]))},i),e.mix(i,{widget:h}),i.addAttrs({id:{value:o},title:{},direction:{setter:F},widget:{setter:function(){i.attachDarla()}},children:{value:[i.widget]},removable:{value:!1},hideToolbar:{getter:function(){return i.hideToolbar},setter:function(t){i.hideToolbar=t,lt(t),e.fire("mbEvent:"+(t?"hide":"rotate"))}}})};e.extend(P,e.mail.ui.BaseWidget),e.mix(P.prototype,{NAME:"Tab",addTabEl:function(){var e=this,t,n=e.widgetType;!e.invisible&&!e.cfg.yTabEl&&n&&(e._hideElTab(),t=e._getTabGroup(n),e._appendElTabToDom(t),e._showMultitaskTutorial(n),NeoConfig.multitask&&y.one(".empty-tabs").addClass("hidden"),n==="convpane"&&e._bindConvPaneListener
(),e._showElTab())},_bindConvPaneListener:function(){var t=this;t.draftCount=0,NeoConfig.multitaskDraft&&(t.draftCardRemovedHandler=e.on("draftCardRemoved",function(){t.isDraftTab&&t._moveDraftTabToEmailTab()}),t.draftCardAddedHandler=e.on("draftCardAdded",function(){t.isDraftTab||t._moveEmailTabToDraftTab()}))},_moveEmailTabToDraftTab:function(){var e=this,t,n;e.elTab&&(t=e._getParentTabGroup(e.elTab),n=e._getParentTabSGroup(e.elTab),e._hideElTab(),y.one(o.convpane).removeChild(e.elTab),e.isDraftTab=!0,e._hideTabGroupIfEmpty(t,n),e._appendElTabToDom(e._getTabGroup("author")),e._showElTab())},_moveDraftTabToEmailTab:function(){var e=this,t,n;t=e._getParentTabGroup(e.elTab),n=e._getParentTabSGroup(e.elTab),e._hideElTab(),y.one(o.author).removeChild(e.elTab),e.isDraftTab=!1,e._hideTabGroupIfEmpty(t,n),e._appendElTabToDom(e._getTabGroup("convpane")),e._showElTab()},_getTabGroup:function(e){return o[e]&&y.one(o[e])},_getParentTabGroup:function(e){return e.ancestor(".t-group")},_getParentTabSGroup:function(e){return e.ancestor(".t-s-group")},_hideTabGroupIfEmpty:function(e,t){t&&t.get("children").size()===0&&e.addClass("hidden")},detachTabHandlers:function(){var e=this;NeoConfig.multitaskDraft&&(e.draftCardRemovedHandler&&e.draftCardRemovedHandler.detach(),e.draftCardAddedHandler&&e.draftCardAddedHandler.detach(),e.draftCardRemovedHandler=null,e.draftCardAddedHandler=null)},_appendElTabToDom:function(e){var t=this;e?(e.prepend(t.elTab),e.ancestor(".t-group").removeClass("hidden"),t.time=O++):y.prepend(t.elTab)},_showMultitaskTutorial:function(t){},_showElTab:function(){var e=this;setTimeout(function(){e.elTab&&e.elTab._node&&e.elTab.setStyle&&e.elTab.setStyle("visibility","visible")},10)},_hideElTab:function(){var e=this;e.elTab&&e.elTab._node&&e.elTab.setStyle&&e.elTab.setStyle("visibility","hidden")},attachDarla:function(){var t=this;!t.darlaEvent&&t.widget&&(t.darlaEvent=t.widget.on("darlaEvent",function(n){n.beaconOnly=!t.widget.get("active"),e.fire("darlaEvent",n),e.fire("mt:view",n)}))},_cleanSearchAd:function(){var t=e.one("#sponsoredAd"),n=e.one("#theAd");t&&t.remove(!0);if(n.hasClass("withSponsoredAd")){n.removeClass("withSponsoredAd");var r=v.hasClass("wide-right-rail")?"#sb_rel_tgtWSKY":"#sb_rel_tgtSKY",i=e.one(r);i&&i.show()}},detachDarla:function(){var e=this;e.darlaEvent&&e.darlaEvent.detach(),e.darlaEvent=null},updateTabData:function(e){this.data=e}}),e.augment(f,e.Attribute),e.mix(f,{render:ut,createTab:X,addTab:U,switchToTab:$,removeTab:G,setPageMode:at,showToolbar:lt,tabs:E,getTab:Z,iterateTabs:et,getActiveTab:nt,getActiveTabIndex:rt,getActiveTabContext:W,canDeactivateTab:tt,refTabCheck:ct,destroyTabWidget:ht,getTabById:j,autoCloseTabs:I,getByType:z})};e.namespace("mail"),e.mail.Tabs=new f},"1.0.0",{requires:["mail-ui-basewidget","minty_module_tabs_tab_removable","comms-ui-nodefocus-base","common-utils","mail-ui-common-string-utils","ymma-stats"]});


YUI.add("common-ui-toolbar-base",function(e){function o(t){function l(){u.all(".btn a").each(function(e){e.setAttribute("role","button")}),u.all(".menu a").each(function(e){e.setAttribute("aria-haspopup","true")}),u.all(".btn a i").each(function(e){e.setAttribute("role","presentation")})}function c(){return!u&&a&&(u=e.Node.create(e.common.Utils.substitute(a,0,0,0,strings)),n.root=u,n.set("content",u),l()),o||h(),u||"&nbsp;"}function h(){if(u){n._evts.push(e.on("toolbar:ui-automation",p)),n._evts.push(u.delegate("mousedown",function(e){e.preventDefault()},".btn a"));var t=function(t){e.common.Utils.isProcessDefaultEnabled(t)||t.preventDefault();if(!i){var n=e.common.Utils.getDataAction(t),r=n.action,s=n.node,o=t.currentTarget;d(r,s,o,t),i=setTimeout(function(){i=0},300)}},r=function(t){var n=t.keyCode,r,i,s=t.target,o=function(e){return e.hasClass("btn")&&!e.hasClass("hidden")&&e.getStyle("display")!=="none"};if(n===13||n===32){if(t.currentTarget.hasClass("cbox")){e.use("node-event-simulate",function(){t.currentTarget.one("input").simulate("click")});return}}else n===37||n===39?(i=t.keyCode===37,s.hasClass("btn")&&(r=i?s.previous(o):s.next(o)),r&&(s.setAttribute("tabindex",-1),r.setAttribute("tabindex",0),r.focus())):n===9&&e.later(0,null,function(){var e=u.all("> .btn:not(.hidden)"),t=e.size(),n,r;u.all(".btn").setAttribute("tabindex",-1),u.one(".btn").setAttribute("tabindex",0);for(n=0;n<t;n++){r=e.item(n);if(r.getStyle("display")!=="none"){r.setAttribute("tabindex",0);break}}})};n._evts.push(u.delegate("click",t,".btn, input")),n._evts.push(u.delegate("keydown",r,".btn, input")),n._evts.push(e.one("#Compose").on("click",t)),n._evts.push(n.on("activeChange",function(t){t.newVal&&e.fire("toolbar:refresh")})),o=1}}function p(t,r,i){var s;u.get("parentNode")&&n.get("active")&&t==="menu"&&(s=u.one("#btn-"+r),s&&(s.menu?s.menu.show&&(u._node?n.buttonEnabled({root:u,node:s,action:t})&&(n.setNodeButtonMenu({node:s}),s.menu.show({context:i})):e.fire("MailLog",{m:"root._node is not defined"},1,"ToolbarError")):d(t,s,undefined,undefined,i)))}function d(t,i,o,a,l){var c=t,h=i.get("id"),p={},d,m=0;if(t){t==="menu"&&f&&n.buttonEnabled({root:u,node:i,action:t})?(s.stat("toolbar","type=>"+e.mail.Tabs.getActiveTab().widgetType+",action=>"+h),i.menu||e.use("common-ui-menu-helper",function(e){var t=e.common.ui.MenuHelper;t.createLoadingMenu(i),f.template.call(this,h,function(){v(i,l)})}),h==="btn-actions"&&e.fire("darlaEvent",{action:"action_menu"}),c+=h):n.buttonEnabled({root:u,node:i,action:t})&&(s.stat("toolbar","type=>"+e.mail.Tabs.getActiveTab().widgetType+",action=>"+t),n.fire("itemSelected",{dataAction:t,item:o,rawEvent:a}),t==="selectAll-message"&&r.features.enabled("mbListNativeView")&&e.fire("nativeAd:select"));if(t==="menu"&&h!=="btn-new"){d=o&&o.ancestor(".list-view-footer"),e.mail.Tabs.getActiveTab().get("widget").type==="messagepane"&&(p.append={sec:d?"msgReadTlbrBtm":"msgReadTlbr"},m=1),p.action="tlbr_"+c,d&&(p.action+="_btm"),e.fire("mt:click",p);switch(p.action){case"tlbr_menubtn-spam":case"tlbr_menubtn-spam_btm":p.action=p.action.replace("tlbr_menubtn-spam","spam_menu"),m&&(p.action+="_msg_read"),e.fire("mt:view",p)}}}}function v(t,r){e.use("common-ui-menu-helper",function(e){var i=t.get("id").replace("btn-","menu-"),s=e.one("#"+i),o=e.common.ui.MenuHelper,a={menu:s,button_enabled:function(){return n.buttonEnabled({root:u,node:t})},keys:function(e){f.keys.call(this,s,e)},enterAccel:function(e){f.enterAccel.call(this,e)}};i==="menu-move"&&(a.fixedMenuGroup={menu:"menu-move-folder",height:275}),o.create(t,a,function(){var r;s.on("menuSelected",function(e){n.fire("itemSelected",{dataAction:e.dataAction,item:e.item})}),s.on("menu:state",function(e){e.state==="show"&&n.buttonEnabled({root:u,node:t})?(n.setNodeButtonMenu({node:t}),t.addClass("pressed")):t.removeClass("pressed")}),t.addClass("pressed"),r=n.on("activeChange",function(n){n.newVal||(t.menu&&t.menu.hide(),t.unplug(e.Plugin.Menu),r.detach())}),n.setNodeButtonMenu({node:t})}),i==="menu-move"&&e.common.Utils.features.enabled("folderManagement")&&e.use("mail-ui-folder-menu",function(e){var n=e.one("#menu-move-folder"),i=NeoConfig.showFmOnboardingM||e.common.Utils.features.enabled("showFolderManagementOnboarding");e.mail.ui.FolderMenu.enhanceMenu({menu:t.menu,root:n.ancestor(),groups:[n,n.next()],childSelector:"li",displayNameSelector:"a span",rapidPrefix:"tlbr_mv_msg_mnu",initialContext:r}),i&&e.use("mail-ui-folders-onboarding",function(){e.mail.ui.onboarding.FolderManagement.moveMenuInit()}),s.on("menu:state",function(r){r.state==="show"&&e.mail.ui.FolderMenu.enhanceMenu({menu:t.menu,root:n.ancestor(),groups:[n,n.next()],childSelector:"li",displayNameSelector:"a span",rapidPrefix:"tlbr_mv_msg_mnu",initialContext:r.context})})})})}function m(t){if(t){for(var i in n._evts)e.detach(n._evts[i]);r.remove(n.get("content")),n.detachAll()}}var n=this,o=0,u,a,f;t=t||{},u=t.root,a=t.template,f=t.menu,n.root=u,n.addAttrs({content:{value:u,getter:c},close:{setter:m},active:{}}),n._evts=[],u&&(h(),l())}function u(){return!0}e.Node.DOM_EVENTS.beforedeactivate=1;var t=strings["str_msg-view_btn_hidepreview"],n=strings["str_msg-view_btn_showpreview"],r=e.common.Utils,i,s=r.ymmastats;e.augment(o,e.Attribute),e.mix(o.prototype,{buttonEnabled:u,setNodeButtonMenu:u}),e.namespace("mail.ui").Toolbar=o;var a=function(){var t=e.one("#toolbar");t&&(t.plug(e.comms.ui.NodeFocusBase,{descendants:"button.btn",keys:{next:"39",previous:"37"}}),e.on("toolbar:refresh",function(){t.fire("refresh")}))};e.mail.ui.ToolbarContainer=new a},"1.0.0",{requires:["attribute","event-custom-base","common-utils","comms-ui-nodefocus-base","ymma-stats","common-ui-tabs-base","mail-common-utils-features"]});


YUI.add("common-ui-contentwidget",function(e){var t=0,n=function(){},r={input:1,textarea:1,select:1},i={checkbox:1,button:1,radio:1,submit:1},s=null,o=function(e){if(e&&e.hasAttribute)try{e.hasAttribute("tabIndex")||e.setAttribute("tabIndex","0")}catch(t){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:1",t,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:1")}return e},u=function(e,t,n){var r=e?e.split(","):[],i=r?r.length:0,s,o={},u,a;for(s=0;s<i;s++)u=r[s].split("+"),a=u[1],u=u[0],o[u]=1,a?n.push(r[s]):t.push(u),u>=48&&u<=57&&t.push(parseInt(u,10)+48);o[46]&&t.push("8")},a=function(t){var n=this;this.NAME||(this.NAME="ContentWidget"),n.accelKeyHandle=[],n.accelLocalKeyHandle=[],e.augment(n,e.Attribute),n.addAttrs({active:{setter:n._active},reuse:{value:0},close:{setter:n._close},skipEvents:{value:{}},contentToolbar:{setter:n._setContentToolbar},parentNode:{},rootNode:{setter:n._setRoot},focus:{setter:n._setFocus},dirty:{getter:n._getDirty},children:{setter:n._setChildren,value:[]},focusNode:{setter:o},forceClose:{value:0},canClose:{value:1,getter:n._canClose,setter:function(e){this._canCloseFlag=e}},forceDeactivate:{value:0},canDeactivate:{value:1,getter:n._getCanDeactivate,setter:function(e){this._canDeactivateFlag=e}},title:{},direction:{},navToolbar:{},navKeys:{},charCodes:{},composeWidgets:{value:null,getter:n.getComposeWidgets},localCharCodes:{},handleKeysLocally:{}},t||{},!0),n._evt={},n.before("closeChange",function(t){var r=t.newVal,i=n.get("active")||0;if(t.newVal&&!n.get("forceClose")&&!n.get("canClose")){n.fire("closeHalted"),t.halt(!0);return}i===r&&!n.get("reuse")&&(t.halt(!0),n._evt.deactivateB4Close&&e.detach(n._evt.deactivateB4Close),n._evt.deactivateB4Close=n.after("activeChange",function(){n.set("close",r)}),n.set("active",!r))}),n.on(["closeChange","reuseChange","activeChange","forceCloseChange","forceDeactivateChange"],function(t){var r=t.attrName,i=t.newVal,s=t.type,o=0,u=n.get("children").length,a,f;if(n.get(r)===i){t.halt(!0);return}if(r==="active"&&!i&&!n.get("forceDeactivate")&&!n.get("canDeactivate")){n._evt.deactivateB4Close&&e.detach(n._evt.deactivateB4Close),n.fire("activeHalted"),t.halt(!0);return}a=function(){o===u&&n.get(r+"Flag")&&(f?(n._evtAfterAction&&e.detach(n._evtAfterAction),n._evtAfterAction=n.after(s,function(){n.set(r+"Flag",0)}),n.set(r,i)):n.set(r+"Flag",0))},n.set(r+"Flag",1),n.iterateChildren(function(t){var n=t.get("skipEvents."+r+"-"+(i&&1));t.get(r)!==i&&!n?(t._myActionEvt&&e.detach(t._myActionEvt),t._myActionEvt=t.after(s,function(){o++,a()}),t.set(r,i)):o++},n);if(n.get(r+"Flag")&&u&&u!==o){f=1,t.halt(!0);return}}),n.after("closeChange",function(t){var r=function(e){if(!e.detachAll)return;e.detachAll(),e.ondestroy()};t.newVal&&!n.get("reuse")&&setTimeout(function(){try{n.iterateChildren(r),n.parentCW||r(n)}catch(t){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:2",t,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:2"),e.error("An error occurred in the clean up phase of this contentWidget",t)}},500)}),n.after("activeChange",function(e){if(e.newVal){var t=n.get("contentToolbar");n.set("contentToolbar",t?t:""),t=n.get("navToolbar"),t&&n.set("navToolbar",t)}})},f=function(n){var r=this.NAME,i=!1;t--,e.Lang.isString(n)&&n.length>1&&(r=n);try{var s=this;for(var o in s)s.hasOwnProperty(o)&&(s[o]instanceof e.Node,s[o]=null);o=null,s=null,i=!0}catch(u){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:3",u,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:3")}return r=null,i};e.mix(a.prototype,{keyHandle:null,localKeyHandle:null,accelKeyHandle:null,accelLocalKeyHandle:null,bound:null,ondestroy:function(){f.apply(this,arguments)},iterateChildren:function(e){if(typeof this.get!="function")return;var t=this,n,r=t.get("children"),i=r.length,s;for(s=0;s<i;s++)n=r[s],n instanceof a&&e.call(t,n,s)},addChild:function(e){var t=this,n=!1;if(!e||!(e instanceof a))return;t.iterateChildren(function(t){t===e&&(n=!0)}),n||t.set("children",t.get("children").concat([e]))},removeChild:function(e){var t=this,n=function(n){var r=[];n.newVal&&(t.iterateChildren(function(t){if(t===e){t.parentCW=null;return}r.push(t)}),t.set("children",r))};e.get("close")?n({newVal:1}):(e.once("closeChange",n),e.set("close",1))},_active:function(e){var t=this,n=t.get("contentToolbar");e?(t.isContained||(s=t),t.get("active")||setTimeout(function(){t.get("active")&&(window.bktest2,t._bindToKeys())},0)):(t.isContained||(s=null),t.isContained||t._blur(),t._detach()),n&&n.set("active",e)},_setFocus:function(e){var t=this;e?t._focus(e):this._blur(e)},_focus:function(){var t,n=this,r=n.get("focusNode"),i;e.UA.gecko>=2&&(i=document.activeElement)&&i.blur();if(r){try{t=n.onFocus(r)}catch(s){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:4",s,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:4"),t=!1}if(!t)try{r&&r.focus()}catch(s){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:5",s,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:5")}}},_blur:function(){var e=this,t=e.get("focusNode");if(t&&t.blur)try{t.blur()}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:6",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:6")}},_close:function(e){e===1&&this._detach
()},_handleKeyDown:function(t){var n=!1;try{var s=t.keyCode,o=t.target,u=o?o.get("tagName").toLowerCase():"",a=o?o.get("type")||"":"",f;a=a.toLowerCase(),f=u in r&&!(a in i),f||(e.UA.os==="macintosh"&&s===8&&(t.charCode=46,t.keyCode=46),s>=96&&s<=105&&(t.charCode=s-48,t.keyCode=s-48),n=this.onKeyDown(t))}catch(l){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-contentwidget-contentwidget:7",l,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-contentwidget-contentwidget:7"),n=!1}return n?(t.halt(),!1):n},_setRoot:function(e){var t=this;e&&(t.get("focusNode")?o(e):t.set("focusNode",e),t.get("active")&&t._bindToKeys(e))},_bindToKeys:function(t){var n,r,i=this,s=i.get("charCodes"),o=i.get("localCharCodes"),a=i.get("handleKeysLocally"),f=[],l=[],c;t=t||i.get("rootNode");if(i.bound)return;if(s&&(!a||t)){c=a?t||document:document,u(s,f,l),f.length&&(i.keyHandle=e.on("key",i._handleKeyDown,c,"down:"+f.join(","),i),i.bound=1),r=l?l.length:0;for(n=0;n<r;n++)i.accelKeyHandle.push(e.on("key",i._handleKeyDown,c,"down:"+l[n],i)),i.bound=1}if(o&&t){f=[],l=[],u(o,f,l),f.length&&(i.localKeyHandle=e.on("key",i._handleKeyDown,t,"down:"+f.join(","),i),i.bound=1),r=l?l.length:0;for(n=0;n<r;n++)i.accelLocalKeyHandle.push(e.on("key",i._handleKeyDown,t,"down:"+l[n],i)),i.bound=1}},_nest:function(e){var t=this;e.isContained=1,e.after(["activeChange","closeChange"],function(n){var r=n.attrName,i=n.newVal,s=0,o=t.get("children").length;t.iterateChildren(function(n){var u=e.get("skipEvents."+r+"-"+(i&&1));(e===n||n.get(r)===i||u)&&s++,s===o&&t.get(r+"Flag")!==1&&t.set(r,i)})},t),e.on(["titleChange","focusNodeChange","dirtyChange","directionChange","navKeysChange"],function(e){e.oldVal!==e.newVal&&t.set(e.attrName,e.newVal)},t)},_setContentToolbar:function(e){var t=this.get("contentToolbar");return t!==e&&(t&&t.set("active",0),e&&e.set("active",1)),e},_setChildren:function(e){var t=0,n=e?e.length:0,r,i=[],s=this;for(t;t<n;t++)r=e[t],r&&r instanceof a&&(r.parentCW!==s&&(r.parentCW=s,s._nest(r)),i.push(r));return i},_detach:function(){var e=this,t=e.accelKeyHandle.length;e.keyHandle&&e.keyHandle.detach(),e.localKeyHandle&&e.localKeyHandle.detach();for(var n=0;n<t;n++)e.accelKeyHandle[n].detach();e.accelKeyHandle=[],t=e.accelLocalKeyHandle.length;for(n=0;n<t;n++)e.accelLocalKeyHandle[n].detach();e.accelLocalKeyHandle=[],e.bound=0,t=null},_getDirty:function(){var e=this,t=!1;return e.iterateChildren(function(e){if(e.get("isDirty")){t=!0;return}}),t||e.isDirty&&e.isDirty()},_getCanDeactivate:function(){var e=this,t=e.get("children"),n=!1;return e._canDeactivateFlag===-1||e._canDeactivateFlag===2?e._canDeactivateFlag>0:(e.iterateChildren(function(e){if(!e.get("canDeactivate")){n=!0;return}}),t.length?!n:e._canDeactivateFlag)},_canClose:function(){var e=this,t=e.get("children"),n=!1;return e._canCloseFlag===-1||e._canCloseFlag===2?e._canCloseFlag>0:(e.iterateChildren(function(e){if(!e.get("canClose")){n=!0;return}}),t.length?!n:e._canCloseFlag)},render:n,onKeyDown:n,onFocus:n,getComposeWidgets:n,isDirty:function(){return!1}}),e.namespace("common.ui").ContentWidget=a},"1.0.0",{requires:["event-key"]});


YUI.add("common-ui-notification",function(e){function r(e){var t=this;e=e||{},t.dir=e.dir||"top",t.sticky=e.sticky||!1,t.closeButton=e.closeButton||!1,t.height=e.height||"50px",t.type=e.type||"slide",t.className=e.className||"",t.parent=e.parent||"body",t.parentType=e.parentType||"class",t.create()}function i(){var t=this,n;t.type==="slide"?n=t.dir+":-"+t.height:t.type==="fade"&&(n="opacity:0"),t.container=e.Node.create('<div tabindex="0" role="alert" aria-labelledby="notification" id = "notification" class="'+t.className+'" style="'+n+'"></div>'),t.parentType==="id"?e.one("#"+t.parent).appendChild(t.container):e.one(t.parent).appendChild(t.container),t.bindUI()}function s(){var n=this;n.container.delegate("click",function(e){var r=t.getDataAction(e),i=r&&r.action;e.preventDefault(),i&&(i==="close"?n.hide():n.fire("clickEvent",{action:i}))},"a"),n.sticky&&e.once("click",function(){n.hide()})}function o(t,n){var r=this;if(!t)return;n=n||3e3,r.container.set("innerHTML",t),e.Lang.later(0,r,function(){this.show(n)})}function u(t){var n=this;n.type==="slide"?n.container.setStyle(n.dir,0):n.type==="fade"&&(n.container.setStyle("opacity",100),n.container.focus()),n.sticky||e.Lang.later(t,n,function(){this.hide()})}function a(){var t=this,r,i;t.type==="slide"?(r=t.dir,i="-"+t.height):t.type==="fade"&&(r="opacity",i=0),t.container&&t.container._node&&(t.container.setStyle(r,i),e.Lang.later(n,t,function(){this.destroy()}))}function f(){var e=this;e.container.remove(!0)}function l(){}var t=e.common.Utils,n=3e3;r.prototype={create:i,notify:o,show:u,hide:a,getMsg:l,destroy:f,bindUI:s},e.namespace("common.ui"),e.augment(r,e.EventTarget),e.common.ui.Notification=r},"1.0.0",{requires:["common-utils"]});


YUI.add("comms-ui-nodefocus-base",function(e){function t(){t.superclass.constructor.apply(this,arguments)}e.extend(t,e.Plugin.Base,{initializer:function(t){function n(n){i.detach(),s.detach(),e.use("comms-ui-nodefocus",function(){u.unplug(a.NodeFocusBase),u.plug(a.NodeFocus,t),u.nodeFocus.onKeyDown(n)})}var r=this,i,s,o,u=r.get("host"),a=e.comms.ui,f=a.NodeFocus;f?u.plug(f,t):(o=[t.keys.next,t.keys.previous],i=e.on("key",n,u,"down:"+o.join(","),r),s=e.on("nodeFocus:load",n,r))}}),t.NAME="NodeFocusBase",t.NS="nodeFocusBase",e.on("keydown",function(t){t.keyCode===9&&e.fire("nodeFocus:load",t)}),e.namespace("comms.ui").NodeFocusBase=t},"1.0.0",{requires:["plugin","node","event-key"]});


YUI.add("minty_module_tabs_tab_removable",function(e){e.namespace("ui.Templates"),e.ui.Templates.minty_module_tabs_tab_removable={base:'<li role="presentation" class="removable t-el"> <a data-action="navigate" href="{{tab_url}}" role="tab" id="{{tab_id}}" title="{{tab_title}}" class = "bold"> {{p_label}} <b>{{s_label}}</b> </a> <button class="icon icon-small-close close-tab" data-action="close-tab" title="{{str_close}}"></button></li>'}},"1.0.0");


YUI.add("mail-ui-accounts",function(e){function i(){var i,s,o,u,a,f,l,c,h,p=strings.str_cfg_tog_accnt_user_color||NeoConfig.userColorIndicParam,d=t.extAccountColors,v=d.length,m=e.Lang.trim(r.get("userSendPref.defaultFromName"))||r.get("userSendPref.defaultFromAddress"),g=(r.get("externalAccounts")||{}).extAccount,y=g?g.length:0;c={Inbox:{id:"Inbox",color:"ypurple",name:m,pretty_name:m,check_mbox:n(strings.str_nav_left_checkmail_account_attr,{mailbox_pretty_name:m})}};for(i=0,s=0;i<y;++i)o=g[i],h=null,p&&(l=o.colorIndicator,t.colorIndicatorsStr[l]?h=t.colorIndicatorsStr[l]:(l=o.colorIndicator?o.colorIndicator:"",l>0&&(h=t.colorIndicators[l]))),a=o.server?e.Lang.trim(o.server):null,f=o.username&&a?o.username+"@"+a:null,f&&(u="data-mboxid"+s,m=e.Lang.trim(o.accountName)||o.address,c[u]={id:u,color:h||d[s%v],name:o.address,pretty_name:m,check_mbox:n(strings.str_nav_left_checkmail_account_attr,{mailbox_pretty_name:m}),server_addr:f},h&&(c[u].user_color=h),++s);return s===0&&(c=null),c}function s(){var e,n,s,o,u,a,f=strings.str_cfg_tog_accnt_user_color||NeoConfig.userColorIndicParam,l={},c=i(),h=(r.get("aliases")||{}).alias||[],p=(r.get("disposableAddresses")||{}).deaName||[];if(strings.str_cfg_tog_msgListColorIndic||t.showExtAccountsParam>1){if(c)for(e in c)s=c[e],o=s.server_addr,a=f?s.user_color:s.color,o&&a&&(l[o]=s.color);if(f){h=h.concat(p),n=h.length;for(e=0;e<n;++e)s=h[e],u=s.colorIndicator?s.colorIndicator-0:0,u>0&&(l[s.address]=t.colorIndicators[u])}}return l}var t=NeoConfig,n=e.common.Utils.substitute,r=e.common.persist.UserData;e.namespace("mail.ui"),e.mail.ui.Accounts={buildExtAccountList:i,buildAccountList:s}},"1.0.0",{requires:["common-utils","common-persist-user-data"]});


YUI.add("mail-ui-foldersview-base",function(e){var t=e.Node.one,n=e.Node.all,r=NeoConfig,i=e.common.Utils,s=i.substitute,o=i.getNormalizedMessageCount,u=strings.str_nav_left_checking_mail,a=strings.str_nav_inbox,f=r.mailboxes,l="knownAddress|externalAccountsChange",c=e.common.persist.UserData,h="mail-ui-foldersview-bind",p={totalFolderUnreadCount:0},d={accounts:{}},v={},m=i.log,g;e.Node.DOM_EVENTS.beforedeactivate=1;var y=function(){function nt(e){return q?t('li[data-vfid="'+e+'"]'):t("li[data-fid='"+e+"']")}function rt(){var t={fid:{value:{fid:"",name:"",checkMail:!1,mailboxId:"",extraParams:null,smartFolder:!1,forceRefresh:!1},setter:function(t){var n,r,s,o,u=t.fid,a=t.checkMail,l=t.mailboxId,c=t.forceRefresh,h,p,d=!1,v,m=!1;q=t.smartFolder,(u===F&&u===B["in"]&&!q||a)&&X===null&&(bt(l),h=l,l&&l!==""&&l!=="Inbox"&&(h=f&&f[l]?f[l].name:""),v=e.common.persist.UserData.get("externalAccounts")||{},v&&v.extAccount&&h===""?(e.fire("MailLog",{m:"User forced a checkmail"}),X=R.refresh({forced:!0},{success:function(){wt(),e.later(0,null,function(){R.refresh({accountId:h},{},"checkmail")})},failure:wt,timeout:3e4,suppressCodes:NeoConfig.farm==="f9323"?[]:["*"]},"checkmail")):(e.fire("MailLog",{m:"User forced a checkmail"}),X=R.refresh({accountId:h,forced:!0},{success:wt,failure:wt,timeout:3e4,suppressCodes:NeoConfig.farm==="f9323"?[]:["*"]},"checkmail")));if(u!==F||q||c)return d=q&&!c,d&&(q=!1),n=nt(F)||nt("Inbox"),d&&(q=!0),m=q&&c,m&&(q=!1),o=nt(u),!NeoConfig.backButtonFull&&NeoConfig.backButton&&typeof window.history.pushState=="function"&&((!window.history.state||window.history.state.id!==1)&&u!=="Inbox"&&window.history.pushState({id:"1"},document.title,window.location.pathname+window.location.search),u==="Inbox"?window.history.state&&window.history.go(-1):window.history.replaceState({id:"1"},document.title,"#mail")),n&&(r=n.one("a"),r&&(n.removeClass(_),r.setAttrs({tabIndex:-1,"aria-selected":!1}))),o&&((p=o.ancestor("ul").one(O))&&p&&p.set("tabIndex",-1),s=o.one("a"),s&&(o.addClass(_),s.setAttrs({tabIndex:0,"aria-selected":!0})),t.isTrashBtn||i.isControlActive()||o.one("a").focus()),pt(),F=u,t},lazyAdd:!0},isCheckingMail:{value:!1},active:{value:!1}};M.addAttrs(t)}function it(t,n){return function(r){n||r.preventDefault(),e.use(h,function(e){try{e.mail.FoldersView[t](r)}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-foldersview-foldersview:1",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-foldersview-foldersview:1"),e.use("common-utils-error",function(e){i.error.report("Exception when trying to call '"+t+"':"+n.toString(),"YUI_CB_EXCEPTION",1,1,1,n)})}})}}function st(){return et}function ot(t){var n,r,i,s,o,u;et=0;for(n=0;n<Q.length;n++)r=Q[n].toLowerCase(),i=e.Node(G._nodes[n]),u=decodeURIComponent(i.getAttribute("data-fid").replace(/%5c/g,"/")),s=r.indexOf(t),s>=0&&(i.addClass(T),i.one(S).setAttribute("title",u),et++);et===0&&e.one(".no-results").addClass(T)}function ut(){var e;tt?e=$.all(S):J.one("li")&&(e=J.all(S)),Q=e.get("textContent"),e.size()>0&&(G=e.get("parentNode").get("parentNode"))}function at(){var n=t(".searcher"),r;n&&(r=n.get("value"),e.all("."+T).removeClass(T),r.length>0?(tt?$.addClass(x):J.addClass(x),ot(r.toLowerCase())):tt?$.removeClass(x):J.removeClass(x))}function ft(){tt=K.hasClass(N)}function lt(){function D(t){var n;m.get("scrollTop")!==0?o.addClass("scrolled"):o.removeClass("scrolled"),t&&t.type==="scroll"&&(n={action:"left_rail_scroll"},g?g.statAfterIdle("leftRailScroll",null,n):e.use("mail-ui-workspace-stats",function(e){g=e.mail.ui.Workspace,g.statAfterIdle("leftRailScroll",null,n)}))}function P(t,n){var r,i=n.target.ancestor(".nav-lnk",!0);i&&(r=i.ancestor("#nav").all(".nav-lnk"),r.set("aria-selected",!1),r.set("tabIndex",-1),i.setAttrs({"aria-selected":!0,tabIndex:0}));switch(t){case"mail":e.fire("nav:inbox");break;case"contacts":e.fire("nav:contacts");break;case"calendar":e.fire("nav:calendar");break;case"notepad":e.fire("nav:notepad");break;case"messenger":e.fire("nav:messenger");break;case"boss":e.fire("nav:boss",n);break;case"newsfeed":e.fire("nav:newsfeed")}}var o=t("#shellnavigation"),u=t("#main"),a=t("#Folders .btn-folders"),f,c=t("li#unread"),h=e.mail.persist.MetaData,p=n(".listnav-subfolder .listnav-back"),d=t(b),v=t(w),m=t(".listnav-outter"),E=t("#nav"),T=e.all("#custom-folders li"),N=o.all(".papa-folder"),C=e.one(".search-folders-shel"),k=e.one(".search-folders-icon-close"),L=e.one(".search-folders-wrapper"),O="neo.pref.LeftRailFolderMgmtOnboarding",_;ft(),o.delegate("keydown",it("upDownNavigation",!0),A),E.delegate("click",function(e){var t=e.currentTarget.getAttribute("data-nav");P(t,e),e.preventDefault()},".nav-item"),E.delegate("keydown",function(e){var t=e.target,n=t.ancestor(".nav-item"),r,i,s;switch(e.keyCode){case 13:P(n.getAttribute("data-nav"),e),e.halt();return;case 37:r=n.previous(),r||(s=n.get("parentNode").all(".nav-item"),r=s.item(s.size()-1));break;case 39:r=n.next()||E.one(".nav-item")}r&&(t.set("tabIndex",-1),i=r.one(".nav-lnk"),i.set("tabIndex",0),i.focus(),e.halt())},".nav-lnk"),m.on("scroll",D),e.on("windowresize",D),o.delegate("mousedown",function(e){var t;!this.hasClass("selected")&&e.button===1&&!e.ctrlKey&&e.preventDefault()},"h2 span[role=button], h2 .btn input"),V?$.delegate("contextmenu",it("contextClickV3"),"li"):$.delegate("contextmenu",it("contextClick"),"li.sysfolder"),$.delegate("click",it("checkMailClick"),".check-mail"),$.delegate("keydown",it("sysFoldersKeyDown",!0),"li.sysfolder"),J.delegate("keydown",it("usrFoldersKeyDown",!0),"li"),$.delegate("click",it("emptyFolderOnClick"),"li.sysfolder a span.btn"),$.delegate("click",function(t){!t.currentTarget.hasClass("btn-mobilizer")&&!t.currentTarget.hasClass("t-learn-more")&&t.preventDefault(),t.smartFolder=q;var n=t.currentTarget.ancestor("li",!0),r=n.ancestor(".open"),i=(t.target||t.currentTarget).getAttribute("data-action"),s,o,u;if(V&&i==="folder-search"){ht({dataAction:"folder-search"
,target:t.currentTarget},null),e.fire("mt:click",{action:"fldr_srch_open"});return}if(i==="folder-new"){ht({dataAction:"folder-new",target:t.currentTarget},null),e.fire("mt:click",{action:"fldr_add"});return}if(i==="imap-add")return;t.currentTarget=n;if(n.get("id")==="uservoice_feedback"){UserVoice&&UserVoice.showPopupWidget&&UserVoice.showPopupWidget();return}if(n.get("id")==="mobilizer")return;n.hasClass("sysfolder")&&(e.fire("navigation:switch",{type:"none"}),n.getAttribute("data-fdepth")?it("usrFoldersClick")(t):it("sysFoldersClick")(t)),s=n,o=n.hasClass("nav-open");if(n.hasClass("openable")){E&&n.toggleClass("nav-open");if(!o)u=n.get("id"),e.fire("navigation:switch",{type:u}),n.hasClass("folders")&&(n.one("a").setAttribute("aria-selected",!0),e.fire("mt:click",{action:"custom_expand"}),n.one("a").set("title",strings.str_nav_left_folders_expanded_attr)),u==="multitask"&&(e.fire("mt:click",{action:"recentTabs_expand"}),e.fire("util:ymstats",{name:"leftNavRecentShow"}));else{var a=e.mail.Tabs.getActiveTab(),f=a.label;u=n.get("id"),f==="Calendar"||f==="Contacts"||f==="Notepad"?e.fire("navigation:switch",{type:f.toLowerCase()}):e.fire("navigation:switch",{type:u}),n.hasClass("folders")&&(n.one("a").setAttribute("aria-selected",!1),e.fire("mt:click",{action:"custom_collapse"}),n.one("a").set("title",strings.str_nav_left_folders_collapsed_attr))}s=null}s&&($.all(".sysfolder, .folder").removeClass("selected"),n.addClass("selected"),r&&r.addClass("selected"))},"li > a, li > button"),e.use("event-mouseenter",function(e){$.delegate("hover",function(t){var n=t.currentTarget.ancestor("li.openable",!0),r=u.hasClass("dragging-message");n&&r&&e.fire("navigation:switch",{type:n.get("id")})},function(t){var n=t.currentTarget.ancestor("li.openable",!0),r=u.hasClass("dragging-message");n&&r&&e.fire("navigation:switch",{type:"none"})},"li.openable")}),J.delegate("click",function(e){var t=e.currentTarget.ancestor("li.open");t&&t.addClass("selected")},"li > a"),e.on(["openCalendar","openContacts","openNotepad"],function(t){t&&!t.mrd&&e.fire("navigation:switch",{type:t})}),e.on("Nav:ComposeClosed",function(){e.one("#Compose").removeClass("selected")}),e.on(["editMessage","newMessage"],function(){$.all(".sysfolder, .folder").removeClass("selected"),e.one("#Compose").addClass("selected")}),c&&c.on("click",function(t){e.fire("fireSearch","is:unread"),t.preventDefault()}),f=h.after("neoChanged",function(){var e=!0,n=t(y+"-nav");h.get("neo.pref.folderState")?n.replaceClass("collapsed","expanded"):(n.replaceClass("expanded","collapsed"),e=!1),n.one(".label").set("aria-expanded",e),h.detach(f)});var H=e.one(".listnav-folder");J.delegate("click",function(e){var t=e.target,n,r,o;if(t.hasClass("listnav-folder-open")){var u=e.currentTarget.next(),a=e.currentTarget.ancestor(".listnav-folder"),f=a.get("offsetWidth"),l=parseInt(H.getComputedStyle(NeoConfig.isRTL?"left":"right"),10),c='<span class="icon arrow-left"></span>',h;u&&u.hasClass("listnav-folder")&&(h=e.currentTarget.one("a").getHTML(),u.one(".listnav-back").setHTML(h+c),a.all(".listnav-subfolder").addClass("hidden"),u.removeClass("hidden"),H.setStyle(NeoConfig.isRTL?"left":"right",l+f+"px"),u.ancestor(".listnav-container").set("scrollTop","0"))}else t.hasClass("listnav-folder-toggle")?(t.hasClass("icon-chevron-right")?t.replaceClass("icon-chevron-right","icon-chevron-down"):t.replaceClass("icon-chevron-down","icon-chevron-right"),n=t.ancestor("li.folder"),r=n&&n.one(S),o=s(t.hasClass("icon-chevron-right")?strings.str_nav_left_subfolders_collapsed_attr:strings.str_nav_left_subfolders_expanded_attr,{name:i.escapeHtml(r&&r.getHTML())}),t.set("title",o),t.set("aria-label",o),e.currentTarget.next().toggleClass("hidden")):t.hasClass("searcher-icon-close")||(e.fid=F,e.smartFolder=q,it("usrFoldersClick")(e));e.preventDefault()},"li"),p.on("click",function(e){var t=e.currentTarget.ancestor(".listnav-folder"),n=t.get("offsetWidth"),r=parseInt(H.getComputedStyle("right"),10);H.setStyle("right",r-n+"px")}),V&&J.delegate("dblclick",function(e){$.one("."+x)||(e.stopPropagation(),ht({dataAction:"folder-rename",target:e.currentTarget,actionSource:"activeFolder"}))},"li"),V||J.on("contextmenu",it("usrFoldersContextClick")),a&&a.on("click",it("updateFolderPref",!0)),d&&(d.all("a").each(function(e){e.set("href","#")}),d.delegate("click",function(t){t.preventDefault();var n=t.currentTarget;n.hasClass("emails-contacts")&&e.fire("openRUEFCInbox"),q=!0},"li"),d.on("contextmenu",function(){})),v&&v.on("click",function(e){var t=e.currentTarget,n;t&&(n=t.get("parentNode"))!==null&&(n.hasClass("expanded")?(n.removeClass("expanded"),n.addClass("collapsed")):n.hasClass("collapsed")&&(n.removeClass("collapsed"),n.addClass("expanded")))}),e.common.persist.UserData.after(l,function(){(strings.str_cfg_tog_renderExternalAccounts||r.showExtAccountsParam)&&e.mail.FoldersView.renderMailboxes()}),$.all("li.sysfolder a").each(function(e){e.set("href","#")}),e.on("key",function(e){n(".check-mail").each(function(){(this.contains(e.currentTarget)||this.compareTo(e.currentTarget))&&e.stopPropagation()})},o,"",M),e.on("foldersview:resetFocus",function(e){var t=nt(e);(t=t.one("a"))!==null&&t.focus()}),N.each(function(e){var t=e.one(S),n=s(strings.str_nav_left_subfolders_collapsed_attr,{name:i.escapeHtml(t&&t.getHTML())});e.one(".listnav-folder-toggle").set("title",n),e.one(".listnav-folder-toggle").set("aria-label",n)}),M.on("fidChange",function(t){e.fire("ui:currentFolder",t.newVal)}),V&&(_=NeoConfig.showFmOnboardingL||i.features.enabled("showFolderManagementOnboarding"),_&&e.use("mail-ui-folders-onboarding",function(){e.mail.ui.onboarding.FolderManagement.displayOnboardingTooltip()}))}function ct(){var t=n("li.inbox-sub");t&&t.remove(),f=e.mail.ui.Accounts.buildExtAccountList(),f&&Neo.drawMailboxes(f)}function ht(t,n){var r=e.mail.ui.ContextButton,i;if(r&&n){i=nt(n);if(!r.folderActionEnabled(t.dataAction,i))return}e.use("mail-ui-folderevents",function(e){e.mail.ui.FolderEvents.handle(t,n||F)})}function pt
(){var e=t(E),n=t(y),r;!e.one(O)&&(r=e.one(C))&&r.set("tabIndex",0),!n.one(O)&&(r=n.one(C))&&r.set("tabIndex",0)}function dt(){var n=t(y),r=t("doc").get("activeElement"),i=-1;if($.contains(r)||n.contains(r))i=e.all(A).indexOf(r);return i}function vt(t){var n=e.all(A),r=n.item(t),i;r||(i=t+1,i>n.size()&&(i=t-1),r=n.item(i)),r&&(r.set("tabIndex",0),r.focus())}function mt(){var t=e.one("#msg-list");i.isControlActive()||t.focus()}function gt(){var e=t(y+"-btn");lt(),pt(),e&&e.set("aria-expanded",t(y+"-nav").hasClass("expanded")),mt()}function yt(t){var n="Inbox",r=strings[j[n]],i,s,o,u;NeoConfig.imapIn&&(u=e.mail.ui.FolderUtils,s=e.mail.Controller.ImapIn,o=s.getCurrentAccountId(),n=s.getFolderByType(u.InboxFolderType,o).folderInfo.fid),i=e.mail.ui.Workspace.getFolderContent().widget.msgList,i._listview.scrollToTop(),e.fire("checkmail:before"),M.set("isCheckingMail",!0),q?M.set("fid",{fid:n,name:r,checkMail:!0,mailboxId:t,smartFolder:q,forceRefresh:!0}):M.set("fid",{fid:n,name:r,checkMail:!0,mailboxId:t})}function bt(t){var n;!t||t===""||!f?($.all("#Inbox i + span, li.inbox-sub i + span").setContent(u),$.all("li .check-mail").addClass("loading"),$.all("li.sysfolder .check-mail").addClass("loading")):f&&(n=$.one('li.inbox-sub i[data-mboxid="'+t+'"]'),n&&n.setContent(u),n=$.one('li.inbox-sub input[data-mboxid="'+t+'"]'),n&&n.addClass("loading")),e.fire("checkmail:clicked"),e.fire("MailLog",{m:"checkMail: "+t+" is "+u}),!NeoConfig.backButtonFull&&NeoConfig.backButton&&typeof window.history.pushState=="function"&&window.history.state&&window.history.go(-1)}function wt(){var t,n,r,i;$.one(".in .icon-text").setContent(a),$.all("li .check-mail").removeClass("loading"),$.all("li .check-mail").removeClass("loading"),e.fire("MailLog",{m:"checkMail: Done - Inbox string is reset"}),t=e.one("#inboxcontainer #msg-list"),t&&t.focus();if(f)for(n in f)r=f[n],i=$.one('li.inbox-sub i[data-mboxid="'+n+'"]'),e.fire("MailLog",{m:"checkMail: Done - "+n+" string is reset"}),i&&i.setContent(r.pretty_name||r.server_addr);e.fire("checkmail:succeeded"),M.set("isCheckingMail",!1),X=null}function Et(t){var n=t.folderInfo.fid,i=n==="Draft",u=n==="%40C%40Chats",a=n==="Inbox",f=n==="%40B%40Bulk",l=a&&e.one('#Folders [data-fid="Inbox"]'),c=l&&l.one(".unread-count"),h=i||u?t.total:t.unread,p="{{str_nav_inbox_unread_attr}}",d="",v=t.unread>0?"{{str_nav_"+n.toLowerCase()+"_unread_aria_attr}}":"{{str_nav_"+n.toLowerCase()+"}}",g={},y,b,w=r.strings,E,S,x;i?(p=h===1?"{{str_nav_draft_attr}}":"{{str_nav_drafts_attr}}",v=p):u?(p=h===1?"{{str_nav_conv_attr}}":"{{str_nav_convs_attr}}",v=p):f&&(v=t.unread>0?"{{str_nav_spam_unread_aria_attr}}":"{{str_nav_spam}}"),y=nt(n),y&&(t.isSystem===!1||!i&&n!=="Sent"||l)&&(g.email_str=h===1?"{{str_email_cnt_one}}":"{{str_email_cnt_multi}}",g.total_cnt=t.total,d=t.folderInfo.name+" - "+s("{{str_nav_folder_email_cnt}}",g,null,null,w),E=l||y,t.unread>0?(E.addClass(D),g.unread_cnt=t.unread,S=s("{{str_nav_folder_unread_cnt}}",g,null,null,w),d+=" ("+S+")",t.isSystem||(v=t.folderInfo.name+": "+S)):(E.removeClass(D),t.isSystem||(v=t.folderInfo.name))),b=y&&y.one(".unread-count"),b&&U.isNumber(h)&&(h<0&&(h=0),h?(m({m:"Updating folder count UI for the folder",folder:y.getAttribute("data-fid"),count:h}),b.setHTML("("+o(h)+")"),b.removeClass("invisible"),c&&(c.setHTML("("+o(h)+")"),c.removeClass("invisible"))):(b.addClass("invisible"),b.setHTML(""),c&&(c.addClass("invisible"),c.setHTML(""))),g.inbox_unread_cnt=h,u&&(g.conv_cnt=h),e.fire("ToolTips:hideTooltips"),t.isSystem?b.set("title",s(p,g,null,null,w)):(y.one("i").set("title",d),y.one(".unread-count").set("title",d)),l&&(l.one("i").set("title",d),l.one("span").set("title",d)),v=s(v,g,null,null,w),x=y.one("a"),x&&x.setAttribute("aria-label",v))}function St(e){var t=e.folderInfo.fid,n=nt(t),r;n=n&&n.one("a");if(n){var i=e.total,o=i===1?"str_email_cnt_one":"str_email_cnt_multi",u="{{str_nav_folder_email_cnt}}",a={total_cnt:i,email_str:strings[o]};switch(t){case"Draft":u=i===1?"{{str_nav_draft_attr}}":"{{str_nav_drafts_attr}}",a.inbox_unread_cnt=i;break;case"%40C%40Chats":u=i===1?"{{str_nav_conv_attr}}":"{{str_nav_convs_attr}}",a.conv_cnt=i}q&&(u="{{str_nav_email_from_ctcts_attr}}",a.email_ctcts_cnt=i),r=(e.isSystem?"":unescape(t)+" - ")+s(u,a,null,null,strings),e.isSystem&&(n.set("title",r),n=n&&n.one("i"),n&&n.set("title",e.folderInfo.name+" "+r))}}function xt(){var e=J.all(".icon-chevron-down")._nodes,t=[],n=e.length,r;for(r=0;r<n;r++)t.push(e[r].parentNode.getAttribute("data-fid"));return t}function Tt(e){var t=dt(),n=xt();Neo.drawFolders({folders:{folder:e}},n),Nt(),t>=0?vt(t):pt(),I&&M.set("fid",{fid:I}),I=null}function Nt(){var t=r.userDataObj&&r.userDataObj.otherYahooMboxes&&r.userDataObj.otherYahooMboxes.otherYahooMboxesTotal?"userSendPref.defaultID":"userSendPref.loggedInAlias",n=c.get(t);e.config.doc.title=W>0?s("{{str_page_title_unread}}",{unread_cnt:W,title:n},null,null,strings):s("{{str_page_title}}",{title:n},null,null,strings),z=null}function Ct(t){var n,r,u=e.one("#folder-count"),a=e.one("#Folders"),f=0,l,c,h,m,g,y,b,w,E=p,S=i.features.enabled("imapIn"),x=a.one('#custom-folders > li[data-fid="Inbox"]');for(r=0;r<t.length;r++){y=t[r],g=y.folderInfo.fid;if(g==="Draft"||g==="%40C%40Chats"||g==="%40B%40Bulk"||g==="Trash"||g==="Sent")continue;S?(d.accounts[y.acctId]||(d.accounts[y.acctId]={totalFolderUnreadCount:0}),E=d.accounts[y.acctId]):E=p,l=g.split("%5c"),h="",m=0,E[g]?m=y.unread-v[g]:m=y.unread,v[g]=y.unread,g==="Sync%20Trap"||g==="Inbox"&&!x?g==="Inbox"&&(b=m):(E.totalFolderUnreadCount+=m,g.indexOf("Inbox%5c")===0&&(f=1));for(c=0;c<l.length;c++)h+=(c?"%5c":"")+l[c],E[h]?E[h]+=m:E[h]=m,w=a.one('li[data-fid="'+h+'"] .unread-count'),w&&(E[h]>0?(w.setHTML("("+E[h]+")"),w.removeClass("invisible")):(w.setHTML(""),w.addClass("invisible")))}(f||S)&&b&&(E.totalFolderUnreadCount+=b),S&&tt?e.use("mail-ui-imap-in",function(e){e.mail.ui.ImapIn.updateAccountsUnreadCount(d.accounts)}):(E.totalFolderUnreadCount>0?(a.addClass("has-unread"),u.setHTML("("+o(E.totalFolderUnreadCount
)+")"),u.removeClass("invisible")):(a.removeClass("has-unread"),u.addClass("invisible"),u.setHTML("")),u.set("title",s(strings.str_nav_folder_unread_cnt,{unread_cnt:E.totalFolderUnreadCount})))}var y="#custom-folders",b="#smart-folders",w="#nav-smart-folders",E="#storm-listnav",S=".foldername",x="filtering-search",T="filter-on",N="multiple-account",C="a[role=link]",k="a[role=tab]",L="button",A=E+" "+C+", "+E+" "+L+", "+E+" "+k+", "+y+" "+C,O='a[tabindex="0"]',M=this,_="selected",D="has-unread",P="hasnomsg",H="hasmultimsg",B={"in":"Inbox",chats:"%40C%40Chats",drafts:"Draft",sent:"Sent",folder:"%40B%40Bulk",spam:"%40B%40Bulk",trash:"Trash"},j={Inbox:"str_tabs_inbox",Draft:"str_tabs_drafts",Sent:"str_tabs_sent","%40B%40Bulk":"str_tabs_spam","%40C%40Chats":"str_tabs_conversations",Trash:"str_tabs_trash"},F=Neo&&Neo.fid||"",I,q=!1,R=e.mail.Controller.Folders,U=e.Lang,z=null,W,X=null,V=i.features.enabled("folderManagement"),$=t(E),J=t(y),K=t("body"),Q,G,Z,et=0,tt;e.on("ds:folder:change",function(t,n,r,i){var s,o,u,a,f,l,c=e.JSON.stringify;if(i==="launch"){for(o in n){s=n[o],u=s.folderInfo.fid;if(u.indexOf("Sync%20Trap")===0)continue;u==="Inbox"&&(W=s.unread),s.total||(a=nt(u),a&&a.replaceClass(H,P))}Nt(),Ct(n);return}if(!t)Tt(n,i==="ruefc"),V&&(ut(),e.one(".searcher")&&at());else for(o in r){if(!r[o]){e.fire("MailLog",{m:"Cannot_read_property_unread_of_undefined",info:"ofs = "+c(t)+", nfs = "+c(n)+", "+"cset = "+c(r)+" reason = "+i},1,"JS Error Tracker");continue}s=n[o],u=s&&s.folderInfo&&s.folderInfo.fid,i==="ruefc"&&(s.folderInfo.name=strings.str_nav_email_from_ctcts,f=e.mail.ui.common.StringUtils.getSystemFolderName(u,s.folderInfo.name,!0),l=e.mail.ui.Workspace.getFolderContent(),NeoConfig.bidi?f=l.widget.msgList.getFolderNameBidi(f,s.folderInfo.dir,s.total):f+="  <i>("+s.total+")</i>",l.set("title",f));if(U.isNumber(r[o].unread)||u==="Draft")Et(s,i==="ruefc"),Ct(n),u==="Inbox"&&(W+=s.unread-t[o].unread,W<0&&e.fire("MailLog",{m:"Inbox unread count goes negative",info:"folder.unread = "+s.unread+", ofs[i].unread = "+t[o].unread},1,"Negative unread count"),Nt());s.total!==t[o].total&&St(s,i==="ruefc"),a=nt(u,i==="ruefc"),a&&(s.total>0?a.replaceClass(P,H):a.replaceClass(H,P))}e.fire("mailview:relcalculateToolbarPositions",{besidePreviewActive:NeoConfig.previewPanePref===1})}),e.on("ds:folder:add",function(e,t){t!=="move"&&t!=="qf_folder"&&(I=e.folderInfo.fid)}),e.on("ds:folder:remove",function(t){var n="Inbox",r,i,s;t.folderInfo.fid===M.get("fid").fid&&(NeoConfig.imapIn&&(r=e.mail.ui.FolderUtils,i=e.mail.Controller.ImapIn,s=i.getCurrentAccountId(),n=i.getFolderByType(r.InboxFolderType,s).folderInfo.fid),I=n)}),e.on("ds:folder:rename",function(e,t){e.folderInfo.fid===M.get("fid").fid&&(I=t.folderInfo.fid)}),e.on("checkmail:pressed",e.throttle(function(t){var n=t?"":"Inbox";e.fire("MailLog",{m:"User forced a checkmail",info:n}),yt(n)},1e3)),e.on("newfolder:pressed",function(e){ht({dataAction:"folder-new",targetId:e},null)}),e.on("#custom-folders.li:keydown",function(t){var n=t.currentTarget.getAttribute("data-fid"),s=t.keyCode===69&&n&&r.emptyFolders?"folder-empty":"folder-rename",o=e.UA.os,u=o==="windows"||o==="win";u&&t.shiftKey&&t.keyCode===121||!u&&t.ctrlKey&&t.shiftKey&&t.altKey&&t.keyCode===77?(t.preventDefault(),i.simulateContextMenu(t.target)):ht({dataAction:s,target:t.currentTarget},n)}),e.on("#storm-listnav li.sysfolder:keydown",function(t){var n={"%40B%40Bulk":"folder-empty-spam",Trash:"folder-empty-trash"},s=t.currentTarget.getAttribute("data-fid"),o,u=e.UA.os,a=u==="windows"||u==="win";if(t.keyCode===69&&s&&!t.ctrlKey&&!t.shiftKey&&!t.altKey&&!t.metaKey)o=n[s]||r.emptyFolders&&"folder-empty",o&&ht({dataAction:o,restoreFocus:1,target:t.currentTarget},s);else if(a&&t.shiftKey&&t.keyCode===121||!a&&t.ctrlKey&&t.shiftKey&&t.altKey&&t.keyCode===77)t.preventDefault(),i.simulateContextMenu(t.target)}),e.after("tabChange",function(){null===z&&(z=e.later(1e3,null,Nt,null,!1))}),e.augment(M,e.Attribute),rt(),M.after("isCheckingMailChange",function(t){e.fire("MailLog",{m:"checkmail is "+t.newVal?"in progress":"complete"})}),i.features.enabled("imapIn")&&(e.on("accounts:select",function(t,n,r){e.use("minty_module_shell_navigation_pane_inbox_sticky_refresh",function(e){var n=e.ui.Templates.minty_module_shell_navigation_pane_inbox_sticky_refresh,i=e.mail.ui.FolderUtils,o=yui.mail.Controller.ImapIn.getFoldersByAcct(t),u=o.length,a="",f,l,c,h,p,d,v,m,g,y;if(r){d={has_inbox_unread:function(){return s(n.has_inbox_unread,null,d,null,strings)},has_spam_unread:function(){return s(n.has_spam_unread,null,d,null,strings)},has_trash_unread:function(){return s(n.has_trash_unread,null,d,null,strings)},unread_data:function(){return s(n.unread_data,null,d,null,strings)},unread_data1:function(){return s(n.unread_data1,null,d,null,strings)},unread_data2:function(){return s(n.unread_data2,null,d,null,strings)}};for(v=0;v<u;v++){y=o[v];if(y.isSystem)switch(y.types[0]){case i.InboxFolderType:l=y.folderInfo.fid;break;case i.DraftFolderType:p=y.folderInfo.fid;break;case i.SentFolderType:c=y.folderInfo.fid;break;case i.SpamFolderType:h=y.folderInfo.fid;break;case i.TrashFolderType:f=y.folderInfo.fid}}m={global_url_base:NeoConfig.global_url_base,leftpane_selected_item:"selected",imap_in_delete_icon:" icon-delete",inbox:"selected",inbox_fid:l,chats_fid:a,drafts_fid:p,sent_fid:c,spam_fid:h,trash_fid:f},g=s(n.base,m,d,null,strings),$.all(".sysfolder").remove(),$.insert(g,0),Tt(o)}}),e.fire("openFolder",{fid:R.getPrimaryFolderByAccount(t)})}),e.on("imapin:accountAdded",ft),e.on("imapin:accountRemoved",ft)),e.mix(M,{render:gt,renderMailboxes:ct,checkMail:yt,handleFolderActions:ht,updateTitle:Nt,getListOfMatchingFolders:ot,getFolderSearchMatches:st,findMatchedFolders:at,updateSearchableFolders:ut,getAllExpandedFoldersFids:xt})};e.namespace("mail"),e.mail.FoldersView=new y},"1.0.0",{requires:["yui-throttle","common-utils","mail-controller-folders","attribute","node","mail-persist-meta-data","common-persist-user-data","mail-ui-accounts"
,"common-ui-tabs-base","mail-common-utils-features","node-event-simulate","node-focusmanager","mail-model-datastore","mail-ui-folder-utils"]});


YUI.add("mail-persist-user-preferences",function(e){function r(e){this.attributeConfig={userFeaturePrefs:{},userUIPrefs:{value:{displayPersonalFolders:NeoConfig.expandPF,expandExtAccounts:NeoConfig.expandEA,msgListDensity:NeoConfig.msgListDensity}},userSpamPrefs:{},userSendPrefs:{},switches:{},livewordsPrefs:{},popForwardPrefs:{},loaded:{value:!1}},this.addAttrs(this.attributeConfig,e),e?this.set("loaded",!0):this.load()}e.namespace("mail.persist");var t,n=["userFeaturePrefs","userUIPrefs","userSpamPrefs","userSendPrefs","switches","livewordsPrefs","popForwardPrefs"];r.prototype.load=function(){var t=this;e.mail.net.Transport.request("GetUserPreferences",{},{success:function(e){var n=e.body.result.userPrefs;for(var r in n)t.set(r,n[r]);t.set("loaded",!0)},failure:function(){}},!0)},r.prototype.save=function(){var e={},t,r;for(r=0;r<n.length;r++)t=n[r],e[t]=this.get(t);this.saveRequest(e)},r.prototype.saveRequest=function(t){e.mail.net.Transport.request("SetUserPreferences",{setprefs:t},{success:function(){},failure:function(){}},!0)},r.prototype.afterSettingsChange=function(){this.get("loaded")&&this.save()},e.augment(r,e.Attribute),e.mail.persist.UserPreferences=new r;for(t=0;t<n.length;t++)e.mail.persist.UserPreferences.after(n[t]+"Change",e.mail.persist.UserPreferences.afterSettingsChange)},"1.0.0",{requires:["attribute","mail-net-transport","json"]});


YUI.add("mail-persist-meta-data",function(e){function s(){this.addAttr("_save",{value:!0}),this.addAttr("_timer",{})}function o(){this.get("_save")&&(this.get("_timer")&&this.get("_timer").cancel(),this.set("_timer",e.later(5e3,this,"save")))}function u(){this.get("_save")&&this.save()}var t,n,r,i;e.namespace("mail.persist"),s.prototype.wait=function(){this.set("_save",!1)},s.prototype.resume=function(){this.set("_save",!0)},s.prototype.parse=function(e,t){var n;t+=e.name;if(e.meta&&e.meta.length>0){this._set(t,{}),t+=".";for(n=0;n<e.meta.length;n++)e.meta[n].meta&&this.parse(e.meta[n].meta,t),this.parse(e.meta[n],t)}else e.value&&this._set(t,e.value)},s.prototype.make_cascade=function(e,t){var n;for(n in e)typeof e[n]=="object"?(t.push({name:n,meta:[]}),this.make_cascade(e[n],t[t.length-1].meta)):t.push({name:n,value:e[n]})},s.prototype.cascade_dump=function(){var e=[],t,n,r,i=this.getAttrs();for(t in i){if(t.match(/^_/))continue;n=i[t],r={name:t},typeof n=="object"?(r.meta=[],this.make_cascade(n,r.meta)):r.value=n,e.push(r)}return{meta:e}},s.prototype.load=function(){var t=this;e.mail.net.Transport.request("GetMetaData",{},{success:function(n){var r=n.body.result.meta,i,s;for(i=0;i<r.length;i++)s=r[i],t.attrAdded(s.name)||t.addAttr(s.name),t.wait(),t.parse(s,""),t.resume();e.fire("metaDataLoadComplete")},failure:function(){}},!0)},s.prototype.update=function(){},s.prototype.save=function(t){this.set("_save",!0),e.mail.net.Transport.request("SetMetaData",this.cascade_dump(),{success:function(e){t&&t(e)},failure:function(e){t&&t(e)}},!0)},s.prototype.set=function(t,n){var r,i,s,o=e.Attribute.prototype.set;if(t.indexOf(".")>0){r=t.split(".");for(s=0;s<r.length;s++)i?i+="."+r[s]:i=r[s],this.get(i)?i===t&&o.apply(this,[t,n]):i===t?o.apply(this,[t,n]):o.apply(this,[i,{}])}else o.apply(this,[t,n])},e.augment(s,e.Attribute),t=new s;if(typeof NeoConfig.metaDataObj!="undefined"&&NeoConfig.metaDataObj){i=NeoConfig.metaDataObj;for(r=0;r<i.length;r++)n=i[r],t.addAttr(n.name,{}),t.parse(n,"")}else t.load();t.attrAdded("neo")||t.addAttr("neo",{pref:{}}),t.get("neo.pref")||t.set("neo",{pref:{}}),e.common.Utils.features.enabled("synchronousMetadataSave")?t.after("neoChange",u,t):t.after("neoChange",o,t),t.after("cgChange",u,t),e.mail.persist.MetaData=t},"1.0.0",{requires:["attribute","mail-net-transport","mail-common-utils-features"]});


YUI.add("mail-track",function(e){e.namespace("mail.track");var t={boss:["a","978500493",!1,"boss"],newsfeed_listview:["a","978500495",!1,"newsfeed","newsfeed_listview"],newsfeed_openstory:["a","978500496",!1,"newsfeed","newsfeed_openstory"],welcome_gx:["a","978500241",!1,"DEFAULT","welcome_galaxy"],launch_welcome:["a","978500273",!1,"DEFAULT","welcome_galaxy"],launch_inbox:["a","978500271",!1,"messagelist","folder_inbox"],launch_compose:["a","978500270",!1,"compose","compose_new"],launch_message:["a","978500272",!1,"messagelist","msgread_tabview"],launch_inbox_empty:["a","978500271",!1,"emptyfld","folder_inbox"],launch_welcome_ssl:["a","978500285",!1,"DEFAULT","welcome_galaxy"],launch_inbox_ssl:["a","978500286",!1,"messagelist","folder_inbox"],launch_compose_ssl:["a","978500288",!1,"compose","compose_new"],launch_message_ssl:["a","978500287",!1,"messagelist","msgread_tabview"],launch_inbox_empty_ssl:["a","978500286",!1,"emptyfld","folder_inbox"],launch_welcome_low:["a","978500293",!1,"DEFAULT","welcome_galaxy"],launch_inbox_low:["a","978500294",!1,"messagelist","folder_inbox"],launch_compose_low:["a","978500296",!1,"compose","compose_new"],launch_message_low:["a","978500295",!1,"messagelist","msgread_tabview"],launch_inbox_low_empty:["a","978500294",!1,"emptyfld","folder_inbox"],launch_welcome_optin:["a","978500360",!1,"DEFAULT","welcome_galaxy"],launch_inbox_optin:["a","978500361",!1,"messagelist","folder_inbox"],launch_inbox_optin_empty:["a","978500361",!1,"emptyfld","folder_inbox"],action_menu:["b","978500002",!0],inbox_menu_print:["b","978500004",!0],lftpane_add_folder:["b","978500006",!0],attch_dwd_av_display:["b","978500008",!0],attch_dwd_av_click:["b","978500009",!0],attch_upload_av_display:["b","978500010",!0],attch_upload_av_click:["b","978500011",!0],attach_upload_classic:["b","978500020",!0],checkmail_all_click:["b","978500068",!0],checkmail_auto:["b","978500069",!0],compose_new:["a","978500077",!1,"compose","compose_new"],compose_save:["a","978500077",!0,"compose","compose_save"],compose_new_ssl:["a","978500422",!1,"compose","compose_new"],compose_forward:["a","978500079",!1,"compose","compose_fwd"],compose_reply_sender:["a","978500081",!1,"compose","compose_reply"],compose_reply_all:["a","978500246",!1,"compose","compose_reply_all"],compose_draft:["a","978500266",!1,"compose","compose_draft"],dd_msg_to_folder:["b","978500084",!0],dd_msg_to_trash:["b","978500085",!0],empty_spam:["b","978500087",!0],empty_trash:["b","978500088",!0],empty_spam_ssl:["b","978500484",!0],mark_spam_ssl:["b","978500486",!0],sent_ssl:["a","978500414",!1,"sent","send_confirm"],folderview_inbox_ssl:["a","978500434",!1,"messagelist","folder_inbox"],folderview_inbox_empty_ssl:["a","978500434",!1,"emptyfld","folder_inbox"],folderview_bulk:["a","978500091",!1,"messagelist","folder_bulk"],folderview_bulk_ssl:["a","978500432",!1,"messagelist","folder_bulk"],folderview_draft:["a","978500092",!1,"messagelist","folder_draft"],folderview_draft_ssl:["a","978500433",!1,"messagelist","folder_draft"],folderview_inbox:["a","978500093",!1,"messagelist","folder_inbox"],folderview_sent:["a","978500095",!1,"messagelist","folder_sent"],folderview_sent_ssl:["a","978500437",!1,"messagelist","folder_sent"],folderview_trash:["a","978500096",!1,"messagelist","folder_trash"],folderview_trash_ssl:["a","978500489",!1,"messagelist","folder_trash"],folderview_custom:["a","978500267",!1,"messagelist","folder_custom"],folderview_custom_ssl:["a","978500436",!1,"messagelist","folder_custom"],folderview_inbox_frm_wel:["a","978500094",!1,"messagelist","fwinbox_frm_welcome"],folderview_chat:["a","978500439",!1,"messagelist","folder_chat"],folderview_chat_ssl:["a","978500438",!1,"messagelist","folder_chat"],folderview_bulk_empty:["a","978500091",!1,"emptyfld","folder_bulk"],folderview_bulk_empty_ssl:["a","978500432",!1,"emptyfld","folder_bulk"],folderview_draft_empty:["a","978500092",!1,"emptyfld","folder_draft"],folderview_draft_empty_ssl:["a","978500433",!1,"emptyfld","folder_draft"],folderview_inbox_empty:["a","978500093",!1,"emptyfld","folder_inbox"],folderview_sent_empty:["a","978500095",!1,"emptyfld","folder_sent"],folderview_sent_empty_ssl:["a","978500437",!1,"emptyfld","folder_sent"],folderview_trash_empty:["a","978500096",!1,"emptyfld","folder_trash"],folderview_trash_empty_ssl:["a","978500489",!1,"emptyfld","folder_trash"],folderview_custom_empty:["a","978500093",!1,"emptyfld","folder_custom"],folderview_custom_empty_ssl:["a","978500434",!1,"emptyfld","folder_custom"],folderview_chat_empty:["a","978500439",!1,"emptyfld","folder_chat"],folderview_chat_empty_ssl:["a","978500438",!1,"emptyfld","folder_chat"],help_dd_click:["b","978500098",!0],help_dd_click_blog:["b","978500099",!0],help_dd_click_help:["b","978500100",!0],help_dd_click_newfeature:["b","978500101",!0],help_dd_click_mobile:["b","978500105",!0],help_dd_click_options:["b","978500197",!0],msgheader_addtoAB:["b","978500155",!0],msgread_reading_pane:["a","978500162",!1,"messagelist","msgread_preview"],message_tabpane:["a","978500163",!1,"messagelist","msgread_tabview"],msgread_reading_pane_ssl:["a","978500301",!1,"messagelist","msgread_preview"],message_tabpane_ssl:["a","978500302",!1,"messagelist","msgread_tabview"],msgread_reading_pane_low:["a","978500297",!1,"messagelist","msgread_preview"],message_tabpane_low:["a","978500298",!1,"messagelist","msgread_tabview"],previewpane_close:["a","978500334",!1,"messagelist","msgread_pp_close"],previewpane_expand:["a","978500336",!1,"messagelist","msgread_pp_open"],scroll_spam:["a","978500212",!1,"messagelist_scroll"],scroll_contacts:["a","978500213",!1,"messagelist_scroll"],scroll_draft:["a","978500214",!1,"messagelist_scroll"],scroll_folder:["a","978500215",!1,"messagelist_scroll"],scroll_inbox:["a","978500216",!1,"messagelist_scroll"],scroll_msgpane:["a","978500217",!1,"messagelist_scroll"],scroll_search:["a","978500218",!1,"messagelist_scroll"],scroll_sent:["a","978500219",!1,"messagelist_scroll"],scroll_trash:["a","978500220",!1
,"messagelist_scroll"],search_refinement:["a","978500222",!1,"searchrefinement","search_refinements"],search_snipp_chkbox:["a","978500223",!1,"search","search_snipp_chkbox"],search_people:["a","978500494",!1,"search","search_people"],search_results:["a","978500252",!1,"search","search_results"],search_results_empty:["a","978500252",!1,"emptysearch","search_results_empty"],empty_sponsored_results:["a","978500252",!1,"emptyspresults","empty_sponsored_results"],sent:["a","978500224",!1,"sent","send_confirm"],sent_api:["a","978500224",!1,"messagelist","send_confirm"],mark_spam:["b","978500225",!0],spell_chk:["b","978500226",!0],switch_mail:["b","978500227",!0],switch_mail_cancel:["b","978500228",!0],contacts_tab:["a","978500278",!1,"onlySKY","contacts"],update_theme:["a","978500230",!1,"DEFAULT","themes"],calendar_zodiac:[null,"967178001",null,null,null]},n=function(e){return e.match(/launch_inbox/)?e="launch_inbox_optin":e.match(/launch_/)&&(e="launch_welcome_optin"),NeoConfig.neoOptIn=!1,e};e.mail.track.getTrackingParam=function(r,i){var s={};if(r&&typeof t[r]!="undefined"){NeoConfig.neoOptIn&&(r=n(r)),r.match(/launch_/)&&(s.launch=!0);if(NeoConfig.isSSL&&!r.match(/_ssl/)){var o=r+"_ssl";t[o]&&(r+="_ssl")}s.type=t[r][0],s.name=t[r][3]||null,s.evt={},s.evt.sp=t[r][1],s.evt.npv=t[r][2];if(typeof t[r][4]!="undefined"){var u=t[r][4];typeof i!="undefined"&&e.Lang.trim(i)!==""&&typeof i!="object"?s.evt.trace=u+":"+i:s.evt.trace=u}}return s},function(){var t=function(t,n){var r,i,s;n?n.msgPane&&n.msgPane.message?e.use("mail-ui-messagepane-utils",function(e){r=n.msgPane.fid,i=e.mail.model.DataStore.Folders.get(r),s=e.mail.ui.common.StringUtils.getSystemFolderInfoName(r,i),n.fire("darlaEvent",{action:t,value:{siteAttr:e.mail.ui.MessagePaneUtils.getAdSiteAttribsFromMesgObj(n.msgPane.message,r),foldername:s}})}):n.fire("darlaEvent",{action:t}):e.fire("darlaEvent",{action:t}),e.fire("mbEvent:"+t)};e.after("previewPane:expanded",function(e){t("previewpane_expand",e)}),e.after("previewPane:collapsed",function(e){t("previewpane_close",e)}),e.after("verticalPreview",function(e){t("previewpane_expand",e)}),e.after("checkmail:clicked",function(){})}()},"1.0.0",{requires:["common-utils"]});


YUI.add("mail-common-tracker",function(e){var t=NeoConfig,n=window.NeoGV||{},r=e.common.Utils.features.enabled("rapidUlt")||t.isUltThrottled||t.isRpdWithLH||t.expBucketId!=="0",i,s="",o="",u=1e3,a=500,f=function(i){var s=i.args||{},u,f,l=i.append||{},c;u={ck:{action:i.action,args:s,append:l,spid:i.spid,thrd:t.hasConv}},f=e.JSON.stringify(u);if(!o||o!==f)r&&(e.common.Utils.Rapid?e.fire("rapid:click",u.ck):n.rapidQueue.push({type:"rapid:click",data:u.ck})),o=f,setTimeout(function(){o=""},a)},l=function(i){var o=i.action,a=i.append||{};if(o){var f;if(window.NeoGV&&NeoGV.cancelViewBeacon){NeoGV.cancelViewBeacon=!1;if(o.substr(0,11)==="folderview_")return}var l={ln:{action:o,append:a,thrd:t.hasConv}};f=e.JSON.stringify(l);if(!s||s!==f)r&&(e.common.Utils.Rapid?e.fire("rapid:view",l.ln):n.rapidQueue.push({type:"rapid:view",data:l.ln})),s=f,setTimeout(function(){s=""},u)}};e.on("mt:view",l),e.on("mt:click",f),n.rapidQueue=[]},"1.0.0",{requires:["mail-common-utils-features"]});


YUI.add("mail-ui-workspace-base",function(e){function k(){var n=1;window.onerror=function(r,i,s){var o,u,a,f,l="unhandled_exception";o=typeof r=="string"?r.replace(/\s+/g,"-").substr(0,64):"empty",u=typeof i=="string"?i:"empty",a=u!=="empty"&&u!==""&&u!==" "&&u!=="undefined"&&u!=="null",f=u.indexOf("s.yimg.com/zz/combo")<0&&u.indexOf("neo/launch")<0&&u.indexOf("storm/launch")<0;if(o.indexOf("YWA-BeaconScheduler")>=0||a&&f)l="ext_unhandled_exception";e.fire("MailLog",{m:"statLog="+l+"_log"+" errMsg="+r.replace(/ /g,"_")+" fileName="+i+" lineNumber="+s+" browser="+NeoConfig.browser}),n&&(n=0,e.use("common-utils-error",function(){n=1,t.error.report("[msg: "+r+"] [file: "+i+"] [line#: "+s+"] ",l.toUpperCase(),1,1,1)}))}}var t=e.common.Utils,n=t.substitute,r=t.escapeHtml,i=t.unescapeHtml,s=t.loadDarlaAndExecute,o=e.config.win||window,u=o.Neo||0,a,f=NeoConfig,l=!f.pfm||!f.pfm.count,c=0,h=!1,p,d=["_shared_module_toolbar_compose","_shared_module_compose_message_header_fresh","_shared_module_offscreen_bin_compose","_shared_module_offscreen_bin_compose_menu_color_picker","_shared_module_offscreen_bin_compose_menu_spellcheck","_shared_module_offscreen_bin_compose_modal_cancel_compose","_shared_module_offscreen_bin_compose_menu_spell_langs","_shared_module_compose_reply"],v=!1,m,g="mail-service-uploader-v"+(f.uploaderVersion||"1"),y=!1,b="%40S%40Search",w=e.one("body"),E,S=e.one("#nav"),x=f.calendarTabEnabled&&S.one(".icon-calendar"),T,N=e.one(".frost-container"),C=e.UA.ie;f.pagedResults=0,f.bidi&&d.push("comms-intl-bidihighlight"),d.push(g),e.namespace("mail.ui"),E=function(){function lt(){var t,n,r,i,s;t=e.one(".list-view-items");if(!t)return;n=t.get("clientHeight"),r=t.get("scrollHeight");if(r>n)return;NeoConfig.hasConv?i=t.one(".list-view-item-container"):i=t.one(".list-view-item"),i&&(s=i.get("offsetHeight"),s*f.pageSize<n&&(f.messagesPerPage=Math.ceil(n/s),f.messagesPerPage>100&&(f.messagesPerPage=100),f.pageSize=f.messagesPerPage*2,e.common.persist.UserData.set("userUIPref.messagesPerPage",f.messagesPerPage),at=!0))}function ct(){var t=w.get("winHeight"),n=e.one("#theAd");t<=702&&n&&(f.adScroll||e.UA.ie)&&n.addClass("low_res"),v&&(s(function(e){e.fire("renderPrefetchedAd",{action:v.isFolderEmpty&&v.goTo===1?p+"_empty":p})},!1),v=!1),NeoConfig.hasAds&&n&&n.get("clientHeight")===0&&e.fire("util:ymstats",{name:"adblocker_unique"})}function ht(){e.use("common-net-sessionmgr",function(){var t="/neo/breakingnews?type=banner",n=dt(),r,i,s,o,u;NeoGV.breakingNews=NeoGV.breakingNews||{},r=function(t,r){var a=r?r.status:"",f={},l;switch(a){case 200:try{f=e.JSON.parse(r.responseText);if(f.items&&f.items.result){i=f.items.result;for(u=0;u<i.length;u++){o=i[u];if(o&&o.uuid&&o.type==="just-in"){e.use("mail-common-newscookie",function(e){l=e.mail.common.NewsCookie.getBNCookie(),s=l&&l.split("&"),s&&s[0]===o.uuid?NeoGV.breakingNews={uuid:s&&s[0],publishedAt:s&&s[1]}:(NeoGV.breakingNews={uuid:o.uuid,publishedAt:o.published_at},!NeoConfig.showNewsFeedOb&&(n===null||n.value==="1")&&e.one(".breaking-news-badge").removeClass("hidden")),NeoGV.breakingNews.uuid&&NeoGV.breakingNews.publishedAt&&vt(NeoGV.breakingNews.publishedAt),e.fire("util:ymstats",{name:"breakingnews_call_returned",tags:{bkt:NeoConfig.expBucketId,type:"banner"}})});break}}}e.fire("util:ymstats",{name:"breakingnews_call_succeeded",tags:{bkt:NeoConfig.expBucketId,type:"banner"}})}catch(c){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:1",c,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:1"),e.fire("util:ymstats",{name:"breakingnews_call_parse_error",tags:{bkt:NeoConfig.expBucketId,type:"banner"}})}break;default:try{e.fire("MailLog",{m:"banner breaking news failure"+JSON.stringify(r)})}catch(c){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:2",c,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:2")}e.fire("util:ymstats",{name:"breakingnews_call_failed",tags:{bkt:NeoConfig.expBucketId,type:"banner"}})}},e.common.net.SessionMgr.requestProxy(t,{on:{success:r,failure:r},method:"GET",timeout:2e3})})}function pt(){e.use("comet","base",function(e){var n=t.settings.value("comet_url"),r=t.settings.value("breaking_news_comet_channel"),i=e.initComet(n);e.on("comet:ready",function(t){t.message.originalURI===n&&i.subscribe(r,function(t){e.fire("breakingnews:cometNotification",t)})})})}function dt(t){var n=null;return e.each(NeoConfig.metaDataObj,function(e){e.name==="breakingNewsToggle"&&(n=e)}),n}function vt(t){var n=72e5,r,i;clearTimeout(ft),i=Math.round((new Date).getTime()-t*1e3),r=n-i,ft=setTimeout(function(){NeoGV.breakingNews={},e.one(".breaking-news-badge").addClass("hidden"),e.fire("util:ymstats",{name:"breakingnews_non_active_expired",tags:{bkt:NeoConfig.expBucketId}})},r)}function mt(){var t=new e.EventTarget;t.publish("ucs:playLogo",{broadcast:2,emitFacade:!0}),t.fire("ucs:playLogo"),f.showNavCallout&&e.later(3e3,null,function(){e.use("mail-ui-onboarding-nav")})}function gt(){if(w.hasClass("pc-photo")){var e=w.one("#preloadBg"),t=w.one("#bg"),n,r;e&&(n=e.getAttribute("data-bg-h"),n&&(r=new Image,r.onload=function(){t.setStyle("backgroundImage","url("+n+")"),t.addClass("loaded")},setTimeout(function(){r.src=n},0)))}}function yt(e){e.use("mail-ui-workspace-postload",function(e){o.postLoadInit(e)})}function bt(e){var n=["mail-ui-workspace-fresh","mail-ui-workspace-stats","mail-ui-boss","mail-ui-recorder","mail-common-cachewarmer","contacts-api-config","contacts-ui-contactseventstranslator","mail-ui-mb-controller","mail-error","mail-ui-log-events","comet","mail-ui-rr-backfill-controller",f.neoJsHeader.module],r;f.isRecordMode&&n.push("common-net-sendresponse"),f.searchSuggestions&&!t.features.enabled("search")&&n.push("searchautocomplete"),C?(f.backButton=0,f.backButtonFull=0,f.backButtonSearch=0):typeof window.history
.pushState=="function"&&n.push("mail-ui-backbutton"),f.farmMaintenanceNotification&&n.push("mail-ui-maintenancenotification"),w.hasClass("browsereol")&&n.push("mail-ui-greylist"),w.hasClass("tos-disclosure")&&n.push("mail-ui-tos-disclosure"),f.hasConv?n.push("minty_module_toolbar_inbox_message_thread","mail-ui-convpane-read","mail-common-precache-thread"):n.push("minty_module_toolbar_inbox_message_fresh","common-ui-menu-helper","mail-ui-messagepane-read","mail-common-precache-unread"),f.notification&&n.push("common-ui-notification"),f.bidi&&n.push("comms-intl-bidi"),f.themeJSModule!=="false"&&n.push(f.themeJSModule),f.showErrors&&n.push("common-utils-error"),f.fbUser===1&&n.push("mail-ui-fb-token-refresh"),o.initMessageKeywords=!1,!f.targetingOptOut&&f.hasAds&&Et()&&f.enableMessageKeywords&&(o.initMessageKeywords=!0,n.push("mail-ui-messagekeywords")),o.initMessageListDomains=!1,!f.targetingOptOut&&f.enableMsgListDomains&&f.expBucketId==="CMUSGRMLD01"&&(o.initMessageListDomains=!0,n.push("mail-ui-messagelistdomains")),o.initMessageCategories=!1,!f.targetingOptOut&&t.features.enabled("messageCategories")&&(o.initMessageCategories=!0,n.push("mail-ui-messagecategories")),f.enableSponsoredThemes&&n.push("mail-ui-sponsored-themes-view"),t.features.enabled("imapIn")&&n.push("mail-ui-imap-in","mail-controller-imapin"),t.features.enabled("desktopNotification")&&n.push("mail-ui-desktop-notifications"),t.features.enabled("snow")&&n.push("mail-ui-snowflakes"),n.push(wt),e.use.apply(e,n),(r=e.one("#low-bandwidth-container"))!==null&&r.remove(!0),o.presetDataItems(),o.getBandwidthMode()!=="broadband"?xt():e.fire("ws:postLoad")}function wt(e){var n=c===1,r=e.mail.common,i=r&&r.cachewarmer,s=(new Date).getHours(),u;o.mbController=(new e.mail.ui.mbController).init(),NeoConfig.isGTAEnabled&&NeoConfig.intl==="us"&&NeoConfig.lang==="en-US"&&(!NeoConfig.partnerType||NeoConfig.partnerType==="ycorp")&&e.use("mail-ui-ads-mobilizer",function(e){e.mail.ui.Ads.Mobilizer.init()}),NeoConfig.useLeftRailGamesWidget&&NeoConfig.hasAds&&e.use("mail-ui-games-widget",function(e){e.mail.ui.games.Widget.init()}),f.prefetchAd&&parseInt(f.prefetchAdType,10)===2&&ct(),f.enableSponsoredThemes&&(o.sponsoredThemeView=new e.mail.ui.SponsoredThemes.View,f.theme.sponsored&&f.theme.id==="sochi-winter-olympic"&&o.sponsoredThemeView.render(f.theme.id)),f.themeJSModule!=="false"&&e.mail.ui.themes[f.themeJSModule].init(),t.features.enabled("predictiveSearch")&&NeoGV.predictiveSearchRendered&&e.use("mail-ui-searchmyworld",function(e){new e.mail.ui.PredictiveSearch.SMW("#search-my-world-slot",!0)}),f.AffiliateAds&&(!t.features.enabled("affiliateAdsDayParting")||t.features.enabled("affiliateAdsDayParting")&&t.settings.value("affiliate_dayparting_hours").indexOf(s)!==-1)&&(t.features.enabled("predictedAdsShopping")&&f.purchasedItems.length||!t.features.enabled("predictedAdsShopping")&&f.AffiliateFallback.length)&&e.use("mail-ui-shopping-controller",function(e){e.mail.ui.Shopping.AdsController.init()}),t.features.enabled("breakingNews")&&pt(),i&&(parseInt(f.disablePrefetchLaunchMsgs,10)===0&&o.getBandwidthMode()==="broadband"&&(i.setupLaunch(n),n&&!(l++)&&(u=2e3,i.addInboxPreFetching()),i.addCompose(u,!u,d)),NeoConfig.enablePixieDust&&i.warmUp("pixiedust",["mail-common-pixiedust"]),i.run()),o.getBandwidthMode()==="broadband"&&xt(),o.getBandwidthMode()!=="broadband"&&e.fire("ws:postLoad"),NeoConfig.isRegOnboardingEnabled&&e.fire("ws:onboarding"),o.initMessageKeywords&&e.mail.ui.MessageKeywords.initialize(),o.initMessageListDomains&&e.mail.ui.MessageListDomains.initialize(),o.initMessageCategories&&e.mail.ui.MessageCategories.initialize(),f.fbUser===1&&e.mail.ui.FBTokenRefresh.init();if(NeoConfig.hasAds&&e.UA.chrome&&t.features.enabled("chromeDSSExtension")){var a=parseInt(e.mail.persist.MetaData.get("neo.pref.chrome.dss.ext"),10),h=t.settings.value("chromeDSSExtensionFrequency"),p=Math.round(+(new Date)/1e3);(!a||p>h+a)&&e.use("mail-ui-chrome-dss-ext")}St(),o.sendStats()}function Et(){var t=["CMUSGRD2S01","CMUSGRCM02","CMUSGRCM03","CMUSGRCM04","CMUSGRCM05","CMUSGRCM06","CMUSGRCM07","CMUSGRCM09","CMUSGRCM10","CMUSGRCM11","CMUSGRCM12","CMUSGRCM13","CMUSGRCM14","CMUSGRCM15","CMUSGRCM16"];return e.Array.indexOf(t,f.expBucketId)>-1}function St(){if(!f.userVoiceFeedbackPopup)return;window.UserVoice=window.UserVoice||[],function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/GnqW94kJH38RyG8SOBiAg.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}function xt(){var n=["ucs-search","cache-base","cache-offline","cache-plugin","node-menunav","substitute","event-mousewheel","event-hover","event-outside","event-touch","event-move","event-flick","event-tap","querystring-stringify","rapid-base"],r=t.features.enabled("rapidUlt")||f.isUltThrottled||f.isRpdWithLH||f.expBucketId!=="0";r&&(n.unshift("common-utils-rapid"),t.features.enabled("flowRecorder")&&n.push("mail-ui-flow-recorder")),t.features.enabled("inProductHelp")&&n.push("mail-ui-inhelp"),e.namespace.apply(window,["YAHOO.YAHOO.i13n"]).WEBWORKER_FILE=t.settings.value("rapidWorkerJsPath"),e.use(n,function(e){e.mail.ui[f.neoJsHeader.headerClass].render(),f.setFinished&&f.setFinished("uh2"),f.isBizmail&&e.fire("change:username"),t.features.enabled("launchRecorder")&&e.fire("rc:flow",{name:"launch",capacity:t.settings.value("launchFlowCapacity")}),u.Event.removeHandler(document,"click",u.globalClickForSearchBtn),u.Event.removeHandler(document,"keydown",u.glocalEnterBtnForSearchBar),e.use("ucs-logodebug",function(){mt()})}),f.hasUh2Notification&&e.Lang.later(9e3,null,function(){e.use("uh2-notification-base",function(){var e=!1;f.isInternalIP&&(e=window.location.href.match(/&rtb_extra=1/)||window.location.href.match(/\?rtb_extra=1/)),e&&((new Image).src="/"+f.scriptBase+"/rtbeacon.gif?uh2_done=1")})})}function Tt(n){function d(e,t,n){t.type="newsfeedtab",bn(t,e),e.widget=t,t.newsfeedTab=e,n&&n()}function g(){function k
(){var e=(new Date).getDate();e!==T&&(x.setAttribute("data-day",e),T=e)}var i=!1,c=!1;Z||Dt(),e.mail.ui.Tictacs.init(),e.fire("ws:initLoad"),e.mail.Tabs.setPageMode(0),f.tabs&&e.use("common-ui-navtabs");var h=e.one(R),g,y,b,w;!Q&&h&&(Q=new _({root:h.one(U),menu:{template:function(t,n){var r=f.mnuTmplMap[t.replace("btn","menu")],i=r?["mail-ui-inboxmenu-base",r]:"mail-ui-inboxmenu-base";e.use(i,function(e){e.mail.ui.InboxMenu.insert(t,n)})},keys:function(t,n){e.use("mail-ui-inboxmenu-base",function(e){n(e.mail.ui.InboxMenu.getValidKeys(t))})},enterAccel:function(t){e.use("mail-ui-inboxmenu-base",function(e){t(e.mail.ui.InboxMenu.getEnterAccel())})}}}),Q.on("itemSelected",_t),a.originalNav=Q,G=h.one(z));var E=function(){if(u.msgHdrStack.length){var t=e.one("#tablist .messagetabs.active a"),r=0,i=[],s,o,a=!1;y="Inbox",t&&(o=parseInt(t.getAttribute("tabindex"),10)),e.all("#tablist .messagetabs").each(function(t){r=parseInt(t.one("a").getAttribute("tabindex"),10);var n="div#shellcontent #messageid"+r;t.remove(),s=e.mail.model.DataStore.Messages.toMessage(y,u.msgHdrStack[r]),r===o?a=[s,n]:i.push([s,n])}),a&&(i.push(a),n=2),i&&setTimeout(function(){var t,n=e.mail.Tabs.getActiveTab(),r=function(t){var n=e.one(t);n&&n.remove()};for(t in i)e.fire("openMessage",{fid:y,msg:i[t][0]},e.bind(r,null,i[t][1]));n&&e.mail.Tabs.switchToTab(n)},10)}};n===1&&(E(),p=f.low_bandwidth?"launch_inbox_low":NeoConfig.isSSL?"launch_inbox_ssl":"launch_inbox");if(!B){var S,N;e.fire("Y.mail.ui.Workspace:switchToInbox:start"),y=u&&u.fid||"Inbox",N={fid:y,dontBind:nt,type:"list"},f.hasConv?g=new e.mail.ui.ConvView(N):g=new e.mail.ui.MessagesView(N),c=g.isEmpty(y),g.once("renderComplete",function(){o.fire("initComplete",S)}),w={p_label:strings.str_nav_left_folders,s_label:y,widget:g,ult:{action:"folder_tab"}},S=e.one("#inboxcontainer"),S&&(w.yTabEl=e.one("#tabinbox").get("parentNode"),w.yTabContentEl=S,w.inactive=n!==1,w.sync=!0,M.set("active",!w.inactive)),B=yn(w),B.widget.set("loaded",1),B&&(B.on("activeChange",function(e){M.set("active",e.newVal)}),r=1,e.fire("Y.mail.ui.Workspace:switchToInbox:complete"))}var C=g&&g.get("active")?g:b;!i&&n===1&&C&&(v={isFolderEmpty:c,goTo:n}),f.noDarla||i||v&&(f.prefetchAd?(f.prefetchAdType===1&&ct(),e.fire("mt:view",{action:c&&n===1?p+"_empty":p})):!f.mrd&&!f.mrd.action&&s(function(){C.fire("darlaEvent",{action:c&&n===1?p+"_empty":p})},!1)),!j&&f.contactsTabEnabled&&(w={yTabEl:e.one("#tabcontacts").get("parentNode"),label:"Contacts",noDefault:!0,inactive:!0,forcePane:!0,sync:!0,ult:{action:"contacts_tab",spid:"contacts_tab"},init:function(t,n){e.use("contacts-ui-contactsview",function(e){var r=e.contacts.ui.getContactsViewInstance();r.type="contactstab",bn(r,t),t.widget=r,e.contacts.ui.ContactsView.contactsTab=t,n()})}},j=yn(w)),!F&&f.calendarTabEnabled&&(w={yTabEl:e.one("#tabcalendar").get("parentNode"),label:"Calendar",noDefault:!0,inactive:!0,forcePane:!0,sync:!0,ult:{action:"calendar_tab",spid:"calendar_zodiac"},init:function(t,n){function r(){bn(m,t),t.widget=m,e.calendar.ui.CalendarView.calendarTab=t,n()}e.calendar?r():e.use("calendar-ui-calendarview",function(){Pt(),r()})}},F=yn(w),e.on("nav:refreshCalendar",k),k()),!I&&f.notepadTabEnabled&&(w={yTabEl:e.one("#tabnotepad").get("parentNode"),label:"Notepad",noDefault:!0,inactive:!0,forcePane:!0,sync:!0,ult:{action:"notepad_tab",spid:"notepad_tab"},init:function(t,n){e.use("notepad-ui-notepadview",function(e){var r=e.notepad.ui.getNotepadViewInstance();r.type="notepadtab",bn(r,t),t.widget=r,e.notepad.ui.NotepadView.notepadTab=t,n()})}},I=yn(w)),!q&&t.features.enabled("newsFeedTab")&&(t.features.enabled("breakingNews")&&(ht(),e.on("breakingnews:cometNotification",function(t){if(t.data){if(!t.data.uuid)return;NeoGV.breakingNews.uuid=t.data.uuid,t.data.publishedAt?NeoGV.breakingNews.publishedAt=t.data.publishedAt:NeoGV.breakingNews.publishedAt=Math.floor(Date.now()/1e3),NeoGV.breakingNews.uuid&&NeoGV.breakingNews.publishedAt&&(l===null||l.value==="1")&&e.one(".breaking-news-badge").removeClass("hidden"),NeoGV.breakingNews.uuid&&NeoGV.breakingNews.publishedAt&&vt(NeoGV.breakingNews.publishedAt)}})),w={yTabEl:e.one("#tabnewsfeed").get("parentNode"),label:"newsfeed",noDefault:!0,inactive:!0,forcePane:!0,sync:!0,noToolbar:!0,widgetType:"newsfeed",ult:{action:"newsfeed_tab"},init:function(n,r){clearTimeout(ft),!t.features.enabled("newsstream")&&!o.newsFeedController?e.use("mail-ui-newsfeed-controller",function(e){o.newsFeedController=(new e.mail.ui.newsFeedController).init();var t=o.newsFeedController.getView();d(n,t,r)}):e.use("newsstream-ui-newsstreamview",function(e){var t=e.NewsStream.ui.getNewsStreamViewInstance();t.type="newsfeedtab",d(n,t,r)})}},q=yn(w))}var r,i=t.parseQueryString(),o=this,l=dt();p="launch_welcome"+(f.low_bandwidth?"_low":NeoConfig.isSSL?"_ssl":""),f.catchErrors&&k(),e.namespace("contacts"),e.contacts.clientConfig={requestFn:e.common.net.SessionMgr.requestProxy,wssid:f.wssid,guid:f.neoguid,wspath:f.socdirProxyPath},f.strings&&(strings.str_ctrl=f.strings.str_ctrl,strings.str_enter=f.strings.str_enter,strings.str_ctrl_shift=f.strings.str_ctrl_shift,strings.str_ctrl_alt=f.strings.str_ctrl_alt,strings.str_right_click=f.strings.str_right_click),f.windowId=Math.round(Math.random()*1e9);if(f.multitask){var h=f.hasConvView?"ds:conv:":"ds:msg:";e.on(h+"remove",function(e,t,n){if(n){var r,i=t.length;for(r=0;r<i;r++)Nt(t[r])}}),f.hasConv?e.on("ds:conv:change",function(){var e,t,n,r,i,s,o,u;e=[].slice.call(arguments),t=f.hasConv?e[0]:e[4],n=e[1],r=e[2];if(t==="move"){u=n.length;for(o=0;o<u;o++)s=n[o].fid,i=r[o].fid,Nt(n[o])}}):e.on("ds:msg:change",function(){var e,t,n,r,i,s;e=[].slice.call(arguments),t=e[4],r=e[5],n=e[2];if(t==="move"){s=n.length;for(i=0;i<s;i++)Nt({mid:n[i].mid,fid:r}),n[i].srcMid&&Nt({mid:n[i].srcMid,fid:r})}})}return t.startConsole(i.ylog),g(),c=n,f.mrd&&f.mrd.action&&Wt(null,!0),r}function Nt(t){var n,r,i,s,o;if(!t.cid&&!t.mid)return;n={fid:t.fid},f.hasConv&&t.cid?(i=O.model.ConvStore.Conversations,o=i.getPermCidPart
,n.cid=o(t.cid),n.tabKey="cid"):t.mid&&(r=O.model.DataStore.Messages,s=r.getPermMidPart,n.mid=s(t.mid),n.tabKey="mid"),e.fire("tab:removeRef",{data:n})}function Ct(t,n){var r=e.one("#paneshell"),i=strings.str_tog_loadRTLCss?"right":"left";n?(t.set("shellcontentOffset",r.one("#shellcontent").getStyle(i)),r.one("#shellcontent").setStyle(i,"0"),r.addClass("withoutshellnavigation")):(r.one("#shellcontent").setStyle(i,t.get("shellcontentOffset")),r.removeClass("withoutshellnavigation"))}function kt(t,n){n?e.one("#shellnavigation").all(".items").addClass("hidden"):e.one("#shellnavigation").all(".items").removeClass("hidden")}function Lt(t,n){n?e.one("#main").addClass("withouttoolbar"):e.one("#main").removeClass("withouttoolbar"),e.fire("mbEvent:"+(n?"hide":"rotate"))}function At(t){var n=e.one(R),r,i;Q&&t.newVal&&(r=Q.get("content"),r&&r.remove(),i=t.newVal,i=i?i.get("content")||"":"",i&&n.insert(i,0),n.hasClass("hidden")&&n.removeClass("hidden"),Q&&Q.set("active",0),Q=t.newVal,Q&&Q.set("active",1))}function Ot(e){if(G&&e.target.get("active")){var t=e.prevVal,n=e.newVal,r=n?n.get("content")||"":"";r!==et&&(G.setContent(r),t&&t.set("active",0),et=r,n&&n.set("active",1))}}function Mt(n,r){var i=(new Date).getTime();e.detach("list-stat:renderComplete"),e.detach("tab:reactivated"),e.detach("list-stat:tabDone"),e.fire("stat:feature_invoke",{message:"UI_LIST_START_SUCCESS",feature_group:"LIST"});if(n&&B&&B.widget.msgList.get("fid")===n.fid)var s=function(t){t&&(t.type==="messagelist"||t.type==="convlist")&&e.fire("stat:feature_complete",{message:"UI_LIST_COMPLETE_SUCCESS",feature_group:"LIST"}),o.detach()},o=e.once(["tab:reactivated","list-stat:tabDone"],s);else e.once("list-stat:renderComplete",function(t){e.fire("stat:feature_latency",{message:"UI_LIST_COMPLETE",feature_group:"LIST",value:t.endTime-i}),e.fire("stat:feature_complete",{message:"UI_LIST_COMPLETE_SUCCESS",feature_group:"LIST"})});if(!n||!n.fid)return;var a=new t.Stopwatch("FolderView"),l=f.bidi,c=n.extraParams||n.smartFolder&&n.forceRefresh,d=n.smartFolder&&!n.forceRefresh,v=n.fid;h||(h=!0,p=f.low_bandwidth?"launch_inbox_low":NeoConfig.isSSL?"launch_inbox_ssl":"launch_inbox"),v=v.replace(/%2f/g,"%5c");var m=n.bb;P.get(v,{success:function(i){n=i;var s=n.folderInfo.fid,o=n.folderInfo.name,h=e.mail.ui.common.StringUtils.getSystemFolderName(s,o,d),p,g=f.roundTrip,y,b=window.rt_LogTime,w;r?(y=M.get("fid"),y&&y.fid!==s&&M.set("fid",{fid:s,name:o,checkMail:!1})):(B?(l&&(h=B.widget.msgList.getFolderNameBidi(h,n.folderInfo.dir,n.total)),B.set("title",h),NeoConfig.backButtonFull&&!m&&(H.getActiveTabIndex()||B.widget.msgList.get("fid")!==s)&&e.fire("initPage",{fid:s}),B.widget.msgList.stopwatch=a,B.widget.msgList.set("extraParams",c),B.widget.msgList.set("fid",s),p=B.widget.msgList.get("fid")===s,e.mail.Tabs.switchToTab(B)):(Tt(1),l&&(h=B.widget.msgList.getFolderNameBidi(h,n.folderInfo.dir)),B.set("title",h)),u.fid=s,w=function(){v===u.fid&&(g&&b&&(g.t3&&(b("t3",g.t3,!0),delete g.t3),g.t4&&(b("t4",g.t4,!0),delete g.t4)),a&&a.stop())},B.widget.handledInitialRender||(w(),B.widget.msgList.stopwatch=null,B.widget.handledInitialRender=!0),B.widget.once("renderComplete",function(){w(),B.widget.msgList.stopwatch=null}),t.features.enabled("viewMenuV2")&&e.one("#btn-conv-view span")&&e.one("#btn-conv-view span").set("innerHTML",e.mail.ui.common.StringUtils.getSortKeyString(B.widget.msgList.sortedColumn.action)))}})}function _t(t){var n=t?t.dataAction:0,r,i=t?t.item:0;switch(n){case"compose":case"autocompose":r={action:"compose_new_nav_toolbar",spid:"compose_new"},i&&i.hasClass("menu-active-item")&&(r.action="compose_menu_toolbar_sel",r.append={ltxt:"compose"}),e.mail.Tabs.getActiveTab().widgetType==="messagepane"&&(r.append={sec:"msgReadTlbr"}),e.fire("mt:click",r),n==="autocompose"&&e.fire("util:ymstats",{name:"autocompose"}),e.fire("newMessage",{noScroll:!0,flavor:n});break;case"new-conv":}}function Dt(){Bt(),e.Lang.later(0,null,function(){M.render(),at&&B.widget.msgList.refresh()}),H.render(),e.mail.ui.SearchBar.render(),Z=1,e.fire("stat:feature_latency",{message:"UI_LAUNCH_COMPLETE",feature_group:"LAUNCH",value:(new Date).getTime()-NeoGV.startTime}),e.fire("stat:feature_complete",{message:"UI_LAUNCH_SUCCESS",feature_group:"LAUNCH"}),o.fire("renderComplete")}function Pt(t){F&&(m=e.calendar.ui.getCalendarViewInstance(),m.type="calendartab",m.render(F.elContent,t))}function Ht(){f.isCorpmail&&!(C&&C<9)&&e.use("calendar-ui-calendarview",function(){Pt(!0)})}function Bt(){function n(t){t.hasClass("calendar")&&e.fire("openCalendar"),t.hasClass("contacts")&&e.fire("openContacts"),t.hasClass("notepad")&&e.fire("openNotepad"),t.hasClass("settings")&&e.fire("openOptions"),t.hasClass("newsfeed")&&e.fire("openNewsfeed")}function r(t){var n=e.one("#tabs"),r,i;n&&(r=n.one('[data-tid="'+t+'"]'),r&&(i=r.get("parentNode"),i.hasClass("hidden")&&(H.autoCloseTabs(),i.removeClass("hidden"))),e.fire("tab:resize"))}function i(){var t=e.mail.Tabs,n=t.getActiveTab(),i=!1,s,o=n&&n.widget&&n.widget.fid,u=L.one('>li[data-fid="'+o+'"]')||L.one('li[data-fid="'+o+'"]'),a=n.get("widget"),l=n.widgetType,c=L.all(">li");t.switchLaterNav=null,e.one("#toolbar").removeClass("with-backsearch");if(l==="convpane"||l==="messagepane"){var h=n.prevTabId,p=t.getTabById(h);i=p&&p.widgetType==="search"}a&&a.NAME==="AuthorView"?("multitask"!==w.getAttribute("data-open")&&e.fire("navigation:switch",{type:"none"}),N&&N.addClass("defrost")):N&&N.removeClass("defrost"),i?(s=e.one(".search-nav"),s&&s.removeClass("hidden"),w.getAttribute("data-open")==="searchNav"&&e.fire("navigation:switch",{type:"none"}),e.one("#toolbar").addClass("with-backsearch")):u?(c.hasClass("selected")?c.removeClass("selected"):null,u.addClass("selected"),A.removeClass("open"),t.switchLaterNav=null,w.getAttribute("data-open")==="searchNav"&&e.fire("navigation:switch",{type:"none"})):o&&o===b&&(L.all("li.selected").removeClass("selected"),f.multitask&&t.holdNavSwitch?t.switchLaterNav="searchNav":e.fire("navigation:switch",{type:"searchNav"
})),n.isRemovable||r(n.get("id")),n.isRemovable?S.addClass("subtab-active"):S.removeClass("subtab-active")}e.once("mail-ui-composeview-compose-loader:loaded",function(){e.fire("core-modules-loaded");var n=["mail-ui-workspace-rum"];t.features.enabled("zombie")&&n.push("mail-ui-zombie-controller"),n.push(function(e){e.mail.ui.Rum.init(),o._setUpFreshToolTips(),t.features.enabled("lozengeContactCard")&&e.use("contacts-ui-hovercard-plugin",function(){new e.mail.ui.HoverCard}),t.features.enabled("zombie")&&e.mail.ui.zombieController.init(e.one(".list-view-items")),f.showFeedback&&o._setupFeedback()}),e.use.apply(e,n)}),e.once(f.tictac?"tictacs-loaded:ws:postLoad":"ws:postLoad",function(){NeoConfig.useAttComposerTT&&e.use("mail-ui-composeview-compose-loader","common-ui-lozengeDD"),NeoConfig.hasAds&&f.mrd&&f.mrd.action?e.once("adRendered",function(){gt()}):gt(),Ht()}),NeoConfig.enableSponsoredThemes&&e.on("themes:changeSuccess",function(e){o.sponsoredThemeView&&e.name&&e.sponsored&&o.sponsoredThemeView.render(e.name)}),M.on("fidChange",function(e){var n=e.prevVal||{},r=n.fid,i=e.newVal.fid,s=e.newVal.smartFolder||n.smartFolder;t.assert(i.search("_")===-1);if(B){var o=r;o||(o=u&&u.fid||"Inbox"),(i!==o||i===o&&s)&&B.widget.set("loaded",0)}Mt(e.newVal)}),e.on("openMessage",hn),e.on("openConv",cn),e.after("search:input",Gt),e.on("tab:click",function(t){var n=t&&t.cfg&&t.cfg.ult,r,i;if(n){i=u.fid&&u.fid.toLowerCase();if(i&&n.action==="folder_tab"){switch(i){case"inbox":case"draft":case"sent":case"trash":r="folderview_"+i;break;case"%40b%40bulk":r="folderview_bulk";break;case"%40c%40chats":r="folderview_chat";break;default:r="folderview_custom"}n.spid=r}e.fire("mt:click",n)}}),it=e.once("newMessage",nn),e.once("FullCompose:fullComposeReady",function(){it.detach(),e.on("newMessage",nn)}),u.openCompose&&e.fire("newMessage"),e.on("editMessage",on),e.on("updateDataStore",Sn),e.on("startPrefetch",function(t){var n=e.mail.common,r=n&&n.cachewarmer,i=t.msgHdrList,s=t.fid,o=t.preCacheMids;r&&r.preFetchMessages(s,i,100,o)}),e.on("prefetchConversations",function(t){var n=NeoConfig.bandwidthMode?NeoConfig.bandwidthMode:"broadband",r=NeoConfig.messagePrefetchThreshold[n],i=e.clone(t.cids)||[],s=t.startIndex||0,o=i.splice(s,r.limit||10),u=t.fid,a=r.batch||3,f,l,c=[];if(!NeoConfig.enableMessagePrefetch||!NeoConfig.hasConv||!o.length)return;for(l=0;l<o.length&&a>0;l++)e.mail.model.ConvStore.Conversations.isCached(u,o[l].cid)||(c.push(o[l]),a--);if(!c.length)return;f=O.Controller.batch(),f.setAsReadOp(!0);for(l=0;l<c.length;l++)O.Controller.Conversations.batchAddConvPrefetch(f,l,u,c[l],"CacheWarmer");f&&f.execute({suppressCodes:["*"],backgroundLogs:["*"]})}),e.on("openInbox",function(){M.set("fid",{fid:"Inbox",name:strings.str_tabs_inbox})}),e.on("openRUEFCInbox",function(){M.set("fid",{fid:"Inbox",extraParams:{maxMessagesToScanForContacts:f.msgsToScanContacts||2e3},smartFolder:!0,name:strings.str_nav_email_from_ctcts})}),e.on("openContacts",Vt),e.on("openCalendar",Qt),e.on("openNotepad",$t),e.on("openFolder",Mt),e.on("openNewsfeed",Jt),e.on("ds:folder:system:switch",n),e.on("tabChange",i);var s=e.one("#signout");s&&(s.on("click",function(t){e.fire("signout"),t.preventDefault()}),e.on("signout",Hn)),e.on("addContact",Kt),e.on("mrd:launch",Wt),e.on("update:density",Tn),e.on("update:previewPane",Nn),e.on("showMultitaskingOnboarding",kn),e.on("showNewsFeedOnboarding",Cn),e.on("windowresize",function(){e.fire("cv:fixupList")}),window.onbeforeunload=Pn,window._TBCD=Xt,e.on("themes:change",function(e){var t;e.info&&e.info.meta&&(t=e.info.meta.darktab?"addClass":"removeClass",w[t]("tictac-dark-theme"))}),e.on("navigation:switch",function(t){e.use("mail-ui-workspace-ext",function(){o._setupNavigationSwitchForNav(t)})}),e.one("window").on("load",function(){var t=window.performance,n=[];if(!NeoConfig.log_assetlatency||!t||!t.getEntries||!t.timing)return;if(!NeoConfig.inThrottleAssetLatency||t.timing.loadEventStart-t.timing.responseStart<NeoConfig.log_assetlatency_onload_delay)return;n=t.getEntries(),e.Lang.later(1e3,null,function(){jt(n)})}),window.LH!==undefined&&window.sessionStorage!==undefined&&sessionStorage.setItem("MTTI",Math.round(u.performance.now()))}function jt(t){var n={},r,i=t.length,s={};for(r=0;r<i;r++)s=t[r],n[s.name]={start:s.fetchStart,duration:s.duration,conn:s.connectEnd-s.connectStart,dns:s.domainLookupEnd-s.domainLookupStart};e.use("common-net-sessionmgr",function(){var t=[];t.push(e.JSON.stringify(n)),e.common.net.SessionMgr.requestProxy("/neo/assetStat",{method:"POST",data:t.join("&"),service:"assetStat"})})}function Ft(){f.hasConvView?f.hasConvV3&&o.presetConvs():o.presetMsgs()}function It(t){e.fire("util:ymstats",{name:t,unit:"requests",type:"gauge",dataum:1,tags:{bandwidth:NeoConfig.bandwidthMode?NeoConfig.bandwidthMode:"broadband",isMailPlus:NeoConfig.hasAds?0:1}})}function qt(){var n,r,i,s,o;if(parseInt(f.launchMsgPrefetch,10)===1&&f.prefetchObj&&f.prefetchObj.isConv&&f.prefetchObj.result){i=f.prefetchObj.result,i=e.JSON.parse(t.parseMultiPartResponse(i.conv,i.boundary));for(n in i){r=i[n];if(!r.success)continue;o=r[r.key],r.id.indexOf("GDM")!==-1||r.id.indexOf("getdisplaymessage")!==-1?(s=o.result&&o.result.message[0],s&&zt(s)):(r.id.indexOf("LMT")!==-1||r.id.indexOf("listmessagesinthread")!==-1)&&o.result&&Rt(o.result)}X=W={},e.detach(ot),e.detach(st)}}function Rt(t){var n=t.conversation.cid;X[n]||(J[n]="server",K++,e.mail.Controller.Conversations.preset({fid:"Inbox",conv:t}))}function Ut(){if(parseInt(f.launchMsgPrefetch,10)===1&&f.prefetchObj&&f.prefetchObj.result){var t=f.prefetchObj.result.message;for(var n in t)zt(t[n]);f.prefetchObj.prefetchLimitReached&&(W={},e.detach(ot))}}function zt(n){var r,i,s;n.sourceFolderInfo&&n.sourceFolderInfo.fid?s=n.sourceFolderInfo.fid:s="Inbox";if(!W[n.mid]){V[n.mid]="server",$++;if(f.vertPane){var o=0;while(o<20){r=f.msgListObj[o];if(r&&n.mid===r.mid){n.snippet=r.snippetStr||"";break}o++}}It(ut),e.mail.Controller.Messages._preset({fid:s,msgObj:n}),f.hasConvView&&
e.mail.Controller.Conversations&&e.mail.Controller.Conversations.presetMsg({fid:s,msgObj:n})}n.sourceFolderInfo||(i={key:"missingsourceFolderInfo",mid:n.mid,yid:NeoConfig.loginId,host:NeoConfig.hostName,wssid:NeoConfig.wssid,time:(new Date).getTime()},t.netError(e.JSON.stringify(i)))}function Wt(t,n){e.use("mail-controller-mrd",function(e){e.mail.Controller.MRD&&(n?e.mail.Controller.MRD.handleLaunch():e.mail.Controller.MRD.handleClick(t))})}function Xt(t){t&&e.use("mail-controller-mrd",function(e){e.mail.Controller.MRD.handleToolbar(t)})}function Vt(t){e.fire("Y.mail.ui.Workspace:openContacts:start"),e.use("contacts-ui-contactsview",function(e){var n=e.contacts.ui.getContactsViewInstance(t);n.updateConfig(t),e.mail.Tabs.switchToTab(j)})}function $t(){e.fire("Y.mail.ui.Workspace:openNotepad:start"),e.use("notepad-ui-notepadview",function(e){var t=e.notepad.ui.getNotepadViewInstance();t.updateConfig(),e.mail.Tabs.switchToTab(I)})}function Jt(){e.fire("Y.mail.ui.Workspace:openNewsfeed:start"),e.mail.Tabs.switchToTab(q)}function Kt(t,n,i,s){t===n&&(t=""),e.use("contacts-ui-addcontactdialog","common-net-sessionmgr",function(){new e.contacts.ui.AddContactDialog[i||s?"editDialog":"createDialog"](s?s:i?{fields:i}:{name:r(t),email:r(n)},{requestFn:e.common.net.SessionMgr.requestProxy,disableBuddyAdd:strings.str_cfg_tog_disableBuddyAdd,guid:f.neoguid,wspath:f.socdirProxyPath,composeFn:function(e){var t={cbfn:function(t){var n={};return n.to=[{email:e||""}],t.setHeader(n),!0}};nn(t)}})})}function Qt(){F&&f.calendarTabEnabled&&e.mail.Tabs.switchToTab(F)}function Gt(t){var n=e.Object.getValue(e.Tictac,["search","isSearchResultsReallyEnabled"]);n?n(function(e){e||Yt(t)}):Yt(t)}function Yt(n){if(strings.str_cfg_tog_mailSearchEnabled!==undefined&&strings.str_cfg_tog_mailSearchEnabled===!1)return!1;var r,i;L.all("li.selected").removeClass("selected"),n.query!==undefined&&(n.query=typeof n.query=="string"?{keyword:n.query}:n.query);var s=new t.Stopwatch("Search","start"),o=(new Date).getTime();return e.detach("search-stat:renderComplete"),e.fire("stat:feature_invoke",{message:"UI_SEARCH_START_SUCCESS",feature_group:"SEARCH"}),n.stopWatchRT=s,e.one("#yucs-input_wrap ul li > [role=option]")||t.ymmastats.stat("searchsuggestions_nosuggestionsgiven"),n.query&&n.query.typeTag&&e.fire("util:ymstats",{name:"search_source",tags:{type:n.query.typeTag}}),e.use("mail-ui-mailSearchController","common-net-session",function(e){var o=e.common.net.Session.genReqID();n.query&&n.query.typeTag&&e.fire("mt:click",{action:n.query.typeTag,append:{mSrchId:o,mYid:NeoConfig.loginId,mSrchQry:n.query.keyword}}),t.features.enabled("localsearch")&&n.query&&e.fire("localsearch:start",{searchId:o,query:n.query,showDDWithSearchResults:n.showDDWithSearchResults}),e.mail.ui.searchTab&&!window.location.href.match(/&multi=1/)&&!window.location.href.match(/\?multi=1/)?(i=e.mail.ui.searchTab,e.mail.Tabs.switchToTab(i),r=i.widget,r.set("query",n.query),r.set("searchId",o),r.set("customTitle",n.customTitle),r.set("prefilterRefinements","prefilterRefinements"in n?n.prefilterRefinements:!1),r.set("displayQueryInSearchBar","displayQueryInSearchBar"in n?n.displayQueryInSearchBar:!0),r.set("showDDWithSearchResults",!!n.showDDWithSearchResults),r.set("displayTextInSearchBar",n.displayTextInSearchBar),r.set("searchRequestId",n.searchRequestId),r.set("stopWatchRT",s),r.set("searchingContact",n.searchingContact),r.set("noRefine",n.noRefine),r.set("disableScrollToSearch",n.disableScrollToSearch),n.addToRecentSearches===!1?r.set("addToRecentSearches",!1):r.set("addToRecentSearches",!0),r.sync()):(n.fid=b,n.type="search",n.searchId=o,yn({isRemovable:!0,widget:new e.mail.ui.Search(n),acwHandler:function(t){e.mail.ui.searchTab=t.tab,e.mail.ui.searchTab.widget.sync()}}))}),e.once("search-stat:renderComplete",function(){var t=(new Date).getTime()-o;e.fire("lhStat:feature_latency",{message:"search_latency",duration:t}),e.fire("stat:feature_latency",{message:"UI_SEARCH_COMPLETE",feature_group:"SEARCH",value:t}),e.fire("stat:feature_complete",{message:"UI_SEARCH_COMPLETE_SUCCESS",feature_group:"SEARCH"})}),!0}function Zt(){var e=H.getByType("compose");for(var t in e){var n=e[t].widget;if(n.isClean())return!0}return!1}function en(){var t,n,r=H.getByType("compose"),i=function(t){t&&t.widgetType==="compose"&&e.fire("stat:feature_complete",{message:"UI_COMPOSE_SWITCH_SUCCESS",feature_group:"COMPOSE"})};for(var s in r){t=r[s],n=t.widget;if(n.isClean()){e.once(t.get("active")===1?"tab:reactivated":"tabChange",i),H.switchToTab(t);return}}}function tn(e){var t=e.widget;if(t){var n=t.tab||H.getActiveTab();n.detach("closeHalted"),n.on("closeHalted",function(e){e.halt(!0)})}}function nn(n,r){var i=o,s=!!n&&!!n.oMsg,u=n&&n.fromContact;s&&(n.parentMsg=t.getVal(n,"oMsg"),n.parentMsg.fid=t.getVal(n,"fid")),n&&!n.startTime&&(n.startTime=(new Date).getTime(),e.fire("stat:feature_invoke",{message:"UI_COMPOSE_START_SUCCESS",feature_group:"COMPOSE"}),e.detach("compose-stat:fullComposeReady"));if(NeoConfig.useAttComposerTT&&(!e.Tictac||!e.Tictac.attach))n&&!n.dHdlr&&(n.dHdlr=e.once("tictacs-loaded:ws:postLoad",function(){n.dHdlr=null,nn(n,r)}));else{if(!s&&!u&&o.hasCleanCompose()){o.switchToCleanCompose();return}tn(n),e.once("compose-stat:fullComposeReady",function(){e.fire("stat:feature_latency",{message:"UI_COMPOSE_COMPLETE",feature_group:"COMPOSE",value:(new Date).getTime()-n.startTime}),e.fire("stat:feature_complete",{message:"UI_COMPOSE_COMPLETE_SUCCESS",feature_group:"COMPOSE"})}),e.use("mail-ui-composeview-compose-loader",function(){var t=new e.mail.ui.Compose.ComposeLoader({context:n,workspace:i,force:r,tabs:H,strings:{str_tabs_compose_fresh:strings.str_tabs_compose_fresh}});n&&n.flavor==="autocompose"&&t.addModule("mail-ui-autocompose"),t.addModule("mail-ui-rteview-v3"),t.addModule("mail-ui-rte-formatter-v3"),t.addModule("mail-ui-authorview-v3"),t.load()})}}function rn(t){e.use("contacts-api","contacts-api-utils",function(e){var n=e.contacts,r=n.utils,i=n.api;r.areContactsLoaded
()||(t?e.Lang.later(0,null,function(){i.load()}):i.load())})}function sn(t){var n=o;e.use("mail-ui-composeview-compose-loader",function(){var r=new e.mail.ui.Compose.ComposeLoader({context:t,workspace:n,force:t.forceNew,tabs:H,strings:{str_tabs_compose_fresh:strings.str_tabs_compose_fresh},openAsDraft:!0});t&&t.flavor==="autocompose"&&r.addModule("mail-ui-autocompose"),r.addModule("mail-ui-rteview-v3"),r.addModule("mail-ui-rte-formatter-v3"),r.load()})}function on(t){t=t||{},t.forceNew=!1,NeoConfig.useAttComposerTT&&(!e.Tictac||!e.Tictac.attach)?e.once("tictacs-loaded:ws:postLoad",function(){sn(t)}):sn(t)}function un(t,n){t.oMsg&&t.fid&&(n.CMGStart=new Date,e.mail.Controller.Messages.get({fid:t.fid,msg:t.oMsg,cachekey:"ComposeOrigin",ovparams:{truncateAt:null}},{success:function(e,t){n.CMGEnd||(n.CMGEnd=new Date,t&&t.respProps&&(n.wasCached=t.respProps.wasCached))},failure:function(){}}))}function an(n,r,i){i.start(1,"GetTabCB");var s=e.mail.model.DataStore.Messages.getPermMidPart,o=n.msgPane&&n.msgPane.get("message"),u=o&&o.message&&o.message.mid||"",a=o&&o.message&&o.message.cid||"",l=u&&n.msgPane.fullView&&s(r.mid)===s(u);if(o&&n.msgPane.fullView&&!u&&!a){var c=f.loginId;c+=":"+(o.fid||"MISSING FID"),o.message&&o.message.header&&o.message.header.receivedDate?c+=":"+o.message.header.receivedDate:c+=":MISSING MESSAGE BODY",e.use("common-utils-error",function(){t.error.report("MissingMidError in hasMsgTab for YID:FID:REC_DATE"+c,"MessageRead",1)})}return l&&n.msgPane.markAsRead&&n.msgPane.markAsRead(),l}function fn(t,n,r){r.start(1,"GetTabCB");var i=e.mail.model.ConvStore.Conversations.getPermCidPart,s=t.msgPane&&t.msgPane.get("message"),o=s&&s.message&&s.message.cid||"",u=o&&t.msgPane.fullView&&i(n.cid)===i(o);return u}function ln(n,o){try{var u=n.msg.msgs&&(!f.hasConvView||n.fid==="Draft"&&n.msg.totalMsgs===1)?n.msg.msgs[n.msg.msgs.length-1]:n.msg,a=n.fid,l=n.sortCol||0,c=n.query||0,h=n.extras||{},p=n.searchRequestAttrs||{},d=n.searchListMgr||{},v=n.index||0,m=n.noScroll,g=50,y=n.arrMsgSeq||0,w=y&&y.length||0,E=v-g>0?v-g:0,S=y&&(v+g<w?v+g:w)||null,x=y&&y.slice(E,E+S>w?S:E+S)||0,T=E,N=t.Stopwatch,C=N.get("MsgInPreview"),k=null,L={},A=!1,M=n.callFromLaunch?n.callFromLaunch:!1,_,D=function(){M&&s(function(e){C.start(1,"TabDarlaEvent"),e.fire("darlaEvent",{action:f.low_bandwidth?"launch_message_low":NeoConfig.isSSL?"launch_message_ssl":"launch_message"})},!1)},P,B,j,F,I,q,R="",U=n.isConv&&!n.midtocid?"cid":"mid";typeof u=="string"&&(u=n.isConv&!n.midtocid?{cid:u}:{mid:u});if(u&&!u[U])return;e.fire("MessagePane:inception",{fid:a,message:u}),C=new N("MsgInTab"),C[U]=u[U],C.isConv=n.isConv,a===b&&(j=u.fid?u.fid:u.sourceFolderInfo.fid),A=a===b&&j==="Draft",document.onselectstart=function(){return!1},setTimeout(function(){document.onselectstart=null},500);if(u.mid&&(a==="Draft"||A)){e.detach("read-stat:draftRendered"),e.once("read-stat:draftRendered",function(){n.isConv?(e.fire("stat:feature_latency",{message:"UI_READ_DRAFTCONV_COMPLETE",feature_group:"READ",value:(new Date).getTime()-n.startTime}),e.fire("stat:feature_complete",{message:"UI_READ_DRAFTCONV_COMPLETE_SUCCESS",feature_group:"READ"})):(e.fire("stat:feature_latency",{message:"UI_READ_DRAFTMESSAGE_COMPLETE",feature_group:"READ",value:(new Date).getTime()-n.startTime}),e.fire("stat:feature_complete",{message:"UI_READ_DRAFTMESSAGE_COMPLETE_SUCCESS",feature_group:"READ"}))}),e.fire("editMessage",{oMsg:u,fid:A?j:a,action:"edit",enableRetry:A?!0:!1,noScroll:m});return}k=n.isConv&&n.msg.cid?H.getTab(function(e){return fn(e,u,C)}):H.getTab(function(e){return an(e,u,C)}),k&&(e.mail.Tabs.destroyTabWidget(k),k=null),f.multitask&&!k&&(L.fid=n.fid,n.isConv&&!n.midtocid?(L.cid=O.model.ConvStore.Conversations.getPermCidPart(u.cid),L.tabKey="cid"):(L.mid=O.model.DataStore.Messages.getPermMidPart(u.mid),L.tabKey="mid"),Nt(L)),rn(),C.start(1,"NewView"),k?(k.invisible=0,P=k.widget,B=P.msgPane,P.fid=B.fid=a,P.stopwatch=B.stopwatch=C,B.sortedColumn=l,B.searchQuery=c,B.extras=h,B.searchRequestAttrs=p,B.searchListMgr=d,B.processData=n.processData,B.type=n.type,B.arrMessageSequence=x,B.arrMessageSequenceStartIndex=T,P.callFromLaunch=M,C.start(1,"preload"),B.preload(u),e.fire("MailLog",{m:"message preloaded"})):(e.fire("MailLog",{m:"Creating new view"}),_={msgList:0,fid:a,cid:n.msg.cid,message:u,submessage:n.submsg,midtocid:n.midtocid,neighbors:n.neighbors,sortedColumn:l,searchQuery:c,extras:h,arrMessageSequence:x,arrMessageSequenceStartIndex:T,callFromLaunch:M,stopwatch:C},n.isConv&&n.fid!=="%40C%40Chats"?P=new e.mail.ui.ConvView(_):P=new e.mail.ui.MessagesView(_),B=P.msgPane),P.once("renderComplete",function(){n.isConv||(Bn(C,P,B),e.fire("stat:feature_latency",{message:"UI_READ_MESSAGE_COMPLETE",feature_group:"READ",value:(new Date).getTime()-n.startTime}),e.fire("stat:feature_complete",{message:"UI_READ_MESSAGE_COMPLETE_SUCCESS",feature_group:"READ"})),D(),o&&o()}),n.isConv&&B.once("renderConvComplete",function(){Bn(C,P,B),e.fire("stat:feature_latency",{message:"UI_READ_CONV_COMPLETE",feature_group:"READ",value:(new Date).getTime()-n.startTime}),e.fire("stat:feature_complete",{message:"UI_READ_CONV_COMPLETE_SUCCESS",feature_group:"READ"})}),C.start(1,"EscapeMessageSubject"),I=n.isConv?u.subject||strings["str_msg-view_tab_no_subject"]:u.header&&u.header.subject||u.subject||strings["str_msg-view_tab_no_subject"],I=r(i(I)),n.type==="search"&&(I=I.replace(new RegExp("\\^_([^^]*?)\\^_","g"),"$1")),f.bidi&&(R=n.isConv?u.subjectDir||"":u.header&&u.header.subjectDir||u.subjectDir||"",R===""&&e.Intl.detectDirection&&(R=e.Intl.detectDirection(I)));var z,W="";n.isConv&&n.type!=="search"?(z=u&&u.recipients,z&&z.length&&(W=r(i(z[z.length-1].name)))):u.header&&u.header.from&&(W=e.mail.ui.PaneUtils.getName(u.header.from)),C.start(1,"AddCW");var X={data:L,p_label:W,s_label:I,s_labelDir:R,widget:P,isRemovable:!0,forcePane:n.isConv,noScroll:m,extras:h,searchQuery:c};k?X.tab=k:X.acwHandler=pn,X.acwHandlerArgs={stopwatch:C,msgPane:B,fid:a,message:u,neighbors:n.neighbors,usedTabPool
:F,isConv:n.isConv},n.isConv&&e.one("#shellcontent").addClass("loadingConv"),k=yn(X),B&&B.fire("convAddedToDOM")}catch(V){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:3",V,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:3"),e.use("common-utils-error",function(){t.error.report("openMessageError",V,1,1,1)})}}function cn(t,n){e.fire("stat:feature_invoke",{message:"UI_READ_CONV_START_SUCCESS",feature_group:"READ"}),t=t||{},t.isConv=1,t.startTime=(new Date).getTime(),ln(t,n)}function hn(t,n){e.fire("stat:feature_invoke",{message:"UI_READ_MESSAGE_START_SUCCESS",feature_group:"READ"}),t=t||{},t.startTime=(new Date).getTime(),t.msg&&t.msg.mid&&V[t.msg.mid]==="server",t.isConv=f.hasConvView?1:0,t.isConv&&(t.midtocid=!0),t.isConv=f.hasConvView&&!t.forceMessageOpen?1:0,t.isConv&&t.fid==="%40C%40Chats"?e.use("mail-ui-messagesview-base",function(e){ln(t,n)}):ln(t,n);var r=t.msg.flags&&t.msg.flags.isRead;y||(r,y=!0)}function pn(e){var t=e.cfg.acwHandlerArgs;t.stopwatch.start(1,"TabCallFromLaunch"),t.stopwatch.title="MsgInTab Stopwatch\n",t.stopwatch.start(1,"PostOpenMessage");if(t.usedTabPool)try{t.msgPane.set("message",{fid:t.fid,message:t.message,neighbors:t.neighbors})}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:4",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:4")}}function dn(t,n){e.use("common-ui-dialog-helper",function(e){setTimeout(function(){var t={hd:strings.str_modal_tabdeactivate_title,bd:strings.str_modal_tabdeactivate_body};e.common.ui.DialogHelper.confirm(t,{ok:{handler:n},cancel:{}})},0)})}function vn(e){var t;try{t=H.createTab(e),t.on("tab:add",gn),e.acwHandler&&t.on("tab:add",e.acwHandler)}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:5",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:5")}return t}function mn(e){var t=e.tab||vn(e);try{H.addTab(e,t)}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:6",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:6")}return t}function gn(t){var n=t.cfg,r=t.tab;r.reuse||bn(n.widget,r);if(!n.inactive)try{e.mail.Tabs.switchToTab(r)}catch(i){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:7",i,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:7")}}function yn(t){if(!t.sync){var n=H.getActiveTab();if(!H.canDeactivateTab(n))return n===e.mail.ui.optionsTab?e.fire("tab:deactivateOptionsTab",{newTab:!0,addtab:function(){mn(t)}}):dn(n,function(){mn(t)}),null}return mn(t)}function bn(e,t){var n,r;try{if(e){var i=[];t.detachWidget&&t.detachWidget(),n=function(t){var n=t.currentTarget&&t.currentTarget.widget&&t.currentTarget.widget.msgPane&&t.currentTarget.widget.msgPane.message;e.get("hideToolbar")&&Lt(e,t.newVal),e.get("hideNavbar")&&Ct(e,t.newVal),e.get("clearNavbar")&&kt(e,t.newVal),f.msgrData=f.msgrData||{},f.msgrData.message=n&&n.fid==="%40C%40Chats"?n:null},e.get("navToolbar")||e.set("navToolbar",a.originalNav),t.after("navKeysChange",function(e){o.set("navKeys",e.newVal)}),t.activeChangeHandle&&t.activeChangeHandle.detach(),t.activeChangeHandle=t.after("activeChange",n),r=function(n){n.newVal&&e.set&&(t.reuse||t.detachWidget())},i.push(t.on("closeChange",r)),e.on&&(i.push(e.on("navToolbarChange",At)),i.push(e.on("contentToolbarChange",Ot))),t.evtHandles=i,t.detachWidget=function(){var e,n=t.evtHandles,r=n.length,i;for(i=0;i<r;i++)e=n[i],e&&e.detach(),n[i]=null;t.evtHandles=[]}}}catch(s){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:8",s,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:8")}}function wn(t){t!==o.get("navKeys")&&(tt&&tt.detach(),t&&(tt=e.on("key",t.onKeyDown,e.one("document"),"down:"+t.charCodes.join(","),o),e.UA.os==="macintosh"&&e.UA.gecko&&e.on("key",t.onKeyPress,e.one("document"),"press:63",o)))}function En(){xn()}function Sn(t){rt=e.common.persist.UserData.get("userUIPref.messagesPerPage"),t.modifiedObjs.userdata&&e.common.persist.UserData.load(!0),t.modifiedObjs.metadata&&e.mail.persist.MetaData.load(),typeof t.msgPaneVisible!="undefined"&&B.widget.previewPaneUIChange(t.msgPaneVisible)}function xn(t){if(t){try{var n=window.location.href.split("#")[0],r=n.indexOf("?")!==-1,i=n.indexOf(".rand")!==-1,s=".rand="+Math.round(Math.random()*1e9),o="";i?o=n.replace(/\.rand\=([\d]+)/g,s):o=r?n+"&"+s:n+"?"+s,window.location.href=o;return}catch(u){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:9",u,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:9")}window.location.reload()}else rt=e.common.persist.UserData.get("userUIPref.messagesPerPage"),e.common.persist.UserData.load(!0),e.mail.persist.MetaData.load()}function Tn(t){e.use("mail-ui-workspace-ext",function(){o._switchDensity(t)})}function Nn(t){e.use("mail-ui-workspace-ext",function(){o.setUdbKey(t)})}function Cn(){e.use("mail-ui-onboarding","comms-ui-tooltips-widget","minty_module_offscreen_bin_newsfeed_callout",function(e){var n=e.ui.Templates.minty_module_offscreen_bin_newsfeed_callout,r,i,s,u=e.one("#newsfeed-opener");t.features.enabled("newsFeedOb")?(r=t.ezSub(n.navob1,{},n),i=10,s=-15):(r=t.ezSub(n.navob1_else,{},n),i=-2,s=5),t.features.enabled("newsFeedTab")&&!t.features.enabled("newsFeedOb3")&&(e.fire("onboard:tip",{node:u,template:r,fn:function(){e.fire("onboard:tipclose")},offset:[u.get("offsetWidth")+
i,s]}),e.one("document").once("click",function(){e.fire("onboard:tipclose")}),e.use("mail-ui-workspace-ext",function(){o.setUdbKey({newsfeed_onboarding:1})})),e.fire("util:ymstats",{name:"newsFeedOnboarding",tags:{shown:"callout"}})})}function kn(n){if(f.tabs)return;e.use("mail-ui-onboarding","comms-ui-tooltips-widget","minty_module_offscreen_bin_multitask_callout_rollup",function(e){var r=e.ui.Templates.minty_module_offscreen_bin_multitask_callout_rollup,i=decodeURIComponent(f.multitaskHelpUrl),s=t.ezSub(r.base,{tabs_learn_more_url:i,user_locale:f.lang.replace("-","_")},r),u=e.one("#multitask");u.scrollIntoView(),e.fire("onboard:tip",{node:u.one("button"),template:s,fn:function(){e.fire("onboard:tipclose"),n&&n.queuedObCallback&&n.ctx&&n.queuedObCallback.apply(n.ctx)},dir:"left",offset:[105,-16]}),f.showMultitaskTutorial=!1,e.use("mail-ui-workspace-ext",function(){o.setUdbKey({multitask_onboarding:1})})})}function Ln(){return B}function An(){return B.widget.msgList}function On(t){var n=e.mail.Tabs.tabs,r,i,s,o;for(r=0;r<n.length;r++){s=n[r].widget;if(s&&(o=s.get("composeWidgets"))&&o.length)for(i=0;i<o.length;i++)if(t(o[i]))return f.hasConvView&&s.msgPane&&s.msgPane.message&&s.msgPane.message.msgs&&s.msgPane.message.msgs.length===1?null:{compose:o[i],tab:n[r]}}return null}function Mn(e){return On(function(t){return t.matchOrigin(e)})}function _n(){var t=e.mail.Tabs.getActiveTab(),n,r=t?t.widget:null,i;if(r&&(i=r.get("composeWidgets"))&&i.length)for(n=0;n<i.length;n++)if(i[n]&&i[n].get("active"))return!0;return!1}function Dn(e,t){var n=0,r;return r=On(function(r){r.get("dirty")&&r.get("dirty")!=="ForceClose"&&n++;if(e&&!r._canClose(t))return!0}),r?-1:n}function Pn(e){var t,n=0,r;t=window.onBeforeUnloadBizMail;if(t){t();return}try{n=Dn()}catch(i){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:10",i,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:10")}n&&(r=strings.str_error_ComposeNavigateAway);if(r&&n)return window.event&&(window.event.returnValue=r),e&&e.returnValue&&(e.returnValue=r),r}function Hn(){setTimeout(function(){try{e.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"}),e.Cookie.remove("YM.BM",{path:"/",domain:"mail.yahoo.com"}),window.location.href=n(strings.str_cfg_url_signout,{},null,null,strings)}catch(t){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-workspace:11",t,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-workspace:11")}},100)}function Bn(e,t,n){e&&e.stop(),t&&delete t.stopwatch,n&&delete n.stopwatch}var o=this,g=e.one("div#main"),E="#storm-listnav",L=g.one(E),A=g.one("#Folders"),O=e.mail,M=O.FoldersView,_=O.ui.Toolbar,D=O.Controller,P=D.Folders,H=O.Tabs,B,j,F,I,q,R="#toolbar",U=".switcher",z=".commontasks",W={},X={},V={},$=0,J={},K=0,Q,G,Z,et,tt,nt,rt,it,st,ot=e.on("ds:msg:remove",function(e,t){if(e==="Inbox")for(var n in t)W[t[n].mid]=!0}),ut="msg_cache_add",at=!1,ft;e.on("setUdbKey",function(t,n){e.use("mail-ui-workspace-ext",function(){o.setUdbKey(t,n)})}),NeoConfig.showConvOptOut&&e.use("mail-ui-conv-optout",function(e){e.mail.ui.ConvToggle.initConvToggleFlow(!1)}),f.hasConvView&&(st=e.on("ds:conv:remove",function(e,t){if(e==="Inbox")for(var n in t)X[t[n].cid]=!0})),e.once("ds:msg:change",function(){nt=1}),lt(),e.on("load-address-book-contacts",function(e){var t=e.delay||!1;rn(t)}),e.on("bindContentWidget",function(e){bn(e.cw,e.tab)}),e.augment(o,e.Attribute),o.addAttrs({navKeys:{setter:wn}}),e.mix(o,{addContentWidget:yn,init:Tt,oldPostLoad:bt,postLoad:yt,render:Dt,moUpdate:En,presetMsgs:Ut,presetConvs:qt,presetDataItems:Ft,refreshPersistData:xn,getFolderContent:Ln,getMessageList:An,getComposeDirtyCount:Dn,composeEnumerate:On,composeFindOrigin:Mn,isComposeActiveInCurrentTab:_n,prefetchedMidsHash:V,prefetchComposeOrigin:un,hasCleanCompose:Zt,switchToCleanCompose:en,composeDeps:d})},e.mail.ui.Workspace=new E,a=e.mail.ui.Workspace},"1.0.0",{requires:["mail-platform","event-resize","mail-controller-tictacs","mail-modules","mail-templates","mail-ui-foldersview-base","common-ui-tabs-base","common-ui-toolbar-base","mail-ui-searchbar","common-utils-stats","mail-ui-common-string-utils","mail-common-tracker","ymma-stats","mail-ui-navkeys","mail-common-utils-features"]});


YUI.add("mail-ui-workspace-postload",function(e){var t=NeoConfig,n=Neo.performance,r=e.mail.ui.Workspace,i;e.mix(r,{getBandwidthMode:function(){return i?i:(i="broadband",n.now()>NeoConfig.cableBandwidthDelayLimit&&(i="cable"),n.now()>NeoConfig.dialupBandwidthDelayLimit&&(i="dialup"),NeoConfig.bandwidthMode=i,e.fire("util:ymstats",{name:"bandwidth",tags:{browser:NeoConfig.browser,info:i}}),i)},postLoadInitCB:function(){var t=!1,n=5e3,i=this.getBandwidthMode(),s=function(){t||(window.setTimeout(function(){r.oldPostLoad(e)},50),t=!0)};i==="cable"?n=1e4:i==="dialup"&&(n=2e4),e.one("window").on("load",s),window.setTimeout(s,n)},postLoadInit:function(){var n=this,i=n.getBandwidthMode();(t.isCorpmail||NeoConfig.enableWorkspacePostLoadV2)&&i!=="broadband"?e.use([t.hasConv?"minty_module_toolbar_inbox_message_thread":"minty_module_toolbar_inbox_message_fresh"]).then(e.use([t.hasConv?"mail-ui-convpane-read":"mail-ui-messagepane-read","mail-common-cachewarmer"])).then(e.use(r.composeDeps)).then(function(){n.postLoadInitCB()})["catch"](function(){n.postLoadInitCB()}):(e.use(r.composeDeps),n.postLoadInitCB())}},1)},"1.0.0",{requires:["mail-ui-workspace-base"]});


YUI.add("mail-ui-workspace-rum",function e(t){function f(e,n,r,i){t.fire("util:ymstats",{name:e,unit:n,type:r,dataum:i,tags:o})}function l(e,t){var n=arguments,r=this,i=0;return function(){i<t&&(e.apply(r,n),i++)}}function c(e){var n,r,i;i={ym_prd:NeoConfig.buildNumber.match(/^3\./)!==null?"storm":"neo",ym_bkt:NeoConfig.expBucketId||"",ym_bno:NeoConfig.buildNumber||"",ym_ip:NeoConfig.ipAddress||"",ym_geo:NeoConfig.ipCountry||"",ym_conv:NeoConfig.hasConv||"",plus:!NeoConfig.hasAds||0},t.each(e,function(e,t){i[t]=e}),r=["ssl="+(document.location.protocol==="https:"?1:0)],t.each(i,function(e,t){r.push(t+"="+e)}),n=new Image,n.src=document.location.protocol+"//ping.mail.yahoo.com/pong?"+r.join("&")}function h(n,s){var o,u=0,a=0,l=0,c=0,h=0,p=0,d=0,v=0,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x=0,T=0,N=0,C=0,k=0,L=0,A=0,O,M=r.length,_=i.length;if(!s){YAFT.data=n,u=n.pageLoadTime,a=Math.round(n.aft),l=Math.round(n.visuallyComplete),o=n.httpRequests,c=n.resources.length,LH.record("AFT",{name:"AFT",type:"mark",startTime:a,duration:0}),LH.record("VIC",{name:"VIC",type:"mark",startTime:l,duration:0});if(NeoGV&&NeoGV.ads)for(var D in NeoGV.ads)NeoGV.ads.hasOwnProperty(D)&&NeoGV.ads[D].nvLoadTime&&LH.record("AD_"+D,{name:"AD_"+D,type:"mark",startTime:Math.round(NeoGV.ads[D].nvLoadTime),duration:0});LH.beacon({clearCustomEntries:!0}),f("mail_plt","ms","duration",u),f("mail_aft","ms","duration",a),f("mail_vic","ms","duration",l),f("mailhtreqs_onloadCached","requests","gauge",o.onloadCached),f("mailhtreqs_onloadCount","requests","gauge",o.onloadCount),f("mailhtreqs_vicCached","requests","gauge",o.cached),f("mailhtreqs_vicCount","requests","gauge",o.count);for(A=0;A<c;A+=1){O=n.resources[A];for(L=0;L<M;L+=1)O.url.indexOf(r[L])!==-1&&(v+=1,O.duration>0&&O.duration>h&&(h=O.duration),d+=O.duration>0?O.duration:0,O.durationFromNStart<=u&&(b+=1,O.duration>0&&O.duration>m&&(m=O.duration),y+=O.duration>0?O.duration:0));v>0&&(p=d/v),b>0&&(g=y/b);for(L=0;L<_;L+=1)O.url.indexOf(i[L])!==-1&&(x+=1,O.duration>0&&O.duration>w&&(w=O.duration),S+=O.duration>0?O.duration:0,O.durationFromNStart<=u&&(k+=1,O.duration>0&&O.duration>T&&(T=O.duration),C+=O.duration>0?O.duration:0));x>0&&(E=S/x),k>0&&(N=C/k)}f("mailycs_maxtimeVIC","ms","duration",h),f("mailycs_maxtimeOnload","ms","duration",m),f("mailycs_avgtimeVIC","ms","duration",p),f("mailycs_avgtimeOnload","ms","duration",g),f("mailbcn_maxtimeVIC","ms","duration",w),f("mailbcn_maxtimeOnload","ms","duration",T),f("mailbcn_avgtimeVIC","ms","duration",E),f("mailbcn_avgtimeOnload","ms","duration",N)}e.finished=!0,t.fire("rum:yaftFinished",e.finished)}function p(){var e=NeoConfig.launchPVID.replace(/[^a-zA-Z]/g,""),t=e.length,n,r="";for(n=8;n<t;n++)n%2==0&&(r+=e.charAt(n));return r}var n={message_read:"message_read",message_send:"message_send",message_sendSave:"message_sendSave",message_list:"message_list",search_latency:"search_latency",AD_SKY:"AD_SKY",AD_WSKY:"AD_WSKY",AD_LREC:"AD_LREC",AFT:"AFT",VIC:"VIC",TL1:"TL1",MTTI:"MTTI",MTTC:"MTTC"},r=[".yimg.com"],i=["csc.beap","geo.yahoo","scorecard","ads.yahoo","beap.bc.yahoo","beap.adss.yahoo","ping.mail.yahoo","lh.secure"],s,o,u=t.UA.chrome?"chrome":"other",a=t.common.Utils.features.enabled("lighthouse_beacon");t.UA.ie?u="ie":t.UA.gecko?u="firefox":t.UA.safari&&(u="safari"),o={ua:u,bandwidth:NeoConfig.bandwidthMode?NeoConfig.bandwidthMode:"broadband",farm:NeoConfig.farm.substr(1),colo:NeoConfig.buildVersion?NeoConfig.hostName.split(".")[3]:"",isMailPlus:NeoConfig.hasAds?0:1},t.namespace("mail.ui.Rum").init=function(){var r=this,i=null,o=null,u=null;window.LH===undefined?s=!1:(s=!0,t.fire("util:ymstats",{name:"lighthouse",tags:{browser:NeoConfig.browser,info:s}})),s&&NeoConfig.lighthouse_beacon?(LH.metrics(t.Object.keys(n)),YAFT.init({modules:["shellnavigation-inner","storm-listnav","shellcontent","nav","yucs-top-bar","yucsHead","slot_"],modulesExclude:["yucs-",NeoConfig.ccAb&&p()||"slot_MB"],canShowVisualReport:NeoConfig.isInternal?1:0,maxWaitTime:2e3,generateHAR:!0},h),window.sessionStorage&&(o=sessionStorage.getItem("MTTI"),u=sessionStorage.getItem("MTTC"),i=sessionStorage.getItem("lh_msglist"),o!==null&&(LH.record(n.MTTI,{name:n.MTTI,type:"mark",startTime:o,duration:0}),f("mail_mtti","ms","duration",o),sessionStorage.removeItem("MTTI")),u!==null&&(LH.record(n.MTTC,{name:n.MTTC,type:"mark",startTime:u,duration:0}),f("mail_mttc","ms","duration",u),sessionStorage.removeItem("MTTC")),i!==null&&(LH.record(n.message_list,{name:n.message_list,type:"mark",startTime:i,duration:0}),f("mail_mttmsglist","ms","duration",i),sessionStorage.removeItem("lh_msglist")),(o!==null||u!==null||i!==null)&&LH.beacon({clearCustomEntries:!0}))):(e.finished=!0,t.fire("rum:yaftFinished",e.finished)),t.on("MessagePane:inception",l(function(){r.stopwatch=(new Date).getTime()},5)),t.on("MessagePane:rendered",function(e,t,i,o,u){var a,l;if(r.stopwatch){u&&u.BECallTime&&(a=(new Date).getTime()-r.stopwatch,s&&NeoConfig.lighthouse_beacon&&(LH.record(n.message_read,{name:n.message_read,type:"mark",startTime:a,duration:0}),f("mail_mttmsgread","ms","duration",a),LH.beacon({clearCustomEntries:!0})),window.BOOMR&&(l={ym_srt:u.BECallTime.curlTime,ym_sbe:u.BECallTime.serverTime,rt_msgread:a},c(l)));try{delete r.stopwatch}catch(h){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-rum:1",h,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-rum:1"),r.stopwatch=undefined}}}),t.on("SentStart",l(function(){r.sentwatch=(new Date).getTime()},5)),t.on("SentSuccess",function(e,t,i){var o,u;if(r.sentwatch){o=(new Date).getTime()-r.sentwatch,i=n[i]||n.message_send,s&&NeoConfig.lighthouse_beacon&&(LH.record(i,{name:i,type:"mark",startTime:o,duration:0}),f("mail_mttmsgsend","ms","duration",o),LH.beacon({clearCustomEntries:!0})),window.BOOMR&&(u={ym_reply:e&&e.action||"",ym_sndbe:t&&t.callPerf&&t.callPerf.serverTime||"",ym_sndrt:t&&t.callPerf&&t.callPerf.curlTime||"",rt_sndtime:o},c(u));try{delete r.sentwatch
}catch(a){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-workspace-rum:2",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-workspace-rum:2"),r.sentwatch=undefined}}}),t.on("lhStat:feature_latency",function(e){var t,r;e&&e.message&&e.duration&&(t=e.duration,r=e.message,s&&a&&(LH.record(n[r],{name:n[r],type:"mark",startTime:t,duration:0}),LH.beacon({clearCustomEntries:!0})))})},t.mail.ui.Rum.yaftFinished=function(n){e.finished===undefined?t.once("rum:yaftFinished",function(){n(e.finished)}):n(e.finished)}},"1.0.0",{requires:["event","mail-common-utils-features"]});


YUI.add("mail-ui-factory-base",function(e){function r(t){var n=e,r,i,s=t.split("."),o=s.length;for(i=0;i<o;i++)i===o-1?r=s[i]:n=n[s[i]];return[n,r]}function i(e,t){if(!e||!t)return;var i=r(e),s=i[0],u=i[1],a;s[u]&&s[u]!==t&&(e in n||(n[e]=s[u]),a=s[u],s[u]=t,o(e,t,a))}function s(e){if(e&&e in n){var t=r(e),i=t[0],s=t[1],u,a;u=i[s],i[s]=n[e],a=i[s],a!==u&&o(e,a,u)}}function o(e,n,r){t.fire("uifactory:change",{ns:e,newCtor:n,oldCtor:r})}e.namespace("mail.ui");var t=e.mail.ui.Factory={},n={};e.augment(t,e.EventTarget),e.mix(t,{register:i,unregister:s})},"1.0.0");


YUI.add("mail-ui-basewidget",function(e){var t="Neo",n=":",r=function(n){var r=this;n||(n={}),r.prefix=n.prefix||t,r.emitFacade=n.emitFacade||!0,e.EventTarget.call(r,{emitFacade:r.emitFacade})};r.prototype.constructor=r;var i={_getEventName:function(e,t){var r=this,i=r.prefix;return t||(t=r),t.NAME&&(i=t.NAME),t.constructor&&t.constructor.NAME&&(i=t.constructor.NAME),{ev:i+n+e,name:i,type:e}},neoEvent:function(t,n){var r=this,i=e.Lang.isObject(n)?n:{},s=r.prefix,o=r,u;return n.context&&(o=n.context),n.addTarget===1&&o.addTarget(e),u=r._getEventName(t,o),s=u.name,i.prefix=s,i.emitFacade=r.emitFacade,r.publish(u.ev,i)},neoFire:function(e){var t=this,n=Array.prototype.slice.call(arguments);return n[0]=t._getEventName(e).ev,t.fire.apply(t,n)}};r.prototype=i,e.mix(r,e.EventTarget,!1,null,1),e.namespace("common.Utils.event"),e.common.Utils.event=r;var s=function(e){var t=this;s.superclass.constructor.call(t,e),t.NAME||(t.NAME="BaseWidget")};e.extend(s,e.common.ui.ContentWidget),e.augment(s,e.common.Utils.event),e.namespace("mail.ui").BaseWidget=s},"1.0.0",{requires:["common-ui-contentwidget"]});


YUI.add("mail-ui-header",function(e){var t=e.common.Utils.substitute,n=e.common.persist.UserData,r=e.common.Utils,i=e.mail.ui.headerUtils,s=function(){};e.extend(s,e.mail.ui.HeaderBase),e.mix(s.prototype,{omModifiedHeaderMenuFlag:!1,omMenuObj:{},omModifiedOptionsMenuFlag:!1,omOptionsMenuObj:{},calAddedOptionsMenuFlag:!1,calOptionsMenuObj:null,render:function(){var t=this,n=!1;e.on("menu:config",t.setUhMenuConfig,t),e.on("change:username",t.setUhUsername),e.on("search:config",t.setSearchBtnText);var r=!1,s=!1;e.Global.on("ucs:userMenuShow",function(){var t=this;if(t.omModifiedHeaderMenuFlag||!r){var n=new e.EventTarget;n.publish("ucs:userMenuItems",{broadcast:2,emitFacade:!0});var i=[],s=[],o,u,a,f,l=!0;if(t.omMenuObj&&t.omMenuObj.length){for(var c=0;f<t.omMenuObj.length;c++)a=t.omMenuObj[c],a.icon["class"]!=="signout"&&a.data_action.search("offline")===-1&&(u={menuText:a.label,actionType:"customEvent",actionData:a.data_action,icon:a.icon["class"].substr(5),isActive:a.selected},s.push(u),l&&a.selected&&(l=!1));i.push(s);for(var h=0;f<t.omMenuObj.length;h++){a=t.omMenuObj[h];if(a.icon["class"]==="signout"||a.data_action.search("offline")>-1)o=[{menuText:a.label,actionType:"customEvent",actionData:a.data_action,isDisabled:l}],i.push(o)}}if(NeoConfig.userDataObj&&NeoConfig.userDataObj.otherYahooMboxes&&NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal){var p=NeoConfig.userDataObj.otherYahooMboxes.otherYahooMboxesTotal,d=NeoConfig.userDataObj.otherYahooMboxes.yMbox,v=[];for(f=0;f<p;f++)o={menuText:d[f].email,actionType:"customEvent",actionData:"bizmail|"+f,highlightDisable:!0,isDisabled:!1},v.push(o);i.push(v)}n.fire("ucs:userMenuItems",{menuGroups:i,reset:!0}),r=!0,t.omModifiedHeaderMenuFlag=!1}},t),e.Global.on("ucs:userMenuItemClick",function(e){var t=e.actionData.split("|");i.handleUHMenus({dataAction:t[0],uhArgs:t})}),e.Global.once("ucs:helpDebugMenuShow",function(){e.use("mail-debug",function(e){t.setUhDropdown(t,"_shared_module_offscreen_bin_menus_debug",e.mail.Debug.getDebugMenuObj,"ucs:helpDebugMenuItems");if(NeoConfig.isInternalIP!==1){var n=e.one("#yuhead-help-panel");n.removeChild(n._node.lastChild)}})}),e.Global.on("ucs:helpDebugMenuItemClick",function(t){e.use("mail-debug",function(e){e.mail.Debug.handleDebugOption({dataAction:t.actionData})})}),e.Global.on("ucs:utilityMenuShow",function(){if(t.omModifiedOptionsMenuFlag||!s||t.calAddedOptionsMenuFlag){var e="_shared_module_offscreen_bin_menus_options_fresh";t.setUhDropdown(t,e,i.getOptionsMenuObj,"ucs:utilityMenuItems",{omOptionsMenuObj:t.omOptionsMenuObj,calOptions:t.calOptionsMenuObj},i.logOptionsLinkViews);if(t.omModifiedOptionsMenuFlag||!s)t.omModifiedOptionsMenuFlag=!1,s=!0;t.calAddedOptionsMenuFlag&&(t.calAddedOptionsMenuFlag=!1)}else i.logOptionsLinkViews()}),e.Global.on("ucs:utilityMenuItemClick",function(e){i.handleUHMenus({dataAction:e.actionData})}),e.Global.on("ucs:logoDebug",function(e){i.showDialogBox({altKey:!0,preventDefault:function(){}})}),e.Global.on("ucs:signout",function(t){e.fire("signout"),e.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"}),e.Cookie.remove("YM.BM",{path:"/",domain:"mail.yahoo.com"})}),NeoConfig.isCorpmail&&(corpsignout(e),e.all(".yucs-profile-items-panel a").each(function(e){var t=e.getAttribute("href");if(t.indexOf("profile")!==-1||t.indexOf("edit")!==-1)e.ancestor().setAttribute("style","display:none;"),n=!0}),n&&e.one(".yucs-profile-items-panel .yucs-separator").setAttribute("style","display:none;")),this.rendered=1,e.fire("header:rendered")},setSearchBtnText:function(e){if(!window.ucs)return;var t=ucs.UhSearchInterface.setVertSearchBtnText;!e.mode||e.mode==="default"?t(strings.str_uh_searchmail):t(e.searchLabel)},setUhUsername:function(){if(NeoConfig.isBizmail){var t=r.escapeHtml(n.get("userSendPref.defaultFromAddress"));e.Lang.later(0,null,function(){var n=new e.EventTarget;n.publish("ucs:userNameChange",{broadcast:2,emitFacade:!0}),n.fire("ucs:userNameChange",{username:t})})}},setUhMenuConfig:function(e,t,n){n=n||this;switch(e.id){case"btn-uh-account":n.omModifiedHeaderMenuFlag=!0,n.omMenuObj=t,n.setUhOpiStatus(e.icon["class"].substr(5));break;case"btn-options":n.omModifiedOptionsMenuFlag=!0,n.omOptionsMenuObj=t;break;case"btn-caloptions":n.calAddedOptionsMenuFlag=!0,n.calOptionsMenuObj=t}},setUhOpiStatus:function(t){var n=new e.EventTarget;n.name="ucs",n.publish("ucs:opiUpdateStatus",{broadcast:2,emitFacade:!0}),n.fire("ucs:opiUpdateStatus",{opiStatus:t})},setUhDropdown:function(n,r,i,s,o,u){o=o||{},e.use(r,function(e){var a=e.ui.Templates[r],f=i(a,o),l;NeoConfig.isCorpmail?(f.upgrade=!1,f.om_options=!1,f.account_info=!1):f.account_info=!0,l=t(a.base,f,{},null,strings);var c=n.getMenuGroupsFromMarkup(l),h=new e.EventTarget;h.publish(s,{broadcast:2,emitFacade:!0}),h.fire(s,{menuGroups:c,reset:!0}),u&&u()})},getMenuGroupsFromMarkup:function(t){var n=/<ul(.*?)<\/ul>/gm,i=/<li(.*?)<\/li>/gm,s=/data-action=(.)(.*?)\1.*?>\s*<a\s*href=(.)(.*?)\3\s*title=(.)(.*?)\5\s*>(.*?)<\/a>/,o=/data-action=(.)(.*?)\1.*?>\s*<a\s*href=(.)(.*?)\3\s*>(.*?)<\/a>/,u,a,f,l,c,h=[];while(u=n.exec(t)){l=u[0];var p=[];while(a=i.exec(l)){c=a[0],f=s.exec(c)||o.exec(c);if(f){var d=f[2],v=f[4],m=f[f.length-1],g={menuText:m};switch(d){case"upgrade":NeoConfig.deprecateMailPlus?g.actionType="customEvent":(g.actionType="link",g.url=v,g.target="_blank");break;case"help":r.features.enabled("inProductHelp")?g.actionType="customEvent":(g.actionType="link",g.url=v,g.target="_blank");break;case"help_upgrade":case"fullmail":case"feedback":case"legal":case"privacy":case"ads":case"copyright":case"ovi-terms":case"link":g.actionType="link",g.url=v,g.target="_blank";break;default:g.actionType="customEvent"}d==="fullmail"&&(g.target="_self"),g.actionData=d,p.push(g)}}!e.common.Utils.isEmpty(p)&&h.push(p)}return h},showMobilizer:function(t){t.preventDefault(),e.use("mobilizer",function(){YMobilizer.load({app:"mail.new",lang:NeoConfig.lang,proxy:NeoConfig.launch_protocol+window.location.host+"/"+NeoConfig.scriptBase+"/mobilizer_proxy.html"
})})}},!0),e.namespace("mail.ui.Header"),e.mail.ui.Header=new s,e.namespace("test.Header"),e.mix(e.test.Header,{headerObj:e.mail.ui.Header,setUhMenuConfig:e.mail.ui.Header.setUhMenuConfig,getOmMenuObj:function(){return e.mail.ui.Header.omMenuObj},setUhOpiStatus:e.mail.ui.Header.setUhOpiStatus,setUhDropdown:e.mail.ui.Header.setUhDropdown,getMenuGroupsFromMarkup:e.mail.ui.Header.getMenuGroupsFromMarkup,getHelpMenuObj:i.getHelpMenuObj,getOptionsMenuObj:i.getOptionsMenuObj,showDialogBox:i.showDialogBox,showMobilizer:e.mail.ui.Header.showMobilizer,handleUHMenus:i.handleUHMenus,switchToBizmailAcct:i.switchToBizmailAcct})},"1.0.0",{requires:["node","mail-ui-header-base","mail-ui-header-utils","common-utils","common-persist-user-data"]});


YUI.add("mail-ui-header-base",function(e){var t=function(){};t.prototype={render:function(){},bindUI:function(){}},e.namespace("mail.ui.HeaderBase"),e.mail.ui.HeaderBase=t},"1.0.0");


YUI.add("mail-ui-header-utils",function(e){var t=e.common.Utils,n=t.substitute,r={getHelpMenuObj:function(e){var t={send_feedback_menu:strings.str_tog_sendFeedbackEnabled?e.send_feedback_menu:"",report_problem_url:NeoConfig.stormUserVoice,report_problem:NeoConfig.strings.reportProblem,upgrade:strings.str_cfg_tog_mailUpgradeEnabled&&NeoConfig.isBizmail!=="1"?e.upgrade:"",adfree:"",ads:strings.str_cfg_tog_aboutOurAdsEnabled?e.ads:"",copyright:strings.str_cfg_tog_disableCopyrightLink?"":e.copyright,tos_url:"atos",return_to_original:NeoConfig.hideReturnLink!=="1"?e.return_to_original:"",switch_to_full:NeoConfig.low_bandwidth?e.switch_to_full:"",full_mail_url:"/"+NeoConfig.scriptBase+"/launch?full=1",new_feature_url:NeoConfig.newFeatureURL,ovi:NeoConfig.partnerType==="nokia"?e.ovi:""};return NeoConfig.partnerType==="sky"&&(t.send_feedback_menu=""),NeoConfig.deprecateMailPlus&&strings.str_cfg_tog_mailUpgradeEnabled&&NeoConfig.isBizmail!=="1"&&(t.upgrade="",t.adfree=e.adfree),t.send_feedback_menu=NeoConfig.stormUserVoice?t.send_feedback_menu:"",t.hide_help_ul=t.send_feedback_menu||t.return_to_original||t.switch_to_full?"":e.hide_help_ul,NeoConfig.intl==="us"&&NeoConfig.lang==="ko-KR"&&(t.str_cfg_url_tos="http://info.yahoo.com/legal/us/yahoo/utos/ko-kr/",t.str_cfg_url_copyright="http://info.yahoo.com/legal/us/yahoo/copyright/ko-kr/"),t},getOptionsMenuObj:function(t,i){var s=i.omOptionsMenuObj,o={},u=i.calOptions,a,f={url_minty_options:"#",url:t.url,cal_options:"",om_options:"",upgrade:"",adfree:""};strings.str_cfg_tog_mailUpgradeEnabled&&NeoConfig.isBizmail!=="1"&&(NeoConfig.deprecateMailPlus?(f.upgrade="",f.adfree=t.adfree):(f.upgrade=t.upgrade,f.adfree=""));if(s)for(a=0;a<s.length;a++)o={data_action:s[a].data_action,title:s[a].title,label:s[a].label,id:s[a].id},f.om_options+=n(t.om_options,o,0,0,strings);return u&&(f.cal_options+=n(t.cal_options,o,0,0,strings)),f=e.mix(f,r.getHelpMenuObj(t)),f},showDialogBox:function(n){n.preventDefault();if(n.altKey){if(typeof NeoConfig=="undefined")return;var r=["Neo Version: \n","Build number: ",NeoConfig.buildNumber,"\n","Feature Version: ",t.settings.value("featureFlipperVersion"),"\n","Build time: ",NeoConfig.buildTime,"\n","Build: ",NeoConfig.git_branch,"\n \n","SHA Hash: ",NeoConfig.git_hash,"\n \n","Hostname: ",NeoConfig.hostName||window.location.hostname,"\n","OS Version: ","RHEL "+t.settings.value("hostOSVersion")];NeoConfig.expBucketId!=="0"&&r.push("\n \nBucket: "+NeoConfig.expBucketId),e.use("common-ui-dialog-helper",function(e){var t=e.common.ui.DialogHelper;t.alert({modal_classes:"lg",hd:"Version",bd:"<pre>"+r.join("")+"</pre>"+'<button onclick=yui.fire("printLog")>Show Client Log</button> <button onclick=yui.fire("printWaterfall")>Show Waterfall</button> <button onclick=yui.fire("printHAR")>Show HAR</button>'})})}else yui.fire("openInbox")},handleUHMenus:function(n,r){var i=r||this,s=n.dataAction,o="uh_"+s+"_lnk";switch(s){case"help_upgrade":case"fullmail":case"feedback":case"legal":case"privacy":case"ads":case"copyright":case"ovi-terms":case"link":e.fire("mt:click",{action:o});break;case"help":t.features.enabled("inProductHelp")&&e.use("mail-ui-inhelp",function(e){e.mail.ui.InProductHelpView.showHelp()}),e.fire("darlaEvent",{action:"help_dd_click_"+s}),e.fire("mt:click",{action:o});break;case"upgrade":NeoConfig.deprecateMailPlus&&e.use("mail-ui-adfree-mail-dialog",function(e){e.mail.ui.AdFreeMailDialog.show()});break;case"options":e.fire("openOptions",this),e.fire("mt:click",{action:o});break;case"Calendar_options":if(!e.calendar)break;e.fire("openCalendar"),e.fire("calendarOptions",this),e.fire("mt:click",{action:o});break;case"themes":e.use("mail-ui-themes",function(e){e.mail.ui.Themes.showThemesDialog()}),e.fire("mt:click",{action:o});break;case"bizmail":var u=n.uhArgs&&n.uhArgs[1]||n.item._node.getAttribute("data-index");i.switchToBizmailAcct(u);break;case"keys":e.use("mail-ui-shortcuts-dialog",function(e){e.mail.ui.ShortcutsDialog.show()});break;default:}},switchToBizmailAcct:function(t){var n=NeoConfig.userDataObj.otherYahooMboxes.yMbox[t],r=n.email.split("@"),i=n.isBizmail,s,o={domain:r[1],sid:n.sledid,silo:n.silo,account:r[0],farm:n.farm};window.onBeforeUnloadBizMail=function(){i?e.Cookie.setSubs("YM.BM",o,{path:"/",domain:"mail.yahoo.com"}):(e.Cookie.remove("YM.BM",{path:"/",domain:"yahoo.com"}),e.Cookie.remove("YM.BM",{path:"/",domain:"mail.yahoo.com"}))},n.url?s=n.url:s="https://mail.yahoo.com",document.location.replace(s)},logOptionsLinkViews:function(){e.fire("mt:view",{action:"options_menu"})}};e.namespace("mail.ui.headerUtils"),e.mail.ui.headerUtils=r},"1.0.0",{requires:["common-utils","common-persist-user-data","mail-common-utils-settings"]});


YUI.add("mail-common-lowbandwidth",function(e){function t(){if(e.Cookie.get("YM.NEO_LITE")===null){var t=e.common.persist.NeoData,n=new Date;n.setDate(n.getDate()+30),e.Cookie.set("YM.NEO_LITE","1",{path:t.get("cookiePath"),domain:t.get("cookieDomain"),expires:n})}}e.namespace("mail.common"),e.namespace("mail.common.LowBandwidth"),e.mix(e.mail.common.LowBandwidth,{setLWCookie:t})},"1.0.0",{requires:["node"]});


YUI.add("mail-controller-tictacs",function(e){function r(t,r,i){return e.use(r).then(function(e){e.Array.each(r,function(t){var r=NeoConfig.tictacsClientConf[n][t].name;if(!e.Tictac[r]||!e.Tictac[r].loader)return;try{e.Tictac[r].loader.apply(null,i)}catch(s){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-tictacs:1",s,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-tictacs:1")}}),e.fire("tictacs-loaded:"+t)})}var t=function(){},n;e.mix(t.prototype,{init:function(){var t,i,s,o=NeoConfig.isAMT||!!NeoConfig.isInternal||!!NeoConfig.isInternalIP;i={};if(!NeoConfig.tictac)return;for(t in NeoConfig.tictacsClientConf)if(NeoConfig.tictacsClientConf.hasOwnProperty(t)){n=t,s=NeoConfig.tictacsClientConf[t];break}e.Object.each(s,function(e,t){var n=e.event;if(!n)return;if(!o||window.location.search.indexOf(e.name+"=0")===-1)i[n]||(i[n]=[]),i[n].push(t)}),e.Object.each(i,function(t,n){n==="load"?r("load",t,[]):e.after(n,function(){r(n,t,arguments)})})},loadTictac:function(e){var t=[].slice.call(arguments,1);return r(e,[e],t)}}),e.namespace("mail.ui"),e.mail.ui.Tictacs=new t});


YUI.add("mail-ui-button-ctxt",function(e){function h(e,t){var n=v(e),r;c.features.enabled("mbListNativeView")?(r=d(e),r&&t===i?(e.replaceClass(n,s),e.removeClass("msgChecked")):p(e,n,t)):p(e,n,t)}function p(e,t,n){t?n?e.replaceClass(t,n):e.removeClass(t):e.addClass(n),n===i?e.removeClass("msgChecked"):e.addClass("msgChecked")}function d(e){if(!NeoGV.mbToggle){var t=e.ancestor("#shellinner");if(t){var n=t.one("#slot_MB .cbox .mb-checkbox");if(n)return n.get("checked")}}}function v(e){var t,n;for(t=0;t<l;++t){n=f[t];if(e.hasClass(n))return n}return null}function m(t){var f=t.node||t.item,l=t.root,h=t.action,p;if(!f||!l)return!1;f.get("tagName")==="A"&&(f=f.get("parentNode"));if(f.hasClass(a))return!1;p=v(l);switch(p){case i:if(f.hasClass(n)||f.hasClass(r))return!1;break;case o:if(f.hasClass(n))return!1;break;case u:case s:if(c.features.enabled("mbListNativeView")){var m=e.mail.Tabs.getActiveTab().get("widget").type;if(m==="convlist"||m==="messagelist")if(h!=="delete"&&d(l))return!1}if(NeoConfig.convReplyBtnsInTlbr&&(h==="reply_sender"||h==="reply_all"||h==="forward")&&l.hasClass("disableReplyGroup"))return!1}return!0}function g(t,n){var r={"folder-empty-spam":"%40B%40Bulk","folder-empty-trash":"Trash"},i=r[t],s;i&&(n=e.one('#storm-listnav li.sysfolder[data-fid="'+i+'"]')),n&&(s=v(n));if(s)switch(t){case"folder-allread":case"folder-empty":case"folder-empty-spam":case"folder-empty-trash":return s===o}return!0}function y(e,n){var r=this,a=i;n=n?n:!1,e>1?a=o:n?a=u:e===1&&(a=s),r.get(t)!==a&&r.set(t,a)}function b(t){var n=t.node,r=n.get("parentNode"),s=n.get("id").replace("btn-","menu-"),o=e.one("#"+s),u=v(r)||i;h(o,u)}function w(){var t,n=e.one("#menu-msglist"),r=e.one("#pagetoolbar");n&&r&&(t=v(r)||i,h(n,t))}function E(e,t){var n=this,r;e&&t&&(r=v(e)||i,h(t,r)),NeoConfig.tog_empty_folders||n.patchFolderMenu(t)}function S(t){var n,r=["spam","trash"],s,o,u;for(n in r)s=e.one("#storm-listnav li."+r[n]),s&&t&&(o=t.one('li[data-action="folder-empty-'+r[n]+'"]'),o&&(u=v(s)||i,h(o,u)))}function x(n){var r=this;x.superclass.constructor.call(r,n),r._evts.push(e.on("listItemSelect",function(e){e&&r.setButtonContext(e.total)})),r.addAttrs({BUTTON_CTXT_ATTR:{}}),r._evts.push(r.on(t+"Change",function(e){var t=this.root;t&&(h(t,e.newVal),e.newVal!=="hasnomsg"?t.one(".multimsg").setAttribute("tabindex",0):t.all(".multimsg").setAttribute("tabindex",-1))}))}var t="buttonContext",n="onemsg",r="multimsg",i="hasnomsg",s="hasonemsg",o="hasmultimsg",u="hasthreadmsg",a="disabled",f=[i,s,o,u],l=f.length,c=e.common.Utils;e.extend(x,e.mail.ui.Toolbar,{buttonEnabled:m,setNodeButtonMenu:b,setButtonContext:y}),e.namespace("mail.ui").Toolbar=x,e.namespace("mail.ui").ContextButton={setNodeMessageListMenu:w,setNodeFolderMenu:E,patchFolderMenu:S,folderActionEnabled:g,buttonEnabled:m}},"1.0.0",{requires:["common-ui-toolbar-base","mail-common-utils-features"]});


YUI.add("ymma-stats",function(e){function d(){this._bind()}var t=!1,n=[],r={},i,s,o,u,a,f={SEND:["sendmessage","batchexecute"],READ:["getdisplaymessage","listmessagesinthread","batchexecute"],LIST:["listfolderthreads","listmessages"]},l=NeoConfig.statThrottlePct,c,h=e.common.Utils.features,p=e.common.Utils.settings;e.mix(d.prototype,{setKey:function(t,n){typeof t=="object"&&e.mix(r,t,!0),typeof t=="string"&&(r[t]=n)},getKey:function(e){return r[e]},stat:function(r,i,s,o,a){if(NeoConfig.stat&&!l)return;var f=this,c;NeoConfig.mailEnv!=="dev"?NeoConfig.hostName&&(c=NeoConfig.hostName.split(".")[3]):c="",s=s?s:"blocks",o=o?o:"counter",a=a?a:"1";if(NeoConfig.stat){o==="counter"&&(a*=100/l);if(r==="ue_client_error"||r==="webservice_latency")i+=",mlcluster="+NeoConfig.cluster,h.enabled("operatingSystemDimension")&&p.value("hostOSVersion")&&(i+=",osv="+p.value("hostOSVersion"))}!t&&e.one&&(t=!0,e.one(window).on("beforeunload",function(){f._unloadQ()}),e.one(window).on("unload",function(){f._unloadQ()})),e.fire("MailLog",{m:"statName="+r+":"+a+(i?(" "+i).replace(/=>/g,"="):"")}),i?i+=",":i="",i.indexOf("colo")===-1?i+="colo="+c+",yid="+NeoConfig.loginId+",ymreqid="+NeoConfig.uuid:i+="yid="+NeoConfig.loginId+",ymreqid="+NeoConfig.uuid,u=r+"~"+s+"~"+o+"~"+a+"~"+i,n.push(u),f._pumpQ()},_pumpQ:function(){var e=this;n.length>99?(clearTimeout(i),e._sendQ()):i=i||setTimeout(e._sendQ,6e4)},_unloadQ:function(){var e=this;if(n[0]){e._sendQ(),o=new Date;while(new Date-o<100);}},_sendQ:function(){var t=e.common.Utils,r=t.settings.value("ymstat");n[0]&&(s=new XMLHttpRequest,NeoConfig.stat&&l&&NeoConfig.mailEnv!=="dev"&&(s.open("POST",r),s.setRequestHeader("Content-Type","text/plain"),s.timeout=2e3,s.send(n.join("\n")),n=[]))},_sendStat:function(t){var n=[],r=this,i;t&&typeof JSON=="object"&&(e.Object.each(t.tags,function(e,t){e&&typeof e.replace=="function"&&(e=e.replace(/[^a-zA-Z0-9.-]/g,"_")),NeoConfig.stat&&n.push(t+"="+e)}),i=t.include,i&&(i.bucket&&n.push("bucketId="+NeoConfig.expBucketId),i.farm&&n.push("farm="+(NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx")),i.env&&n.push("env="+NeoConfig.mailEnv)),n=n.join(","),t.name&&typeof t.name.replace=="function"&&(t.name=t.name.replace(/[^a-zA-Z0-9]/g,"_")),t.unit?r.stat(t.name,n,t.unit,t.type,t.dataum):r.stat(t.name,n))},_sendLaunchStats:function(){var t=[],n=[],r,i,s,o,u;t=NeoConfig.launchStats,e.Array.each(t,function(e){if(!e)return;n=e.split("~"),r=n[0],s=n[1],o=n[2],u=o==="counter"?1:n[3],i=n[4],s?this.stat(r,i,s,o,u):this.stat(r,i)},this),this._unloadQ()},_getTags:function(t,n){var r=0;p.value("hostOSVersion")&&(r=p.value("hostOSVersion"));var i=[],s={message:1,tae:1,api:1,visible:"yes",iscorpmail:{value:!!NeoConfig.isCorpmail},bucketId:{value:NeoConfig.expBucketId},farm:{value:NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx"},env:{value:NeoConfig.mailEnv},osv:{value:r}};for(var o=0;o<t.length;o++)if(n[t[o]])i.push(t[o]+"="+n[t[o]]);else{if(!e.Lang.isObject(s[t[o]]))return!1;i.push(t[o]+"="+s[t[o]].value)}return i.join(",")},_fireStat:function(e,t,n,r){var i=this,s;r?i.stat(e):(s=i._getTags(t,n),i.stat(e,s))},_bind:function(){var t=this;e.on("util:ymstats",e.bind(t._sendStat,t)),e.once("ws:postLoad",function(){NeoConfig.stat&&NeoConfig.launchStats&&t._sendLaunchStats()}),e.on("stat:feature_invoke",function(e){a=e.feature_group,delete e.feature_group,t._fireStat("feature_invoke_"+a,["message","farm","env"],e)}),e.on("stat:feature_complete",function(e){c=e.feature_group,delete e.feature_group,t._fireStat("feature_complete_"+c,["message","farm","env"],e),a=""}),e.on("stat:feature_fail",function(e){c=e.feature_group,c===a&&(a=""),delete e.feature_group,t._fireStat("feature_fail_"+c,["api","message","visible","env","farm"],e)}),e.on("stat:js_fail",function(e){var n;e.feature_group?(n=e.feature_group,delete e.feature_group):(a?n=a:n=e.tab,delete e.tab),n&&t._fireStat("js_fail_"+n,["api","visible","env"],e)}),e.on("stat:webservice_fail",function(e){var n=e.api?e.api.toLowerCase():"unknown",r,i;e.feature_group?(i=e.feature_group,delete e.feature_group):(a?i=a:i=e.tab,delete e.tab),r=f[i];if(r)for(var s in r)if(n.indexOf(r[s])>=0){t._fireStat("webservice_fail_"+i,["tae","message","farm","api","visible","env"],e);return}t._fireStat("webservice_fail_"+i,["tae","message","farm","api","visible","env"],e)}),e.on("stat:feature_latency",function(e){var n=["farm","message","env"];h.enabled("operatingSystemDimension")&&n.push("osv"),c=e.feature_group,c&&c.toLowerCase()==="search"&&n.push("iscorpmail"),delete e.feature_group;var r=t._getTags(n,e);t.stat("feature_latency_"+c,r,"ms","duration",e.value)})}}),e.namespace("common.Utils.ymmastats"),e.common.Utils.ymmastats=new d},"1.0.1",{requires:["mail-common-utils-settings","mail-common-utils-features"]});


YUI.add("mail-platform",function(){},"1.0.0",{requires:["mail-core-feature"]});


YUI.add("mail-core-feature",function(e){e.namespace("mail.Core").feature=function(t){var n=e.common.Utils.features.enabled(t);return typeof n=="undefined"&&(n=NeoConfig?NeoConfig[t]:null),{isOn:function(){return n?n===!0||n==="true"||n===1||n==="1":!1},isOff:function(){return!this.isOn()}}}},"1.0.0",{requires:["mail-common-utils-features"]});


YUI.add("mail-common-utils-features",function(e){function t(e){this.features=e||{}}t.prototype={},t.prototype.constructor=t,t.prototype.enabled=function(e,t){return typeof this.features[e]=="undefined"?t:this.features[e]===null?t:this.features[e]!==!0&&this.features[e]!==!1?t:this.features[e]};var n=NeoConfig.FF_features,r=new t(n);e.namespace("common.Utils").features=r},"1.0.0",{requires:[]});


YUI.add("mail-common-utils-settings",function(e){function t(e){this.settings=e||{}}t.prototype={},t.prototype.constructor=t,t.prototype.value=function(e,t){return typeof this.settings[e]=="undefined"?t:this.settings[e]===null?t:this.settings[e]};var n=NeoConfig.FF_settings,r=new t(n);e.namespace("common.Utils").settings=r},"1.0.0",{requires:[]});


YUI.add("common-ui-conv-listview",function(e){function M(){var e=NeoConfig.launchPVID.replace(/[^a-zA-Z]/g,""),t=e.length,n,r="";for(n=8;n<t;n++)n%2==0&&(r+=e.charAt(n));return r}function D(){this._lazyAddAttrs=!1,D.superclass.constructor.apply(this,arguments),this.currPage=0}function P(){this._lazyAddAttrs=0,P.superclass.constructor.apply(this,arguments)}var t=e.namespace("common.ui"),n=e.Node,r=n.one,i=e.Object,s=e.common.Utils,o=21,u=27,a=n.getDOMNode,f="pageSize",l="pageCount",c="-",h=".",p="page",d="list",v="id",m="input",g="refresh",y="reload",b="maxRequestSize",w="selected",E="subselected",S="#",x="selectionCount",T="getElementsByTagName",N=Neo.getScrollbarWidth(),C=NeoConfig.ccAb&&M()||"slot_MB",k="search-my-world-slot",L,A,O,_=function(t){return function(){var n=this,r=arguments;e.use("common-ui-conv-listview-ext",function(){try{n[t].apply(n,r)}catch(e){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-ui-listview-conv-listview:1",e,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-ui-listview-conv-listview:1"),s.error.report("ConvView-ListExt error for API "+t,e,1,1,1)}})}};e.mix(D,{NAME:"listview",ATTRS:{page:{value:0,setter:function(e){return e<0?0:e}},pageCount:{getter:function(){return Math.ceil(this.get("model").get(d).length/this.get(f))}},pageSize:{value:50,setter:function(e){var t=this.get("maxRequestSize");return t||(t=200),e<t?e:t}},entireElementChecks:{value:!1},requestSize:{value:200,setter:function(e){var t=this.get("maxRequestSize");return t||(t=200),e<t?e:t}},maxRequestSize:{value:200},selectionCount:{setter:function(e){return e>1&&(this.checkmode=1),e},getter:function(){return this.selCount()}},selectionType:{getter:function(){return this.selType()},value:"none"},selection:{getter:function(){return i.keys(this._sel)},setter:_("_setSelection")},subselection:{getter:function(){return this._subselIndex}},focused:{value:!1,setter:function(e){return e}},activeItem:{value:null},isActive:{value:!0},model:{valueFn:function(){return new P},setter:function(t){var n=this;return n.detachAll(),t&&(e.fire("MailLog",{m:"attaching after RELOAD handler"}),t.after(y,function(){n.set(p,0,{noupdate:1}),n._sel={},n._clearSelect(),n.set("focused",1),e.fire("MailLog",{m:"sync after RELOAD"}),n._sync(1)}),t.after(g,function(e){n._ss=i.values(n._sel),n.set(p,0,{noupdate:1}),e.data?n._model.setRange(0,e.data):n._model.request(0,n.get(b))}),t.after("listChange",_("_listchange"),n,1),t.after("requestfail",_("_handleFailure"),n)),n._model=t,n._model}},status:{setter:function(){this._parentNode&&_("_setStatus").apply(this,arguments)}},showFocus:{value:!1},selectVersion:{value:1},cellHeight:{value:0},freeze:{value:0}}}),e.extend(D,e.Base,{LIST_CLASS_NAME:"list-view-items",ITEM_CLASS_NAME:"list-view-item",ITEM_MASTER_CLASS_NAME:"list-view-item-master",ITEM_DETAIL_CLASS_NAME:"list-view-item-detail",STATUS_CLASS_NAME:"list-view-status",PAGE_CLASS_NAME:"list-view-items-page",ITEM_SUBCONTAINER_CLASS_NAME:"list-view-item-subcontainer",ITEM_CONTAINER_CLASS_NAME:"list-view-item-container",IGNORE_FLAG:"flag",IGNORE_ICON:"icon",IGNORE_ARROW:"arrow",IGNORE_DELETE:"delete-msg",IGNORE_SRCH:"msg-lst-srch",EXPAND_CLASS_NAME:"arrow",RETRY_CLASS_NAME:"expansion_retry",IGNORE_CLASS_NAME_INFO:"info",IGNORE_UNREAD:"info-unread",CHECKBOX:"input",HEADER_CLASS_NAME:"list-header",STATUS_ROLE:"row",SELECTIONTYPENONE:"none",SELECTIONTYPEMAIN:"main",SELECTIONTYPESUB:"sub",SELECTIONTYPEMIXED:"mixed",ANCHORED_LABEL_CLASS_NAME:"anchored-header",initializer:function(){this._bind(),this._maxLength=0,this._guid=e.guid(),this._sel={},this._subselIndex=-1,this.checkmode=0},render:function(r){var i=this,u=0,a=n.one(r),l=i.get("model").get(d),c=a.one(h+i.LIST_CLASS_NAME),p=i.get(f),m=c.all("div"+h+i.ITEM_CLASS_NAME);m.each(function(e){e.set(v,i._id(u++))}),i._srcNode=c,i._parentNode=a,i._bindEvents(a),i._r=1,s.features.enabled("timeChunk")&&(i._rawAnchorNode=a.get("parentNode").one(h+i.ANCHORED_LABEL_CLASS_NAME)._node,i._rawAnchorNode.style[NeoConfig.isRTL?"left":"right"]=N+"px",L=t.AnchoredHeader,A=t.TimeChunk),s.features.enabled("predictiveSearch")&&(i.smwNode=i._srcNode.one("#search-my-world-slot")),i._maxLength=Math.max(p*o,c.get("offsetHeight")),l[i.start()]||(e.fire("MailLog",{m:"sync for render"}),i._sync())},updateAnchoredLabel:function(e,t){var n=this,r=0,i,s,o=n._srcNode;t=t||o.get("scrollTop"),e&&(n._rawSectionHeaderNodes=L.getSectionHeaders(o)),i=!NeoConfig.rearrangeMb&&n._mbAdEl?n._mbAdEl.offsetHeight:0,s=n._smwEl?n._smwEl.offsetHeight:0,r=i+s,L.updateAnchoredLabel(t,n._rawSectionHeaderNodes,n._rawAnchorNode,r,!0)},scrollToTop:function(){this._srcNode.set("scrollTop",0)},pageUpOrDown:function(t){var n=e.one(".list-view-items").get("offsetHeight"),r=this._srcNode.get("scrollTop");r=t?r-n:r+n,this._srcNode.set("scrollTop",r)},home:function(){this.set(p,0)},end:function(){this.set(p,Math.max(this.get(l)-1,0))},next:function(){this.get("freeze")!==1&&this.get(p)!==this.get(l)-1&&(this.set("freeze",1),this.set(p,this.get(p)+1))},previous:function(){this.set(p,this.get(p)-1)},getTrueCountItems:function(){var t=r(S+this._id(this.stop()-1));return t?this.stop()-this.start():e.all("#inboxcontainer .list-view-item-master").size()},hasAllSelected:function(){return this.checkmode&&this.get(x)>=this.stop()-0},getTrueEndItem:function(){var t=r(S+this._id(this.stop()-1)),n;return t||(n=e.all("#inboxcontainer .list-view-item-master"),t=n.item(n.size()-1)),t},selectAll:function(e){return e=!!e,this._selectRange(0,e,this.stop()-1),e},selectSome:function(t){var n=0,r=this._model.get(d),i=0,s;this._clearSelect();var o={isRead:["totalUnread",!1],isunRead:["totalUnread",!0],isFlagged:["totalFlagged",!0],isunFlagged:["totalFlagged",!1]};for(n=i;n<this.stop();n++)!!r[n]&&!!r[n][o[t][0]]===o[t][1]&&(this._sel[n]=r[n]);s=this.selCount(),this.set(x,s),s&&(this.checkmode=1),e.fire("MailLog",{m:"sync for selectSome"}),this.sync()},selCount:function(){var e=0,t;for(t in 
this._sel)this._sel[t]&&e++;return e},selType:function(){var e=this.SELECTIONTYPENONE,t;for(t in this._sel)e=this._isSubindex(this._toIndexN(t))?e===this.SELECTIONTYPEMAIN?this.SELECTIONTYPEMIXED:this.SELECTIONTYPESUB:e===this.SELECTIONTYPESUB?this.SELECTIONTYPEMIXED:this.SELECTIONTYPEMAIN;return e},getItemEl:function(e){return r(S+this._id(e))},traverse:function(e){var t=this,n=r(h+t.LIST_CLASS_NAME),i=n.all("div"+h+t.ITEM_CLASS_NAME),s,o;i.each(function(n){s=t._getIndexN(n),o=t._model.get(d)[s],e&&e(n,o,s)})},_setSelected:function(){},_renderItem:function(e){return e+""},_showSubitems:function(){},_renderSubitem:function(){},_focusItem:function(e){e.focus()},_id:function(e){return this._guid+c+(typeof e=="object"?e.join(c):e)},_idSub:function(e,t){return e+c+t},start:function(){return this.get(p)*this.get(f)},stop:function(){return Math.min(this.start()+this.get(f),this._model.get(d).length)},refresh:function(t,n){this._parentNode&&(t?this.get("model").refresh(n):(e.fire("MailLog",{m:"calling RELOAD"}),this.get("model").reload()))},sync:function(){this._sync()},getCurrentPage:function(t){var n=this._srcNode.all("."+this.PAGE_CLASS_NAME),r;return!t&&(t=this._srcNode.get("scrollTop")),n.each(function(n,i){if(!e.Lang.isValue(r)&&n.get("offsetTop")>=t)return r=i>0?i-1:0,!1}),e.Lang.isValue(r)?r:n.size()-1},_getPageNode:function(e){return this._srcNode.all("."+this.PAGE_CLASS_NAME).item(e)},renderPage:function(t){var n=this.get(f),r=t*n,i=Math.min(r+n,this._model.get(d).length),o=this._model.get(d),u=this._sel,a=[],l=[],c=this._getPageNode(t),h=this.listObj?this.listObj.sortedColumn.sortOrder:"",p,v,m,g;if(r>i)return!0;for(v=r;v<i;v++)p=o[v],p?(l.push(p),NeoConfig.timeChunk&&this.listObj.timeChunk&&(p.addDateLabel=A.addDateLabel(v,p,v>0?o[v-1]:"",h)),a.push(this._renderItem(p,v,u[v],this._id(v),!1))):m=1;return!m&&c?(c.set("innerHTML",a.join("")),NeoConfig.rearrangeMb&&NeoConfig.timeChunk&&t===0&&e.fire("mbEvent:rotate"),s.features.enabled("timeChunkV2")&&NeoConfig.timeChunk&&h==="down"&&(g=e.one(".list-view-items"),A.updateThisWeekLabel(),this._rawSectionHeaderNodes=L.getSectionHeaders(g)),!0):!1},updatePage:function(t){var n=this,r=n._srcNode,i=n.get("cellHeight"),s=n.get("pageSize")*i,o,a,f,l,c,p,d,v,m,g,y,b=e.common.Utils.ezSub;e.Lang.isValue(t)||(t=this.getCurrentPage()),f=r.all(h+n.PAGE_CLASS_NAME),c=f.size()-1;for(p=0;p<=c;p++){l=f.item(p);if(p>=t-1&&p<=t+1||l.one(".expanded")||p===c)l.one(h+n.ITEM_CONTAINER_CLASS_NAME)||(l.setStyle("height","auto"),n.renderPage(p));else{d=[],g=NeoConfig.msgListTmpl,o=l.all(".list-view-item-date-label"),a=o.size();for(m=0;m<a;m++)v=o.item(m),d.push(b(g.addDateLabel,{dateLabel:v.getHTML(),label:v.getAttribute("data-tc-label")}));s=n.get("pageSize")*i+a*u,p===0&&(y=n._mbAdEl?n._mbAdEl.offsetHeight:0,s+=y),l.setStyle("height",s+"px"),l.setHTML(d.join(""))}}},_renderVisiblePages:_("_renderVisiblePages"),resetFocus:function(){this.setAttrs({activeItem:null,focused:!1}),this._clearSelect(),this.fire("lv:resetFocus")},_bind:function(){var t=this;t.after("pageChange",function(e){e.details&&!e.details[0].noupdate&&t._appendConversations(t.start(),t.stop())},t),NeoConfig.timeChunk&&(e.on("updateDensity",function(){e.Lang.later(1e3,t,t.updateAnchoredLabel,[!0,!1])}),t.on("beforeRender",function(){t.updateAnchoredLabel(!0,!1)}))},_appendConversations:_("_appendConversations"),_keydown:_("_keydown"),_isCheckboxBorder:_("_isCheckboxBorder"),_sync:_("_sync"),_blur:_("_blur"),_selectRange:_("_selectRange"),_expandItem:_("_expandItem"),_resetSelection:_("resetSelection"),_getListItem:function(e,t){var n=this,r=e.target||e,i,s;return s=r.ancestor(function(e){return!t&&(e.hasClass(n.IGNORE_ARROW)||e.hasClass(n.IGNORE_FLAG)||e.hasClass(n.IGNORE_DELETE)||e.hasClass(n.IGNORE_SRCH)||e.hasClass(n.IGNORE_CLASS_NAME_INFO)||e.hasClass(n.IGNORE_UNREAD))&&(i=1),e.hasClass(n.ITEM_CLASS_NAME)&&!e.hasClass(n.HEADER_CLASS_NAME)||i},!0),i?0:s},_getIndexN:function(e){var t=e.get(v).split(c),n=1*t.pop(),r=t.pop(),i=t.pop();return i?[1*r,n]:n},_toIndexS:function(e){return typeof e=="object"?e.join(c):e.toString()},_toIndexN:function(e){var t=e.split(c);return t.length===1?t[0]:[t[0],t[1]]},_formatIndexS:function(e,t){return e+c+t},_getIndexS:function(e){var t=this;return t._toIndexS(t._getIndexN(e))},_isSubindex:function(e){return typeof e=="object"},_getSubindex:function(e){return typeof e=="object"?e[1]:-1},_getMainindex:function(e){return typeof e=="object"?e[0]:e},_getItemContainer:function(e){var t=this;return e.ancestor(function(e){return e.hasClass(t.ITEM_CONTAINER_CLASS_NAME)})},_getMasterItem:function(e){var t=this,n=null,r=t._getItemContainer(e);return r&&(n=r.one(h+t.ITEM_MASTER_CLASS_NAME)),n},_getSubitemContainer:function(e){var t=this._getItemContainer(e);return t&&(t=t.one("."+this.ITEM_SUBCONTAINER_CLASS_NAME)),t},_getNeighborMasterItem:function(e,t){var n=this._getItemContainer(e),r=this._getIndexN(e);return n&&(n=t?this.getItemEl(r+1):this.getItemEl(r-1)),n},_getEndDetailItem:function(e,t,n){var r=this._getItemContainer(e).all(h+this.ITEM_DETAIL_CLASS_NAME),i;if(r){i=r.item(t?0:r.size()-1);if(i&&(n||i.get("parentNode").getStyle("display")!=="none"))return i}return null},_getNodeType:function(e){return this._isSubindex(this._getIndexN(e))?this.SELECTIONTYPESUB:this.SELECTIONTYPEMAIN},_selectToRender:function(){var e={},t,n,r;for(r in this._sel)t=this._toIndexN(r),n=-1,this._isSubindex(t)&&(n=t[1],t=t[0]),e[t]||(e[t]=[]),e[t].push(n);return e},_checkbox:function(e){var t=e.target||e,n,r=NeoConfig.hoverPreview?!1:t.hasClass("info");if(t.hasClass("cbox")||t.get("parentNode").hasClass("cbox")||r||t.hasClass("fixed")&&t.hasClass("start")||(t.get("type")||"").toLowerCase()==="checkbox"||this._isCheckboxBorder(e)){n=a(t).parentNode[T](m);if(n&&n.length>0)return{state:n[0].checked}}},_isTextField:function(e){var t=e.target||e;if(t.get("type")&&t.get("type")==="text")return!0},_isFormControl:function(e){var t=e.target||e,n=t.get("nodeName");return n==="BUTTON"||n==="INPUT"},_entireElementCheck
:function(e){if(this.get("entireElementChecks")){var t=this,n=e.target||e,r,i;i=n.ancestor(function(e){return e.hasClass(t.ITEM_CLASS_NAME)},!0);if(i){r=a(i)[T](m);if(r)return{state:r[0].checked}}}},_showSelectedItem:function(e,t){var n=t?"addClass":"removeClass",r=n==="removeClass"?-1:0,i;e[n](w),e.setAttribute("tabindex",r),n==="removeClass"&&(e.setAttribute("aria-selected",!1),e.one("input").setAttribute("aria-checked",!1)),this._isSubindex(this._getIndexN(e))||(i=this._getItemContainer(e),i[n](E),i.all(h+this.ITEM_DETAIL_CLASS_NAME).each(function(e){e[n](E)}))},_select:function(t,n,r,i,s,o){var u=this,f=u.selCount(),l,c,h,p,d,v;n=!!n;if(t){v=u.getItemEl(u._getIndexN(t)),v&&t!==v&&(t=v),h=u._getIndexN(t),p=u._toIndexS(h);if(!r||r&&r.compareTo(t)){if(document.getElementById(t.get("id"))){u._showSelectedItem(t,n),f===1&&n&&s&&(c=a(e.Node.one(S+u._id(u.get("selection")[0])))[T](m),c&&(c[0].checked=n));if(f>=1||i)c=a(t)[T](m),c&&(c[0].checked=n,t.set("aria-selected",n),t.one("input").set("aria-checked",n),n?t.one("input").setAttribute("title",strings.str_msg_list_checkbox_checked):t.one("input").setAttribute("title",strings.str_msg_list_checkbox_not_checked),u.checkmode=f>1?1:n,u._lastSel&&n&&(d=u._lastSel.all("input"),d&&d.item(0)&&d.item(0).set("checked",!0)))}n?(l=u._model.valueAt(h),l&&(u._sel[p]=l)):delete u._sel[p],o||u.set(x,u.selCount())}else u._selectRange(t,n,r,o)}},_selectByIndex:function(e,t,n,r,i,s){var o;t?(o=this._model.get(d)[e],o&&(this._sel[e]=o)):this._sel[e]=null,this._select(this.getItemEl(e),t,n,r,i,s)},_clearSelect:function(t){var n=this.selCount(),r,i,s;n&&!t&&(n===1&&this._lastSel?(NeoConfig.previewPanePref&&e.UA.gecko>0&&(r=this._lastSel.ancestor("#msg-list"),i=r&&r.next(".threadpane.tripane"),s=i&&i.one("#rtetext"),s&&(s.focus(),s.blur())),this._select(this._lastSel,0)):this.selectAll(!1)),this.checkmode=0,this._lastSel=this._lastSS=0,this._sel={},n&&this.set(x,this.selCount())},_clearSubselect:function(){var e,t;for(e in this._sel)t=this._toIndexN(e),this._isSubindex(t)&&(this._select(r(S+this._id(t)),0),this._sel[e]=null)},_adjustShiftSelection:function(e,t){var n,r,i,s,o;return t&&(n=this._getNodeType(t),r=this._getNodeType(e),s=this._getMasterItem(e),i=this._getMasterItem(t),n===this.SELECTIONTYPEMAIN?e=s:(o=this._getItemContainer(t).all(h+this.ITEM_DETAIL_CLASS_NAME),o&&(e=o.item(this._getIndexN(i)>this._getIndexN(s)?0:o.size()-1)))),e},_onSelect:function(t){function y(){var s=!1;if(r){o?f=!g:f=i?!i.state:1,f&&!o&&!u&&(!i||!n.checkmode)&&(f===1&&n._sel[n._getIndexS(r)]&&n.selCount()===1&&!a(r)[T](m)[0].checked?s=!0:n._clearSelect()),n.set("showFocus",!1),u?(n._lastSel=f?r:0,n._select(r,1,n._lastSS,1,0,1),n.set(x,n.selCount())):(n._lastSel=0,s?n.selCount()===1&&!e.Lang.isUndefined(c)&&(n._subselIndex=c,n.fire("subselect")):(n._select(r,f,0,i||t.button>1,o,1),e.Lang.isUndefined(c)||(n._subselIndex=c),n.set(x,n.selCount())),n._lastSel=f?r:0,n._focusItem(r),n._subselIndex=-1),(n.selCount()===1||!u)&&f&&(n._lastSS=r),n.setAttrs({activeItem:r||null,focused:1}),t.preventDefault();if(i||o||u)h=n._model.isCollapsible(n._model.valueAt(l)),e.fire("mt:click",{action:h?"click_select_thrd":"click_select",append:{ltxt:[f,",",u,",",o,",",n.selCount()].join("")}})}}var n=this,r=t.which===3?n._getListItem(t,!0):n._getListItem(t),i=n._checkbox(t)||n._entireElementCheck(t),s=t.type,o=t.metaKey||t.ctrlKey,u=t.shiftKey,f,l,c,h,p,d,v,g;if(!r)return;l=n._getIndexN(r),n._isSubindex(l)&&(c=n._getSubindex(l),r=n._getMasterItem(r)),d=n.SELECTIONTYPEMAIN,g=r.hasClass(w),s==="mousedown"&&(O=!g)&&y(),s==="mouseup"&&!O&&g&&t.button<2&&y();if(s==="click"||s==="dblclick")g&&!i&&!o&&!u&&(v=n._model.valueAt(l),h=n._model.isCollapsible(v),p=n._isSubindex(l),n.fire("command",{e:t,index:p?n._getSubindex(l):n._getMainindex(l),subindex:p?n._getSubindex(l):-1,mainindex:n._getMainindex(l),item:v})),t.preventDefault()},_bindEvents:function(e){var t=this;e.on("mousedown",t._onSelect,t),e.on("mouseup",t._onSelect,t),e.on("click",t._onSelect,t),e.on("dblclick",t._onSelect,t),e.on("keydown",function(){t._keydown.apply(t,arguments)}),e.on("focus",function(e){t.setAttrs({activeItem:t._getListItem(e,1)||null,focused:!0})}),e.on("blur",function(){t._blur.apply(t,arguments),t.setAttrs({focused:!1})}),t._srcNode.on("scroll",function(e){var n=e.currentTarget,r=n.get("scrollTop"),i=n.get("offsetHeight"),s=(r+i)/n.get("scrollHeight")*100,o=t.getCurrentPage(r),u=t._rawSectionHeaderNodes,a=t._mbAdEl,f=t._smwEl;o!==t.currPage&&(t.updatePage(o),t.currPage=o,NeoConfig.timeChunk&&(t._rawSectionHeaderNodes=L.getSectionHeaders(t._srcNode)));if(NeoConfig.timeChunk){if(!u||!u[0]||!u[0].parentNode||!u[0].parentNode.parentNode)t._rawSectionHeaderNodes=L.getSectionHeaders(t._srcNode);if(!a||!a.parentNode)t._mbAdEl=t._srcNode._node.querySelector("#"+C);if(!f||!f.parentNode)t._smwEl=t._srcNode._node.querySelector("#"+k);t.updateAnchoredLabel(!1,r)}s>=70&&t.next(),t.fire("listview:scroll",{scrollTop:r,currPage:o})}),t.after("showFocusChange",function(e){r(h+t.LIST_CLASS_NAME)[e.newVal?"addClass":"removeClass"]("showfocus")})}}),e.mix(P,{NAME:"listmodel",ATTRS:{KEY:{value:"id"},SUBKEY:{value:"subid"},list:{value:[]},length:{setter:function(e){this.get(d).length=e},getter:function(){return this.get(d).length}}}}),e.extend(P,e.Base,{NAME:"listmodel",valueAt:function(e){var t=this.get(d);if(typeof e=="string"){var n=e.split(c);e=n.length===1?n[0]:[n[0],n[1]]}return typeof e=="object"?this.getSubitem(t[e[0]],e[1]):t[e]},setRange:_("setRange"),update:_("update"),remove:_("remove"),reverse:_("reverse"),indexesOf:_("indexesOf"),refresh:function(e){this._refresh=1,this.fire(g,e)},reload:function(){this.set("length",0),e.fire("MailLog",{m:"firing RELOAD event"}),this.fire(y)}}),t.ConvListModel=P,t.ConvListView=D},"1.0.0",{requires:["base-base","node","event-focus","common-utils","mail-common-utils-features","common-ui-anchored-header","common-ui-timechunk"]});


YUI.add("common-ui-anchored-header",function(e){var t=26;e.namespace("common.ui").AnchoredHeader={_getEffectiveOffsetTop:function(e){var t=e.parentNode.previousSibling,n=e.offsetTop;while(t)t.className==="list-view-items-page"&&(n+=t.offsetHeight),t=t.previousSibling;return n},updateAnchoredLabel:function(e,n,r,i,s){var o=this,u=n.length,a,f,l=!1,c=s?e-i:e,h,p,d;for(a=u-1;a>=0;a--)f=n[a],p=s?o._getEffectiveOffsetTop(f):f.offsetTop,p<c&&!l&&(h=n[a+1],h?(d=s?o._getEffectiveOffsetTop(h):h.offsetTop,c+t+1>d?(r.style.height=d-c+"px",r.firstChild.style.lineHeight=d-c+"px"):(r.style.height=t+"px",r.firstChild.style.lineHeight=t+"px")):(r.style.height=t+"px",r.firstChild.style.lineHeight=t+"px"),r.style.top=i,r.style.display="block",r.firstChild.innerHTML=f.innerHTML,l=!0);l||(r.style.display="none")},getSectionHeaders:function(e){return e._node.querySelectorAll(".list-view-item-date-label")}}},"1.0.0",{requires:[]});


YUI.add("common-ui-timechunk",function(e){var t=4,n="this-week",r=".list-view-items",i=".list-view-item-date-label",s="data-tc-label",o=".result",u=NeoConfig.strings.dateObj;e.namespace("common.ui").TimeChunk={updateThisWeekLabel:function(){var t=this,o=e.one(r),a,f,l,c,h,p,d;if(o){a=o.all("."+n),f=o.one(i),l=o.getAttribute(s),c=a.size();for(h=0;h<c;h++)p=a.item(h),d=p.getAttribute(s),l&&l>d?p.remove(!0):l===d?p===f?p.setHTML(u.tw):p.setHTML(u.etw):p.removeClass(n);t.updateFirstLabel()}},updateFirstLabel:function(t){var n,a=t?o+" "+r+" "+i:r+" "+i,f=e.one(a);f&&(n=f.getAttribute(s),n.indexOf("em")===0?f.setHTML(u[n.replace("e","")]):n.indexOf("ey")>=0&&f.setHTML(n.split("_")[1]))},addDateLabel:function(e,t,r,i){var s,o,u,a,f;return t.addDateLabel=!1,t.dateLabel="",o=(t.anchorDate||t.receivedDate)*1e3,r?(!r.labelStart&&!r.labelEnd&&(s=this.getDateLabel((r.anchorDate||r.receivedDate)*1e3),r.labelStart=s.labelStart,r.labelEnd=s.labelEnd,r.dateLabel=s.dateLabel,r.label=s.label,r.thisWeek=s.thisWeek),i==="up"?r&&o<r.labelEnd?t.labelEnd=r.labelEnd:(u=this.getDateLabel(o),t.dateLabel=u.dateLabel,t.labelEnd=u.labelEnd,f=u.thisWeek,f&&(t.thisWeek=n)):r&&o>=r.labelStart?(t.labelStart=r.labelStart,t.label=r.label,r.thisWeek&&(t.thisWeek=n)):(u=this.getDateLabel(o),f=u.thisWeek,t.label=u.label,f&&(t.thisWeek=n),t.dateLabel=u.dateLabel,t.labelStart=u.labelStart)):(u=this.getDateLabel(o),a=u.label,t.dateLabel=u.dateLabel,t.labelStart=u.labelStart,t.labelEnd=u.labelEnd,f=u.thisWeek,t.label=a,f&&(t.thisWeek=n),t.label==="t"),t.dateLabel},getDateLabel:function(e,t){return Neo&&Neo.getDateLabel?Neo.getDateLabel((new Date).setHours(0,0,0,0),e,t):""},addThisWeekLabel:Neo.addThisWeekLabel}},"1.0.0",{requires:[]});


YUI.add("mail-ui-maillist",function(e){var t=e.common.Utils,n=t.escapeHtml,r=t.unescapeHtml,i=e.mail.ui.common.StringUtils,s=e.mail.ui.Accounts,o=e.mail.Controller,u=o.Folders,a=e.common.persist.UserData,f="userUIPref.defaultSortOrder",l=["externalAccounts","aliases","disposableAddresses"],c=l.length,h,p,d="date",v="%40B%40Bulk",m=200,g=t.features.enabled("archive"),y=function(){h=s.buildAccountList()};for(p=0;p<c;++p)a.after("knownAddress|"+l[p]+"Change",y);var b=function(e){function n(){b.superclass.constructor.call(t)}var t=this;t._requests=[],e=e||{},t.evt=[],t.folderIDSortCol={},t.listAPIObj={},t.scrollTop=0,n()};e.extend(b,e.common.ui.ContentWidget),e.mix(b.prototype,{getColorIndicator:function(e,t){var n=e||t;return h=h||s.buildAccountList(),n&&h[n]?h[n]:""},getFolder:function(t){var n=this;u.get(n.fid,{success:function(r){var s=r.folderInfo;s.localizedName||(s.localizedName=i.getSystemFolderName(s.fid,s.name,e.Lang.isObject(n.extraParams))),t(r)}})},getFolderNameBidi:function(t,n,r,i){return typeof t=="undefined"?"":(typeof i=="undefined"&&(i=strings.str_tog_loadRTLCss?"rtl":"ltr"),typeof n=="undefined"&&(n=NeoConfig.bidi&&e.Intl.detectDirection?e.Intl.detectDirection(t,i):""),t=(n==="rtl"?"\u202b":"\u202a")+t+"\u202c",t+=i==="rtl"?"\u200f":"\u200e",typeof r!="undefined"&&(t='<span dir="'+n+'">'+t+"</span>"),t)},updateTitle:function(){var e=this;e.getFolder(function(t){var n=t.folderInfo.localizedName;e.set("title",n)},!0)},setLabel:function(){var e=this;e.getFolder(function(t){e.parentNode.one(".list-view").set("aria-label",t.folderInfo.localizedName)},!1)},setFocusNodeAttr:function(e){return this.set("focusNode",e),e},removeSelection:function(){var e=this,t=e._listview;t?(e.setFocusNodeAttr(t.getItemEl(t.start())),t.set("selection",0)):NeoConfig.previewPanePref||e._listview.clearSelection(0,1,1)},formatFromName:function(t,i,s){var o=this,u=strings.str_cfg_tog_show_contact_name&&e.contacts&&e.contacts.utils,a,f,l={nameDir:""};return o.fid==="Draft"||o.fid==="Sent"?t&&(f=t,l.nameDir=i?i:NeoConfig.bidi&&e.Intl.detectDirection?e.Intl.detectDirection(f):""):(a=s.name?s.name:s.email,f=u?e.contacts.utils.getShownContactName(s):a,NeoConfig.bidi&&(e.Intl.detectDirection&&f?l.nameDir=e.Intl.detectDirection(f):s.nameDir&&(l.nameDir=s.nameDir))),l.name=f?n(r(f)):" ",l},initAttrs:function(e){var t=this,n={selectCount:{getter:function(){return t._listview?t._listview.getSelectCount():0}},selectType:{getter:function(){return t._listview&&t.listview.getSelectType?t._listview.getSelectType():null}},fid:{setter:t.setFid},extraParams:{setter:t.setExtraParams},title:{value:t.title},fullpane:{setter:t.setFullpane},vertical:{value:e.vertical},view:{getter:function(){return t._listview}},sortInfo:{getter:function(){return t.sortedColumn}},page:{getter:function(){return t._listview?t._listview.get("page"):-1}},pageCount:{getter:function(){return t._listview?t._listview.get("pageCount"):-1}}};t.addAttrs(n)},setExtraParams:function(e){var t=this;t.extraParams=e},reset:function(){var e=this;e.folder=null,e.cancelRequests(),NeoConfig.msgrData={reply:{},spam:{spims:[]},message:null}},cancelRequests:function(){for(var e=0;e<this._requests.length;e++)this._requests[e].abort();this._requests.length=0,this.sorting=0},refresh:function(){var t=this,n;t.fid==="%40C%40Chats"?n=strings[NeoConfig.hasConv?"str_msg_list_loading_ims":"str_msg_list_loading_conversation"]:n="loading-icon",t._listview.setStatus(n),e.fire("MailLog",{m:"Maillist refresh"}),t._listview.refresh(),t.rootNode&&(t._listview.scrollToTop(),t.toggleScrollTopBtn(0))},restoreSortOrder:function(){var e=this,n=e.folderIDSortCol;e.sortedColumn=n[e.fid],e.sortedColumn||(e.sortedColumn=e.columns.date,e.sortedColumn.action=d),e.sortedColumn.sortOrder=(t.isEmpty(n)?a.get(f):0)||e.sortedColumn.sortOrder,e.showSortOrder()},showSortOrder:function(){},setFullpane:function(t){var n=this;t?(n.rootNode.addClass("inbox-fullpane"),n.rootNode.setStyles({width:"auto",height:"auto"})):e.use("common-persist-cookie-data",function(e){var t=e.common.persist.getCookie(),r=n.get("vertical"),i;r?(i=t.get("pos.h2slider"),i=i&&i.substr(1),i&&parseInt(i,10)<NeoConfig.minMessagelistWidth&&(i=NeoConfig.minMessagelistWidth),i=Math.max(i?i:NeoConfig.vertPane?330:630,0),n.rootNode.setStyles({width:i,height:"auto"})):(i=t.get("pos.vslider"),n.rootNode.removeClass("inbox-fullpane"),i&&parseInt(i,10)<NeoConfig.minBottomPreviewHeight&&(i=NeoConfig.minBottomPreviewHeight),i=Math.max(i||NeoConfig.minBottomPreviewHeight,0),n.rootNode.setStyles({height:i,width:"auto"}))})},handleDarlaEvent:function(e,t){var n=this,r=t?{Inbox:"scroll_inbox","%40C%40Chats":"scroll_inbox",Draft:"scroll_draft",Sent:"scroll_sent",Trash:"scroll_trash","%40B%40Bulk":"scroll_spam"}:{Inbox:"folderview_inbox","%40C%40Chats":"folderview_chat",Draft:"folderview_draft",Sent:"folderview_sent",Trash:"folderview_trash","%40B%40Bulk":"folderview_bulk"},i,s=e||n.folder&&n.folder.total===0;i=r[n.fid]||(t?"scroll_folder":"folderview_custom"),n.fire("darlaEvent",{action:s&&!t?i+"_empty":i})},bindInfiniteScroll:function(){var n=this,r,i,s,o,u,a=n.rootNode.one(".list-view-items"),f=n.rootNode.one(".scroll-to-search"),l=n.rootNode.one(".scroll-to-top"),c=n.rootNode.one(".scroll-to-search-input"),h=n.rootNode.one(".scroll-to-adv");n.page=1,n.prevY=0,n.debouncedFn=t.debounce(function(){u=n._listview.get("cellHeight"),NeoConfig.adOpt?(r=Math.floor(a.get("offsetHeight")/2),s=u*10,o=u*20,i=r>s?r>o?o:r:s):i=u*25,Math.abs(n.prevY-n.scrollTop)>i&&((!NeoConfig.hasSpritzAd||NeoConfig.hasSpritzAd&&NeoGV.okToNukeSpritz)&&n.rotateAds(),n.prevY=n.scrollTop)},200),l.on("click",function(){n._listview.scrollToTop(),e.fire("util:ymstats",{name:"tmp_scroll_to_top",tags:{conv:NeoConfig.hasConvView}}),n.handleDarlaEvent(!1)}),c.on("mousedown",function(e){e.stopPropagation()}),f.on("click",function(){f.addClass("wide"),c.focus()}),c.on("blur",function(e){e.currentTarget.set("value",""),f.removeClass("wide")}),h.on("click",function(t){var r=n.fid;r==="Draft"&&
(r="Drafts"),e.fire("search:jumpToAdvancedSearch",{keyword:'in:"'+decodeURIComponent(r.replace("%5","%2"))+'"'}),t.halt(),e.fire("util:ymstats",{name:"scroll_to_adv_search",tags:{source_action:"folder"}})}),c.on("valuechange",function(t){t.newVal&&(e.fire("search:jumpToSearch",{keyword:t.newVal}),f.addClass("invisible"),t.currentTarget.set("value",""),e.fire("util:ymstats",{name:"scroll_to_search",tags:{source_action:"inbox"}}))}),e.on("update:density",n.updateDensity,n),n._listview.on("listview:scroll",function(e){n.onListScroll(e),n.debouncedFn()})},onListScroll:function(e){var t=this;t.scrollTop=e.scrollTop,t.refreshList&&t.triggerAutoCheckMail(),t.toggleScrollTopBtn(e.scrollTop)},updateDensity:function(){var t=this,n=e.one("#inboxcontainer").hasClass("vp");t._listview.set("cellHeight",n?e.mail.persist.MetaData.get("neo.pref.general.snippets")!=="-1"?NeoConfig.vertPaneCellHeight[1]:NeoConfig.vertPaneCellHeight[0]:NeoConfig.cellHeight[NeoConfig.msgListDensity]),t._listview.updatePage(),t._listview._renderVisiblePages()},toggleScrollTopBtn:function(e){e>0?(this.rootNode.one(".inf-scroll-btn").removeClass("fadeout"),this.rootNode.one(".scroll-to-top").removeClass("hidden"),this.fid.toLowerCase()==="inbox"?(this.rootNode.one(".scroll-to-search").removeClass("hidden"),this.rootNode.one(".scroll-to-search").removeClass("invisible"),this.rootNode.one(".scroll-to-adv").addClass("hidden")):this.fid.toLowerCase()==="%40b%40bulk"?(this.rootNode.one(".scroll-to-search").addClass("hidden"),this.rootNode.one(".scroll-to-search").addClass("invisible"),this.rootNode.one(".scroll-to-adv").addClass("hidden")):(this.rootNode.one(".scroll-to-adv").removeClass("hidden"),this.rootNode.one(".scroll-to-search").addClass("hidden"))):(this.rootNode.one(".inf-scroll-btn").addClass("fadeout"),this.rootNode.one(".scroll-to-top").addClass("hidden"),this.rootNode.one(".scroll-to-search").addClass("hidden"),this.rootNode.one(".scroll-to-adv").addClass("hidden"))},rotateAds:function(){var t=this;t.handleDarlaEvent(!1),e.fire("mbEvent:rotate",{source:"scroll"}),e.fire("rotateD2S")},isUserOnTop:function(){return this.scrollTop<100},triggerAutoCheckMail:function(){var t=this;t.refreshList&&t.isUserOnTop()&&(t.requestItems(0,m,{success:function(n,r,i){t._listview.setLength(i),t._listview.refresh(1,{data:r}),e.fire("prefetchConversations",{fid:t.fid,cids:r})},failure:function(){t.refreshList=1}},"autoCheckMail"),t.refreshList=0)},isArchivable:function(e){return g&&e!==v&&e!=="Draft"}},!0),e.mail.ui.MailList=b},"1.0.0",{requires:["common-ui-contentwidget","mail-controller-folders","common-persist-user-data","mail-ui-common-string-utils","mail-ui-accounts","mail-model-datastore","io","event-valuechange","mail-common-utils-features"]});


YUI.add("mail-ui-conv-maillist-view",function(e){function r(e){var t=this;t.listObj=e.listObj,r.superclass.constructor.apply(this,arguments)}var t=e.namespace("mail.ui"),n=10;e.extend(r,e.common.ui.ConvListView,{_renderItem:function(e,t,n,r,i){var s=this;return s.listObj.renderItem(e,t,n,r,i)},_focusItem:function(t,n){var r=this,i=r.listObj.setFocusNodeAttr(t);i&&!n&&!e.common.Utils.isControlActive(!0)&&i.focus()},_showSubitems:function(e,t){var n=this;return n.listObj.showSubitems(e,null,t)},_renderSubitems:function(e,t){var n=this;return n.listObj.renderSubitems(e,t)},_renderSubitem:function(e,t,n,r){var i=this;return i.listObj.renderSubitem(e,t,n,r)},getSelected:function(t,r,i,s){var o=this,u=o.get("selection"),a=u.length,f=u.length,l=[],c=[],h={},p={},d,v,m,g,y=!1,b=o._model.get("KEY"),w=o._model.get("SUBKEY");while(f--)d=o._model.valueAt(u[f]),d&&(m=o.listObj.isSubitem(d),y=y||m,g=m?w:b,c.push(d[g]),h[d[g]]=d,p[d[g]]=u[f]);a===1&&i&&s&&!NeoConfig.noCache&&(e.fire("MailLog",{m:"Current value of sel"+o.get("selection")}),v=parseInt(o._getMainindex(o._toIndexN(u[0])),n),i(o._model.get("list"),v,l,s)),t({arr:c,map:h,neighbors:l,selmap:p})},isSelectedThread:function(){var e=this,t=e.get("selection"),n,r;return t.length>=1?(n=e._model.valueAt(t[0]),r=n&&n.totalMsgs>1?!0:!1):r=!1,r},setStatus:function(e){var t=this;t.set("status",e)},setLength:function(e){var t=this;t._model.set("length",e)},refreshBody:function(){var t=this;e.fire("MailLog",{m:"sync for refreshBody"}),t.sync()},updateUlSize:function(){},updateItemByIndex:function(e){var t=this,n=!1,r;r=t.getItemEl(e),r&&(n=r.get("parentNode").hasClass("expanded")?!0:!1),t._model.update(e,t.listObj._listmodel.valueAt(e),n)},getSelectClass:function(){return""},getSelectCount:function(){var e=this;return e.get("selectionCount")},getSelectType:function(){var e=this;return e.get("selectionType")},reverse:function(e){var t=this;t._model.reverse(),t.get("selectionCount")||(e?t.end():t.home())},toggleScrollPos:function(){var e=this;e.end()},setScrollByIndex:function(){},getItem:function(e){var t=this,n=t.listObj._listmodel.valueAt(t._getIndexN(t._getListItem(e,1)));return n},setItems:function(e,t,n){var r=this;r._model.set("length",n),r._model.setRange(e,t)},selectLastSingle:function(){var e=this;return{item:e._model.valueAt(e.get("selection").pop())}},clear:function(e,t,n){var r=this;n?r._model.get("list").length=0:r._model.reload()},clearSelection:function(){},setSelected:function(e,t){var n=this,r={},i=n._model.get(t?"SUBKEY":"KEY");r[i]=e,n._model.indexesOf(r,t,function(e){n.set("selection",e)})},movetoByKey:function(t){var n=this,r={},i=n._model.get("KEY"),s,o;r[i]=t,n._model.indexesOf(r,!1,function(t){t&&(s=n.listObj._listview.getItemEl(e.Object.keys(t)[0]),s&&n.listObj._listview._moveToItem(s,{}))})},removeByKey:function(t,n){var r=this,i=r._model.get(n?"SUBKEY":"KEY"),s=[];e.Array.each(t,function(e){var t={};t[i]=e,s.push(t)}),r._model.indexesOf(s,n,function(t){e.common.Utils.traceMsg("removing indexes from model, count "+e.Object.keys(t).length),r._model.remove(t)})}}),t.ConvMailListView=r},"1.0.0",{requires:["common-ui-conv-listview","common-utils"]});


YUI.add("mail-ui-listview-controls",function(e){var t=e.common.Utils,n=t.substitute,r=e.ui.Templates,i=t.features&&t.features.enabled("viewMenuV2"),s=e.Plugin.Menu,o="_shared_module_offscreen_bin_menus_message_list_sortby",u="_shared_module_offscreen_bin_menus_message_list_cbox_select",a="up",f={SearchList:["flagged","unRead","conv"],ConversationList:["sender","recipient","conv","subject","relevance"],MessageList:["conv","relevance"],MessageListTo:["conv","sender","relevance"],list:["conv","recipient","relevance"],listTo:["conv","sender","relevance"]},l=function(e,t,n){var r=this;r.list=t,r.type=n,r.node=e,r.template=null};e.mix(l.prototype,{setup:function(){var e=this;try{return e["_"+e.type+"Setup"].apply(e,arguments)}catch(t){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-maillist-base-listview-controls:1",t,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-maillist-base-listview-controls:1")}return!1},_paginationSetup:function(t){var n=this,r=n.list.get("view");return t&&(n.template=t),r&&(r.after("renderComplete",e.bind(n._pageChange,n)),r.after("updatePagination",e.bind(n._pageChange,n))),n._pageChange(!1),!0},_pageFooterSetup:function(t){var n=this,r=n.list.get("view");return t&&(n.template=t),r&&(r.after("renderComplete",e.bind(n._nextPage,n)),r.after("updatePagination",e.bind(n._nextPage,n))),n._nextPage(!1),!0},_sortoptionsSetup:function(e,t){var n=this;e&&(n.template=e),n._handleSortMenu(t)},_handleSortMenu:function(t){var n=this;n.node.addClass("pressed"),n.createMenuFor(o,n.node,"#menu-ml-sortby",{},function(){var r=n.node.menu.getMenuNode();n.updateSortMenu(t),r.on("menuSelected",function(t){var i=t.dataAction,s=n.list,o=r.one("li.sortby");e.fire("mt:click",{action:"msglist_sortMnu",append:{ltxt:i}}),s.fire("sortList",{sortType:i,targetNode:t.item.get("parentNode"),currentSortedColumn:o})}),r.after("menu:state",function(t){var r=t.state;r==="hide"&&(n.node.removeClass("pressed"),n.node.unplug(e.Plugin.Menu),this.destroy(!0))})})},showOrHideSortNodes:function(t,n){t.each(function(t){var r=t.get("parentNode"),s=t.getAttribute("data-action");e.Array.indexOf(n,s)>=0?!i||s!=="sender"&&s!=="subject"?r.hide():r.addClass("disabled").show():r.show()})},updateSortInViewMenu:function(e,t){var n=this,r=n.list.NAME,s=e.hasClass("optionMenu")?e:e.ancestor("#menu-conv-view"),o=s.all(".sortby-group a"),u=s.one(".sortby-group .sortby"),l,c,h,p;r!=="MessageList"||!t||t!=="Sent"&&t!=="Draft"?r==="SearchList"&&(p={Sent:!0,Draft:!0,"%40C%40Chats":!0},n.list.get("data").type==="list"&&(r=p[n.list.get("fid")]?"listTo":"list")):r="MessageListTo",h=f[r],l=n.list.get("sortInfo"),i&&l.action==="date"&&(l.action=l.action+(l.sortOrder===a?"-asc":"-desc")),u&&(u.removeClass("sortby").removeClass("asc").removeClass("desc").removeAttribute("aria-sort"),u.one("b")&&u.one("b").removeClass("icon-chevron-down").removeClass("icon-chevron-up"),u.one("i.icon-checkmark").removeClass("icon-checkmark")),c=s.one('a[data-action="'+l.action+'"]').get("parentNode"),c.one("i.icon").addClass("icon-checkmark"),c.one("b")&&c.one("b").removeClass("icon-chevron-down").removeClass("icon-chevron-up"),c.addClass("sortby "+(l.sortOrder===a?"asc":"desc")),c.one("b")&&c.one("b").addClass(l.sortOrder===a?"icon-chevron-up":"icon-chevron-down"),c.setAttribute("aria-sort",l.sortOrder===a?"ascending":"descending"),n.showOrHideSortNodes(o,h)},updateSortMenu:function(e){var t=this,n=t.list.NAME,r=t.node.menu.getMenuNode(),s=r.all("a"),o=r.one(".sortby"),u,l,c,h;n!=="MessageList"||!e||e!=="Sent"&&e!=="Draft"?n==="SearchList"&&(h={Sent:!0,Draft:!0,"%40C%40Chats":!0},t.list.get("data").type==="list"&&(n=h[t.list.get("fid")]?"listTo":"list")):n="MessageListTo",c=f[n],u=t.list.get("sortInfo"),i&&u.action==="date"&&(u.action=u.action+(u.sortOrder===a?"-asc":"-desc")),l=r.one('a[data-action="'+u.action+'"]').get("parentNode"),o&&o.removeClass("sortby").removeClass("asc").removeClass("desc").removeAttribute("aria-sort"),l.addClass("sortby "+(u.sortOrder===a?"asc":"desc")),l.setAttribute("aria-sort",u.sortOrder===a?"ascending":"descending"),t.showOrHideSortNodes(s,c)},_selectoptionsSetup:function(e){var t=this;e&&(t.template=e),t._handleSelectMenu()},_handleSelectMenu:function(){var t=this;t.node.get("parentNode").addClass("pressed"),t.createMenuFor(u,t.node,"#menu-ml-cbox",{},function(){var n=e.one("#menu-ml-cbox");n.on("menuSelected",function(e){var n=e.dataAction;t.list.fire("selectMessages",{action:n})},t),n.after("menu:state",function(n){var r=n.state;r==="hide"&&(t.node.get("parentNode").removeClass("pressed"),t.node.unplug(e.Plugin.Menu),this.destroy(!0))})})},createMenuFor:function(t,i,s,o,u,a){a=a||{},e.use("common-ui-menu-helper",t,function(e){var f=e.common.ui.MenuHelper,l=n(r[t].base,null,a,null,strings),c;e.Lang.isString(s)&&(s=e.one(s)),s||(s=l),o&&o.loading&&(c=o.loading.node?o.loading.node:s,f.createLoadingMenu(c)),f.create(i,{menu:s},u)})},_nextPage:function(r){var i,s=this,o=s.node,u,a=s.template;if(r&&(!(i=o.get("parentNode"))||!i.get("parentNode")))return;e.one(".list-view-items").appendChild(n(a.footer_wrapper,0,0,0,strings)),o=e.one(".pagination-footer");var f=s.list.get("page")+1,l=s.list.get("pageCount"),c=f===l,h={class_disabled_next:f===l?" disabled":" enabled",class_disabled_first:f===1?" disabled":" enabled",aria_disabled:c?"true":"false"};o.setContent(n(a.infinite_scroll_footer,h,0,0,strings)),o.detach("click"),o.on("click",function(n){var r=t.getDataAction(n),i,o,a;a=r.action,a.indexOf("-page")!==-1&&(a=a.substr(0,a.indexOf("-page")));if(a){i=n.target.ancestor(function(e){return e.get("tagName").toLowerCase()==="span"},!0),i&&!i.hasClass("disabled")&&(o=e.config.win||window,o.scrollTo(0,0));if(e.Lang.isNull(n.target.ancestor(".disabled"))){s.list.fire("pageAction",{args:{action:a}});var f=n.target.ancestor(".list-view-footer")||n.target.ancestor(".pagination-footer");i&&i.get("id")==="btn-load-more"?u="load_more":u="nav_"+a+(f?"_btm":"")
,e.fire("mt:click",{action:u})}}n.preventDefault(),n.stopPropagation()})},_pageChange:function(t){var r,i=this,o=i.node,u=i.template;if(!o)return;if(t&&(!(r=o.get("parentNode"))||!r.get("parentNode")))return;var a=i.list.get("page")+1,f=i.list.get("pageCount"),l=a===1,c=a===f,h={first_class_disabled:l?" disabled":" enabled",first_aria_disabled:l?"true":"false",current:a,total:f,last_class_disabled:c?" disabled":" enabled",last_aria_disabled:c?"true":"false"};o.one("#btn-ml-count")&&o.one("#btn-ml-count").menu&&o.one("#btn-ml-count").unplug(s),o.setContent(n(u.pagination_inner,h,0,0,strings)),o.detach("dblclick"),o.on("dblclick",function(t){t.target.ancestor(".pagination-count")&&e.use("mail-common-inline-edit",function(n){n.log("Enabling Editable Pagination control for Message View toolbars");var r=new n.mail.common.EditablePaginationControl(o,{setPage:function(e){i.list.fire("pageAction",{args:{action:"page",val:e}})},getPageTotal:function(){return i.list.get("pageCount")},getCurrentPage:function(){return i.list.get("page")}},t);r.enableEditablePagination(t);var s=t.target.ancestor(".list-view-footer")||t.target.ancestor(".pagination-footer");e.fire("mt:click",{action:"nav_page"+(s?"_btm":"")})}),t.stopPropagation()}),NeoConfig.pagedResults&&(o.detach("click"),o.on("click",i._arrowClick,i),o.on("keydown",function(e){e.keyCode===13&&i._arrowClick(e)},i))},_arrowClick:function(n){var r=this,i=t.getDataAction(n),s=r.list.folder,o,u,a;a=i.action,a.indexOf("-page")!==-1&&(a=a.substr(0,a.indexOf("-page")));if(a){o=n.target.ancestor(function(e){return e.get("tagName").toLowerCase()==="span"},!0),o&&!o.hasClass("disabled")&&(u=e.config.win||window,u.scrollTo(0,0));if(e.Lang.isNull(n.target.ancestor(".disabled"))){r.list.fire("pageAction",{args:{action:a}});var f=n.target.ancestor(".list-view-footer")||n.target.ancestor(".pagination-footer");e.fire("mt:click",{action:"nav_"+a+(f?"_btm":"")})}}n.preventDefault(),n.stopPropagation()},_handleMenu:function(){}}),e.mail.ui.ListViewControls=l},"1.0.0",{requires:[]});


YUI.add("mail-ui-conv-maillist-model",function(e){function n(e){var t=this;t.listObj=e.listObj,n.superclass.constructor.apply(this,arguments)}var t=e.namespace("mail.ui");e.extend(n,e.common.ui.ConvListModel,{request:function(e,t,n){var r=this;r.requestItems(e,t,{success:function(e,t,i){r.set("length",i),r.setRange(e,t,n),r.fire("MailListModel:data",{data:t})},failure:function(){r.fire("requestfail",{start:e,reason:n})}},n)},requestItems:function(e,t,n,r){var i=this;i.listObj.requestItems(e,t,n,r)},getSubitem:function(e,t){var n=this;return n.listObj.getSubitem(e,t)},getSubitemCount:function(e){var t=this;return t.listObj.getSubitemCount(e)},isSubitem:function(e){var t=this;return t.listObj.isSubitem(e)},requestSub:function(e,t){var n=this,r;n.listObj.renderIndex=t,n.requestSubitems(e,function(e){r=n.get("list")[t],r&&e&&e.snapshotTime&&r.snapshotTime&&r.snapshotTime>e.snapshotTime&&(e.snapshotTime=r.snapshotTime),n.update(t,e,!0),n.expanding=!1})},requestSubitems:function(e,t){var n=this;n.listObj.requestSubitems(e,t)},isCollapsible:function(e){return e&&e.totalMsgs>1?!0:!1}}),t.ConvMailListModel=n},"1.0.0",{requires:["common-ui-conv-listview"]});


YUI.add("mail-ui-convlist-base",function(e){var t=e.mail.Controller.Conversations,n=e.mail.model.ConvStore.Conversations,r=n.getPermCidPart,i=e.mail.model.DataStore.Folders,s=e.common.Utils,o=e.mail.ui.common.StringUtils,u=s.escapeHtml,a=s.unescapeHtml,f=s.substitute,l=e.common.persist.UserData,c=e.mail.persist.MetaData,h="userUIPref.defaultSortOrder",p=[],d=10,v=e.mail,m=v&&v.model?v.model.DataStore.Messages:{},g=m.getPermMidPart,y="Trash",b="%40B%40Bulk",w="date",E="down",S="up",x=null,T=strings.str_cfg_tog_hkr_siu===!0?"hkr_siu":"cg_siu",N=strings.str_cfg_tog_hkr_siu===!0,C={"http://mail.yimg.com/a/i/cal/bell4.gif":"bell","http://mail.yimg.com/a/i/us/pim/ybang_16x16_1.gif":"certified"},k=1,L,A,O=function(t){function u(t,r,i){var s=n._listview,o=!1;t===n.fid&&(k!==i&&(i==="checkmail"?n.sorting||(e.fire("MailLog",{m:"sync from flushConv"}),n.refresh()):(n.refreshList=1,n.triggerAutoCheckMail(i==="autorefresh"))),n.updateTitle())}var n=this;t=t||{},n.evt=[],n.lastMsgIdx=-1,n.timeChunk=!0,O.superclass.constructor.call(n,t);var r=[],i=e.one("#inboxcontainer div.inbox.thread-content"),s=i&&i.all("div.list-view-item.selected"),o;s&&s.each(function(e){r.push(e.one("input").get("value"))}),n.selectedCids=r,n.title="",n.infiniteScrollHandlers=[],n.restoreSortOrder(),!t.dontBind&&t.fid==="Inbox"&&(o=NeoConfig&&NeoConfig.msgListObj),n.view=t.view||{},n.dontBind=t.dontBind,n.template=t.TEMPLATE||NeoConfig.msgListTmpl,n.pageSize=NeoConfig.pageSize*1||25,n.paginationCntrls=null,!o||t.fid==="%40S%40Search"?n.createPaginatedList(o):n.createPaginatedList(o,NeoConfig.totalConversations),n.initAttrs(t),n.set("fid",t.fid||"Inbox"),n.evt.push(n.on("visibleChange",function(e){e.newVal&&(n.needFlush&&(u(n.fid),n.needFlush=0),NeoGV.masStarted=!1)}),e.on("ds:msg:flush",u,n),e.on("ds:conv:change",n.changeConv,n),e.on("ds:conv:refresh",n.changeConv,n),e.on("ds:conv:remove",n.removeConv,n),e.on("checkmail:before",n.removeSelection,n),e.on("ds:msg:remove",n.removeConvByMid,n)),e.mix(n,{update:function(){n._listview.refreshBody()}})};e.extend(O,e.mail.ui.MailList),e.mix(O.prototype,{NAME:"ConversationList",renderItem:function(t,n,r,i,s){var o=this,u;return e.server&&!t||!t?"":(t.expanded&&(s=!0),u=o.lastMsgIdx=t.msgs.length-1,t.msgs.length&&(t.colorIndicator=o.getColorIndicator(t.msgs[u].externalPopServer,t.msgs[u].xapparentlyto)),o.renderIndex=n,o.renderExpand=s,L=i,A=r,f(o.template.message,t,o.formatters,t,strings,null,o))},isRenderSelected:function(e,t){var n;if(e)for(n=0;n<e.length;n++)if(t===e[n])return!0;return!1},createPaginatedList:function(t,r){var i=this,s=0,o=0,u=t?t.length:0,f,l=!1,h=r?l?r-u:0:0,p=[],v;if(u){for(s=0;s<u;s++)o=Math.max(o,t[s].rawDate);v=(new Date).getTime();for(s=0;s<u;s++)f=t[s],p[h++]={cid:f.cid,anchorDate:f.anchorDate,colorIndicator:f.colorIndicator,fid:f.fid,subject:f.subject?a(f.subject):"",subjectDir:NeoConfig.bidi&&f.subjectDir?f.subjectDir:"",totalMsgs:f.totalMsgs,totalUnread:f.totalUnread,totalFlagged:f.totalFlagged,totalHasAttach:f.totalHasAttach,totalDraft:f.totalDraft,recipients:f.participantList,xapparentlyto:f.xapparentlyto,checksum:f.checksum,snapshotTime:o,receivedDate:f.rawDate,receivedDateAria:f.rawDate,snippet:f.snippetStr?f.snippetStr:"",size:f["data-size"]&&parseInt(f["data-size"].split("=").pop().replace('"',""),d),msgicon:f.msgicon?f.msgicon:"",msgCountsByFolder:f.msgCountsByFolder,msgs:[{mid:f.mid,fid:f.mfid,cid:f.cid,flags:f.mflags}]},f.messageInfo&&f.summary&&n.setPrefetch(f,"Inbox",v)}O.setConvHeaderList(p),r&&(p.length=r);var m=NeoConfig.pageSize||50,g,y;g=new e.mail.ui.ConvMailListModel({KEY:"cid",SUBKEY:"mid",length:r,list:p,listObj:i}),y=new e.mail.ui.ConvMailListView({model:g,pageSize:m,requestSize:function(){return m<=100?m*2:m}(),listObj:i,expandOnClick:!NeoConfig.hasConvView,cellHeight:e.one("#inboxcontainer").hasClass("vp")?c.get("neo.pref.general.snippets")!="-1"?NeoConfig.vertPaneCellHeight[1]:NeoConfig.vertPaneCellHeight[0]:NeoConfig.cellHeight[NeoConfig.msgListDensity]}),i._listmodel=g,i._listview=y,i.vlist=y,l&&y.end(),i.parentNode&&i.render(i.parentNode),i._listview.on("command",i.onCommand,i),i._listview.on("selectionCountChange",i.onListViewSelect,i,!0),i._listview.on("selectionCountChange",i.updateSelectAllCheckbox,i,!0),i._listview.on("subselect",i.onSubselect,i,!0),i._listmodel.on("MailListModel:data",i.onModelDataRefresh,i),e.on("ui:currentFolder",i.updateSelectAllCheckbox,i,!0)},updateSelectAllCheckbox:function(){var e=this,t,n,r,i;window.setTimeout(function(){e.selectAllNode&&(e._listview.hasAllSelected()?e.selectAllNode.setAttrs({checked:!0,indeterminate:!1}):(t=e.parentCW,n=t&&t.msgList,r=n&&n._listview,i=r&&r.checkmode,e.selectAllNode.setAttrs({checked:!1,indeterminate:i&&e._listview.selCount()>0})))},0)},onCommand:function(e){function n(n){var r,i,o=s.wcopy(n.map[n.arr[0]]);e.subindex!==-1&&(i=t._listview._formatIndexS(e.mainindex,e.subindex),r=s.wcopy(t._listview._model.valueAt(i))),t.fire("command",{e:e.e,fid:e.subindex!==-1?t.getMsgFid(e.item):t.fid,message:o,index:e.index,submessage:r,neighbors:n.neighbors})}var t=this;t._listview.getSelected(n,null,O.getNeighbors,t.fid)},onModelDataRefresh:function(e){var t=this;setTimeout(function(){t.fire("MailList:modelRefresh",{list:t})},100)},onSubselect:function(){this.onListViewSelect({newVal:1})},onListViewSelect:function(e){function o(n){var o=!0,u,a,f,l,c;for(u in n.map){a=t.getMsgFid(n.map[u]);if(a!=="Draft"&&a!=="Sent"){o=!1;break}}i&&o&&i.addClass("disabled"),e.newVal===1&&!t._listview.checkmode&&(f=t._listview._toIndexN(n.selmap[n.arr[0]]),l=s.wcopy(n.map[n.arr[0]]),(r=t._listview.get("subselection"))!=-1&&(c=s.wcopy(t._listview._model.valueAt(t._listview._formatIndexS(f,r)))),t.fire("singleSelect",{fid:t._listview._isSubindex(f)?t.getMsgFid(l):t.fid,message:l,submessage:c,neighbors:n.neighbors}))}var t=this,n,r,i;i=t.parentCW.subToolbars instanceof Array?t.parentCW.subToolbars[t.fid].root.one("#btn-move"):"",i&&i.removeClass("disabled"),t.set("selectCount",e.newVal),n=t.rootNode.one
(".list-header-wrapper .count"),e.newVal>0?n&&n.setContent(f(strings.str_msg_selected,{num_selected_msgs:e.newVal})):n&&n.setContent(""),e.newVal>0&&t._listview.getSelected(o,null,O.getNeighbors,t.fid)},changeConv:function(t,i,o,u,a){var f=this,l=0,c=0,h=o?o.length:0,p={},d={},v=f._listview,m=f._listview?f._listmodel.get("list"):f.vlist.arrItems,g=[],w=function(e){f._listview._model.indexesOf(e,!1,function(e){f._listview._resetSelection(Object.keys(e)[0])})},E,S,x,T,N,C,k,L,A,O,M,_=m.length,D;a=a||{};if(t==="move"){f.fid!=="Draft"&&f.moveConv(i,o,u);return}if(a.fromSearch||o.length===1&&!n.canConvOverlapInFids(f.fid,o[0].fid))if(!a.fromConv||t!=="msg:move")return;if(h>0){for(E=0;E<h;E++)N=r(o[E].cid),p[N]=o[E],d[N]=o[E];E=0,x=f.fid!==y&&f.fid!==b;while(E<_&&l!==h){O=m[E],O&&(C=r(O.cid));if(O&&C in p){if(C in d){L=(f.fid,p[C]),k=m[E],S=0,A=T=null;if(!L.sparse)A=e.mail.model.ConvStore.Conversations.toConvInfoEvent(f.fid,L);else if(L.moved){D=a.mids?a.mids.length:0;for(c=0;c<O.msgs.length;c++)O.msgs[c].fid===f.fid&&S++;x&&a.fid!==y&&a.fid!==b?S>D||a.srcFid&&a.srcFid!==f.fid?f.requestSubitems(L,w,!0):(e.fire("MailLog",{m:"sync from changeConv 1"}),f.removeConv(f.fid,[L])):S===0&&(e.fire("MailLog",{m:"sync from changeConv 2"}),f.removeConv(f.fid,[L]))}else A=L;if(A){if(!A.anchorDate&&t!=="lmt"&&(t!=="msg:remove"||!x)){M=!0;break}k.snapshotTime>=A.snapshotTime&&(T=k.snapshotTime),m[E]=s.merge(k,A,!0),T&&(m[E].snapshotTime=T),g.push(E)}}l++}E++}M?(e.fire("MailLog",{m:"ChangeConv reload refresh"}),f.refresh()):g.length>1?(v.refreshBody(),f.updateTitle()):g.length===1&&(v.updateItemByIndex(g[0]),t==="msg:remove"&&(L.totalMsgs===0||f.fid==="Draft"&&L.totalDraft===0?f.removeConv(f.fid,[L]):a.reason!=="savedraft"&&f.parentCW&&f.parentCW.msgPane&&!f.parentCW.msgPane.get("active")&&f._listview._resetSelection(g[0])))}else t==="msg:add"&&f.fid===a.fid&&(f.fid==="Draft"||f.fid==="Sent")&&(e.fire("MailLog",{m:"ChangeConv msg:add refresh"}),f.refresh())},removeConv:function(t,n){var r=this,i,s,o;if(t===r.fid)if(n){s=[],o=n?n.length:0;for(i=0;i<o;i++)s.push(n[i].cid);r._listview.removeByKey(s)}else e.fire("MailLog",{m:"sync from removeConv"}),r._listview.refresh()},removeConvByMid:function(e,t){var n=this,r=n._listmodel.get("list"),i,s,o,u=[];if(e==="Draft"&&e===n.fid){for(s=0;s<r.length;s++){i=r[s];if(i&&i.msgs&&i.msgs.length===1)for(o=t.length-1;o>-1;o--)g(t[o].mid)===g(i.msgs[0].mid)&&(u.push(i),t.splice(o,1));if(t.length===0)break}u.length&&n.removeConv(e,u)}},movetoItemById:function(e){var t=this;t._listview.movetoByKey(e)},findCidByMid:function(e,t){var n=this,r=n._listmodel.get("list"),i,s,o;if(e===n.fid)for(s=0;s<r.length;s++){i=r[s];if(i&&i.msgs&&i.msgs.length)for(o=0;o<i.msgs.length;o++)if(g(t)===g(i.msgs[o].mid))return i.cid}return null},moveConv:function(e,t){if(e&&t){var n=!1,r=this,i=e?e.length:0,s;for(s=0;s<i;s++)if(t[s].fid===r.fid){n=!0;break}n&&(r._listview.refresh(1),r.updateTitle())}},setPrevPaneVisibility:function(){this._listview.set("previewPaneEnabled",!!NeoConfig.previewPanePref)},render:function(t){function i(){var r,i;n.template||(n.template=e.ui.Templates._shared_module_message_list_threaded_rollup),r=n.template,i={message_list_full_pane:"",user_pref_height:"",conv_list_width:"",conv_list_height:"",thread:"",has_multiple_mailboxes:"",conv_list_header:"",get_message_response:"",show_from_header:r.show_from_header?f(r.show_from_header,0,0,0,strings):"",search_results:r.search_results||"",show_snippet:"",show_snippet1:"",show_snippet_else:r.show_snippet_else,show_snippet_else1:r.show_snippet_else1,inf_scroll_top:r.inf_scroll_top},n.parentNode.set("innerHTML",f(n.template.base,i,0,0,strings)),n.render(t)}var n=this,r;n.parentNode=e.Node.one(t),n.set("parentNode",n.parentNode),n.rootNode=n.parentNode.one(".inbox.thread-content"),n.set("rootNode",n.rootNode);if(!n.rootNode){if(!n.template){e.use("_shared_module_message_list_threaded_rollup",i);return}i()}r=n.rootNode.one(".list-view"),(n.fid!=="Inbox"||n.dontBind)&&n.rootNode.one(".list-view .list-view-items").set("innerHTML",""),n._listview.render(r),n.bindUI(),n.setPrevPaneVisibility(),n.set("focusNode",n.rootNode.one(".list-view .list-view-items")),n.listRender=1,n.fire("render"),NeoConfig.onboardPC&&e.use("mail-ui-onboarding",function(e){e.mail.ui.Onboarding.showDialog()}),e.on("timeChunkSettingChange",function(){n.sortedColumn.action!=="date"&&NeoConfig.timeChunk?n.sortList("date"):n.refresh()}),e.on("unsubscribe:deleteCompleted",function(){n.refresh()});if(NeoConfig.onboardPC||NeoConfig.showConvTutorial)e.on("showConvOnboarding",function(){e.use("mail-ui-onboarding","comms-ui-tooltips-widget","minty_module_offscreen_bin_convs_callout_rollup",function(){var t=e.ui.Templates.minty_module_offscreen_bin_convs_callout_rollup,n=f(t.base,null,null,null,strings),r;e.fire("onboard:tip",{node:e.one("#shellinner .message-header .flag"),template:n,fn:function(){e.fire("onboard:tipclose")},dir:"right",offset:[0,-20]}),r=e.one(".convstooltip .settings"),r&&r.on("click",function(){e.fire("openOptions",{view:"viewing_email"})}),e.fire("finishConvOnboarding")})}),e.on("showThemesOnboarding",function(){e.use("mail-ui-onboarding","comms-ui-tooltips-widget","minty_module_offscreen_bin_themes_callout_rollup","themes-onboarding_css",function(){var t=e.ui.Templates.minty_module_offscreen_bin_themes_callout_rollup,n=f(t.base,null,null,null,strings),r=setTimeout(function(){e.fire("onboard:tipclose")},15e3);e.fire("onboard:tip",{node:e.one(".attribution"),template:n,fn:function(){r&&clearTimeout(r),e.fire("onboard:tipclose")},dir:"left",offset:[48,-80]})})}),e.one("document").on("click",function(){e.fire("onboard:tipclose")})},requestItems:function(n,r,i,s){function m(e){var t=e.convInfo;o.folder=e.folder,i.success(n,t,o.folder.totalConversations),o.sorting=0}var o=this,u=this.fid==="%40C%40Chats",a="Client.FolderIdDoesntExist",l=o.extraParams,c,h,p,d,v;p={fid:o.fid,sortKey:o.sortedColumn.sortKey,sortOrder:o.sortedColumn.sortOrder,groupBy:o.sortedColumn.groupBy
},e.mix(p,{start:n,numCInfos:r||100,bidiDetection:NeoConfig.bidi});if(l)for(d in l)p[d]=l[d];v=s==="autoCheckMail"||s==="prefetch",c={success:m,failure:function(t){v||e.fire("stat:feature_fail",{feature_group:"LIST",api:"ListFolderThreads",visible:"yes",message:"UI_LIST_CONV_COMPLETE_FAILURE"}),i.failure(),o._listview.get("page")===0&&!v&&o._listview.setStatus(f(o.template.loading_error,0,0,0,strings),!0),u&&t.code===a&&o.handleDarlaEvent("%40C%40Chats"),o.sorting=0},timeout:NeoConfig.wsListTimeout||6e4,suppressCodes:v?["*"]:[],suppressNotification:!0,suppressLogs:u&&[a],exceptCodes:[999],retryCodes:v?[]:["Server.Malformed-unk"],stopwatch:o.stopwatch},h=t.list,o._requests.push(h.call(t,p,c,++k))},showSubitems:function(t,n){var r=this,i=t.ancestor(".list-view-item-container"),s=i.one(".list-view-item"),o=r._listview._getIndexN(s),u,a,f,l,c;i.hasClass("expanded")?(c=parseInt(t.getComputedStyle("height"),10)+"px",t.setStyle("height",c),i.removeClass("expanded"),s.setAttribute("aria-expanded","false"),s.one(".arrow").setAttribute("aria-label",strings.str_conv_expand_label),r._listview._model.valueAt(o).expanded=u=r.renderExpand=!1,e.later(0,t,t.setStyle,["height",0])):(f=r.rootNode.one(".list-view-item-container.expanded .list-view-item-subcontainer"),f&&r.showSubitems(f,!0),a=t.get("children").size(),l=(parseInt(i.one(".list-view-item-master").getStyle("height"),d)+(e.UA.ie?1:0))*a+"px",x&&(x.stop(x.wasCached?"ConvListExpandCached":"ConvListExpandNotCached"),x=null),t.setStyle("height",l),i.addClass("expanded"),s.setAttribute("aria-expanded","true"),s.one(".arrow").setAttribute("aria-label",strings.str_conv_collapse_label),s.focus(),r.renderExpand=!0,u=!0,r._listview._model.valueAt(o).expanded=!0),n||e.fire("mt:click",{action:u?"expand_thrd":"collapse_thrd"})},getSubitem:function(e,t){return e&&e.detail?e.msgs[t]:null},getSubitemCount:function(e){return e.detail?e.msgs.length:0},isSubitem:function(e){return e.mid?!0:!1},getAllAccountEmails:function(){var e={},t=(l.get("externalAccounts")||{}).extAccount||[],n=(l.get("aliases")||{}).alias||[],r=(l.get("disposableAddresses")||{}).deaName||[],i=t.concat(n,r),s=l.get("userSendPref"),o=i.length,u,a;e[s.defaultID]=1,e[s.defaultFromAddress]=1;for(a=0;a<o;a++)if(u=i[a].address)e[u]=1;return e},requestSubitems:function(n,r,i){var o=t.get,u=this,a={fid:u.fid,cid:n.cid,checksum:n.checksum,anchorDate:n.anchorDate},l,c,h,p;x=new s.Stopwatch("ConvListExpand"),p=function(t){h=u._listview.getItemEl(u.renderIndex),h.addClass("expand_error"),c=h.one(".thread_expansion_error"),c||e.use("_shared_module_message_list_thread_expansion_error",function(){var n={can_retry:function(){return t.convPermDeleted?"":f(e.ui.Templates._shared_module_message_list_thread_expansion_error.can_retry,null,null,null,strings,null,u)}};h.one(".subj").hide(),c=e.Node.create(f(e.ui.Templates._shared_module_message_list_thread_expansion_error.base,0,n,0,strings)),h.insertBefore(c,h.one(".date"))})};var d={success:function(e){var t,n=u.get("view");e.detail=!0,r&&r(e),x.wasCached=d.respProps&&d.respProps.wasCached?1:0,h=n.getItemEl(u.renderIndex),h.removeClass("expand_error"),i||(h.get("parentNode").removeClass("expanded"),t=n._getSubitemContainer(h),u.showSubitems(t,null)),l&&(l.cancel(),h.removeClass("loading"))},failure:function(e){u._listmodel.expanding=!1,p(e),l&&(l.cancel(),h=u._listview.getItemEl(u.renderIndex),h.removeClass("loading"))},errorPosition:12};l=e.later(500,u,function(){h=u._listview.getItemEl(u.renderIndex),h&&h.addClass("loading")}),u._requests.push(o.call(t,a,d,++k))},getSelected:function(e){function n(t){var n=t&&t.arr?t.arr.length:0,r=[],i;for(i=0;i<n;i++)r.push(t.map[t.arr[i]]);e(r)}var t=this;t._listview.getSelected(n,null,O.getNeighbors,t.fid)},setFid:function(t){var n=this;if(n.fid!==t||n.extraParams)n.prevFid=n.fid,n.reset(),n.fid=t,n._listview&&(strings.str_cfg_tog_preserve_msglist_scroll&&n._listview.setRefreshScrollToBottom(!1),e.fire("MailLog",{m:"sync from setfid"}),n.refresh())},formatParticipantList:function(e){var t=this,n;t.accountEmails=t.accountEmails||t.getAllAccountEmails(),n=e.recipients.length;switch(n){case 0:return"";case 1:if(t.fid==="Draft"||t.fid==="Sent")return e.msgs[0]&&e.msgs[0].toEmail?u(a(e.msgs[0].toEmail)):"";return t.getVisibleName(e.recipients[0],n);case 2:return t.getVisibleName(e.recipients[0],n)+", "+t.getVisibleName(e.recipients[1],n);default:return t.getVisibleName(e.recipients[0],n)+"..."+t.getVisibleName(e.recipients[n-1],n)}},getVisibleName:function(e,t){var n=this,r,i,s;return t>1&&e.email===NeoConfig.emailAddress?r=strings.str_me_lowercase:(s=n.fid==="Draft"||n.fid==="Sent"?e:n.formatFromName(null,null,e),i=s.name.split(" "),t>1&&i.length===2?r=i[0]:r=s.name,r=u(a(r))),f(n.template.from_name,r,{from:r},null,strings,null,n)||"&nbsp"},getMsgFid:function(e){var t;return e.fid?t=e.fid:e.folderInfo&&e.folderInfo.fid?t=e.folderInfo.fid:e.sourceFolderInfo&&e.sourceFolderInfo.fid?t=e.sourceFolderInfo.fid:t=this.fid,t},getInboxService:function(e){var t=e.srvmap,n="",r,i,s;if(!t){i=e.msgs[0].inboxservices||[],e.srvmap=t={};for(r=i.length-1;r>=0;r--)t[i[r].name]=i[r].value}return!strings.str_cfg_tog_certified_icon&&t.crt&&delete t.crt,(N||!t.crt)&&(t[T]||t.siu||e.msgicon)&&(t&&t[T]?n=C[t[T]]||"":e.msgicon&&(n=e.msgicon)),/^certified/.test(n)&&e.recipients&&e.recipients.length===1&&(s=e.recipients[0].email||"",t.fantasySportsService=/^sports-fantasy-replies@/.test(s)?"fantasy-certified":""),NeoConfig.isSSL&&n==="certified"&&(n="certified-ssl"),t.inboxService=n,n},formatters:{addDateLabel:function(e,t,n){return e.addDateLabel?f(n.template.addDateLabel,t,n.formatters,0,strings):""},isThisWeek:function(e,t,n){return e.thisWeek?f(n.template.isThisWeek,t,n.formatters,0,strings):""},id:function(){return L},cid:function(e){return e.cid},subject:function(e){return e.subject?u(a(e.subject)):strings["str_msg-view_no_subject"]},subjectDir:function(e){return NeoConfig.bidi&&e.subjectDir?u(a(e.subjectDir)):""},xapparentlyto:function(e,t,n){return e
.msgs[n.lastMsgIdx].xapparentlyto},status_conv:function(e){var t="&nbsp;";return e.totalReplied?t=strings["str_msg_list_info-replied"]:e.totalForwarded?t=strings["str_msg_list_info-forwarded"]:e.totalUnread&&(t=strings["str_msg_list_info-unread"]),t},status_title:function(e){var t="",n=e.srvmap.inboxService||"";if(n==="certified"||n==="certified-ssl")t=f(strings.str_msg_list_info_verified_attr,strings);return t},checkbox_label:function(e,t,n){return f(strings.str_msg_list_checkbox_label,{convnumber:n.renderIndex+1})},checked:function(e,t,n){return n._listview&&A&&n._listview.checkmode?" checked=true ":""},containerselect:function(){return A?" subselected ":""},page_conversation_history:function(e){return f(e.template.page_conversation_history,e,e.formatters,0,strings)},archiving_disabled:function(e){return f(e.template.archiving_disabled,e,e.formatters,0,strings)},from:function(e){return u(a(e))},from_name:function(e,t,n){return n.formatParticipantList(e)},fromDir:function(){return""},fromTooltip:function(e){var t,n=e.recipients.length;if(n===1)t=e.recipients[0].email;else if(n>1){t="";for(var r=0;r<n-1;r++)t+=e.recipients[r].name+", ";t+=strings.str_msg_list_from_sender_and+" "+e.recipients[n-1].name}return u(a(t))},sender:function(e,t,n){return f(n.template.sender,0,0,0,strings,null,n)+" "+u(a(e.from.name))},received_date:function(e){return s.dateFormatter(new Date(e.anchorDate*1e3),strings.str_tog_dateformat_header_long_l10n)},date:function(e,t,n){return e.anchorDate?s.dateFormatter(new Date(e.anchorDate*1e3),strings.str_tog_dateformat_messagelist_timeonly_l10n):e.receivedDate?s.dateFormatter(new Date(e.msgs[n.lastMsgIdx].receivedDate*1e3),strings.str_tog_dateformat_messagelist_timeonly_l10n):""},receivedDate:function(e){var t=e.anchorDate*1e3;return s.dateFormatter(new Date(t),Neo.getDateFormat(t,!0))},receivedDateAria:function(e){return s.dateFormatter(new Date(e.anchorDate*1e3),strings.str_tog_dateformat_messagelist_aria)},expanded:function(e,t,n){return e.msgs.length>1&&n.renderExpand?n.template.expanded:""},snippetStr:function(e,t,n){var r=n;return e.snippet&&r.fid!=="%40C%40Chats"?u(a(e.snippet)):""},snippet:function(e,t,n){var r=c.get("neo.pref.general.snippets")!="-1"?!0:!1;return n.fid!=="%40C%40Chats"&&r?f(n.template.snippet,e,n.formatters,e,strings,null,n):""},omitsnippetline:function(e,t,n){var r=c.get("neo.pref.general.snippets")!="-1"?!0:!1;return n.fid!=="%40C%40Chats"&&r?"":f(n.template.omitsnippetline,e,n.formatters,e,strings,null,n)},hasAttach:function(e,t,n){return e.totalHasAttach?n.template.hasAttach:""},size:function(e){return Math.ceil(e.size/1e3)},is_threadofone:function(e,t,n){return e.totalMsgs<=1?f(n.template.is_threadofone,null,null,null,strings,null):""},ariaExpanded:function(e,t,n){return e.totalMsgs>1?f(n.template.ariaExpanded,e,n.formatters,e,strings,null,n):""},threadCount:function(e){return e.totalMsgs>1?e.totalMsgs:""},thread_cnt:function(e,t,n){return e.totalMsgs>1?f(n.template.thread_cnt,e,n.formatters,e,strings,null,n):""},thread_cnt1:function(e,t,n){return e.totalMsgs>1?f(n.template.thread_cnt1,e,n.formatters,e,strings,null,n):""},flags:function(e,t,n){return[A?" selected ":" ",e.totalUnread>0?" unread ":"",e.totalFlagged>0?" flagged ":"",n.getInboxService(e)].join(" ")},flag_info:function(e){var t="",n=e.srvmap.inboxService||"";return n?t=n:e.totalUnread?t="unread":e.totalReplied?t="replied":e.totalForwarded&&(t="forwarded"),"info-"+t},flag_info_extra:function(e){var t=e.srvmap&&e.srvmap.fantasySportsService;return t?"info-"+t:""},bold:function(e){return e.totalUnread?"bold":""},flag_info_hover:function(e){var t=e.srvmap.inboxService||"";return t==="certified"||t==="certified-ssl"?"info-"+t:""},hasTrashIcons:function(t,n,r){if(e.common.Utils.features.enabled("trashInList"))return f(r.template.hasTrashIcons,null,r.formatters,null,strings,null,r)},hasTrashIcons_message:function(t,n,r){if(e.common.Utils.features.enabled("trashInList"))return f(r.template.hasTrashIcons_message,null,r.formatters,null,strings,null,r)},archiveEnabled:function(e,t,n){if(n.isArchivable(n.fid))return f(n.template.archiveEnabled,null,n.formatters,null,strings,null,n)},archiveEnabled_else:function(e,t,n){if(!n.isArchivable(n.fid))return f(n.template.archiveEnabled_else,null,n.formatters,null,strings,null,n)},flag_star:function(e,t,n){return f(n.template.flag_star,e,n.formatters,e,null,null,n)},flag_attachment:function(e,t,n){return e.totalHasAttach?n.template.hasAttachment:""},isFlagged1:function(e,t,n){return e.totalFlagged>0?f(n.template.isFlagged1,e,n.formatters,e,strings,null,n):""},isFlagged2:function(e,t,n){return e.totalFlagged>0?f(n.template.isFlagged2,e,n.formatters,e,strings,null,n):""},isFlagged_else1:function(e,t,n){return e.totalFlagged>0?"":f(n.template.isFlagged_else1,e,n.formatters,e,strings,null,n)},isFlagged_else:function(e,t,n){return e.totalFlagged>0?"":f(n.template.isFlagged_else,e,n.formatters,e,strings,null,n)},isFlagged:function(e,t,n){return e.totalFlagged>0?f(n.template.isFlagged,e,n.formatters,e,strings,null,n):""},hide_attachments_else:function(e,t,n){return f(n.template.hide_attachments_else,e,n.formatters,null,e.totalHasAttach?strings:null,null,n)},contains_attachment:function(e,t,n){return e.totalHasAttach?f(n.template.hide_attachments_else,0,0,0,null,null,n):""},to_frm_srch_title:function(e,t,n){return NeoConfig.strings[n.fid==="Sent"||n.fid==="Draft"?"str_mas_to_srch_attr":"str_mas_frm_srch_attr"]},inboxservices:function(t,n,r){try{var i=t.srvmap,s=t.msgs[r.lastMsgIdx].inboxservices&&e.Lang.isString(t.msgs[r.lastMsgIdx].inboxservices)&&t.msgs[r.lastMsgIdx].inboxservices.match("data-certified")?[{name:"crt",value:"transactional"}]:[],o;if(!i){t.srvmap=i={};for(o=s.length-1;o>=0;o--)i[s[o].name]=s[o].value}return(N||!i.crt)&&(i[T]||t.msgicon)?f(r.template.inboxservices,t,r.formatters,t,null,null,r):""}catch(u){return typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-maillist-conv-convlist:1",u,"TRY_CATCH",1
,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-maillist-conv-convlist:1"),""}},msgicon:function(e){var t=e.srvmap,n={"http://mail.yimg.com/a/i/cal/bell4.gif":"https://s.yimg.com/nq/i/cal/bell4.gif","http://mail.yimg.com/ok/u/assets/sprite/fresh/y_16x16_1.gif":"https://s.yimg.com/ok/u/assets/sprite/fresh/y_16x16_1.gif"},r;return s.isSSL()&&t&&t[T]&&n[t[T]]&&(t[T]=n[t[T]]),r=t&&t[T]?t[T]:e.msgicon,r&&r.match(/ybang_/g)&&(r=r.replace("a/i/us/pim/ybang_16x16_1.gif","ok/u/assets/sprite/fresh/transparent_1x1_1.gif")),r},msgicon_title:function(e,t,n){var r=n.formatters.flag_info(e);return r!=="info-"&&r!==""?strings[["str_msg_list_",r].join("")]:""},get_nested_message_response:function(e,t,n){var r="";return e.detail&&n.renderExpand&&(r=f(n.template.nestedmessagetree,e,n.formatters,e,strings,null,n)),r},nestedmessage:function(e,t,n){var r="",i,s={formatters:n.msgFormatters,template:n.template,parent:n};if(e.detail)for(i=0;i<e.msgs.length;i++)s.renderSubid=i,r+=f(n.template.nestedmessage,e.msgs[i],null,e.msgs[i],strings,null,s);return r},string_unread:function(){return strings["str_msg_list_info-unread"]},str_mark_read_unread:function(){return strings.str_mark_read_unread}},msgFormatters:{id:function(e,t,n){return n.parent._listview._idSub(L,n.renderSubid)},flag_sub_class:function(e,t,n){return[n.parent.isRenderSelected(A,n.renderSubid)?" selected ":" ",A?" subselected ":" ",e.flags.isRead?"":" unread ",e.flags.isFlagged?" flagged ":""].join("")},flag_sub_star:function(e,t,n){return f(n.template.flag_sub_star,e,n.formatters,e,null,null,n)},flag_sub_attachment:function(e,t,n){return e.flags.hasAttachment?n.template.hasAttachment1:""},checked:function(e,t,n){return n.parent._listview&&n.parent.isRenderSelected(A,n.renderSubid)&&n.parent._listview.checkmode?" checked=true ":""},hide_attachments_else1:function(e,t,n){return f(n.template.hide_attachments_else1,e,null,null,e.flags.hasAttachment?strings:null,null,n)},received_date:function(e){return s.dateFormatter(new Date(e.receivedDate*1e3),strings.str_tog_dateformat_header_long_l10n)},receivedDate:function(e){var t=e.receivedDate*1e3;return s.dateFormatter(new Date(t),Neo.getDateFormat(t,!0))},from:function(e){return u(a(e))},from_name1:function(e,t,n){var r;return n.parent.accountEmails=n.parent.accountEmails||n.parent.getAllAccountEmails(),n.parent.accountEmails&&n.parent.accountEmails[e.from.email]&&n.parent.getMsgFid(e)==="Draft"?r=strings.str_draft_label:(r=n.parent.fid==="Draft"||n.parent.fid==="Sent"?e.from.name:n.parent.formatFromName(null,null,e.from).name,r=u(a(r))),f(n.template.from_name1,r,null,r,strings,null,n)},fromDir:function(e){return NeoConfig.bidi?e.from.nameDir:""},snippetStr:function(e){var t=e.snippet?u(a(e.snippet.replace(/^(\n|\r)+$/,""))):"";return t||""},folder_name:function(e,t,n){return f(n.template.folder_name,e,null,e,strings,null,n)},folderName:function(e,t,n){var r=n.parent.getMsgFid(e),i=o.getSystemFolderName(r,r);return u(a(i))},folder_vis:function(e,t,n){var r=n.parent.getMsgFid(e),s=i.get(r);return r===n.parent.fid||!s||s.isSystem&&r!=="Draft"?f(n.template.folder_vis,null,null,null,strings,null):""},is_draft:function(e,t,n){return n.parent.getMsgFid(e)==="Draft"?f(n.template.is_draft,null,null,null,strings,null):""},is_draft1:function(e,t,n){return n.parent.getMsgFid(e)==="Draft"?f(n.template.is_draft,null,null,null,strings,null):""},bold1:function(e){return e.flags.isRead?"":"bold"},snippet1:function(e,t,n){return f(n.template.snippet1,e,null,e,strings,null,n)},isFlagged3:function(e,t,n){return e.flags.isFlagged?f(n.template.isFlagged3,e,n.formatters,e,strings,null,n):""},isFlagged4:function(e,t,n){return e.flags.isFlagged?f(n.template.isFlagged4,e,n.formatters,e,strings,null,n):""},isFlagged5:function(e,t,n){return e.flags.isFlagged?f(n.template.isFlagged5,e,n.formatters,e,strings,null,n):""},isFlagged_else3:function(e,t,n){return e.flags.isFlagged?"":f(n.template.isFlagged_else3,e,n.formatters,e,strings,null,n)},isFlagged_else2:function(e,t,n){return e.flags.isFlagged?"":f(n.template.isFlagged_else2,e,n.formatters,e,strings,null,n)},to_frm_srch_title:function(e,t,n){var r=n.parent.getMsgFid(e);return NeoConfig.strings[r==="Sent"||r==="Draft"?"str_mas_to_srch_attr":"str_mas_frm_srch_attr"]},flag_sub_info:function(e,t,n){return[n.parent.isRenderSelected(A,n.renderSubid)?" info-selected ":"",A?" info-subselected ":"",e.flags.isRead?"":" info-unread ",e.flags.isFlagged?" info-flagged ":""].join("")},status:function(){return"unread"}},columns:{date:{sortKey:w,sortOrder:E},attachment:{sortKey:w,groupBy:"hasAttachment",sortOrder:E},"sort-flagged":{sortKey:w,groupBy:"flagged",sortOrder:E},unRead:{sortKey:w,groupBy:"unRead",sortOrder:E},subject:{sortKey:"subject",sortOrder:S}},sortList:function(t,n){var r=this,i=!1,o=r.columns,u=strings.str_msg_list_sorting,a=r.sortedColumn,f,c,p;if(s.features.enabled("viewMenuV2")){if(t===a.action)return;t==="date-asc"?(t=w,p=S):t==="date-desc"&&(t=w,p=E)}if(r.sorting===1||!o[t]||r.folder&&r.folder.totalConversations===1)return;NeoConfig.timeChunk&&(t!=="date"?r.timeChunk=!1:r.timeChunk=!0),f=s.wcopy(o[t]),f.action=t;if(t===a.action){f.sortOrder=a.sortOrder===E?S:E;switch(t){case"sort-flagged":f.groupBy=a.groupBy==="flagged"?"unFlagged":"flagged";break;case"unRead":f.groupBy=a.groupBy==="unRead"?"read":"unRead";break;case"attachment":f.groupBy=a.groupBy==="hasAttachment"?"noAttachment":"hasAttachment"}i=!0}p&&(f.sortOrder=p),r.folderIDSortCol[r.fid]=r.sortedColumn=f,c=f.sortKey===w&&f.sortOrder===S&&!f.groupBy,i&&t!=="unRead"&&t!=="flagged"?(r._listview.getSelectCount()>1&&r._listview.clearSelection(1),r._listview.reverse(c,u)):(r._listview.setStatus(u),r.sorting=1,e.fire("MailLog",{m:"Sortlist refresh"}),r._listview.refresh(),r._listview.toggleScrollPos(c)),f.sortKey===w&&f.sortOrder!==l.get(h)&&!f.groupBy&&(l.set(h,f.sortOrder),l.saveOne(h)),r.sortMenu&&n&&r.sortMenu.updateSortInViewMenu(n),s.features.enabled("viewMenuV2")&&e.one("#btn-conv-view span")&&
(e.one("#btn-conv-view span").set("innerHTML",e.mail.ui.common.StringUtils.getSortKeyString(t)),NeoConfig.previewPanePref===2&&e.one("#btn-togglethread")&&e.one("#btn-togglethread").setStyle("right",e.one("#btn-conv-view").get("offsetWidth")+10+"px"))},bindUI:function(){var t=this;t.evt.push(t.after("fidChange",function(){t.set("selectCount",0),t.setLabel(),t._listview.once("renderComplete",function(){e.fire("prefetchConversations",{fid:t.fid,cids:t._listview.get("model").get("list")})})}),t._listview.on("beforeRender",function(){t.fire("beforeRender")},t),e.on("previewPane:expanded",function(){t._listview.set("previewPaneEnabled",!0)},t),e.on("previewPane:collapsed",function(){t._listview.set("previewPaneEnabled",!1)},t),t.on("pageAction",function(e){var n;e.args&&e.args.action&&(e.args.action==="home"?t._listview.scrollToTop():e.args.action==="page"?t._listview.set("page",e.args.val):(n=t._listview[e.args.action],n&&n.call(t._listview,e.args.action)))},t),t._listview.on("renderComplete",function(n){t.fire("renderComplete",n),e.fire("list-stat:renderComplete",{endTime:(new Date).getTime()})},t),t.rootNode.on("click",t.clickHandler,t)),t.bindInfiniteScroll()},updateSortDropDown:function(t){this.sortMenu=new e.mail.ui.ListViewControls(t.node,this,"sortoptions"),this.sortMenu.updateSortInViewMenu(t)},clickHandler:function(t){var n=this,r=t.target,i=s.getDataAction(t),o,u,a,f,l;switch(i.action){case"selectAll-message":case"selectAll":n._listview.selectAll(!n._listview.hasAllSelected());break;case"select-dd":n.createSelectMenu(i.node);break;case"retry-msglist-load":e.fire("MailLog",{m:"clickHandler refresh"}),n.refresh();break;case"menu":i.node.hasClass("sortby")&&(n.sortMenu=new e.mail.ui.ListViewControls(i.node,n,"sortoptions"),n.sortMenu.setup(n.template));break;case"thrd-read":o=r.ancestor(".list-view-item").hasClass("unread")?"read":"unread";break;case"date":case"date-asc":case"date-desc":case"unRead":case"attachment":case"sort-flagged":n.sortMenu=new e.mail.ui.ListViewControls(i.node,n,"sortoptions"),n.sortList(i.action,r)}r.getAttribute("data-action")==="msg-frm-srch"&&(NeoGV.masStarted=!0,o="frmSrch"),r.hasClass("arrow")&&(a=n._listview.getItem(t),f=t.target.ancestor(".list-view-item"),l=n._listview._getIndexN(f),n._listview._expandItem(a,l,f));if(r.hasClass("flag")||r.ancestor(".flag")){if(r.ancestor(".mb-native-ad"))return;o=r.ancestor(".list-view-item").hasClass("flagged")?"unflagged":"flagged",a=n._listview.getItem(t),u=o==="flagged"?"flag_":"unflag_",u+=a.mid?"thrd_msg":a.totalMsgs>1?"thrd":"message",e.fire("mt:click",{action:u})}else r.hasClass("delete-msg")?(o="delete",a=n._listview.getItem(t),e.fire("mt:click",{action:a.mid?"msglist_delBtn_thrd_msg":a.totalMsgs>1?"msglist_delBtn_thrd":"msglist_delBtn"})):r.hasClass("expansion_retry")&&e.fire("mt:click",{action:"retry_expand_thrd"});o&&e.use("mail-ui-proxyevents",function(){a=a||n._listview.getItem(t),e.mail.ui.MailEventsProxy.handleUI({action:o},n.getMsgFid(a),n,[a])})},setToolbarElements:function(e){var t=this,n,r;e&&(n=e.one("#pagetoolbar"),n&&(r=e.one(".cbox input"),r&&(t.selectAllNode=r)))},createSelectMenu:function(t){var n=this;n.selectMenu=new e.mail.ui.ListViewControls(t,n,"selectoptions"),n.selectMenu.setup(n.template),n.selectMenuEventListener||(n.selectMenuEventListener=n.on("selectMessages",function(t){var r=t.action;if(n._listview.stop()<=0)return;switch(r){case"all":n._listview.selectAll(!0),s.features.enabled("mbListNativeView")&&e.fire("nativeAd:select");break;case"none":n._listview.selectAll(!1),s.features.enabled("mbListNativeView")&&e.fire("nativeAd:unselect");break;case"Read":case"unRead":case"Flagged":case"unFlagged":n._listview.selectSome("is"+r)}e.fire("mt:click",{action:"msglist_selectMnu",args:{fid:n.fid},append:{ltxt:"sel_"+r}})}))}},!0),O.setConvHeaderList=function(e){var t,n;for(t=0,n=e.length;t<n;t++)p.push(e[t])},O.getConvHdrList=function(){return p},O.getNeighbors=function(){},e.mail.ui.ConvList=O},"1.0.0",{requires:["mail-ui-maillist","mail-ui-conv-maillist-model","mail-ui-conv-maillist-view","mail-controller-conversations","mail-common-utils-features","mail-ui-listview-controls","common-utils"]});


YUI.add("mail-ui-convpane-base",function(e){function T(t,n){var r=this;r.message&&t&&(n=n||r.message.cid,!n,e.fire("Y.mail.ui.ConvPane:"+t,n,r.guid))}function N(e){var t=this;e==="async"&&!t.outboundReq&&(t.outboundReq=1)}e.namespace("mail.ui");var t=e.common.Utils,n=t.escapeHtml,r=t.unescapeHtml,i=e.ui.Templates,s=e.mail,o=s.ui.MessagePaneUtils,u=s&&s.Controller?s.Controller.Messages:{},a=s&&s.model?s.model.DataStore.Messages:{},f=a.getPermMidPart,l=s.model.ConvStore.Conversations,c=l.getPermCidPart,h=a.toMessage,p=a.toMessageInfo,d=e.one("#inboxcontainer"),v="mail-ui-convpane-bind",m=s.model.ConvStore,g="ERROR: ConvPaneRead ",y=200,b=6e5,w=15e3,E=1,S={},x=function(e){var t=this;x.superclass.constructor.call(t,e),e=e||{},t.formatters._shared_module_thread_thread_display_rollup=function(){var e=i._shared_module_thread_thread_display_rollup;return t.numSelected&&e?t.sub({s:e.base,f:t.readFormatters}):""},t.oTemplate=i._shared_module_thread_thread_pane,t.statOp="convread",t.stopwatchPreview="MsgInPreview",t.composeWidgets={},t.midObjMap={},t.lftNotifyID=null,t.initialRender=!1,t.dirty=!1,t.primaryMid=null,t.refreshOnActive=!1,t.flagMsgList=[],t.set("handleKeysLocally",1),t.set("charCodes","13, 32, 33, 34, 35, 36, 46, 65, 67, 69, 70, 65+meta, 65+ctrl, 75, 76, 82, 83, 90, 188, 190"),t.set("parentNode",t.parentNode),t.expandMessageTimers={},e.fid&&e.message&&t.set("message",{message:e.message,submessage:e.submessage,neighbors:e.neighbors,fid:e.fid,midtocid:e.midtocid?e.message.mid:null}),t._cancelMarkAsRead=function(){t.tmFireRead&&(clearTimeout(t.tmFireRead),t.tmFireRead=null)}};e.extend(x,e.mail.ui.MailPane,{onKeyDown:function(n){var r=this,i,s,u,a,f,l,c,h,p,d=n.target,m,g=function(n){e.use("common-ui-notification-v2","common-persist-user-data",function(e){var r=n?e.common.persist.UserData.isUsersEmailAddress(n)?strings.str_cont_add_to_cont_alert_user_email_bd:t.substitute(strings.str_cont_add_to_cont_alert_already_in_contacts_bd,{from_email:"["+n+"]"}):strings.str_cont_add_to_cont_alert_select_indivitual_msg_bd,i=n?e.common.persist.UserData.isUsersEmailAddress(n)?"info":"attention":"attention";e.common.ui.NotificationV2.notify(r,{type:i,close:!0,closeOnExternalClick:!0,closeOnNavClick:!0,duration:4e3,customClass:"link-style",speed:"show-fast"})})};if(!r.message)return;l=r.message.msgs;var y=function(){var e=!1,t=r.getRoot().one(".thread-focus"),n;return t?(n=t.next(".thread-item")||t.next(".add-to-conv"),n&&(e=!0,n.hasClass("super-hidden")&&r.superCollapsedNode&&(n=r.superCollapsedNode),n.hasClass("thread-item")?(r.selNode=n,r.focusMessageCard()):n.focus())):(r.selNode=r.getRoot().one(".thread-item.expanded"),r.focusMessageCard(),e=!0),e},b=function(){var e=r.getRoot().one(".thread-focus"),t;e?(t=e.previous(".thread-item"),t&&(t.hasClass("super-hidden")&&(e.hasClass("thread-item")&&r.superCollapsedNode?t=r.superCollapsedNode:e.hasClass("supercollapsed")&&(t=e.previous(".thread-item:not(.super-hidden)"))),t.hasClass("thread-item")?(r.selNode=t,r.focusMessageCard()):t.focus())):(r.selNode=r.getRoot().one(".thread-item.expanded"),r.focusMessageCard())},w=function(e,t){var n;for(n=l.length-1;n>-1;n--){f=l[n];if(r.getMsgFid(f)!=="Draft"){r.initReplyForward(e.action,f,t);return}}};if(r.selNode){if(r.selNode.hasClass("add-to-conv")){var E=r.selNode.previous();u=E.getAttribute("data-mid")}else u=r.selNode.getAttribute("data-mid");a=r.getMessageIdxByMid(u),f=l[a]}if(n.metaKey||n.ctrlKey)return;if(n.keyCode===38||n.keyCode===40)return;n.halt();switch(n.keyCode){case 13:case 32:if(r.selNode.hasClass("supercollapsed"))r.expandSuperCollapsedNodes(),r.selNode=r.listNode&&r.listNode.one(".thread-item");else if(r.selNode.hasClass("add-to-conv"))r.initReplyForward("reply-all",f);else{if(r.selNode.hasClass("quickReply")){r.activeComposeWidget.cv.view.onKeyDown(n);return}if(!((d.hasClass("thread-item-header")||n.target.ancestor(".thread-item-header"))&&!n.target.hasClass("more_recp")&&!n.target.hasClass("lozengfy")&&!n.target.hasClass("info-hover")&&!n.target.hasClass("flag")))return;r.selNode.hasClass("expanded")?r.collapseMessage(r.selNode):(r.scrollOnExpansion=!0,r.parentCW.msgList&&NeoConfig.horzPane?c=!0:c=!1,r.expandMessages(a,"one","no",!1,{scroll_to_msg:c}),r.selNode=r.getMsgNodeByMid(u))}r.focusMessageCard();break;case 190:y();break;case 188:b();break;case 67:n.shiftKey&&(i="addcontact",f&&(m=f&&f.header&&f.header.from&&f.header.from.email,o.isKnownEmailAddress(m)?g(m):e.use(v,function(){r.handleUI(f,i)})));break;case 65:case 82:case 70:if(r.getRoot()&&r.getRoot().one(".thread-focus")&&r.getRoot().one(".thread-focus").hasClass("quickReply"))break;h={},n.keyCode===65?h.action="reply_all":n.keyCode===82?h.action="reply_sender":n.keyCode===70&&(h.action="forward"),r.composeAction=!0,n.shiftKey||!f?w(h,!0):r.initReplyForward(h.action,f,!0);break;case 75:n.shiftKey?(i=f.flags.isRead?"unread":"read",s=f.flags.isRead?"unread_thrd_msg_hdr":"read_thrd_msg_hdr",e.use(v,function(){r.handleUI(f,i)})):(p=r.message,i=p.totalUnread?"read":"unread",s=p.totalUnread?"read_thrd_hdr":"unread_thrd_hdr",r.handleUI(p,i));break;case 76:n.shiftKey?(i=f.flags.isFlagged?"unflagged":"flagged",s=f.flags.isFlagged?"unflag_thrd_msg_hdr":"flag_thrd_msg_hdr",e.use(v,function(){r.handleUI(f,i)})):(p=r.message,i=p.totalFlagged?"unflagged":"flagged",s=p.totalFlagged?"unflag_thrd_hdr":"flag_thrd_hdr",r.handleUI(p,i));break;case 46:r.parentCW&&r.parentCW.onKeyDown(n);break;default:x.superclass.onKeyDown.call(r,n)}},setMessage:function(n){var r,i,s,o,u,a;if(!n&&!this.message){r=this.getRoot(),i=r?r.one(".count"):null,i&&i.empty(),this.numSelected=0,this.clearSelection();return}var f=this,l=!1,c=t.Stopwatch.get("MsgInPreview")||f.stopwatch;c&&(c.start(1,"Set"),e.fire("MessagePane:inception",n)),clearTimeout(f.slowLoad),clearTimeout(f.loadingTimer),f.isLoaded=0,f.scrollTop=0,f.disableTruncate=0,f.primaryMid=null,f.numRetries=f.loading_slow=f.loading_error=f.loading_moved=0,f.expandAllMode=!1,f.readBatch=null,n?(n.message.length===1&&!f.fullView&&
(s=f.parentCW,o=s&&s.msgList,u=o&&o._listview,a=u&&u.checkmode),n.message.length>1?f.handleMultipleMessagesSelected(n,c):n.message.length===1&&(f.fullView||a)?f.handleMultipleMessagesSelected(n,c):(l=!0,f.handleSingleMessageSelected(n))):f.clearSelection(n),f.fire("paneMessage",{content:l})},clearSelection:function(){var e=this;e.numSelected=0,e.registerLFTNotify(),e.neighbors=e.message=null;if(!e.get("visible"))return;e.isPrevPaneVisible()&&(e.saveDraftAction(),this.destroyRichCompose()),e.render()},handleSingleMessageSelected:function(e){var t=this,n=t.message||{};t.updateSingleMessageSelectedState(e,n);if(!t.get("visible"))return;if(!t.parentNode)return;t.registerLFTNotify();if((!t.parentCW||!t.parentCW.getCurrentView||t.parentCW.getCurrentView()!=="scroll-view-noprev")&&n.cid&&t.message.cid&&n.cid===t.message.cid){if(!t.submessage)return;t.selectMessage(t.submessage)||(t.loadPaneContent(1),t.selectMessage(t.submessage))}else n.cid&&t.abortRequests(),t.bufferPaneContent()},bufferPaneContent:function(){var e=this,t;e.tmPendingLoad?(clearTimeout(e.tmPendingLoad),t=e.loadPaneContent):e.loadPaneContent(11),e.tmPendingLoad=setTimeout(function(){clearTimeout(e.tmPendingLoad),e.tmPendingLoad=null,t&&t.call(e,2)},y)},updateSingleMessageSelectedState:function(e,t){this.numSelected=1,this.fid=e.fid;if(!t.cid||e.message.cid&&c(t.cid)!==c(e.message.cid)||e.midtocid)this.isPrevPaneVisible()&&this.saveDraftAction(),this.message=e.message,this.destroyRichCompose();this.submessage=e.submessage,this.midtocid=e.midtocid,this.submessage&&(this.scrollOnExpansion=!0),this.neighbors=e.neighbors},handleMultipleMessagesSelected:function(e,t){var n=this;n.isPrevPaneVisible()&&n.saveDraftAction(),n.numSelected=e.message.length,n.neighbors=n.message=null;if(!n.get("visible"))return;n._cancelMarkAsRead(),t&&t.start(2,"PreLoadExtra2"),n.loadExtra(function(){t&&t.start(2,"LoadExtraCB2");try{n.render()}catch(e){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:1",e,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:1")}})},destroyRichCompose:function(){this.richcompose&&(this.richcompose.removeComposeAssist(),this.richcompose.destroy(),this.richcompose=null)},getMessage:function(){var e=this,n=e.message?{message:e.message,fid:e.fid}:null,r=t.Stopwatch.get("MsgInPreview")||e.stopwatch;return r&&r.start(1,"Get"),e.numSelected&&!e.message&&(n={message:new Array(e.numSelected),fid:e.fid}),r&&r.start(1,"PostGet"),n},hasMessage:function(){var e=this;return e.message&&e.message.cid},showActionsBar:function(t){var n,r=e.all(".thread-item .thread-actions");r.removeClass("show-actions"),r.addClass("hide-actions"),n=t&&t.one(".thread-actions"),n.removeClass("hide-actions"),n.addClass("show-actions")},getMessageIdxByMid:function(e){var t=f(e);return this.midObjMap[t]},getMessageIdxByMidLookup:function(e,t,n){var r=f(e);for(var i=0;i<t.length;i++)if(f(t[i].mid)===r)return i;return n?null:0},getMsgFromNode:function(t){var n=this,r,i;if(t){r=t.getAttribute("data-mid"),i=n.getMessageIdxByMid(r);if(e.Lang.isNumber(i))return n.message.msgs[i]}},getMsgNodeByMid:function(e){var t=this.get("parentNode"),n=f(e);if(t)return t.one("div[data-mid='"+n+"']")},getComposeNodeByMid:function(e){var t=this.get("parentNode"),n=f(e);if(t)return t.one("div[data-draftmid='"+n+"']")},refreshMidObjMap:function(e){var t={},n;for(var r=0;r<e.length;r++)n=f(e[r].mid),t[n]=r;return t},removeDraft:function(e){var t=this,n=null,r=t.message.msgs,i;for(i=e-1;i>=0;i--)if(r[e].inReplyTo===r[i].mimeMsgId){n=r[i].mid;break}n&&delete t.composeWidgets[f(n)]},collapseAllMessageCards:function(){var e=this,t=e.get("parentNode"),n,r,i;t&&(n=t.all("div.thread-item"),n.each(function(t){!t.hasClass("quickReply")&&!t.hasClass("tall-compose")&&(t.setStyles({height:"auto","margin-top":0}).removeClass("expanded"),r=t.one(".thread-body"),r.setStyles({height:0,opacity:0}),t.setAttribute("aria-expanded","false"),t.one(".thread-footer")&&t.one(".thread-footer").addClass("hidden"),e.fire("MessagePane:unload",t))}),e.selNode=null)},getComposeWidgets:function(){var e=this,t=[],n,r;for(n in e.composeWidgets)r=e.composeWidgets[n].cv,t.push(r.view);return t},registerLFTNotify:function(t){var n=this;if(!t)n.lftNotifyID&&(e.fire("ds:conv:unreg",n.lftNotifyID),n.lftNotifyID=null);else if(!n.lftNotifyID||c(n.lftNotifyID)!==c(t))n.lftNotifyID=t,e.fire("ds:conv:reg",n.lftNotifyID)},triggerConvOnboarding:function(){var t=this;t.message.totalMsgs>1&&NeoConfig.showConvTutorial?(setTimeout(function(){e.fire("showConvOnboarding")},300),NeoConfig.showConvTutorial=0):e.common.Utils.features.enabled("lozengeContactCard")&&e.use("contacts-ui-hovercard-onboard",function(){setTimeout(e.bind(function(){e.mail.ui.HoverCardOnboard.call({mailpane:this})},t),500)})},render:function(n){try{var r=this,i,s,o,u,a=NeoConfig.delayLoadingIcon||1,f=r.getStopwatch(),l=n&&!r.parentNode&&r.message,c=function(){var t=e.one("#inboxcontainer");try{r.renderComplete(),r.paneRendered=!0;if(r.loading_error)return;NeoConfig.showMultitaskTutorial?setTimeout(function(){e.fire("showMultitaskingOnboarding",{queuedObCallback:r.triggerConvOnboarding,ctx:r})},300):r.triggerConvOnboarding(),r.wasCached?setTimeout(function(){var e;r.initializeAllDrafts(),r.fid==="Draft"&&(r.listNode.all(".loadhide").removeClass("loadhide"),e=r.getRoot(),e&&e.one(".conv-loading")&&e.one(".conv-loading").addClass("hidden"))},1):r.initializeAllDrafts(),r.bindContentUI&&r.bindContentUI(),e.later(10,null,function(){if(t.hasClass("prevPaneVisible")&&t.getComputedStyle("display")!=="none")return;var e=r.getRoot().one(".thread-item.expanded"),n;e&&(n=e.one(".thread-body"),n?(n.setAttribute("aria-labelledby",r.getMsgContentAriaLabel(e)),n.setAttribute("tabindex",0),n.focus(),e.scrollIntoView(!0)):(e.setAttribute("aria-labelledby",r.getMsgContentAriaLabel(e)),e.setAttribute("tabindex",0),e.focus()))})}catch(n){typeof globals!="undefined"&&globals
.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:2",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:2")}};r.parentNode=e.one(n)||r.parentNode;if(l){r.loadPaneContent(3);return}f&&f.start(1,"Render");if(!r.parentNode)return;u=r.parentNode,r.set("parentNode",u);if(u){!r.hasStarted&&r.message&&(r.fireEvent("start"),r._cancelMarkAsRead()),r.appendMarkup(),o=u.one(".threadpane .conv-loading.s-loader.hidden"),o&&e.Lang.later(a*1e3,r,function(e){e&&e._node&&e.get("parentNode")&&!e.get("parentNode").one(".thread-item")&&e.removeClass("hidden")},o),e.one("#shellcontent").removeClass("loadingConv"),r.eventsBound||r.bindUI(),r.fullView&&r.setTitle(),r.quickReplyBox=r.parentNode.one(".add-to-conv"),i=r.getRoot(),r.listNode=i&&i.one(".thread-item-list"),r.hdr=i&&i.one(".message-header"),r.threadItems=r.listNode&&r.listNode.all(".thread-item"),r.superCollapsedNode=r.listNode&&r.listNode.one(".supercollapsed");if(r.superCollapsedNode){var h=0,p=!0;r.threadItems.each(function(e){if(h===0||h===r.message.msgs.length-1){h++;return}r.fid==="Sent"?r.message.msgs[r.getMessageIdxByMid(e.getAttribute("data-mid"))].fid==="Sent"?p=!1:p&&e.addClass("super-hidden"):r.fid==="Draft"?r.message.msgs[r.getMessageIdxByMid(e.getAttribute("data-mid"))].fid==="Draft"?(s=e.previous(),s&&s.removeClass("super-hidden"),p=!1):p&&e.addClass("super-hidden"):e.hasClass("unread")?p=!1:p&&e.addClass("super-hidden"),h++})}}r.fireEvent("render"),!r.outboundReq&&r.message&&(r.message.msgs&&r.message.msgs[r.message.msgs.length-1].body&&(r.isLoaded=1),f&&f.start(1,"MessageInDOM"),c(),setTimeout(function(){r.tbarCallBack&&r.tbarCallBack.apply(r.tbarScope,[e])},0))}catch(d){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:3",d,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:3"),e.use("common-utils-error",function(){t.error.report(g+"renderError",d,1,1,1)})}},setTitle:function(e){var t=this,i=e||(t.message&&t.message.subject?n(r(t.message.subject)):t.fid==="Draft"?strings.str_tabs_compose:strings["str_msg-view_tab_no_subject"]);t.get("title")!==i&&t.set("title",i)},requestPaneContent:function(t,n,r,i){var s=this,o=t?t.cid||0:0,u,a=s.getStopwatch();s.msgUserUnread&&(s.msgUserUnread=null),s.convUserUnread=!1;if(o||s.midtocid)n.args={fid:s.fid,primeMsg:t,stopwatch:a},s.fireEvent("get"),a&&(a.start(1,"YCMSGGetBegin"),a.YCMSGGetBegin||(a.YCMSGGetBegin=new Date)),r.oldMsgCnt=s.message.msgs&&s.message.msgs.length,e.fire("MailLog",{m:"conversation requestPaneContent"}),u=e.mail.Controller.Conversations.getConv(r,n,i,t);return u},openComposeCards:function(){var e=this,t=0,n=e.composeWidgets||"",r;if(n)for(r in n)t++;return t},getRemovedMsg:function(e,t){var n=null,r,i,s;if(!e||!t)return null;for(r=0;r<e.length;r++){s=!1;for(i=0;i<t.length;i++)if(e[r].mid===t[i].mid){s=!0;break}if(!s){n=e[r];break}}return n},loadPaneContent:function(n,r,i,s,o,u,a){try{e.fire("MailLog",{m:"conversation loadPaneContent"});var l=this,c=l.message,p=c?c.cid||0:0,d,v,g=!1,y=!o&&!l.submessage&&(l.midtocid?NeoConfig.hasConvV3:m.Conversations.canBatchLMTGDM(c,l.fid)),b=r&&!i?r:0,E,S;l.fullView||l.statReadStart("CONV","PREVIEW"),l.currentLmtContext=u,o||(E=l.getStopwatch(),S=new t.Stopwatch(y?"LoadConvBatch":"LoadConv")),E&&E.start(2,"Load"),i=i||{},p&&!l.hasStarted&&(l.fireEvent((l.fullView?"tab":"preview")+":start"),l.hasStarted=!0,l._cancelMarkAsRead());if(p||l.midtocid){var x={success:function(n){var r=0,i,a,c,p;l.fullView||l.statReadSuccess("CONV","PREVIEW");try{e.fire("MailLog",{m:"conversation loadPaneContent success"});if(o){if(!u){l.resetRequestLoadingState(!1);return}i=l.lftSendSaveCongruencyCheck(l.message,n,u);if(i.oldIdx>=0||i.newIdx>=0){l.resetRequestLoadingState(!1),v=i.oldIdx!==-1?i.oldIdx:i.newIdx,a=n.msgs[v],a=h(l.getMsgFid(a),a),i.oldIdx>=0&&(r=1);if(a.fid==="Draft")u.draftMID||(c=f(u.origin.oMsg.mid),p=l.getComposeNodeByMid(c),p&&p.setAttribute("data-mid",f(a.mid))),l.insertMsgAtPos({msg:a,pos:v,replace:r});else if(a.fid==="Sent"){if(i&&i.newIdx&&l.message.msgs[i.newIdx]&&l.message.msgs[i.newIdx].mid===u.newMsg.mid)return;l.insertMsgAtPos({msg:a,pos:v,replace:r},!0)}}if(!i.remainder||u.newMsg&&u.newMsg.fid==="Draft")return}if(S===-1){t.assert(0,"successdupcall",1);return}var d=x&&x.respProps&&x.respProps.wasCached,m=x&&x.respProps&&x.respProps.callPerf,g=[n,d,!1,y];E&&(E.start(1,"LMTFetchEnd"),E.YCMSGGetEnd=new Date,E.wasCached=d,E.BECallTime=m),S&&(S.wasCached=d,S.YCMSGGetBegin=E&&E.YCMSGGetBegin,S.YCMSGGetEnd=E&&E.YCMSGGetEnd,S.BECallTime=m,S.stop()),l.registerLFTNotify(n.cid),l.loadExtra(function(){E&&E.start(3,"PreOnSuccess"),l.onSuccess.apply(l,g),s&&s()}),S=-1}catch(b){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:4",b,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:4"),e.use("common-utils-error",function(){t.error.report("loadConvSuccessError",b,1,1,1)})}},failure:function(t){e.fire("MailLog",{m:"conversation loadPaneContent failure"});var n;clearTimeout(l.loadingTimer),l.cleanRefreshTimer(),l.message&&l.message.cid&&l.registerLFTNotify(l.message.cid),l.loadExtra(function(){l.onFailure.apply(l,[t,!1]);if(l.filterFailError&&!g){g=!0,l.requestPaneContent(c,x,T,y);return}l.conv_deleted_error||l.msg_deleted_error?l.statReadSuccess("CONV",l.fullView?"":"PREVIEW"):e.fire("stat:feature_fail",{feature_group:"READ",api:"BatchExecute_listmessagesinthread_getdisplaymessage",visible:"yes",message:"UI_READ_CONV_COMPLETE_FAILURE"}),l.midtocid&&(n=l.conv_deleted_error?"_Deleted":"_NotFound")},1)},notify:e.bind(N,l),errorPosition:n||99,suppressCodes:!r&&o&&["*"],suppressNotification:!0,retryCodes:["Server.Malformed-unk"],convOrigin:l.searchQuery?"search":l.midtocid?"mrd":"general"},T,C,k;if(l.fid==="Draft"&&c.msgs&&(u&&u.
newMsg||!c.totalDraft))for(var L=c.msgs.length-1;L>=0;L--){k=c.msgs[L].fid||c.msgs[L].sourceFolderInfo.fid;if(k!=="Draft"){C=k;break}}else C=l.fid;x.openedFrom=l.midtocid?"search":n!==3?"pane":C,T={cid:p,ovparams:i,cfid:C},T.msg=l.midtocid?{mid:l.midtocid}:l.submessage,T.mfid=l.midtocid?l.fid:l.getMsgFid(T.msg?T.msg:c.msgs[c.msgs.length-1]),T.checksum=i.checksum?i.checksum:c.checksum,T.silentFetch=o,i.checksum=null,u&&u.newMsg&&(T.newMsg=u.newMsg),l.fireEvent("get"),l.usedPreload?l.preloadedMsg?l.loadExtra(function(){E&&E.start(3,"PreOnSuccess"),l.onSuccess.apply(l,[l.preloadedMsg,!0,!0]),l.preloadedMsg=null}):l.preloadFailure&&l.loadExtra(function(){l.onFailure.apply(l,[l.preloadFailure,!0]),l.preloadFailure=null},1):(d=l.requestPaneContent(c,x,T,y),l.abortRequests(!0),l.outboundReq&&(l.request=d,l.requestType="loadMessage")),l.usedPreload=0,l.isRetrying=b,l.outboundReq&&!a&&(clearTimeout(l.loadingTimer),l.loadingTimer=setTimeout(function(){l.loadExtra(function(){l.outboundReq&&l.render()})},300),clearTimeout(l.slowLoad),l.slowLoad=setTimeout(function(){l.loadExtra(function(){l.handleSlowRequest()},1)},w))}}catch(A){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:5",A,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:5")}},insertBody:function(){var e=this,t=e.message,n,r,i,s,o;if(t&&t.msgs){r=t.msgs.length,i=t.msgs;for(n=0;n<r;n++)if(i[n]&&i[n].body){s=e.getMsgNodeByMid(i[n].mid);if(n!==r-1||e.getMsgFid(i[r-1])!=="Draft")o=s&&s.one(".body"),o&&o.setContent(i[n].body.display)}}},attach:function(){var t=this;t.msgChangeHandle=e.on("ds:msg:change",function(n,r,i,s,o){var u=t.message,l=i&&i[0],c=t.parentNode,h,p,d,v,m;h=l.mid,p=l&&t.getMessageIdxByMid(h);if(!u||!u.msgs||!e.Lang.isValue(p)||!t.initialRender&&o!=="flag")return;d=u.msgs[p];if(t.fullView&&o==="move"&&a.hasMoved(d.mid,h,t.getMsgFid(d),n)){u.msgs.length>1?(t.dirty=!0,t.handleSingleMsgDelete(d)):t.set("close",1);return}if(d&&l&&f(l.mid)===f(d.mid)&&l.flags&&d.flags&&c&&!t.outboundReq){l.flags.isFlagged!==d.flags.isFlagged&&(t.dirty=!0,t.updateMessageFlagMarkup(l));if(l.flags.isRead!==d.flags.isRead||o==="flag"&&s[0].flags.isRead)t.dirty=!0,t.updateMessageReadMarkup(l,l.flags.isRead);v=t.message.msgs[p],m=v&&v.body&&v.body.display,t.message.msgs[p]=l,m&&l.body&&(t.message.msgs[p].body.display=m)}}),t.convDeleteHandle=e.on("ds:conv:remove",function(e,n,r){var i=t.message,s,o=0;if(!i)return;if(e===t.fid){t.isStepping||(t.arrMessageSequence=null);if(t.fullView&&n&&i.cid)for(s=0;s<n.length;s++)c(i.cid)===c(n[s].cid)&&(o=1);if(o||!n&&r)t.fullView?t.set("close",1):t.set("message",null)}}),t.convChangeHandle=e.on("ds:conv:change",function(n,r,i,s,o,u){var a=t.message,h=t.parentNode,d=r&&r[0],v=i&&i[0],g=s&&s[0],y=o&&o.reason==="savedraft",b,w,E,S,x,T,N,C,k,L,A,O,M,_;if(!a||e.Object.isEmpty(t.midObjMap)||!t.initialRender&&n!=="msg:flag"&&n!=="msg:remove"&&n!=="msg:add")return;if(n==="move"){for(M=0;a&&M<i.length;M++)C=i[M].cid,k=i[M].fid,L=r[M].cid,A=r[M].fid,t.fullView&&c(C)===c(a.cid)&&(t.isStepping||t.set("close",1));return}if(d&&v&&c(d.cid)===c(v.cid)&&l.areSameConvs(v,t.message)&&h){if(n==="msg:remove"){_=t.getRemovedMsg(d.midMap,v.midMap);var D=t.midObjMap[f(_.mid)];if(!e.Lang.isValue(D))return;if(y)return;_.fid==="Draft"&&!y&&t.removeDraft(D),t.message.msgs.splice(D,1),t.message.midMap.splice(D,1),t.message=m.Conversations.calcConvSummary(t.message),S=t.message.msgs,x=S.length,t.midObjMap=t.refreshMidObjMap(S);if(!(x>0)){t.fullView?t.set("close",1):(!y||!t.get("active"))&&t.set("message",null);return}if(!y){E=t.getMsgNodeByMid(_.mid),E&&(E.remove(),t.fire("MessagePane:unload",E));var P=t.message.msgs[t.message.msgs.length-1].fid||t.message.msgs[t.message.msgs.length-1].sourceFolderInfo.fid;P!=="Draft"&&t.quickReplyBox&&t.quickReplyBox.show(),t.updateCount()}}else if(n==="msg:add"){w=o[0][0];if(!u.cachedMsg||w.fid!=="Sent"){if(t.fid==="Draft"&&t.message.msgs.length===1)return;t.ignoreLMT=!0,b={origin:u.draft.origin,draftMID:u.draftMid,newMsg:{cid:w.cid,fid:w.fid,mid:w.mid}},t.get("active")&&t.loadPaneContent(4,null,{force:!0},null,!0,b,!0);return}O=p(w.fid,u.cachedMsg),t.message.midMap&&t.insertMsgAtPos({msg:O,replace:0},!0)}if(e.Lang.isValue(g.totalFlagged)||e.Lang.isValue(g.totalUnread))d.totalFlagged!==v.totalFlagged&&(N=v.totalFlagged>0?!0:!1,t.message.totalFlagged=v.totalFlagged,t.dirty=!0,t.updateConvFlagMarkup(N)),d.totalUnread!==v.totalUnread&&(T=v.totalUnread>0?!1:!0,t.message.totalUnread=v.totalUnread,t.message.msgCountsByFolder=v.msgCountsByFolder,t.dirty=!0,t.updateConvReadMarkup(T))}})},detach:function(){var t=this;t.stepIndex=t.isStepping=null,t.msgChangeHandle&&t.msgChangeHandle.detach(),t.convChangeHandle&&t.convChangeHandle.detach(),t.convDeleteHandle&&t.convDeleteHandle.detach(),t.threadHeaderHandler&&t.threadHeaderHandler.detach(),t.rteActiveHandler&&t.rteActiveHandler.detach(),t.threadItemHandler&&t.threadItemHandler.detach(),t.refreshHandler&&t.refreshHandler.detach(),t.subjectHandle&&t.subjectHandle.detach(),t.switchThreadItemHandler&&t.switchThreadItemHandler.detach(),NeoConfig.convReplyBtnsInTlbr&&t.newMessageHandler&&t.newMessageHandler.detach(),t.widthUpdateTimer&&(t.widthUpdateTimer.cancel(),t.widthUpdateTimer=null),e.each(t.expandMessageTimers,function(e){e.cancel()}),t.cleanRefreshTimer(),t.registerLFTNotify()},setRenderFocus:function(){var e=this;e.setFocusNode()},setFocusNode:function(){},isConvActive:function(e){var t=this;return!t.message||!t.message.cid?!1:c(t.message.cid)===c(e)},loadExtra:function(n,r){var i=this,s=r?["mail-ui-convpane-error"]:["mail-ui-convpane-read"],o=t.Stopwatch.get("MsgInPreview")||i.stopwatch,u,a,f;!r&&E&&(i.bindPaneContent&&(a="MsgPaneRead_Preloaded"),E=0),o&&o.start(2,"LoadExtraBody"),f=function(){try{var r=s,u;o&&o.start(2,"LoadExtraUseCB"),i.setFullFormatters&&!i.setFull&&i.setFullFormatters();try{n.apply(i)}catch(a){typeof globals!="undefined"&&globals
.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:6",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:6"),e.use("common-utils-error",function(){t.error.report("loadExtraCBApplyError",a,1,1,1)})}if(S)for(u=0;u<r.length;u++)typeof r[u]!="function"&&(S[r[u]]=1)}catch(a){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-conv-convpane:7",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-conv-convpane:7")}};for(u=0;u<s.length;u++)S[s[u]]&&(s.splice(u,1),u--);s.length?(s.push(f),e.use.apply(e,s)):f(e),o&&o.start(2,"PostLoadExtraBody")}}),e.mix(x.prototype,{NAME:"ConversationPane",fireEvent:T,updateMessageReadMarkup:function(e,t){if(e){var n=this.getMsgNodeByMid(e.mid),r;n&&(t?n.removeClass("unread"):n.addClass("unread"),r=n.all(".info"),r.setAttribute("title",strings[t?"str_msg_list_click_mark_as_unread":"str_msg_list_click_mark_as_read"]),r.setAttribute("aria-label",strings[t?"str_msg_list_read":"str_msg_list_unread"]))}},updateConvReadMarkup:function(t){var n=this.get("parentNode").one(".message-header"),r=n?n.one(".info"):null;n&&(t?n.removeClass("unread"):n.addClass("unread"),r&&(r.set("title",strings[t?"str_msg_list_conv_click_mark_as_unread":"str_msg_list_conv_click_mark_as_read"]),r.set("aria-label",strings[t?"str_msg_list_convRead":"str_msg_list_convUnread"])),e.fire("MessagePane:markConvRead",this.message,t))},updateMessageFlagMarkup:function(e){var t,n,r,i;e&&(t=this.getMsgNodeByMid(e.mid),t&&(r=t&&t.one(".flag"),i=e.flags.isFlagged,n=r.one("a"),r.toggleClass("flagged").set("title",strings[i?"str_msg_list_flagged_attr":"str_msg_list_flag_attr"]),r.set("aria-label",strings[i?"str_msg_list_flagged":"str_msg_list_not_flagged"]),n&&n.set("aria-checked",!i)))},updateConvFlagMarkup:function(e){var t=this.get("parentNode").one(".message-header .flag");t&&(e?t.addClass("flagged"):t.removeClass("flagged"),t.set("title",strings[e?"str_msg_list_convflagged_attr":"str_msg_list_convflag_attr"]),t.set("aria-label",strings[e?"str_msg_list_convflagged":"str_msg_list_not_convflagged"]))},convertShortcuts:function(){var t=this,n=t.parentNode,r=n.one("div.tripane.content")||n.one("div.message.content");e.Lang.later(0,null,function(){o.convertShortcuts(n,r)})},saveDraftAction:function(t,n){var r=this,i;r.saveDrafts?r.saveDrafts(function(r){!n&&!r&&t?(i={hd:strings.str_comp_title_saveasdraftfailmultiple,bd:strings.str_comp_saveasdraftfailmultiple},e.common.ui.DialogHelper.confirm(i,{ok:{handler:function(){t()}},cancel:{}})):t&&t()}):t&&t()},handleSingleMsgDelete:function(e){var t=this,n=t.message,r=n.msgs,i,s,o=e.mid;o&&(i=t.getMsgNodeByMid(o),i&&i.remove(!0),s=t.getMessageIdxByMid(o),r.splice(s,1),t.midObjMap=t.refreshMidObjMap(r))},resetRequestLoadingState:function(e){var t=this;clearTimeout(t.loadingTimer),clearTimeout(t.slowLoad),t.loading_slow=0,t.conv_deleted_error=0,t.loading_error=e?1:0,t.outboundReq=null,t.request=null,t.isRetrying=0},requestAllMessages:function(e,t,n,r,i){var s;i&&(s=new Date,i.stopwatch&&(i.stopwatch.start(1,"YCMSGGetBegin2"),i.stopwatch.YCMSGGetBegin2=s),i.RSstopwatch&&(i.RSstopwatch.YCMSGGetBegin=s)),u.getMultipleMessages(e,n,this.getMsgFid,r)},getMsgContentAriaLabel:function(e){var t,n="";return t=e.one(".thread-body"),n+=t?(t.get("id")?t.get("id"):t.generateID())+" ":"",n},focusMessageCard:function(){var e=this,t,n=e.selNode;(!e.parentCW.msgList||!e.parentCW.msgList._listview.get("focused"))&&n&&(n.setAttribute("aria-labelledby",e.getMsgContentAriaLabel(n)),n.focus())},updatePaneContent:function(){var e=this;this.saveDraftAction(function(){e.loadPaneContent(5,null,{force:!0},null,!0,null,!0),clearTimeout(e.slowLoad)})},setRefreshTimer:function(t){var n=this,r=t||b;if(n.fid==="Draft"&&n.message.msgs.length===1)return;n.cleanRefreshTimer(),n.refreshTimer=e.Lang.later(r,n,function(){n.get("active")===1?n.updatePaneContent():n.refreshOnActive=!0})},cleanRefreshTimer:function(){this.refreshOnActive=!1,this.refreshTimer&&this.refreshTimer.cancel()},preload:function(n){var r=this,i=n.mid,s=new t.Stopwatch("PreLoadMessage"),o,u;if(i){var a={success:function(e){if(s===-1){t.assert(0,"successdupcall",1);return}o=a&&a.respProps&&a.respProps.wasCached,r.message?r.loadExtra(function(){r.onSuccess.apply(r,[e,!1,!0])}):r.preloadedMsg=e,s=-1},notify:e.bind(N,r),failure:function(e){r.message?r.loadExtra(function(){r.onFailure.apply(r,[e,!0])},1):r.preloadFailure=e},errorPosition:9,suppressCodes:["*"]};r.usedPreload=1,u=r.requestPaneContent(n,a,{fid:r.fid,msg:n,cachekey:"Prime"}),r.abortRequests(),r.outboundReq&&(r.request=u,r.requestType="preload")}},isChat:function(){return!1},getMsgFid:function(e){return e.fid||e.sourceFolderInfo&&e.sourceFolderInfo.fid||e.folderInfo&&e.folderInfo.fid||this.fid},isPrevPaneVisible:function(){return d.hasClass("prevPaneVisible")&&!d.hasClass("offscreen")}},!0),e.mail.ui.ConvPane=e.mail.ui._ConvPane=x},"1.0.0",{requires:["_shared_module_thread_thread_pane","common-utils","mail-model-datastore","mail-controller-messages","mail-controller-conversations","mail-ui-mailpane-base","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils","mail-model-convstore"]});


YUI.add("mail-ui-convview-base",function(e){function k(){var t=e.mail.ui.ContextButton;t&&t.setNodeMessageListMenu()}var t=e.common.Utils,n=e.mail,r=n.ui,i=r.MessagePaneUtils,s=n.model.DataStore,o=s.Folders.get,u=t.substitute,a=e.ui.Templates,f="div.empty-folder",l="#inboxcontainer",c="hidden",h=NeoConfig,p="%40B%40Bulk",d="%40C%40Chats",v="darlaEvent",m="message",g="renderComplete",y="%40S%40Search",b="title",w="visible",E,S,x,T,N=t.escapeHtml,C=e.mail.Tabs,L=function(n){function o(){function o(t){t.newVal==1?(i.dsFolderChange&&i.dsFolderChange.detach(),i.dsFolderRename&&i.dsFolderRename.detach(),i.footer&&i.footer.setStyle("visibility","hidden")):s?i.dsFolderChange=e.on("ds:folder:change",function(e,t,n){if(n&&n.length>0){var r,s;for(r=0,s=t.length;r<s;r++)if(n[r].total!==undefined&&t[r].folderInfo.fid==i.fid){i.renderToolbarsOrEmpty();break}}}):i.dsFolderRename=e.on("ds:folder:rename",function(e,t){i.msgPane&&i.fid==e.folderInfo.fid&&(i.fid=t.folderInfo.fid,i.msgPane.set("fid",i.fid))})}i.addAttrs({scrollWidth:{value:null}}),i.after("activeChange",i.afterActiveChanged,i);var r=function(){i.msgList&&i.msgList._listview&&i.msgList._listview.updateUlSize()};i.formatters={reply_group:function(){if(NeoConfig.convReplyBtnsInTlbr){var e=i.hasMsgList?i.toolbarMods.Inbox:i.toolbarMods.Conversation;return u(a[e].reply_group,0,0,0,strings)}},non_ad:function(e){return u(a._shared_module_folder_empty_rollup.non_ad,e,i.formatters,0,strings)},random_footer:function(){return""},random_footer_1:function(){return""},random_footer_2:function(){return""},empty_inbox:function(e){return e.fid=="Inbox"?u(a._shared_module_folder_empty_rollup.empty_inbox,e,i.formatters,0,strings):""},empty_trash:function(e){return e.fid=="Trash"?u(a._shared_module_folder_empty_rollup.empty_trash,e,i.formatters,0,strings):""},empty_spam:function(e){return e.fid=="%40B%40Bulk"?u(a._shared_module_folder_empty_rollup.empty_spam,e,i.formatters,0,strings):""},empty_draft:function(e){return e.fid=="Draft"?u(a._shared_module_folder_empty_rollup.empty_draft,e,i.formatters,0,strings):""},empty_folder:function(e){return e.fid!="Inbox"&&e.fid!="Trash"&&e.fid!="%40B%40Bulk"&&e.fid!="Draft"?u(a._shared_module_folder_empty_rollup.empty_folder,e,i.formatters,0,strings):""},page_conversation_history:function(e){return i.isChat(i.fid)?u(a._shared_module_folder_empty_rollup.page_conversation_history,e,i.formatters,0,strings):""},page_conversation_history_else:function(e){return i.isChat(i.fid)?"":u(a._shared_module_folder_empty_rollup.page_conversation_history_else,e,i.formatters,0,strings)},archiving_disabled:function(e){return h.ssa_enabled?"":u(a._shared_module_folder_empty_rollup.archiving_disabled,e,i.formatters,0,strings)},full_view:function(e){var t=i.isChat(i.fid)?d:i.fid;return s?"":u(a[i.toolbarMods[t]].full_view,e,0,0,strings)},msg_nav_arrows:function(e){var t="minty_module_toolbar_inbox_message_thread";return u(a[t].msg_nav_arrows,e,i.formatters,0,strings)},cancellable:function(e){return i.msgPane&&i.msgPane.fullView?u(a.minty_module_toolbar_inbox_message_thread.cancellable,e,i.formatters,0,strings):""},rightAlign_togglethread:function(e){return t.features.enabled("viewMenuV2")?u(a.minty_module_toolbar_inbox_default_thread_rollup.rightAlign_togglethread,0,0,0,strings):""},archiveEnabled:function(e){if(t.features.enabled("archive"))return u(a[e.origTmpl].archiveEnabled,e,i.formatters,0,strings)},has_spam_button:function(e){var t=!i.isActualFolder(i.fid,"Sent")&&!i.isActualFolder(i.fid,"Draft")?u(a[i.msgToolbarMod].has_spam_button,e,i.formatters,0,strings):"";return t},spam_menu:function(e){var t=i.fid==p?"":u(a[i.msgToolbarMod].spam_menu,e,i.formatters,0,strings);return t},spam_menu_else:function(e){var t=i.fid==p?u(a[i.msgToolbarMod].spam_menu_else,e,i.formatters,0,strings):"";return t},has_sms_menu_else:function(e){return strings.str_cfg_tog_hasSMS?"":u(a.minty_module_toolbar_inbox_conversation_thread_rollup.has_sms_menu_else,e,i.formatters,0,strings)},has_sms_menu_else1:function(e){return strings.str_cfg_tog_hasSMS?u(a.minty_module_toolbar_inbox_conversation_thread_rollup.has_sms_menu_else1,e,i.formatters,0,strings):""},is_mon:function(){return strings.str_cfg_tog_monster_ad_empty_l10n?a._shared_module_folder_empty_rollup.is_mon:""},is_lrec:function(){return strings.str_cfg_tog_monster_ad_empty_l10n?"":a._shared_module_folder_empty_rollup.is_lrec},from_search:function(e){var t=C.getActiveTab(),n=t.prevTabId,r,i=!1;return r=C.getTabById(n),r&&r.widgetType==="search"&&(i=!0),i?u(a.minty_module_toolbar_inbox_message_thread.from_search,e,0,0,strings):""}},i.msgList&&i.once("activeChange",function(){var t=i.msgList;t.folder&&e.Lang.isNumber(t.folder.totalConversations)&&t.updateTitle(t.folder.totalConversations),r(),i.checkPreview()}),e.on("msgsview:splitterdone",r),i.on("closeChange",function(e){var t,n=i.subToolbars;for(t in n)n[t].set("close",e.newVal);o(e)}),i.set("children",[i.msgPane,i.msgList]),i.msgPane&&i.msgPane.on(v,function(e){i.fire(v,e)}),i.msgPane&&!i.msgPane.fullView&&i.msgPane.after("paneMessage",function(e){i.setPPToolbarItems(e.content)}),e.on("msgsview:movetonewfolder",function(){var e=C.getActiveTab();i.hasMsgList&&e&&e.widget&&e.widget==i&&i.handleUI({action:"folder-new",tbAction:!0},i.fid,i.msgList)}),s?i.after("contentToolbarChange",function(){i.msgList&&i.msgList.setToolbarElements(e.one("#toolbar"))}):(i.msgPane.on("scrollWidthChange",function(t){i.set("scrollWidth",t.newVal),i.get("active")&&e.fire("ws:fpMsgWidth",t)}),i.on("scrollWidthChange",function(e){e.reset&&i.msgPane.scrollWidthReset()})),i.set(b,s?i.msgList.get(b):i.msgPane.get(b)),i.setToolbars(),o({newVal:0}),s?i.bindMsgList():i.msgPane.on("fidChange",function(e){i.fid=e.newVal,i.setToolbars()}),i.set("charCodes","13,27,32,33,34,35,36,37,38,39,40,46,85,186,188,190,"+i.numCodes.join(",")+","+i.keyCodes.join(",")+","+"32+ctrl+shift,73+shift,84+shift,67"),i.set("reuse",n.reuse)}var i=this,s;i.rawAttr=n,L.superclass.constructor.call(i,n),s=i.hasMsgList,n=
n||{},i.msgPane=new r.ConvPane(e.mix(n,{fullView:!s&&!n.query,visible:!s||(NeoConfig.previewPanePref?!0:!1)})),n.stopwatch&&(i.msgPane.stopwatch=n.stopwatch),i.callFromLaunch=n.callFromLaunch?n.callFromLaunch:!1,i.msgList=s?n.msgList||new r.ConvList(n):0,i.supportPreview=!0,i._nextprevModule="mail-ui-convpane-next-prev",i.darlaActionKey=h.low_bandwidth?"message_tabpane_low":NeoConfig.isSSL?"message_tabpane_ssl":"message_tabpane",i.scrolling=[".list-view-items",".message.content"],o()};e.extend(L,e.mail.ui.MailView),e.mix(L.prototype,{NAME:"ConversationView",msgToolbarMod:"minty_module_toolbar_inbox_message_thread",toolbarMods:{Inbox:"minty_module_toolbar_inbox_default_thread_rollup","%40C%40Chats":"minty_module_toolbar_inbox_conversation_thread_rollup",Draft:"minty_module_toolbar_inbox_drafts_thread_rollup","%40B%40Bulk":"minty_module_toolbar_inbox_spam_thread_rollup",Sent:"minty_module_toolbar_inbox_sent_thread_rollup","%40S%40Search":"minty_module_toolbar_inbox_search_thread_rollup",Conversation:"minty_module_toolbar_fragments_reply_group_conv"},_isFolderEmpty:function(){var e;return this.fid&&(e=o(this.fid))&&e.total===0},renderEmptyFolder:function(t){var n=this,r,i,s,o;h.previewPanePref?(i=u(strings.str_folder_empty,{folder_name:N(t)},n.formatters,0,strings,a),n.msgList._listview._srcNode.setHTML(""),e.one("#lv-folder-empty").setHTML(i).removeClass("hidden"),s=e.one(l).one(f),s&&(o=e.one(l).get("children"),o&&o.removeClass(c),s.addClass(c))):(r=a._shared_module_folder_empty_rollup,s=e.one(l).one(f),t=t.split("/").pop(),s?(i=u(r.non_ad,{folder_name:N(t),fid:n.fid},n.formatters,0,strings,a),s.one(".col-a").setContent(i)):(i=u(r.base,{folder_name:N(t),fid:n.fid},n.formatters,0,strings,a),e.one(l).append(i)),s=e.one(l).one(f),e.one(l).get("children").addClass(c),s&&s.removeClass(c)),n.setToolbars(),(n.fid=="Trash"||n.fid==p)&&e.fire("foldersview:resetFocus",n.fid)},renderToolbarsOrEmpty:function(){var n=this,r,i,s,u,a=t.features.enabled("liveNation"),p=["_shared_module_folder_empty_rollup"];n._isFolderEmpty()?(i=o(this.fid),s=e.mail.ui.common.StringUtils.getSystemFolderInfoName(n.fid,i),h.bidi&&(s='<span dir="'+i.folderInfo.dir+'">'+s+"</span>"),a&&p.push("mail-ui-ads-live-nation"),e.use(p,function(){n.renderEmptyFolder.apply(n,[s]),a&&e.fire("live-nation:show",{fid:n.fid,folderName:s})})):(e.one("#lv-folder-empty").addClass("hidden"),u=e.one(l).one(f),u&&(r=e.one(l).get("children"),r&&r.removeClass(c),u.addClass(c)),n.setToolbars(),a&&e.fire("live-nation:hide"))},createToolbar:function(n){var i=this,s;return s=new r.Toolbar({template:n,menu:{template:function(n,s){var o;n==="btn-move"&&t.features.enabled("folderManagement")?o=["mail-ui-inboxmenu-base","mail-ui-folder-menu"]:o="mail-ui-inboxmenu-base",e.use(o,function(){r.InboxMenu.insert(n,s,i.fid,{enableAddContact:function(e){e(i.isEnableAddToContacts(i))}})})},keys:function(n,s){e.use("mail-ui-inboxmenu-base",function(){var e=r.InboxMenu.getValidKeys(n);n.get("id")==="menu-move"&&(e=e.concat([68,96,97,98,99,100,101,102,103,104,105]),n.on("menu:state",function(e){e.state==="hide"&&!t.isControlActive()&&i.msgList&&i.msgList.get("focusNode")&&i.msgList.get("focusNode").focus()})),s(e)})},enterAccel:function(t){e.use("mail-ui-inboxmenu-base",function(e){t(e.mail.ui.InboxMenu.getEnterAccel())})}}}),s.on("itemSelected",i.handleToolbarSelection,i),s},setToolbars:function(t){var n=this;e.use("mail-ui-button-ctxt",function(){n._setToolbars(t)})},_setToolbars:function(n){function c(){var i=NeoConfig.previewPanePref?!0:!1,l=f==r.msgToolbarMod&&s==p,c,d=r._isFolderEmpty(),v,m,g=0,y=s,b=r.subToolbars.Inbox,N,C,k,L,A,O,M,_;r.msgList?(c=r.msgList._listview&&r.msgList._listview.isSelectedThread(),g=r.msgList.vlist.getSelectCount()):r.msgPane&&(r.msgPane&&r.msgPane.message&&r.msgPane.message.msgs&&r.msgPane.message.msgs.length>1&&(c=!0),g=1),N=o(s),strings.str_cfg_tog_use_reedit&&s=="%40S%40Search"&&r.msgPane&&r.msgPane.message.sourceFolderInfo&&r.msgPane.message.sourceFolderInfo.fid=="Sent"&&(y=s+"+Sent");if(!(y in r.subToolbars)){var D=o(y);D&&!D.isSystem&&b?(r.subToolbars[y]=b,b.setButtonContext&&b.setButtonContext(g,c)):(v={previewToggle:strings[i?"str_msg-view_btn_hidepreview":"str_msg-view_btn_showpreview"],spam_data_action:l?"notspam":"spam",str_spam_attr:strings[l?"str_not_spam_attr":"str_spam_conv_attr"],str_spam:strings[l?"str_not_spam":"str_spam"],selectall_class:d?"disabled":"enabled",msgliststate:n?c?"hasthreadmsg":"hasonemsg":"hasnomsg",replyGroupState:r.msgPane.get(w)?r.msgPane.message?"":"disableReplyGroup":"hideReplyGroup",origTmpl:f},m=u(a[f].base,v,r.formatters,0,strings,a),r.subToolbars[y]=r.createToolbar(m))}r.subToolbars[y].setButtonContext&&r.subToolbars[y].setButtonContext(g,c),r.get("contentToolbar")!==r.subToolbars[y]&&r.set("contentToolbar",r.subToolbars[y]),NeoConfig.previewPanePref===1?r.positionToolbarItems(!0):r.positionToolbarItems(!1),C=e.one("#pagetoolbar"),O=C&&C.one("#btn-togglethread"),k=C&&C.one("#btn-prev-msg"),L=C&&C.one("#btn-next-msg"),t.features.enabled("searchresults")&&r.searchQuery&&r.searchQuery.isFromPhotoSRP?(k&&k.addClass("hidden"),L&&L.addClass("hidden")):NeoConfig.infinitePane&&r.msgPane.fullView&&(k&&k.removeClass("hidden"),L&&L.removeClass("hidden"),E&&E.detach(),S&&S.detach(),x&&x.detach(),T&&T.detach());if(t.features.enabled("viewMenuV2")){if(r.msgPane&&r.msgPane.message&&r.msgPane.fullView&&!k.hasClass("hidden"))O&&O.setStyle("right",null).addClass("fullView-togglethread-right-align");else if(!k||k.hasClass("hidden"))O&&O.setStyle("right",null).removeClass("fullView-togglethread-right-align"),h.previewPanePref===2&&e.one("#btn-conv-view")&&O&&O.setStyle("right",e.one("#btn-conv-view").get("offsetWidth")+10+"px");r.msgList&&e.one("#btn-conv-view span")&&e.one("#btn-conv-view span").set("innerHTML",e.mail.ui.common.StringUtils.getSortKeyString(r.msgList.sortedColumn.action))}n&&(r.showToggleThreadButtonIfManyMsgs(),n&&r.msgPane&&r.msgPane.message&&(r.getCurrentView()!=="scroll-view-prev"||!r.msgPane
.isPrevPaneVisible()&&r.msgPane.fullView)&&(A=e.one("#btn-closemsg"),A&&A.removeClass("hidden"))),m||(M=e.one("#btn-ml-cbox input"),_=e.one("#btn-select-dd"),M&&_&&(d?(M.replaceClass("enabled","disabled"),_.replaceClass("enabled","disabled")):(M.replaceClass("disabled","enabled"),_.replaceClass("disabled","enabled"))))}var r=this,i=r.isChat(r.fid),s=i?d:r.fid,f=i||r.hasMsgList?r.toolbarMods[s]:r.msgToolbarMod,l="minty_module_toolbar_inbox_default_thread_rollup";f||(f=r.hasMsgList?r.toolbarMods.Inbox:r.msgToolbarMod),f===l&&e.ui.Templates[l]?c():f==r.msgToolbarMod&&!n?r.msgPane&&r.msgPane.setToolbar&&r.msgPane.setToolbar(f,r.setToolbars,r):e.use(f,c)},getComposeWidgets:function(){var e=this;if(e.msgPane)return e.msgPane.getComposeWidgets()},getCurrentMsg:function(){var e=this,t,n=e.msgList,r=e.msgPane;return r&&r.message&&r.isLoaded?t=r.message:n._listview&&n._listview.getSelectCount()==1&&n.getSelected&&n.getSelected(function(e){e&&(t=e[0])}),t?t:null},isEnableAddToContacts:function(e,t,n){e=e||this;var r=e.getCurrentMsg(),s,o,u;if(r)return r.totalMsgs>1&&n&&n.hasClass("list-view-item-detail")&&(u=this.msgList._listview._getIndexN(n),r=r.msgs[u[1]]),s=e.getFromEmail(r),o=i.isKnownEmailAddress(s),(!s||o)&&t&&this.showNotification(s),!o;return},getFromEmail:function(e){var t;return e?(t=e.from||e.header&&e.header.from||e.totalMsgs===1&&e.msgs[0]&&e.msgs[0].from||e.totalMsgs===1&&e.recipients&&e.recipients[0],t&&t.email||""):""},singleSelectHandler:function(n){var r=this,s=r.msgPane,o=n.details[0],u=o.message,a=u.msgs&&u.msgs.length>0?u.msgs[0].mid:u&&u.mid,f=s&&s.get(w),l=t.Stopwatch.get("MsgInPreview"),c;if(f){if((s&&s.message&&s.message.mid)==a)return;i.handleMsgInPreviewStopwatch(l,s,o.fid,a),c=r.msgList._listview.isSelectedThread();var h=n.submessage?!0:!1,p={pp:1},d=u.msgs&&u.msgs[0].from&&u.msgs[0].from.email?u.msgs[0].from.email.split("@"):["",""];p.count=u.totalMsgs,p.unrdCnt=u.totalUnread,p.drftCnt=u.totalDraft,p.sndrDmn=d[1],e.fire("mt:click",{action:h?n.fid==="Draft"?"open_thrd_drftMsg":"open_thrd_msg":"open_msg",append:p,spid:"msgread_reading_pane"}),NeoConfig.multitask&&u&&r.createRefTab(u)}s&&s.set(m,o),r.msgDetails=u?n.details[0]:null},handleUI:function(t,n,r,i){var s=this;t.msgPane=s.msgPane,e.use("mail-ui-proxyevents",function(){e.mail.ui.MailEventsProxy.handleUI(t,n,r,i)})},updatePreviewPaneToolbar:function(e){var t=this.subToolbars[this.fid],n=t?t.root||t.get("content"):null;e.newVal===1&&!this.msgList._listview.checkmode&&this.msgPane.get(w)?n&&n.removeClass("disableReplyGroup"):n&&n.addClass("disableReplyGroup")},updatePreviewPaneCounter:function(e){var t,n=this.subToolbars[this.fid],r=e.newVal,i;n&&n.setButtonContext&&(t=o(this.fid),i=this.msgList._listview.isSelectedThread(),n.setButtonContext(r,i)),r>1||r===1&&this.msgList._listview.checkmode?(this.msgPane.set(m,{message:new Array(r)}),this.msgDetails=null):r==0&&(this.msgPane.set(m,null),this.msgDetails=null)},bindMsgList:function(){function o(e){var t,n;return e?(t=e.ancestor(".list-view-item"),t?(n=t.ancestor(".list-view-item-subcontainer"),n?!0:!1):!1):!1}var n=this,i=n.msgList,s=n.msgPane;i.on("singleSelect",n.singleSelectHandler,n),i.on("sortList",function(e){this.sortList(e.sortType,e.targetNode,e.currentSortedColumn)}),i.on(v,function(e){n.fire(v,e)}),i.on("toggleToCol",function(){r&&r.MessagesViewColResize&&r.MessagesViewColResize.toggleCol("to",!0)}),s&&s.on("transferFocusChange",function(e){e.newVal&&i.set("focus",1)}),i.on("command",function(t){var r=0,s=t.details[0].message;t.e&&t.e.type!="dblclick"&&(n.msgPane&&n.msgPane.get(w)||strings.str_cfg_tog_open_by_dblclick)&&(r=1);if(r)return;var o=t.submessage?!0:!1,u={pp:r},a=s.msgs&&s.msgs[0].from&&s.msgs[0].from.email?s.msgs[0].from.email.split("@"):["",""];u.count=s.totalMsgs,u.unrdCnt=s.totalUnread,u.drftCnt=s.totalDraft,u.sndrDmn=a[1],e.fire("mt:click",{action:o?t.fid==="Draft"?"open_thrd_drftMsg":"open_thrd_msg":"open_msg",append:u,spid:"message_tabpane"});var f=n.isChat(t.fid)?["mail-ui-messagesview-base","_shared_module_message_display_fresh_rollup","_shared_module_message_pane_fresh"]:[];e.use(f,function(e){e.fire("openConv",{msg:t.message,submsg:t.submessage,fid:t.fid,neighbors:t.neighbors,sortCol:i.sortedColumn,arrMsgSeq:i._listview.arrItems||i._listview._model&&i._listview._model.get("list"),index:t.index||i._listview.rootSelect&&i._listview.rootSelect.index||null,isThread:!0})})}),i.on("fidChange",function(e){n.fid!=e.newVal&&(n.msgDetails=null,n.fid=e.newVal,s&&s.set(m,null),n.renderToolbarsOrEmpty(),n.toggleColumns(e.prevVal,e.newVal))}),i.on("selectCountChange",n.updatePreviewPaneCounter,n),NeoConfig.convReplyBtnsInTlbr&&i.on("selectCountChange",n.updatePreviewPaneToolbar,n),i.on(g,function(e){n.get("loaded")||n.set("loaded",1),i.get("active")&&!e.silent&&i.handleDarlaEvent(n.isEmpty(n.fid))}),e.one("#msg-list").one("div.list-view-items").on("keydown",function(n){var r=e.UA.os,i=r=="windows"||r=="win";if(i&&n.shiftKey&&n.keyCode==121||!i&&n.ctrlKey&&n.shiftKey&&n.altKey&&n.keyCode==77)n.preventDefault(),t.simulateContextMenu(n.target)}),e.one("#msg-list").one("div.list-view-items").delegate("contextmenu",function(r){function u(){e.mail.ui.InboxMenu.insert("menu-msglist",function(){var s=e.one("#menu-msglist");k(),e.common.ui.MenuHelper.create(i,{menu:s,isContext:!0,xy:[r.clientX,r.clientY],keys:function(t){t(e.mail.ui.InboxMenu.getValidKeys(s))},enterAccel:function(t){t(e.mail.ui.InboxMenu.getEnterAccel())}},function(){var i=s.one('a[data-action="fullheader"]'),u=s.one('li[data-action="addcontact"]');o(r.target)?(i.addClass("enable-menuitem-in-conv"),u.addClass("enable-menuitem-in-conv")):(i.removeClass("enable-menuitem-in-conv"),u.removeClass("enable-menuitem-in-conv")),s.on("menuSelected",function(t){var i={action:t.dataAction,contextmenuTarget:r.target};"addcontact"===t.dataAction&&(i.context="msg"),e.mail.ui.MailEventsProxy.handleUI(i,n.fid,n.msgList),e.fire("mt:click",{action:"rt_click_msglst",append:{ltxt:i.action}})}),s.on("menu:state",
function(r){var i=t.features.enabled("imapIn"),o,u;i&&(o="disabled",u=s.all(".primary-only-action")),r.state==="hide"&&!t.isControlActive()?n.msgList&&n.msgList.get("focusNode")&&n.msgList.get("focusNode").focus():r.state==="show"&&i?e.mail.Controller.ImapIn.isPrimaryAccount()?u.removeClass(o):u.addClass(o):r.state==="show"&&r.link.menu.getContextTarget()!==null&&s._hide()})})},n.fid,{isContext:!0,enableAddContact:function(e){e(n.isEnableAddToContacts())}}),e.fire("mt:click",{action:"rt_click_msglst_preview"})}var i=r.currentTarget.ancestor(".list-view-items"),s;r.halt(),e.use("mail-ui-inboxmenu-base",function(e){e.use("common-ui-menu-helper",function(e){s=e.common.ui.MenuHelper,s.createLoadingMenu(i,{isContext:!0,xy:[r.clientX,r.clientY]}),e.use("mail-ui-inboxmenu-base",function(e){e.use("mail-ui-proxyevents",function(){u()})})})})},"div.list-view-item",n)},toggleColumns:function(t,n){t===d?e.one(".list-view").all(".col-hd.info, .col-hd.file").removeClass("hidden"):n===d&&e.one(".list-view").all(".col-hd.info, .col-hd.file").addClass("hidden")},afterActiveChanged:function(t){var n=this,r=n.msgList;t&&(n.hasMsgList&&!e.server?(!n.slidersSet&&e.Lang.later(0,n,n.loadResizersAndSliders),t.newVal&&n.get("loaded")&&r.handleDarlaEvent(n.isEmpty(n.fid))):!n.hasMsgList&&n.msgPane.message&&typeof t.prevVal!="undefined"&&t.newVal&&n.triggerDarlaWithAIC(),r&&r.set(w,t.newVal))},handleDefaultCase:function(e){var t=this,n=e.item,r=e.action,i=t.fid,s=t.msgList,o=t.msgPane,u=t.getComposeWidgets(),a={action:r,id:n?n.get("id"):0,forwardAsAttachment:e.forwardAsAttachment||0,fid:n&&n.getAttribute("data-fid")?n.getAttribute("data-fid"):i,widget:t.type==="messagepane"?t:null,item:n,hasMsgList:t.hasMsgList,tbAction:e.tbAction,hasCompose:u&&u.length,subIndexArr:e.subIndexArr},f;e.context&&(a.context=e.context),t.hasMsgList?t.handleUI(a,i,s):(f=o&&o.get(m),r!=="delete"&&r!=="trash"||!(f&&f.message&&f.message.totalDraft||a.hasCompose)?t.handlePostAction(a,i,null,f):t.confirmRemoveDrafts(function(){t.handlePostAction(a,i,null,f)}))},confirmRemoveDrafts:function(t){e.use("common-ui-dialog-helper",function(){var n=e.common.ui;n.DialogHelper.confirm({hd:strings.str_delete_conv_confirm_hdr,bd:strings.str_delete_conv_confirm_bd},{ok:{handler:function(e,n){t(),n.destroy()},text:strings.str_delete}})})},render:function(t){var n=this,r=n.msgList,i=n.msgPane;n.set("parentNode",e.one(t)),(r||i).on(g,function(){n.hasMsgList||!n.callFromLaunch&&setTimeout(function(){n.triggerDarlaWithAIC()},0),n.fire(g)}),r&&r.render(t),(n.fid!==y||r===0)&&i&&i.render(t),n.fid&&n.fid!==y&&(n.set("focusNode",(r||i).get("focusNode")),n.renderToolbarsOrEmpty()),e.after("update:previewPane",function(){n.renderToolbarsOrEmpty()}),e.after("mbEvent:previewpane_expand",function(){n._isFolderEmpty()&&e.fire("mbEvent:hide")})},showToggleThreadButtonIfManyMsgs:function(){var t=this.msgPane.message,n;n=e.one("#btn-togglethread");if(n){if(!t||!t.totalMsgs||t.totalMsgs===1){n.addClass("hidden");return}n.removeClass("hidden"),n.hasClass("thread-cards-collapsed")&&(n.removeClass("thread-cards-collapsed").addClass("thread-cards-expanded"),n.setAttribute("title",strings.str_collapse_all_attr),n.one(".icon-text").setContent(strings.str_collapse_all))}}},!0),e.namespace("mail.ui").ConvView=L},"1.0.0",{requires:["common-ui-contentwidget","common-ui-toolbar-base","mail-ui-mailview-base","mail-ui-convlist-base","mail-ui-convpane-base","minty_module_toolbar_inbox_default_thread_rollup","dom-screen","mail-ui-common-string-utils","mail-common-utils-features","common-utils"]});


YUI.add("_shared_module_thread_thread_pane",function(e){e.namespace("ui.Templates"),e.ui.Templates._shared_module_thread_thread_pane={base:'<div role="main" aria-label="{{str_aria_label_main_conversation}}" class="threadpane {{page_message_pane_view}}" {{page_message_pane_view1}}> <div id="{{page_message_pane_view2}}" class="{{page_message_full_view}} thread-content content {{threadInConvReplyBucket}}" role="presentation"> {{page_show_comm_modes}} {{page_show_comm_modes_else}} </div></div>',page_message_pane_view:"tripane",user_pref_height:'style="top:{{msg_pane_top}};{{tripane_pos}}:{{msg_list_width}}"',page_message_pane_view1:"{{user_pref_height}}",page_message_pane_view2:"msg-preview",page_message_full_view:"message ",threadInConvReplyBucket:"conv-reply-bucket-thread",global_spearmint_view:"{{_shared_module_message_prompt}} ",global_spearmint_view_else:'<div class="css-env"> <i class="icon icon-mail-inbox"></i> <h2 class="count">{{num_selected_msgs}}</h2> </div> ',page_show_comm_modes:"{{global_spearmint_view}} {{global_spearmint_view_else}} ",page_show_comm_modes_else:"{{_shared_module_thread_thread_display_rollup}} "}},"1.0.0",{requires:["_shared_module_message_prompt","_shared_module_thread_thread_display_rollup"]});


YUI.add("minty_module_toolbar_inbox_default_thread_rollup",function(e){e.namespace("ui.Templates"),e.ui.Templates.minty_module_toolbar_inbox_default_thread_rollup={base:'<div id="pagetoolbar" class="{{msgliststate}} {{replyGroupState}}"> <div id="match-messagelist-sizing"> <span class="btn btn-hdr cbox collapse-end-space" id="btn-ml-cbox"> <label> <input title="{{str_msg_list_select_all_msgs_attr}}" aria-label="{{str_msg_list_select_all_msgs_attr}}" type="checkbox" class="focusable neoFocusable {{selectall_class}}" tabindex="0" data-action="selectAll-message"> <span class="icon" aria-hidden="true"></span> </label></span><button tabindex="-1" id="btn-select-dd" data-action="select-dd" role="button" aria-haspopup="true" class="btn neoFocusable {{selectall_class}}" aria-label="{{str_msg_list_select_categorized_msgs_attr}}"> <b class="icon icon-chevron-down"></b></button> <button id="btn-conv-view" class="btn btn-absolute btn-view-dd" role="button" tabindex="-1" aria-haspopup="true" title="{{str_view_conv_attr}}" data-action="menu"> <span class="icon-text">{{str_view}}</span> <b class="icon icon-chevron-down"></b></button> </div> {{reply_group}} {{archiveEnabled}} <button id="btn-delete" class="btn multimsg" aria-label="{{str_delete_conv_attr}}" title="{{str_delete_conv_attr}}" data-action="delete" tabindex="-1"> <i class="icon-delete"></i><span class="icon-text">{{str_delete}}</span> </button> <button id="btn-move" class="btn multimsg" aria-label="{{str_move_convs_attr}}" title="{{str_move_convs_attr}}" data-action="menu" tabindex="-1" aria-haspopup="true"> <i class="icon-move"></i><span class="icon-text">{{str_move}}</span><b class="icon icon-chevron-down"></b> </button> <button id="main-btn-spam" class="btn multimsg collapse-end-space" aria-label="{{str_mspam_conv_attr}}" title="{{str_mspam_conv_attr}}" data-action="{{spam_data_action}}" tabindex="-1"> <i class="icon-spam"></i><span class="icon-text">{{str_spam}}</span> </button> <button id="btn-spam" class="btn multimsg primary-only-action" aria-label="{{str_menu_spam_toggle_attr}}" title="{{str_menu_spam_toggle_attr}}" data-action="menu" tabindex="-1" aria-haspopup="true"> <b class="icon icon-chevron-down"></b> </button> <button id="btn-actions" class="btn multimsg" aria-label="{{str_more_actions_attr}}" title="{{str_more_actions_attr}}" data-action="menu" tabindex="-1" aria-haspopup="true"> <i class="icon-more"></i><span class="icon-text">{{str_more}}</span><b class="icon icon-chevron-down"></b> </button> <button id="btn-closemsg" class="btn btn-absolute btn-close-msg hidden" aria-label="{{str_close}}" title="{{str_close}}" data-action="closemsg" tabindex="-1"> <i></i> </button> <button id="btn-togglethread" class="btn thread-cards-expanded hidden {{rightAlign_togglethread}}" aria-label="{{str_collapse_all_attr}}" title="{{str_collapse_all_attr}}" data-action="thread-toggle" tabindex="-1"> <i class="icon-collapse-list"></i><span class="icon-text">{{str_collapse_all}}</span> </button></div>',archiveEnabled:'<button id="btn-archive" class="btn multimsg" title="{{str_archive_convs_attr}}" aria-label="{{str_archive_convs_attr}}" data-action="archive" tabindex="-1"> <i class="icon-archive"></i><span class="icon-text">{{str_archive}}</span> </button> ',rightAlign_togglethread:"togglethread-right-align",reply_group:'<button id="btn-reply-sender" class="btn onemsg reply" aria-label="{{str_reply_sender}}" title="{{str_reply_sender}} [{{str_menu_accel_shift_r}}]" data-action="reply_sender" tabindex="-1"> <i class="icon-reply"></i> </button> <button id="btn-reply-all" class="btn onemsg reply-all" aria-label="{{str_reply_all}}" title="{{str_reply_all}} [{{str_menu_accel_shift_a}}]" data-action="reply_all" tabindex="-1"> <i class="icon-reply-all"></i> </button> <button id="btn-forward" class="btn onemsg forward" aria-label="{{str_forward}}" title="{{str_forward}} [{{str_menu_accel_shift_f}}]" data-action="forward" tabindex="-1"> <i class="icon-forward"></i> </button>'}},"1.0.0");


YUI.add("_shared_module_thread_thread_display_rollup",function(e){e.namespace("ui.Templates"),e.ui.Templates._shared_module_thread_thread_display_rollup={base:"{{message_selection}}{{message_selection_else}}",message_selection:'<div class="emptypane"> <div class="css-env"> <i class="icon icon-mail-inbox"></i> <h2 class="count">{{num_selected_msgs}}</h2> </div> </div>',conv_deleted_error:'<div class="message"> {{str_conv_deleted_error}} </div> ',msg_deleted_error:'<div class="message"> {{str_msg_deleted_error}} </div> ',is_perm:"{{str_comp_loading_error_perm}} ",multi_retry:"{{str_comp_multi_retry}} ",multi_retry_else:"{{str_comp_loading_error}} ",is_perm_else:"{{multi_retry}} {{multi_retry_else}} ",can_retry:'<div class="message"> <span class=\'retry\' data-action="retry-conv-load">{{str_try_again}}</span> </div> ',show_tae:'<div class="message error_code">{{str_error_code}} {{tae_code}}</div>',conv_loading_error:'<div class="message"> {{is_perm}} {{is_perm_else}} </div> {{can_retry}} {{show_tae}} ',diff_folder_error:'<div class="message">{{str_error_msg_diff_folder_switch}}</div> ',loading_slow_msg:"{{str_comp_loading_msg}}",loading_slow_conv:"{{str_comp_loading_conv}}",loading_slow_else:'<div class="conv-loading">{{loading_slow_msg}}{{loading_slow_conv}}</div> ',loading_slow:"<div class=\"message\">{{str_comp_slow_loading}}</div> <div class='message'> <span class='retry' data-action=\"retry-conv-load\">{{str_try_again}}</span> </div> ",conv_loading_error_else:"{{loading_slow_else}} {{loading_slow}} ",page_loading:'<div id="loadingpane" class="conv-loadingpane"> {{conv_deleted_error}} {{msg_deleted_error}} {{conv_loading_error}} {{diff_folder_error}} {{conv_loading_error_else}}</div> ',expanded:"expanded",isUnread:"unread",active:"active",hasDraft:"hasdraft",super_collapsed:"super-hidden",loadhide:"loadhide",isFlagged:"flagged",isFlagged1:"{{str_msg_list_flagged_attr}}",isFlagged_else:"{{str_msg_list_flag_attr}}",isFlagged2:"{{str_msg_list_flagged}}",isFlagged_else1:"{{str_msg_list_not_flagged}}",moneyball_native_format_flag:'<div class="native-ads-flag"> <p class="native-ads-flag-inside">i</p> </div> ',from:'<span class="from lozengfy {{show_hovercard}} " data-name = "{{from_name}}" data-address="{{from_id}}" title="{{from_id}}" data-action="contact-card-menu" tabindex="0" role="button" aria-haspopup="true" aria-label="{{str_msg_list_from_name_from}}">{{from_name}}</span> ',to_group:'<div class="table"> <span class="to table-cell" aria-disabled="true" role="presentation">{{str_comp_label_to_fresh}}</span> <div class="table-cell"> {{recipients_built}} {{more_built}} </div> {{hide}} </div> ',cc_group:'<div class="table"> <span class="cc table-cell" aria-disabled="true" role="presentation">{{str_comp_label_cc_fresh}}</span> <div class="table-cell"> {{recipients_built}} {{more_built}} </div> {{hide}} </div> ',bcc_group:'<div class="table"> <span class="bcc table-cell" aria-disabled="true" role="presentation">{{str_comp_label_bcc_fresh}}</span> <div class="table-cell"> {{recipients_built}} {{more_built}} </div> {{hide}} </div> ',recipient_list:'<span class="lozengfy {{show_hovercard}} " role="button" tabindex="0" data-action="contact-card-menu" data-name="{{rcpt_name}}" data-address="{{rcpt_id}}" title="{{rcpt_id}}">{{rcpt_name}}</span> ',more_recipients_str:'<span class="more_recp lozengfy {{show_hovercard}} more" data-field="{{data_field}}" data-address="{{data_address}}" data-action="more" role="button" tabindex="0" aria-label="{{str_thread_hdr_more_recipients_attr}}"> {{str_hdr_more_recipients}}</span>',hide_recipients_str:'<span class="hide_recp table-cell" data-field="{{data_field}}" data-action="hide" role="button" tabindex="0" aria-label="{{str_thread_hdr_hide_recipients_attr}}">{{str_hdr_hide_recipients}}</span>',recipients:"{{to_group}} {{cc_group}} {{bcc_group}} {{recipient_list}} {{more_recipients_str}} {{hide_recipients_str}} ",hasDraft1:'<span class="draft" role="presentation">{{str_draft}}</span>',hasAttachment:'<div aria-label="{{str_msg_list_attachments}}" title="{{str_msg_list_attachments}}" class="icon file" role="button" tabindex="0"></div>',msg_blocked:'<div class="blocked"><div class="base-blocked" aria-label="{{str_msg_view_heading_blocked_images}}" tabindex="0" role="presentation"> <h3 role="presentation">{{str_msg_view_heading_blocked_images}}</h3> <div class="blocked-image" role="presentation"> <div class="btn show-text" role="presentation"> <a role="button" href="#" tabindex="0" aria-label="{{str_msg_view_btn_show_images_attr}}" title="{{str_msg_view_btn_show_images_attr}}" data-action="show-images">{{str_msg_view_btn_show_images}}</a> </div> <div class="btn options" role="presentation"> <a role="button" tabindex="0" href="#" aria-label="{{str_msg_view_btn_options_attr}}" title="{{str_msg_view_btn_options_attr}}" data-action="mail-options">{{str_msg_view_btn_options}}</a> </div> </div></div></div> ',msg_deleted_error1:'<div class="message"> {{str_msg_deleted_error}} </div> ',is_perm1:"{{str_comp_loading_error_perm}} ",multi_retry1:"{{str_comp_multi_retry}} ",multi_retry_else1:"{{str_comp_loading_error}} ",is_perm_else1:"{{multi_retry1}} {{multi_retry_else1}} ",can_retry1:"<div class='message'> <span class='retry' data-action=\"retry-msg-load\">{{str_try_again}}</span> </div> ",show_tae1:'<div class="message error_code">{{str_error_code}} {{tae_code}}</div>',msg_deleted_error_else:"<div class='message'> {{is_perm1}} {{is_perm_else1}} </div> {{can_retry1}} {{show_tae1}} ",loading_error:"{{msg_deleted_error1}} {{msg_deleted_error_else}} ",diff_folder_error1:"<div class='message'>{{str_error_msg_diff_folder_switch}}</div> ",loading_slow_else1:'<div class="msg-loading s-loader"></div> ',loading_slow1:"<div class='message'> {{str_comp_slow_loading}} </div> <div class='message'> <span class='retry' data-action=\"retry-msg-load\">{{str_try_again}}</span> </div> ",loading_error_else:"{{loading_slow_else1}} {{loading_slow1}} ",msg_loading:'<div id="loadingpane" class="msg-loadingpane"> {{loading_error}} {{diff_folder_error1}} {{loading_error_else}}</div> '
,quoted_text_collapse:'<div class="thread-quoted-text unselectable" title="{{str_qtd_expand}}" role="presentation"> <span class="icon icon-chevron-right qtd-expansion-icon" role="presentation" data-action="quoted-text"></span> <span class="qtd-expansion-text" data-action="quoted-text" tabindex="0" role="button" aria-label="{{str_qtd_expand}}">{{str_qtd_expand}}</span> </div> ',quoted_text_expand:'<div class="thread-quoted-body">{{quoted_text_body}}</div> ',msg_truncated:'<div class="msg-truncated"> <h3>{{str_msg_view_msg_truncated}}</h3> <span class="rht"> <span class="btn left right"><a role="button" href="#" data-action="view-full-msg">{{str_msg_view_btn_view_full}}</a></span> </span></div> ',inConvReplyBucketWithIcons:"conv-reply-buc-withicons",with_icons:'<div class="thread-footer withicons {{inConvReplyBucketWithIcons}}"> <span class="addconvtitle"> <a tabindex="0" href="#" data-action="reply_sender"> <i class="icon icon-reply"></i>{{str_reply}} </a> <a tabindex="0" href="#" data-action="reply_all"> <i class="icon icon-reply-all"></i>{{str_reply_all}} </a> <a tabindex="0" href="#" data-action="forward"> <i class="icon icon-forward"></i>{{str_forward}} </a> </span> <span class="card-actions-menu"> <a tabindex="0" href="#" data-action="menu"> <i class="icon icon-more"></i>{{str_more}} </a> </span></div>',with_icons_else:'<div class="thread-footer"> <span class="addconvtitle">{{str_reply_options}}</span> <span> | </span> <span class="card-actions-menu"><a tabindex="0" href="#" data-action="menu">{{str_more}}</a></span></div>',inConvReplyBucketBorder:'<div class="focusBorderDiv"></div>',thread_item:'<div data-mid="{{mid}}" class="thread-item {{expanded}} {{isUnread}} {{active}} {{hasDraft}} {{super_collapsed}} {{loadhide}}" data-action="select-thread" tabindex="0" aria-expanded="{{ariaExpanded}}" role="section"> <div class="thread-item-header" role="presentation"> <div class="contents" role="presentation"> <div class="icon info info-real {{flag_info}}" title="{{status_title}}" data-action="thread-item-unread"></div> <div class="icon info info-hover {{flag_info_hover}}" role="button" aria-label="{{mark_unread}}" title="{{status_title}}" data-action="thread-item-unread" tabindex="0"></div> <div tabindex="0" role="button" class="icon flag {{isFlagged}}" data-action="thread-item-flag" title="{{isFlagged1}} {{isFlagged_else}}" aria-label="{{isFlagged2}} {{isFlagged_else1}}"> </div> {{moneyball_native_format_flag}} {{from}} <span class="thread-snippet">{{snippet}}</span> <span class="load-error-msg"></span> <div class="recipients" tabindex="0" role="presentation" aria-label="{{ariaStr}}"> {{recipients}} </div> <span class="loader" role="presentation"></span> <div class="loz" role="presentation"> <span role="presentation" tabindex="-1" class="btn btn-contact lozenge small left right" data-action="contact-menu"> <a role = "button" title="{{str_btn_lozenge_attr}}" href="#" tabindex="-1" dir="{{msg_display_name_dir}}" role="presentation"></a> </span> </div> </div> <div class="thread-info" role="presentation"> {{hasDraft1}} {{hasAttachment}} <span class="thread-date" role="presentation"> <span class="short" title="{{received_date}}" role="presentation">{{date}}</span> </span> </div></div> <div class="thread-body" role="presentation"> {{msg_blocked}} <div class="body undoreset" tabindex="0"> {{msg_loading}} {{body}} </div> {{quoted_text_collapse}} {{quoted_text_expand}} {{msg_truncated}}</div>{{with_icons}}{{with_icons_else}}{{inConvReplyBucketBorder}} </div> ',notInMessageReadPaneV2:'<span class="more-icon icon icon-add"></span> ',inConvReplyBucketBorder1:'<div class="focusBorderDiv"> </div> ',super_collapsed_btn:'<div class="supercollapsed loadhide" data-action="thread-super-collapse" tabindex="0"> {{notInMessageReadPaneV2}} {{str_supercollapsed_show}} {{inConvReplyBucketBorder1}} </div> ',conv_loading:'<div class="conv-loading s-loader hidden"></div> ',anyUnread:"unread",anyFlagged:"flagged",anyFlagged1:"{{str_msg_list_convflagged_attr}}",anyFlagged_else:"{{str_msg_list_convflag_attr}}",anyFlagged2:"{{str_msg_list_convflagged}}",anyFlagged_else1:"{{str_msg_list_not_convflagged}}",mail_search_enabled:"</a>",inConvReplyBucketBorder2:'<div class="focusBorderDiv"> </div> ',folder_message:'<div role="presentation" aria-label="{{str_msg-view_message_header}} {{msg_subject}}" class="y-module message-header {{anyUnread}}"> <div aria-label="{{str_msg-view_message_header}}" class="focusholder" role="presentation"></div> <div tabindex="0" role="button" class="icon info info-unread" aria-label="{{ariaLabelStrMsgHeaderUnread}}" title="{{titleStrMsgHeaderUnread}}" data-action="thread-unread"></div> <div tabindex="0" role="button" class="icon flag {{anyFlagged}}" data-action="thread-flag" title="{{anyFlagged1}} {{anyFlagged_else}}" aria-label="{{anyFlagged2}} {{anyFlagged_else1}}"> </div> <h3 "{{msg_subjectDir}}"> <span class="thread-subject" title="{{msg_subject}}">{{msg_subject}}</span> <span class="summary">{{summary}}</span> {{mail_search_enabled}} </h3> {{inConvReplyBucketBorder2}} </div> ',inConvReplyBucketClass:"conv-reply-bucket-compose",inConvReplyBucketDummy:'<span class="addconvtitle">{{str_comp_click}} {{str_reply_options}}</span> ',inConvReplyBucketDummy_else:'<span class="addconvtitle">{{str_comp_click_replyall}}</span> ',popoutToolbar:"popout-toolbar",inConvReplyBucketBorder3:'<div class="focusBorderDiv"> </div> ',page_compose_email_else:"hidden",attached_files_else:"hidden",browser_plus_attach_else:"simple-upload {{attached_files_else}} ",browser_plus_attach:"<h2>{{str_rte_attachments_attach_files}}</h2> <h3>{{str_rte_attachments_drag_files}}</h3> ",transfer_error:"transfer-error",waiting:"in-queue ",image:'<div style="background-image:url({{thumbnailurl}});"></div> ',in_progress:'<div class="prog-indicator"> <div class="progress" style="width:{{progress}}%"></div> </div> ',browser_plus_attach1:'<li role="presentation" class="attachmentVisible {{transfer_error}} {{waiting}} {{type}}"> <div class="file-container"> {{image}} <b/></b> </div> <span class="fname">{{filename}}</span> {{in_progress}}</li>'
,waiting1:"in-queue ",in_progress1:"downloading ",transfer_error1:"lozengeerror",transfer_warn:"lozengewarn",retry:'<span role="presentation" class="btn lozenge lozengeretry small hidden"><a role="presentation" tabindex="-1" title="{{str_btn_retry_file_attr}}">&nbsp;<b></b></a></span>',transfer_error2:"lozengeerror-remove",browser_plus_attach_else1:'<li role="presentation" class="attachmentVisible {{waiting1}} {{in_progress1}} {{type}}"><div tabindex="-1" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" class="lozengeProgress"></div> <span role="presentation" class="btn lozenge {{transfer_error1}} left small"><a role="option" title="{{filesize}}" tabindex="-1" class="{{transfer_warn}}">{{filename}}</a></span>{{retry}}<span role="presentation" class="btn lozenge lozengeremove {{transfer_error2}} right small"><a role="presentation" tabindex="-1" title="{{str_btn_remove_file_attr}}">&nbsp;<b></b></a></span></li>',file_attach_files:"{{browser_plus_attach1}}{{browser_plus_attach_else1}} ",multiple_files_failed:"{{str_rte_attachments_error_mult}}",multiple_files_failed_else:"{{str_rte_attachments_error_single}}",attachments_error:"{{multiple_files_failed}} {{multiple_files_failed_else}} ",show_attachment_icon:'<div role="presentation" class="attachments-pane gwell rte-pane-fresh shaded" > <div role="group"> <form method="post" enctype="multipart/form-data" class="attachment-button-form" target="" action=""> <span class="icon icon-attachment attachment-button-attach" title="{{str_comp_attach_singular}}"> <input type="file" id="attachment-button-input" multiple="true" name="uploadfile" class="attachment-button-file" role="button" aria-label="{{str_comp_attach_singular}}" tabindex="0"/> </span> <span id="upload_file_selection" aria-hidden="true" class="hidden" title="{{str_comp_attach_singular}}"> <span id="uploader-v2"></span> </span> <span id="attach-btn-menu" aria-hidden="true" class="hidden icon icon-chevron-down attach-btn-menu" title="{{str_comp_attach_menu_title_fresh}}" data-action="menu"></span> </form> <span class="btn left right menu attachment-button-disabled hidden"> <a role="button" href="#" tabindex="-1" >{{str_comp_attach}}</a> </span> <span role="alert" class="switch-to-basic-link hidden"> {{str_rte_attachments_basic_message}} <a role="button" href="#">{{str_rte_attachments_basic_link_text}}</a>. </span> </div></div>',is_underline:'<span data-action="underline" tabindex="-1" role="button" class="icon icon-underline" title="{{str_rte_underline_attr}}"> </span> ',is_rtl:'<span id="btn-rtl" data-action="bidi" value="rtl" tabindex="-1" role="button" class="icon icon-rtl" title="{{str_rte_right_to_left}}"> </span> <span id="btn-ltr" data-action="bidi" value="ltr" tabindex="-1" role="button" class="icon icon-ltr" title="{{str_rte_left_to_right}}"> </span> ',is_rtl_else:'<span id="btn-ltr" data-action="bidi" value="ltr" tabindex="-1" role="button" class="icon icon-ltr" title="{{str_rte_left_to_right}}"> </span> <span id="btn-rtl" data-action="bidi" value="rtl" tabindex="-1" role="button" class="icon icon-rtl" title="{{str_rte_right_to_left}}"> </span> ',bidi:"{{is_rtl}} {{is_rtl_else}} ",spellCheckEnabled:'<span id="btn-spellchk" data-action="spellcheck" tabindex="-1" role="button" class="icon icon-check-spelling" title="{{str_rte_check_spelling_attr_fresh}}"> </span> <span id="btn-spell-langs" data-action="menu" tabindex="-1" role="button" aria-haspopup="true" title="{{str_toolbar_spelling_menu_toggle_attr_fresh}}" class="icon icon-chevron-down"> </span> ',show_formatter_well:'<div role="presentation" class="rte-pane-fresh format-pane gwell shaded"> <div role="group" class="format-inner"> <span id="btn-fontnamesize" class="icon icon-choose-font" data-action="menu" tabindex="-1" role="button" title="{{str_comp_font_menu_attr_fresh}}"> </span> <span data-action="bold" class="icon icon-bold" tabindex="-1" role="button" title="{{str_rte_bold_attr}}" > </span> <span data-action="italic" tabindex="-1" role="button" class="icon icon-italic" title="{{str_rte_italic_attr_fresh}}"> </span> {{is_underline}} <span id="btn-forecolor" data-action="menu" tabindex="-1" role="button" aria-haspopup="true" aria-label="{{str_rte_color_attr_fresh}}" class="icon icon-text-highlight" title="{{str_rte_color_attr_fresh}}"></span> <span id="btn-insertunordered" data-action="menu" tabindex="-1" role="button" class="icon icon-list-bullets" title="{{str_rte_list_menu_attr_fresh}}"></span> <span id="btn-indent" data-action="menu" tabindex="-1" role="button" class="icon icon-indent" title="{{str_rte_indentation_menu_attr_fresh}}"></span> <span id="btn-text-align" data-action="menu" tabindex="-1" role="button" aria-haspopup="true" class="icon icon-align-left" title="{{str_rte_text_alignment_menu_attr_fresh}}"></span> {{bidi}} <span data-action="insertlink" tabindex="-1" role="button" class="icon icon-link" title="{{str_rte_link_attr_fresh}}"> </span> <span id="emoticon" data-action="menu" tabindex="-1" role="button" aria-haspopup="true" class="icon icon-emoticons" title="{{str_comp_emoticons}}"> </span> <span class="om-buttons"></span> {{spellCheckEnabled}} <span id="switchtext-plain" class="switchtext btn-isPlain last icon icon-chevron-double-right" tabindex="-1" role="button" title="{{str_rte_richtext}}" target="plain-text"> </span> <span id="switchtext-rich" class="switchtext btn-isRich last hidden icon icon-chevron-double-left" role="button" title="{{str_rte_plaintext}}" target="rich-text"> </span> </div> </div> ',is_underline1:'<span data-action="underline" tabindex="-1" role="button" class="icon icon-underline" title="{{str_rte_underline_attr}}"> </span> ',is_rtl1:'<span class="seperator"></span> <span id="btn-rtl" data-action="bidi" value="rtl" tabindex="-1" role="button" class="icon icon-rtl" title="{{str_rte_right_to_left}}"> </span> <span id="btn-ltr" data-action="bidi" value="ltr" tabindex="-1" role="button" class="icon icon-ltr" title="{{str_rte_left_to_right}}"> </span> ',is_rtl_else1
:'<span class="seperator"></span> <span id="btn-ltr" data-action="bidi" value="ltr" tabindex="-1" role="button" class="icon icon-ltr" title="{{str_rte_left_to_right}}"> </span> <span id="btn-rtl" data-action="bidi" value="rtl" tabindex="-1" role="button" class="icon icon-rtl" title="{{str_rte_right_to_left}}"> </span> ',bidi1:"{{is_rtl1}} {{is_rtl_else1}} ",spellCheckEnabled1:'<span id="btn-spellchk" data-action="spellcheck" tabindex="-1" role="button" class="icon icon-check-spelling" title="{{str_rte_check_spelling_attr_fresh}}"> </span> <span id="btn-spell-langs" data-action="menu" tabindex="-1" role="button" aria-haspopup="true" title="{{str_toolbar_spelling_menu_toggle_attr_fresh}}" class="icon icon-chevron-down"> </span> ',show_popout_toolbar:'<div role="presentation" class="rte-pane-fresh format-pane gwell shaded"><div role="group" class="format-popout"> <a role="presentation" tabindex="-1" class="tool format-tool" href="#"> <span class="format-popout-icon tool-icon" tabindex="-1" role="button" aria-haspopup="true" title="{{str_rte_formating_options}}">Aa</span> <div class="format-popout popout"> <div class="popout-inner"> <span id="btn-fontnamesize" class="icon icon-choose-font" data-action="menu" tabindex="-1" role="button" title="{{str_comp_font_menu_attr_fresh}}"> </span> <span data-action="bold" class="icon icon-bold" tabindex="-1" role="button" title="{{str_rte_bold_attr}}" > </span> <span data-action="italic" tabindex="-1" role="button" class="icon icon-italic" title="{{str_rte_italic_attr_fresh}}"> </span> {{is_underline1}} <span id="btn-forecolor" data-action="menu" tabindex="-1" role="button" aria-haspopup="true" aria-label="{{str_rte_color_attr_fresh}}" class="icon icon-text-highlight" title="{{str_rte_color_attr_fresh}}"> </span> <span class="seperator"></span> <span data-action="insertunorderedlist" class="icon icon-list-bullets" title="{{str_rte_bullet_list_attr}}" role="button" > </span> <span data-action="insertorderedlist" class="icon icon-list-numbers" title="{{str_rte_numbered_list_attr}}" role="button" > </span> <span class="seperator"></span> <span data-action="indent" class="icon icon-indent" title="{{str_menu_indent}}" role="button" > </span> <span data-action="outdent" class="icon icon-outdent" title="{{str_menu_outdent}}" role="button"> </span> <span class="seperator"></span> <span data-action="align-l" class="icon icon-align-left" title="{{str_rte_align_l}}" role="button"> </span> <span data-action="align-c" class="icon icon-align-center" title="{{str_rte_align_c}}" role="button"> </span> <span data-action="align-r" class="icon icon-align-right" title="{{str_rte_align_r}}" role="button"> </span> {{bidi1}} </div> </div> <div class="notch border-notch"></div> <div class="notch"></div> </a> <span data-action="insertlink" tabindex="-1" role="button" class="icon icon-link" title="{{str_rte_link_attr_fresh}}"> </span> <span id="emoticon" data-action="menu" tabindex="-1" role="button" aria-haspopup="true" class="icon icon-emoticons" title="{{str_comp_emoticons}}"> </span> {{spellCheckEnabled1}} <span id="switchtext-plain" class="switchtext btn-isPlain last icon icon-chevron-double-right" tabindex="-1" role="button" title="{{str_rte_richtext}}" target="plain-text"> </span> <span id="switchtext-rich" class="switchtext btn-isRich last hidden icon icon-chevron-double-left" role="button" title="{{str_rte_plaintext}}" target="rich-text"> </span></div></div>',ca_icon:"<div class=\\'ca-showhide-ctrl\\' aria-hidden=\"true\"> <button class=\\'btn-ca-showhide icon icon-add ca-content-visible\\'></button></div>",message_selection_else:'{{folder_message}}  <div class="thread-item-list" tabindex="-1"> {{page_loading}} {{thread_item}} {{super_collapsed_btn}} {{qr_bar}} <div class="add-to-conv loadhide" data-action="thread-item-replyall" aria-label="{{str_comp_click_replyall}}" tabindex="0">  <div class="compose {{inConvReplyBucketClass}}"> <div class = "composeshim"></div> <div class = "composebtnshim"></div> <table role="presentation" border="0" style="margin:0;width:100%;border-spacing:0; border-collapse:collapse;"> <tbody role="presentation"> <tr role="presentation"> <td role="presentation"> <div class="compose-header"> <div class="reply-text"> {{inConvReplyBucketDummy}} {{inConvReplyBucketDummy_else}} </div> </div> </td> </tr> <tr role="presentation"> <td role="presentation"> <div class="dummy-compose-msg"> </div> </td> </tr> <tr role="presentation"> <td role="presentation" style="padding-bottom:5"> <div tabindex="0" aria-label="{{str_aria_label_attachments}}" class="attachments-well {{page_compose_email_else}} {{browser_plus_attach_else}}"> <div class="attachments-welcome"> {{browser_plus_attach}} </div> <div class="attachments-header hidden"> <div class="error hidden"> <span>{{str_comp_attach_upload_error}}</span> <a role="button" href="#" class="dismiss">{{str_comp_attach_dismiss}}</a> </div> <div class="self-close-msg hidden"> <span></span> </div> <ul class="info hidden"> <li> <h3 id="total-attached"><span class="totalAttached">0</span> {{str_comp_attachments}}</h3> </li> <li> <a class="removeAll" role="button" href="#" aria-labelledby="total-attached" title="{{str_comp_attach_removeall}}">{{str_comp_attach_removeall}}</a> </li> </ul> </div> <ul role="list" aria-label="{{str_aria_label_image_attachments}}" aria-live="polite" class="thumbnails-attach"></ul> <ul role="list" aria-label="{{str_aria_label_file_attachments}}" aria-live="polite" class="file-attach hidden"> {{file_attach_files}} </ul> <div role="alert" class="error transfer-error hidden"> <span class="attachmenterror"> {{attachments_error}} </span> </div></div> </td> </tr> <tr role="presentation"> <td role="presentation" class="footer-separator"> <div class="bottomToolbar {{popoutToolbar}}"> <span class="btn default" data-action="send" role="button"> <a tabindex="-1" href="#" title="{{str_comp_send_attr}}">{{str_comp_send}}</a> </span> <div class="rte-well-container" role="toolbar">{{show_attachment_icon}}{{show_formatter_well}}{{show_popout_toolbar}}</div>{{ca_icon}} </div> </td> </tr> </tbody> </table> {{inConvReplyBucketBorder3}} </div> </div> {{/qr_bar}} {{conv_loading}} </div>'
}},"1.0.0");


YUI.add("mail-controller-conversations",function(e){function g(){p&&(p=null),p={gdmHit:0,gdmMiss:0,gdmAdd:0,gdmUsed:0,lmtHit:0,lmtMiss:0,lmtAdd:0,lmtUsed:0,batchHit:0,batchMiss:0}}function y(e,t,n){l.park(t,n)}function b(e,t,n,r){l.unpark(t,r)}function w(t,n){n.cbk.stopwatch&&(n.cbk.stopwatch.getListBegin=new Date),e.Lang.isUndefined(t.nextprev)||delete t.nextprev}function E(t,n,r){var i;n.cbk.stopwatch&&(n.cbk.stopwatch.getListEnd=new Date);var o=t.conversations.length,u=[],a,l,c=0,h,p=t.folder;if(p.total&&!o&&p.folderInfo.fid!=="%40B%40Bulk"){t.code="ResponseCountMismatch",r("failure");return}for(l=0;l<o;l++)h=t.conversations[l].conversation.messageInfo[0].receivedDate,h>c&&(c=h);i=(new Date).getTime();for(l=0;l<o;l++)a=s.toConvInfo(t.folder.folderInfo.fid,t.conversations[l]),a.snapshotTime=c,a.reqTime=i,u.push(a);t.convInfo=u,e.common.Utils.features.enabled("enableListReconciliation")&&(t.folder.totalConversations=S(u,t.folder.totalConversations)),s.removeFromMovingCache(),s.threadUpdate(u,n.origParms.fid),p&&!n.batch&&!n.origParms.nextprev&&!n.origParms.start&&f.Folders.set(p,null,n.reason)}function S(e,t){var n,r,i,o,u,f,l;for(n=0;n<e.length;n++){u=a(e[n].cid),f=e[n].fid,l=s.isConvLocked(u),i=s.isConvRemoved(e[n]);if(i){e.splice(n,1),n--,t--;continue}r=s.isCached(f,u),r&&(r.checksum!==e[n].checksum?s.compareConvSummaries(e[n],r)?s.updateChecksum(u,f,e[n].checksum):(s.areNewMsgsAdded(e[n],r)||(o=s.get(f,u),o&&(e[n]=s.get(f,u))),l||s.removeFromCache(u,f)):(o=s.get(f,u),o&&(e[n]=s.get(f,u))))}return t}function x(e,t){s.set(e,t)}function T(){}function N(){}function C(e,t,n){if(e.errors&&e.errors.length!==0)return n("failure"),h._error(t.origParms,e.errors[0])}function k(){}function L(e,t,n){function i(e,t){return s.isCached(e,t)?s.get(e,t,!0):null}function o(e,t){return e.checksum&&e.checksum===t.checksum}var r;if((r=i(e.fid,e.cid))&&o(r,e)&&!e.force)return t.cbk&&(t.cbk.respProps={wasCached:!0}),n("success"),r;e.prime=e.cachekey||"Prime",t.cbk&&(t.cbk.respProps={wasCached:!1})}function A(t){var n=t.conv,r;!s.isCached(t.fid,n.conversation.cid)&&n.messageInfo&&e.Lang.isArray(n.messageInfo)&&n.messageInfo.length&&(n.conversation.summary.iDate=s.getAnchorDate(t.fid,n),r=(new Date).getTime(),x(n,r),X(a(n.conversation.cid),!0))}function O(e){var t=e.msgObj;t&&t.mid&&X(u(t.mid),!1)}function M(t,n,r){var i,o,u=n.origParms;if(t.code&&(t.code===5001||t.code==="EC-4001")&&t.message&&t.message.indexOf("no results returned from filters $..midscids[")>=0){r("failure");return}return t.messageInfo&&e.Lang.isArray(t.messageInfo)&&t.messageInfo.length?(u.cid&&u.cid!=="$(cid)"&&(t.conversation.cid=u.cid),o=t.conversation.cid,u.anchorDate&&(t.conversation.summary.iDate=u.anchorDate),i=(new Date).getTime(),x(t,i)):o=t.cid,n.resp&&n.resp.callPerf&&n.cbk&&(n.cbk.respProps=n.cbk.respProps||{},n.cbk.respProps.callPerf=n.resp.callPerf),s.get(u.fid,o,!0)}function _(e){if(e.code==="Client.InvalidConvId"||e.code==="Server.InvalidConvId")e.convPermDeleted=!0}function D(t,n,r,o){function N(){t.silentFetch||U(w,E,r),n&&n.success(x)}function C(e){return n&&n.taeUiCbk?n.taeUiCbk(e):!1}var l,c,h,p,d,v,m,g,y,b,w,E,S={},x,T=[];return l=f.batch(),t.cid||(b=s.midToConv(t.cfid,t.msg.mid),b?(t.cid=b.cid,t.checksum=b.checksum):T.push(l.Conversations.map({chain:{id:"getcids",api:"GetCids"},fid:t.cfid,mids:[t.msg.mid]},function(e,t,r){r==="failure"&&n&&n.failure(e)}))),g={chain:{id:"listmessagesinthread",api:"ListMessagesInThread"},fid:t.cfid},t.cid?(g.cid=t.cid,g.checksum=t.checksum):(NeoConfig.hasConvV3&&(g.chain.filter=H("getcid"),g.cid="$(cid)"),g.chain.parameter=[{source:"getcids.midscids[0].cid",destination:"listmessagesinthread.cid"}],g.chain.dependency=["getcids"]),t.ovparams.force&&(g.force=t.ovparams.force),d=n&&n.openedFrom||"missing",T.push(l.Conversations.get(g,{success:function(o,u,f){var l,h,p,d,v,m,g=!0;f!=="aborted"&&f!=="failure"&&(!o||!o.cid||!o.msgs||!o.msgs[0])&&(g=!1,e.fire("MailLog",{m:"Invalid conversation response",condt:f,cid:o?o.cid:"",mid:o?e.Lang.isArray(o.msgs)?o.msgs[0].mid:"Invalid msg list":""}));if(f==="failure"||!g)n&&n.failure(o);else{u&&u.respProps&&(n.respProps=u.respProps,w=u.respProps.wasCached===!0),d=a(o.cid),t.silentFetch||(w||X(d,!0),V(d,!0)),x=o,p=x.msgs.length,w&&r&&(o.chainedLMTMsg=NeoConfig.hasConvV3?F(t.cfid,x,j(t.cfid,x)):x.msgs[0],o.chainedLMTId="listmessagesinthread");for(l=0;l<x.msgs.length;l++){x.msgs[l].header||(x.msgs[l]=i.Messages.toMessage(t.cfid,x.msgs[l]));if(x.msgs[l].fid==="Draft"&&t&&t.newMsg){v=t.oldMsgCnt||0;for(h=0;h<x.msgs.length;h++)if(x.msgs[h].mid===t.newMsg.mid){m=x.msgs[h];break}m&&m.inReplyTo===x.msgs[l].inReplyTo&&x.msgs.length-1>v&&(x.msgs.splice(l,1),x.midMap.splice(l,1))}}p!==x.msgs.length&&(x=s.calcConvSummary(x)),x.msgs=R(x.msgs),x.msgs.reverse(),x.midMap=q(x);if(!r){N();return}c&&(x.fullmsg=c,N())}},notify:n.notify,errorPosition:n.errorPosition||100,suppressNotification:n.suppressNotification,convOrigin:n.convOrigin||"regular",taeUiCbk:C,retryCodes:n.retryCodes,openedFrom:d})),r&&(t.fid==="%40C%40Chats"&&(S={displayPref:"text/json",urlDetection:!1,emailDetection:!1,annotateOption:{annotateText:"none"}}),y={chain:{id:"getdisplaymessage",api:"GetDisplayMessage"},fid:t.mfid,snapshotTime:t.snapshotTime,ovparams:S,cachekey:"Prime"},t.msg?(y.msg=t.msg,y.mid=t.msg.mid):(NeoConfig.hasConvV3&&(y.chain.filter=B(t.cfid,o),y.fid="$(fid)"),y.chain.parameter=[{source:"listmessagesinthread.messageInfo[0].mid",destination:"getmessage.message[0].mid"}],y.chain.dependency=["listmessagesinthread"]),y.ofid=t.mfid||t.cfid||null,T.push(l.Messages.get(y,function(r,i,s){var o,a=!0;s!=="failure"&&s!=="aborted"&&(!r||!r.mid)&&(e.fire("MailLog",{m:"Invalid GDM response",resp:parseInt(NeoConfig.log_error_response,10)===1?r:"filtered",condt:s}),a=!1);if(s==="failure"||!a){n&&n.failure(r);return}s==="success"&&(i&&i.respProps&&(n.respProps=i.respProps,E=i.respProps.wasCached===!0),o=u(r.mid),t.silentFetch||(E||X(o,!1),V(o,!1)),c=r,x&&(x.fullmsg=c,N()))}))),h=n&&n.errorPosition||100
,p=n&&n.suppressCodes||[],m=n&&n.convOrigin,v=n&&n.retryCodes,l.setAsReadOp(!0),l.execute({errorPosition:h,suppressCodes:p,suppressNotification:n.suppressNotification,openedFrom:d,taeUiCbk:C,retryCodes:v,convOrigin:m}),T}function P(e,t,n,r,i){function h(e,t,n){n!=="failure"&&(z(e,t,n),t&&t.respProps&&t.respProps.wasCached===!0&&(e.chainedLMTMsg=NeoConfig.hasConvV3?F(e.fid,e,j(e.fid,e)):e.msgs[0],e.chainedLMTId=l))}var o,u,a,f,l,c;if(c=s.get(n,r.cid,!1))u=NeoConfig.hasConvV3?F(n,c,j(n,c)):c.msgs[0];NeoConfig.hasConvV3?(l="LMT_"+t,u?o=u.sourceFolderInfo.fid:(l="LMT_"+t,o=n==="Draft"?"Draft":"$(fid)",u=r.msgs[0],e.Conversations.get({chain:{id:l,api:"ListMessagesInThread"},fid:n,cid:r.cid,checksum:r.checksum,cachekey:i,anchorDate:r.anchorDate,prefetch:!0},{success:h,suppressCodes:["*"],backgroundLogs:["*"]}),a={id:"GDM_"+t,api:"GetDisplayMessage",filter:B(n,r),parameter:[{source:"listmessagesinthread.messageInfo[0].mid",destination:"getmessage.message[0].mid"}],dependency:[l]}),f={fid:o,msg:null,cachekey:i,prefetch:[u]},a&&(f.chain=a),e.Messages.get(f,{success:W,suppressCodes:["*"],backgroundLogs:["*"]})):(u||(e.Conversations.get({fid:n,cid:r.cid,checksum:r.checksum,cachekey:i,anchorDate:r.anchorDate,prefetch:!0},{success:h,suppressCodes:["*"],backgroundLogs:["*"]}),u=r.msgs[0]),e.Messages.get({fid:I(u),msg:null,cachekey:i,prefetch:[u]},{success:W,suppressCodes:["*"],backgroundLogs:["*"]}))}function H(e,t){var n;switch(e){case"latest":case"eu":case"folder":n={iterator:e==="latest"?"$..messageInfo[0]":e==="eu"?"$..messageInfo[?(@.flags.isRead==0)][-1:]":"$..messageInfo[?(@.sourceFolderInfo.fid=='"+t+"')][0]",select:{mid:"$..mid",fid:"$..sourceFolderInfo.fid"}};break;case"getcid":n={iterator:"$..midscids[0]",select:{cid:"$..cid"}}}return n}function B(e,t){return H(j(e,t),e)}function j(e,t){return e==="Sent"||e==="Draft"?"folder":t.totalUnread>0&&t.totalMsgs>1?"eu":"latest"}function F(e,t,n){var r,i,s;for(r=0;r<t.msgs.length;r++){i=t.msgs[r];if(n==="latest")return i;if(n==="folder"&&t.msgs[r].sourceFolderInfo.fid===e)return i;i.flags.isRead===0&&(s=i)}return s||(s=t.msgs[0]),s}function I(e){return e.fid||(e.folderInfo&&e.folderInfo.fid?e.folderInfo.fid:e.sourceFolderInfo&&e.sourceFolderInfo.fid?e.sourceFolderInfo.fid:this.fid)}function q(e){var t=[],n,r;for(n=0;n<e.msgs.length;n++)r=e.msgs[n],t.push({mid:r.mid,fid:r.fid});return t}function R(e){var t,n=[],r=[],i,s;for(t=0;t<e.length;t++){if(e[t].sourceFolderInfo.fid==="Draft"){n.push(e[t]);continue}i=0,s=n.length;while(s>0&&i<s)e[t].mimeMsgId===n[i].inReplyTo?(n[i].oMsgMid=e[t].mid,r.push(n.splice(i,1)[0]),s--):i++;r.push(e[t])}i=0,s=n.length;while(s>0)r.push(n.splice(0,1)[0]),s--;return r}function U(e,t,n){p[e?"lmtHit":"lmtMiss"]++,n&&(p[t?"gdmHit":"gdmMiss"]++,p[e&&t?"batchHit":"batchMiss"]++)}function z(e,t,n){var r;n!=="failure"&&(!t||!t.respProps||!t.respProps.wasCached)&&(r=a(e.cid),X(r,!0))}function W(e,t,n){var r;n!=="failure"&&(!t||!t.respProps||!t.respProps.wasCached)&&(r=u(e.mid),X(r,!1))}function X(e,t){var n=t?v:m;n[e]&&J(t),n[e]=0,p[t?"lmtAdd":"gdmAdd"]++}function V(e,t){var n=t?v:m;n[e]|=1}function $(e){var t=0;for(var n in e)(e[n]&3)===1&&(e[n]|=2,t++);return t}function J(e){var t=e?v:m;p[e?"lmtUsed":"gdmUsed"]+=$(t)}var t,n=e.mail,r=n.model.ConvStore,i=n.model.DataStore,s=r.Conversations,o=i.Messages,u=o.getPermMidPart,a=s.getPermCidPart,f=n.Controller,l=n.ParkQueue,c={passthru:{list:"ListFolderThreads",get:"ListMessagesInThread",map:"GetCids"}},h,p,d=43e3,v={},m={};c.batchable=c.passthru,c.entity="cids",h=f.extend("Conversations",c),h.bulkOps={remove:{bs:100,min:100,max:1e3},flag:{bs:100,min:100,max:1e3},move:{bs:100,min:100,max:1e3},spam:{bs:10,min:10,max:20,fixed:10}},t=c.order,e.mix(h,{getConv:D,batchAddConvPrefetch:P,preset:A,presetMsg:O,_reconcileListConvs:S}),h.hook("list",{pre:w,success:E,failure:T}),h.hook("get",{pre:L},t.cacheCheck),h.hook("get",{success:M,failure:_}),NeoConfig.hasConvPerf&&(h.hook("get",{pre:y},t.gdmDelay),h.hook("get",b,t.unpark)),h.hook("map",{pre:N,success:C,failure:k}),g(),setInterval(function(){J(!0),J(!1),g()},d)},"1.0.0",{requires:["launch-utils","mail-controller-parkqueue","mail-controller-base","mail-controller-folders","common-persist-user-data","mail-model-convstore","mail-model-datastore"]});


YUI.add("mail-model-convstore",function(e){function m(t){try{e.fire.apply(e,t)}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-model-convstore:1",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-model-convstore:1"),e.use("common-utils-error",function(){var e=t[1]&&h.isString(t[1])?t[1]:"";p.error.report("convstore error for "+t[0]+e,n,1,1,1)})}}e.namespace("mail.model");var t="ds:conv:",n="ds:msg:",r="change",i="refresh",s="remove",o="reg",u="unreg",a="Trash",f="%40B%40Bulk",l="invalidarg",c=e.mail,h=e.Lang,p=e.common.Utils,d=500,v=c.model.ConvStore={};e.mix(v,{Conversations:function(){function S(e,t){return x(e,t)}function x(e,t){return T(t)[q(e)]}function T(e){var t=e===a?e:"Norm";return v[t]=v[t]||{},v[t]}function N(e,t,n){var r,i,s,o,u,a,f;if(!(u=x(t,e)))return null;if(n&&u){a=b.olist;for(s=0;s<a.length;s++)if(a[s].cid===t){o=a.splice(s,1),a.push(o[0]);break}}f=p.wcopy(u);if(f.sparse)return f;f.msgs=[],J();for(s=0;s<f.midMap.length;s++){r=E.get(f.midMap[s].fid,f.midMap[s].mid);if(!r)return null;i=r.header?E.toMessageInfo(f.midMap[s].fid,r):r,f.msgs.push(i)}return f}function C(e,t,n){var r={messageInfo:e.messageInfo,folder:{folderInfo:{fid:t}},conversation:{cid:e.cid,summary:e.summary}};L(r,n)}function k(e){var t;t=q(e.cid),T(e.fid)[t]=e,g[t]={fid:e.fid}}function L(e,n){function x(e,t){var n=0,r,i,s,o,u;u=e.fid,o=b.olist,s=T()+t;while(n<o.length&&s>b.maxmsgs)y[q(o[n].cid)]?n++:(r=o.splice(n,1),r[0].cid!==e.cid&&(i=F(r[0].cid,r[0].fid,!0),i&&(s-=i.midMap.length)));o.push({fid:e.fid,cid:e.cid})}function T(){var e,t,n=0;for(t in v)for(e in v[t])v[t][e].sparse||(n+=v[t][e].midMap.length);return n}function N(e,t){var n,r,i=e.messageInfo,s=e.folder.folderInfo.fid,o=I(s,e.conversation,i[0]);m(["MailLog",{m:"Set conversation cache info",cid:o.cid}]),o.reqTime=t,o.midMap=[],x(o,i.length);for(r=0;r<i.length;r++)n=i[r],o.midMap.push({mid:n.mid,fid:j(n,s)}),A(n,o);return k(o),W(o),o}var r=h.isArray(e),s=r?e:[e],o=[],u,a,f,l,c,d,g,w,S;J();for(f=0;f<s.length;f++){l=s[f],u=D(l.folder.folderInfo.fid,l.conversation.cid);if(u)for(c=0;c<u.midMap.length;c++){d=u.midMap[c],S=E.get(d.fid,d.mid);if(S){for(g=0;g<l.messageInfo.length;g++){w=l.messageInfo[g];if(w.mid===d.mid)break}(g>=l.messageInfo.length||j(w,l.folder.folderInfo.fid)!==d.fid)&&E.removeConvMsg(d.fid,d.mid,!1)}}a=N(s[f],n),o.push(p.wcopy(a))}o.length&&m([t+i,"lmt",null,o])}function A(e,t){H(e,t.cid),B(e,j(e,t.fid)),E.syncConvHeader(j(e,t.fid),e)}function O(e,t){var n=t.conversation,r=n.recentMsg?n.recentMsg:n.messageInfo[0],i=I(e,n,r);return H(r,i.cid),i.msgs=[p.wcopy(r)],i}function M(e,t){var n,r,i,s,o=p.wcopy(t);o.msgs=[],o.anchorDate=null,J();for(n=0;n<t.midMap.length;n++){s=t.midMap[n].fid===e,r=E.get(t.midMap[n].fid,t.midMap[n].mid);if(!r)break;i=r.header?E.toMessageInfo(t.midMap[n].fid,r):r,i.fid||(i.fid=t.midMap[n].fid),o.msgs.push(i);if(s&&!o.anchorDate||e==="Draft")o.anchorDate=i.receivedDate}return o.midMap=null,o}function _(e,t){var n;for(n=0;n<t.messageInfo.length;n++)if(t.messageInfo[n].sourceFolderInfo.fid===e)return t.messageInfo[n].receivedDate;return null}function D(n,r){var i=h.isString(r)||!r?r:r.cid,s,o,u;(!n||!i)&&e.error(t+"get:"+l),J(),s=x(i,n);if(s&&!s.sparse){for(o=0;o<s.midMap.length;o++){u=E.get(s.midMap[o].fid,s.midMap[o].mid);if(!u)return!1}return s}return!1}function P(e,t){var n,r,i;J();if((r=E.get(e,t))&&r.cid&&(i=D(e,r.cid)))for(n=0;n<i.midMap.length;n++)if(E.getPermMidPart(i.midMap[n].mid)===E.getPermMidPart(r.mid))return i;return null}function H(e,t){e.cid=t}function B(e,t){e.fid=t}function j(e,t){return e.fid||(e.folderInfo&&e.folderInfo.fid?e.folderInfo.fid:e.sourceFolderInfo&&e.sourceFolderInfo.fid?e.sourceFolderInfo.fid:t)}function F(e,t,n){var r,i=x(e,t);if(i){if(!i.sparse)for(r=0;r<i.midMap.length;r++)E.removeConvMsg(i.midMap[r].fid,i.midMap[r].mid,n);delete T(t)[q(e)]}return i}function I(t,n,r){var i={cid:n.cid||"",fid:t,snapshotTime:r.receivedDate,checksum:n.summary.checksum,totalMsgs:n.summary.totalMsgs,totalUnread:n.summary.unreadMsgs,totalFlagged:n.summary.flaggedMsgs,totalDraft:n.summary.hasDraft?1:0,totalHasAttach:n.summary.hasAttachment?1:0,subject:n.summary.totalMsgs>1?n.summary.subject:r.subject,subjectDir:n.summary.totalMsgs>1?n.summary.subjectDir:r.subjectDir,anchorDate:n.summary.iDate,recipients:n.summary.participantList,msgCountsByFolder:n.summary.msgCountsByFolder,flags:r.flags?e.clone(r.flags):{},recentmid:r.mid,snippet:r.snippet,receivedDate:r.receivedDate};return i}function q(t){var n;return h.isString(t)?n=t.lastIndexOf("_"):(n=-1,e.fire("MailLog",{m:"Invalid cid during getPermCidPart: "+t})),n<0?t:t.substr(n)}function R(e,t){return e===a?t===a:t!==a}function U(e,t){return e&&t&&q(e.cid)===q(t.cid)&&R(e.fid,t.fid)}function z(e,t){return!e||!t||t==="Draft"?!1:NeoConfig.hasConvV3?!0:e.totalMsgs===1?!0:t==="Sent"?!1:e.totalUnread===0&&e.msgs&&(e.msgs[0].fid&&e.msgs[0].fid!=="Draft"||e.msgs[0].sourceFolderInfo&&e.msgs[0].sourceFolderInfo.fid!=="Draft")?!0:!1}function W(t){function s(n,r,i,s){m(["MailLog",{m:"Updating conversation flags",cid:t.cid,msgfid:i,msgmid:s}]);var o,u;o=E.get(i,s);if(!o){e.common.Utils.log({m:"msgInfo is undefined",cid:t.cid,msgfid:i,msgmid:s},!0,"UndefinedObject");return}u=o.flags,it(n.msgCountsByFolder,u.isRead,i),n.totalUnread+=u.isRead?0:1,n.totalFlagged+=u.isFlagged?u.isFlagged:0,n.totalDraft+=j(o,r)==="Draft"?1:0,n.totalHasAttach+=u.hasAttachment?u.hasAttachment:0}var n,r,i;t.totalMsgs=t.midMap.length,t.recentmid=t.totalMsgs?t.midMap[0].mid:"",i={totalUnread:0,totalFlagged:0,totalDraft:0,totalHasAttach:0,msgCountsByFolder:[]};for(n=0;n<t.totalMsgs;n++)s(i,t.fid,t.midMap[n].fid,t.midMap[n].mid);m(["ConvStore:calcConvSummary",t,i]);for(r in i)t[r]=i[r];return t}function X(e,t,n,r,i,s,o,u){var a,f,l;m(["MailLog",{m:"Update conversation summaries"}]),J();for(var c in t)c&&(a=x(c,n))?(f=p.wcopy(a),u&&u.func&&(l=u.func(f,u.args)),W(f),T(n)[q(c)]=f):f=a={cid:c,sparse:!0,moved:!0},i.push
(p.wcopy(f)),r.push(a),s.push(p.diff(f,a)),o&&o.push(l)}function V(e,n,i,s){function y(t,n){var r,i,s,f,l;for(i=0;i<n.data.length;i++){f=n.data[i],l=j(f,t.fid);for(r=t.midMap.length-1;r>=0;r--){s=E.get(t.midMap[r].fid,t.midMap[r].mid);if(s){u=s.receivedDate||s.header&&s.header.receivedDate;if(u>=f.receivedDate)break}}o=E.get(l,f.mid),t.midMap.splice(r+1,0,{mid:f.mid,fid:l}),o?E.syncConvInfo(l,{mid:f.mid,cid:e,newmsg:f}):A(f,t)}return a}var o,u,a=h.isArray(i)?i:[i],f=n?"Trash":"Inbox",l=[],c=[],p=[],d=[],v={},g="msg:add";J(),v[e]=1,X(g,v,f,c,l,p,d,{func:y,args:{data:a}}),s&&(s.cachedMsg=o),m([t+r,g,c,l,p,d,s])}function $(){v={},g={},y={},b={olist:[],maxmsgs:d,sync:{}},E=null}function J(){E||(E=c.model.DataStore.Messages,E.setConvStore(c.model.ConvStore.Conversations))}function K(e,n,i,s,o,u,l){var c,h=i?i.length:0,p,d={},v=u||"",g=[],y=[],b=[],w={},E="msg:"+o;w.fid=e,w.srcFid=v,w.mids=[];if(o.indexOf("conv_")===0)return;for(c=0;c<h;c++)o==="move"&&v!==a&&v!==f&&e!==a&&e!==f&&F(i[c].cid,i[c].fid,!1),i[c].cid&&(p=i[c].cid,d[p]||(d[p]=1),w.mids[c]=i[c].mid);w=e===v?{}:w,X(E,d,e,y,g,b),l&&l.fromSearch&&(w.fromSearch=l.fromSearch),l&&l.fromConv&&(w.fromConv=l.fromConv),m([t+r,E,y,g,b,w])}function Q(e,n,i,s,o){function b(e,t){var n,r;for(n=0;n<t.data.length;n++)for(r=0;r<e.midMap.length;r++)if(e.midMap[r].mid===t.data[n].mid){e.midMap.splice(r,1);break}}var u,l,c="msg:remove",p=h.isArray(n)?n:[n],d={},v=[],g=[],y=[];if(!i&&s&&s!==a&&s!==f&&e!==a&&e!==f)return;J();for(u=0;u<p.length;u++)l=p[u].cid,d[l]||(d[l]=1);X(c,d,e,g,v,y,null,{func:b,args:{data:p}}),m([t+r,c,g,v,y,o])}function G(e){var t=q(e);y[t]||(y[t]=0),y[t]++}function Z(t){var n=q(t);e.Lang.isUndefined(y[n])||(y[n]--,y[n]<=0&&delete y[n])}function et(n,r){var s,o,u;for(s=0;s<n.length;s++)o=q(n[s].cid),!e.Lang.isUndefined(y[o])&&y[o]>0&&(u=u||{},u[o]=n[s]);u&&m([t+i,"lft",r,u])}function tt(e,t){var n=0;if(e.msgs){for(n=0;n<e.msgs.length;n++)if(e.msgs[n].flags.isRead!==t.isRead)return!1;return!0}return e.flags?e.flags.isRead===t.isRead:!1}function nt(n,i,s,o){var u,a,f,l,c=s.flags,d,v,g,y=[],b=[],w=[],S=c.isRead!==undefined;h.isArray(i)||(i=[i]),J();for(d=0;d<i.length;d++){u=i[d];if(u.cid&&(a=D(n,u.cid))){for(v=0;v<a.midMap.length;v++)E.update(a.midMap[v].fid,{mid:a.midMap[v].mid},s,o);g={},g[u.cid]=1,X(o,g,n,y,w,b)}else{if(S&&tt(u,c))continue;a=u,f=p.wcopy(u),f.msgCountsByFolder&&(f.msgCountsByFolder[0].fid=f.msgCountsByFolder[0].fid==="Bulk%20Mail"&&f.flags&&f.flags.isSpam?"%40B%40Bulk":f.msgCountsByFolder[0].fid),e.Lang.isUndefined(c.isFlagged)||(f.totalFlagged=c.isFlagged?f.totalMsgs:0),e.Lang.isUndefined(c.isRead)||(f.totalUnread=c.isRead?0:f.totalMsgs,rt(f.msgCountsByFolder,c.isRead)),f.sparse=1,l={},E.applyDiff(l,u.msgs[0],s),f.msgs=[l],k(f),w.push(p.wcopy(f)),y.push(a),b.push(p.diff(f,a))}}y.length&&m([t+r,o,y,w,b,undefined,s])}function rt(e,t){var n;if(e)for(n=0;n<e.length;n++)t?e[n].unread=0:e[n].unread=e[n].total}function it(e,t,n){var r,i=-1;for(r=0;r<e.length;r++)e[r].fid===n&&(i=r);i===-1&&(i=e.length,e.push({fid:n,total:0,unread:0})),e[i].total+=1,e[i].unread+=t?0:1}function st(e,n,i,s,o){var u,a,l,c,h,d=[],v=[],g=[],y=0;while(u=i[y++])a=p.wcopy(w[u]||{cid:u,fid:e}),w[u]&&(w[u]={receivedDate:w[u].receivedDate,fid:w[u].fid,movedAt:w[u].movedAt}),a.msgs&&(a.msgs.splice(1,a.msgs.length-1),c=j(a.msgs[0],e)),l=p.wcopy(a),l.fid=n,l.sparse=1,l.msgs&&(h=c!=="Draft"&&c!=="Sent"?n:c,l.msgs[0].folderInfo={fid:h,name:h},l.msgs[0].sourceFolderInfo={fid:h,name:h}),n!==f&&F(u,n,!1),d.push(a),v.push(l),g.push(p.diff(l,a));d.length&&m([t+r,o,d,v,g]),window.CollectGarbage&&window.CollectGarbage()}function ot(n,r,i){var o,u,a,f,c,d=[],v=b.olist,g=(new Date).getTime(),y=!i;h.isArray(r)||(r=[r]),J(),n||e.error(t+"remove:"+l);for(o=0;o<r.length;o++){a=r[o];if(!a||!a.cid)continue;f=F(a.cid,n,!1);for(u=0;u<v.length;u++)if(v[u].cid===a.cid){v.splice(u,1);break}a&&!a.fid&&(a.fid=n),c=p.wcopy(a),w[a.cid]=c,w[a.cid].fid=n,w[a.cid].movedAt=g,d.push(c)}m([t+s,n,d.length&&d,y,i])}function ut(e){if(!e){w={};return}e=h.isArray(e)?e:[];for(var t=0;t<e.length;t++)delete w[e[t].cid]}function at(e,t){return e.receivedDate>t.receivedDate}function ft(e,t){return e.totalUnread===t.totalUnread&&e.totalMsgs===t.totalMsgs&&e.totalFlagged===t.totalFlagged&&e.totalDraft===t.totalDraft&&e.receivedDate===t.receivedDate&&p.congruent(e.msgCountsByFolder,t.msgCountsByFolder)?!0:!1}function lt(t){return!e.Lang.isUndefined(y[t])&&y[t]>0}function ct(e){var t=w[e.cid];return t&&t.fid===e.fid&&t.receivedDate===e.receivedDate?t:null}function ht(e,t,n){var r=T(t)[e];return r?(r.checksum=n,!0):!1}var v={},g={},y={},b={olist:[],maxmsgs:d,sync:{}},w={},E=null;return e.on(n+r,K),e.on(n+s,Q),e.on(t+o,G),e.on(t+u,Z),{set:L,get:N,getCache:T,setPrefetch:C,getPermCidPart:q,areSameConvs:U,canConvOverlapInFids:R,toConvInfo:O,toConvInfoEvent:M,getAnchorDate:_,isConvLocked:lt,isConvRemoved:ct,updateChecksum:ht,compareConvSummaries:ft,areNewMsgsAdded:at,removeFromCache:F,removeFromMovingCache:ut,canBatchLMTGDM:z,threadUpdate:et,msgAdd:V,update:nt,move:st,remove:ot,calcConvSummary:W,getParam:function(e){return g[q(e)]},isCached:D,midToConv:P,hit:S,cacheSize:function(e){!isNaN(e)&&e>0&&(b.maxmsgs=e)},olist:function(){return b.olist},flush:$,_msgCntConv:rt,_msgCntMsg:it,_isFlagMatch:tt}}()})},"1.0.0",{requires:["common-utils"]});


YUI.add("mail-ui-mailpane-base",function(e){e.namespace("mail.ui");var t=e.common.Utils,n=t.substitute,r=e.ui?e.ui.Templates:{},i=e.mail,s=i.ui,o=e.Lang,u=i&&i.Controller?i.Controller.Messages:{},a="ERROR: MessagePaneRead ",f=0,l=NeoConfig.isRTL,c=function(n){var r=this;c.superclass.constructor.call(r,n),r.NAME="MessagePane",r.numSelected=0,r.hasStarted=!1,r.loading_slow=r.loading_error=r.loading_moved=r.tmPendingLoad=r.tbarMod=r.tbarCallBack=r.tbarScope=r.tmFireRead=r.slowLoad=r.loadingTimer=r.widthUpdateTimer=r.neighbors=r.message=r.outboundReq=r.request=null,r.isLoaded=r.nextPrevCounter=r.stepTimer=r.isStepping=r.scrollWidth=r.scrollWidthIncr=r.scrollWidthKill=r.fid=0,r.fullView=n.fullView,r.parentNode=n.parentNode||null,r.type="message",r.guid=e.guid(),r.sortedColumn=n.sortedColumn||null,r.extras=n.extras||null,r.searchQuery=n.searchQuery||null,r.arrMessageSequence=n.arrMessageSequence||null,r.arrMessageSequenceStartIndex=n.arrMessageSequenceStartIndex,r.inspectedMids=[],r.stopwatch=null,r.oTemplate=null,r.statOp=null,r.stopwatchPreview="PaneInPreview",r.threadContainer,r.formatters={page_show_comm_modes:function(){return!r.numSelected&&!r.get("close")?r.sub({s:r.oTemplate.page_show_comm_modes}):""},page_show_comm_modes_else:function(){return r.numSelected&&!r.get("close")?r.sub({s:r.oTemplate.page_show_comm_modes_else}):""},global_spearmint_view_else:function(){var e=r.oTemplate.global_spearmint_view_else;return r.get("close")?"":r.sub({s:e})},horzPane:function(){return r.sub({s:r.oTemplate.horzPane})},vertPane:function(){return r.sub({s:r.oTemplate.vertPane,o:{msgLink:"http://help.yahoo.com/kb/index?page=content&y=PROD_MAIL_ML&locale=en_ZZ&id=SLN15123&actp=productlink"}})},page_message_pane_view:function(){return n.fullView?"":r.oTemplate.page_message_pane_view},page_message_pane_view1:function(){return n.fullView?"":r.oTemplate.page_message_pane_view1},page_message_pane_view2:function(){return n.fullView?"":r.oTemplate.page_message_pane_view2},page_message_full_view:function(){return n.fullView?r.oTemplate.page_message_full_view:""},message_selection:function(){return r.numSelected>0&&!r.message?r.oTemplate.message_selection:""},is_fresh:function(){return r.sub({s:r.oTemplate.is_fresh})},is_fresh_else:function(){return""},threadInConvReplyBucket:function(){return t.features.enabled("convReplyBucket")?r.oTemplate.threadInConvReplyBucket:""}},r.on("closeChange",function(e){var t;if(e.newVal){r.message&&r.fire("MessagePane:unload"),r.detach();if(!r.get("reuse"))try{r.parentNode&&(t=r.parentNode.one("div.tripane .content")||r.parentNode.one("div.message.content"),r.set("parentNode",null),r.parentNode=null),t&&t.destroy()}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:1",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:1")}}else r.attach()}),!r.get("close")&&r.attach(),r.addAttrs({fid:{setter:function(e){r.fid=e}},message:{setter:function(e){r.message&&r.fire("MessagePane:unload"),r.setMessage(e)},getter:function(){return r.getMessage()}},visible:{setter:function(e){var t=r.get("rootNode");t&&t.setStyle("display",e?"block":"none")},value:typeof n.visible=="undefined"?1:n.visible,lazyAdd:!0},vertical:{setter:function(t){var n=r.get("rootNode"),i=e.common.persist.getCookie(),s,o={},u=l?"right":"left",a;t?(s=i.get("pos.h2slider"),s=s&&s.charAt(0)==="a"?s.substr(1):s,s&&parseInt(s,10)<NeoConfig.minMessagelistWidth&&(s=NeoConfig.minMessagelistWidth),o.top="0px",o[u]=s||(NeoConfig.vertPane?330:630)):(a=parseInt(i.get("pos.vslider"),10),a&&parseInt(a,10)<NeoConfig.minBottomPreviewHeight&&(a=NeoConfig.minBottomPreviewHeight),o.top=a||NeoConfig.minBottomPreviewHeight,o[u]="0px"),n&&n.setStyles(o)},value:n.vertical,lazyAdd:!0},transferFocus:{},scrollWidth:{value:null},scrollWidthActive:{value:!0}}),r.neoEvent("rendered",{emitFacade:!0,broadcast:1})};e.extend(c,s.BaseWidget,{scrollWidthReset:function(){var e=this;e.scrollWidthKill||(e.scrollWidth=e.scrollWidthIncr=0,e.set("scrollWidth",null))},scrollWidthUpdate:function(){},scrollWidthNotify:function(){var e=this,t=e.parentNode.one(".msg-body");t&&(f===0&&(f=parseInt(t.getStyle("marginRight"),10)+parseInt(t.getStyle("marginLeft"),10)),e.scrollWidthUpdate({scrollWidth:t.get("scrollWidth")+f}))},scrollWidthStartTimer:function(){},resetScrollPosition:function(){var e=this,t,n;e.resetScroll&&(t=this.get("parentNode"),n=t?t.one("div.tripane .content")||t.one("div.message.content"):0,n&&(n.set("scrollTop",0),e.resetScroll=0))},bindUI:function(){var n=this,r=n.getStopwatch();r&&r.start(2,"BindUI");var i=n.getRoot();e.UA.webkit&&i&&i.get("id")!=="msg-preview"&&(i.setStyle("-webkit-user-select","none"),e.later(1e3,null,function(){var e=n.getRoot();e&&e.setStyle("-webkit-user-select","")},0,!1)),n.message?(r&&r.start(2,"PreLoadExtra1"),n.loadExtra(function(){try{r&&r.start(2,"LoadExtraCB1"),n.bindPaneContent()}catch(e){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:2",e,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:2")}})):i&&!n.rootBound&&(r&&r.start(2,"DelegateClick"),i.delegate("click",function(r){var i=t.getDataAction(r).action;switch(i){case"compose":e.fire("mt:click",{action:"compose_new_nav_toolbar",spid:"compose_new"}),e.fire("newMessage");break;case"new-conv":break;case"loadContent":break;case"switchpane":n.parentCW.switchView(NeoConfig.horzPane?"scroll-view-prev-beside":"scroll-view-prev")}r.preventDefault()},".media-modes span"),i.on("scroll",function(){n.resetScroll=1}),n.rootBound=1),i=null},renderComplete:function(){var e=this,t=e.getStopwatch();t&&t.start(1,"postRender"),e.fireEvent("complete");try{e.fire("renderComplete")}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:3",n,"TRY_CATCH",1,1,1):window.console&&
console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:3")}e.scrollWidthStartTimer(),e.hasStarted=!1,e.setRenderFocus(),e.postRender()},appendMarkup:function(){try{var i=this,s=i.get("parentNode"),o=i.message,u,f,l,c;if(!s)return;u=s.one("div.tripane .content")||s.one("div.message.content"),u?(l=i.numSelected?i.oTemplate.page_show_comm_modes_else:i.oTemplate.page_show_comm_modes,f=n(l,o,this.formatters,null,strings,r),u.setContent(f),i.insertBody(u),i.scrollTop&&(c=i.get("rootNode"))&&setTimeout(function(){var e=c.one(i.scrollNodeSelector);e.set("scrollTop",i.scrollTop)},200)):(s.append(i.getMarkup()),u=s.one("div.tripane .content")||s.one("div.message.content"),i.insertBody(u)),i.get("rootNode")||(i.set("rootNode",u.get("parentNode")),i.setRootNodeTabIndex())}catch(h){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:4",h,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:4"),e.use("common-utils-error",function(){t.error.report(a+"appendMarkupError",h,1,1,1)})}},getRoot:function(){var e=this,t=e.parentNode;return t&&(t.one(".messagepane")||t.one(".threadpane"))},sub:function(e){var t=e.s||"",r=e.o||0,i=e.f||this.formatters,s=e.a||0,o=e.strs||strings;return n(t,r,i,s,o)},onKeyDown:function(t){var n=this;if(t.keyCode===38||t.keyCode===40){var r=t.currentTarget.one(".base-card");r.set("tabIndex","0"),r.focus();return}if(t.keyCode!==65)t.stopPropagation();else{var i=n.parentNode.one("div.tripane .content")||n.parentNode.one("div.message.content"),s=e.Node.getDOMNode(i),o;window.getSelection?(o=window.getSelection(),o.selectAllChildren(s)):(o=document.body.createTextRange(),o.moveToElementText(s),o.select()),t.halt()}!n.threadContainer&&(t.keyCode===33||t.keyCode===34||t.keyCode===35||t.keyCode===36)&&(n.threadContainer=n.listNode&&n.listNode.getDOMNode());switch(t.keyCode){case 33:n.threadContainer&&(n.threadContainer.scrollTop=n.threadContainer.scrollTop-n.threadContainer.clientHeight);break;case 34:n.threadContainer&&(n.threadContainer.scrollTop=n.threadContainer.scrollTop+n.threadContainer.clientHeight);break;case 35:n.threadContainer&&(n.threadContainer.scrollTop=n.threadContainer.scrollHeight);break;case 36:n.threadContainer&&(n.threadContainer.scrollTop=0)}},setToolbar:function(e,t,n){var r=this;r.tbarMod=e,r.tbarCallBack=t,r.tbarScope=n},onFocus:function(){return this.fullView&&!this.message},getMarkup:function(){var e=this,t=n(e.oTemplate.base,e.message,e.formatters,null,strings,r);return t},getStopwatch:function(){var e=this;return t.Stopwatch.get(e.stopwatchPreview)||e.stopwatch},setDocRole:function(){this.get("rootNode").set("role","document")},setRootNodeTabIndex:function(){},abortRequests:function(e){var t=this,n=t.request,r;if(n){n=o.isArray(n)?n:[n];for(r=0;r<n.length;r++)n[r].abort();e&&t.statReadSuccess(NeoConfig.hasConvView?"CONV":"MESSAGE","ABORT")}t.request=null},retryPrefix:function(e){var t=e>=0?e:this.isRetrying;return t?t===20?"retrySL_":"retry_":""},requestMessage:function(e,t,n,r){var i=this,s=e?e.mid||0:0,o,a=n.ovparams||{},f=r||i.getStopwatch();return s&&(t.args={fid:i.fid,primeMsg:e,stopwatch:f},i.isChat(e)&&(a.displayPref="text/json",a.urlDetection=!1,a.emailDetection=!1,a.annotateOption={annotateText:"none"},n.ovparams=a),i.fireEvent("get"),f&&(f.start(1,"YCMSGGetBegin"),f.YCMSGGetBegin||(f.YCMSGGetBegin=new Date)),NeoConfig.noCache&&(a.dontCache=!0,n.dontCache=!0),o=u.get(n,t)),o},statReadSuccess:function(t,n,r){n=n?"_"+n:"",r&&e.fire("stat:feature_latency",{message:"UI_READ_"+t+n+"_COMPLETE",feature_group:"READ",value:(new Date).getTime()-r}),e.fire("stat:feature_complete",{message:"UI_READ_"+t+n+"_COMPLETE_SUCCESS",feature_group:"READ"})},statReadStart:function(t,n){n=n?"_"+n:"",e.fire("stat:feature_invoke",{message:"UI_READ_"+t+n+"_START_SUCCESS",feature_group:"READ"})},setupReadSuccessStatsInPane:function(e){var t=(new Date).getTime(),n=NeoConfig.hasConvView?"CONV":"MESSAGE",r=this;r.statReadStart(n,e),r.renderCompleteOnUpdateHandler&&r.renderCompleteOnUpdateHandler.detach(),r.renderCompleteOnUpdateHandler=r.once("read-stat:renderCompleteOnUpdate",function(){r.statReadSuccess(n,e,t)})},inspectMessageForBadContent:function(t,n){var r,i,s,o="",u,a;try{u=n&&n.mid;if(!t||this.inspectedMids[u])return;r=t.one("iframe"),i=t.one("frameset"),s=t.one("script"),this.inspectedMids[u]=!0;if(r||i||s)o+=(r?"1":"0")+(i?"1":"0")+(s?"1":"0"),a=t.getContent()||"",e.fire("MailLog",{m:"tmp_bad_message",yid:NeoConfig.loginId,host:NeoConfig.hostName,browser:NeoConfig.browser,mid:u,type:o,conv:NeoConfig.hasConvView,msg:typeof btoa=="function"&&btoa(encodeURIComponent(escape(a)))||a},!0,"tmp_bad_message"),e.fire("util:ymstats",{name:"tmp_bad_message",tags:{agent:NeoConfig.browser,farm:NeoConfig.farm,conv:NeoConfig.hasConvView,type:o}})}catch(f){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-mailpane:5",f,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-mailpane:5")}},insertBody:function(){},attach:function(){},detach:function(){},setMessage:function(){},getMessage:function(){},render:function(){},requestPaneContent:function(){},loadPaneContent:function(){},setRenderFocus:function(){},setFocusNode:function(){},loadExtra:function(){}}),s.MailPane=s._MailPane=c},"1.0.0",{requires:["common-utils","mail-model-datastore","mail-controller-messages","mail-ui-basewidget","mail-persist-meta-data","common-utils-stats","mail-ui-messagepane-utils"]});


YUI.add("mail-ui-mailview-base",function(e){var t=[48,49,50,51,52,53,54,55,56,57],n=[strings.str_cfg_sc_keycode_reply_to_all,strings.str_cfg_sc_keycode_message_forward,strings.str_cfg_sc_keycode_movemenu_display,strings.str_cfg_sc_keycode_mark_as_read,strings.str_cfg_sc_keycode_flag_selected_messages,strings.str_cfg_sc_keycode_reply_to_sender,strings.str_cfg_sc_keycode_print,strings.str_cfg_sc_keycode_toggle_preview_pane,strings.str_cfg_sc_keycode_close_tab],r=["density-regular","density-compact","density-open"],i={},s=[65,70,68,75,76,82,80,86,220],o=n.length,u=NeoConfig,a=e.common,f=a.Utils,l=f.features,c=f.escapeHtml,h=f.unescapeHtml,p=e.contacts,d=e.mail,v=d.ui,m=d.model.DataStore,g=m.Folders.get,y=a.persist.UserData,b=v.MessagePaneUtils,w="%40C%40Chats",E="%40B%40Bulk",S="darlaEvent",x="delete",T="message",N="move",C="inbox-move",k="visible",L="scroll-view-prev",A="scroll-view-prev-beside",O="scroll-view-noprev",M,_=!1,D=e.mail.Tabs,P=e.one("#nav"),H,B;for(M=0;M<o;++M)i[n[M]]=s[M];var j=function(t){function s(){j.superclass.constructor.call(n,t),n.evt.push(e.on("MailOptions:PreviewPaneCollapse",function(){n.previewPaneUIChange(!1)}),e.on("MailOptions:PreviewPaneExpand",function(){n.previewPaneUIChange(!0)}),e.on("MailOptions:PreviewPaneUIChange",function(e){var t=e&&e.view;n.handlePreviewPanePrefChange(t)}),e.on("mailview:relcalculateToolbarPositions",function(e){n.positionToolbarItems(e.besidePreviewActive)}),e.after("update:previewPane",function(){if(n.msgPane.fullView)return;n.updateListDensity(),n.toggleExpandOrCollapseAll(),n.toggleCloseButton()}))}function o(e){var t;return e?(t=g(e))&&t.total===0:0}var n=this,r,i;n.statOp=null,n.evt=[],t=t||{},r=t.fid||0,i=t.msgList!==0,t.vertical=n.verticalPreview=e.one("#rail-resize-vert")?1:0,n.isSearch=t.query===""||t.query,n.searchQuery=t.searchQuery||null,n.subToolbars={},n.bottomToolbars={},n.supportPreview=!0,e.mix(n,{fid:r,hasMsgList:i,isEmpty:o,msgList:null,msgPane:null,type:function(){var e=u.hasConv;return n.isSearch?"searchlist":i?e?"convlist":"messagelist":e?"convpane":"messagepane"}()},!0),s()};e.extend(j,e.mail.ui.BaseWidget),e.mix(j.prototype,{NAME:"MailView",keyCodes:n,numCodes:t,verticalPreview:null,isChat:function(e){var t=this;return t.isActualFolder(e,w)},isActualFolder:function(e,t){var n=this,r=n.msgPane&&n.msgPane.get&&n.msgPane.get(T);return(r&&r.message&&r.message.sourceFolderInfo&&r.message.sourceFolderInfo.fid||e)===t},showNotification:function(t){e.use("common-ui-notification-v2","common-persist-user-data",function(e){var n=t?e.common.persist.UserData.isUsersEmailAddress(t)?strings.str_cont_add_to_cont_alert_user_email_bd:f.substitute(strings.str_cont_add_to_cont_alert_already_in_contacts_bd,{from_email:"["+t+"]"}):strings.str_cont_add_to_cont_alert_select_indivitual_msg_bd,r=t?e.common.persist.UserData.isUsersEmailAddress(t)?"info":"attention":"attention";e.common.ui.NotificationV2.notify(n,{type:r,close:!0,closeOnExternalClick:!0,closeOnNavClick:!0,duration:1e4,customClass:"link-style",speed:"show-fast"})})},refreshMessage:function(e){var t=this;!t.hasMsgList&&t.msgPane&&(u.hasConvView||t.msgPane.set(T,{fid:e.fid,message:e.msg}),u.hasConvView&&e.submsg&&(t.msgPane.selectMessage(e.submsg)||(t.msgPane.loadPaneContent(106),t.msgPane.selectMessage(e.submsg))))},handlePreviewPanePrefChange:function(e){var t=this;switch(e){case 0:t.getCurrentView()!==O&&t.switchView(O);break;case 1:t.getCurrentView()!==A&&t.switchView(A);break;case 2:t.getCurrentView()!==L&&t.switchView(L)}},handlePostAction:function(t,n,r,i){var s,o,a,f,l,c;if(!t)return;s=this,o=t.action,a=s.msgPane,f=s.goOnMessageDelete(),f&&(c=f==="prevMsg"?"prevMsg":"next"),n!==E&&f&&o==="folder-new"&&(t.preHandle=function(t){e.use(s._nextprevModule,function(){a&&a.stepMail(u.stepMessageAction||"next",t,1)})}),l=function(){s.handleUI(t,n,r,i&&i.message?[i.message]:null)},s.type!=="messagepane"&&s.type!=="convpane"||n===E||n===w||o!==x&&o!==N&&o!==C&&o!=="trash"&&o!=="spam"&&o!=="sendercompromised"&&o!=="phished"&&o!=="notmymail"||!f?l():e.use(s._nextprevModule,function(){n==="Trash"&&o===x?a&&a.dialogThenStep(s,i,t,1):o===x?a&&a.stepMail(c,l,1):a&&a.stepMail(c||o,l,1)})},loadResizersAndSliders:function(){var t=this,n=[];if(t.slidersSet)return;n.push("mail-ui-messagesview-resize"),t.verticalPreview&&n.push("mail-ui-messagesview-vertical"),u.useDD&&n.push("mail-ui-messagesview-dd"),n.push(function(e){v&&v.MessagesViewResize&&t.supportPreview&&(t.verticalPreview?t.horizResizer=new v.MessagesViewVertical(t):t.vertResizer=new v.MessagesViewResize({messagesview:t})),u.useDD&t.supportPreview&&typeof e.mail=="object"&&typeof e.mail.MessagesViewDD=="object"&&d.MessagesViewDD.setDD(t)}),e.use("contacts-api","contacts-api-utils",function(){p&&p.utils&&!p.utils.areContactsLoaded()&&p.api.load()}),e.use.apply(e,n),t.slidersSet=!0},positionPreview:function(t,n,r){var i=this,s;e.use("mail-ui-messagesview-vertical",function(){if(t&&(r!==undefined?!r:!v.MessagesViewVertical.canGoVert()))return;i.verticalPreview=t,s=t?1:2,i.horizResizer?i.horizResizer.setDisplay(t):t&&(i.horizResizer=new v.MessagesViewVertical(i)),i.vertResizer?i.vertResizer.setDisplay(!t):t||(i.vertResizer=new v.MessagesViewResize({messagesview:i})),i.msgList.set("vertical",t),i.msgList.set("fullpane",!1),i.msgPane&&i.msgPane.set("vertical",t),u.horzPane=!t,u.vertPane=t,n&&n(),u.previewPanePref!==s&&(u.previewPanePref=s,e.fire("update:previewPane",{previewpane:s})),e.fire("verticalPreview",i),t?i.positionToolbarItems(!0):i.positionToolbarItems(!1)})},updateListDensity:function(){var t=this,n=e.one("body"),i=n.one("#inboxcontainer"),s=n.one("#toolbar"),o=e.one("#shellcontent");u.previewPanePref!==0?n.addClass("previewpane-on"):n.removeClass("previewpane-on"),u.previewPanePref===1?(n.addClass("vp-on").removeClass("vp-off"),i.addClass("vp"),s.addClass("vp"),e.fire("update:density",{density:"density-open"})):(n.removeClass("vp-on").addClass("vp-off"),i.removeClass("vp"),s.removeClass("vp"),t.switchSize(r[u.msgListDensity
])),t.isToolBarFit()?o&&o.removeClass("narrow-rightPV"):o&&o.addClass("narrow-rightPV")},isToolBarFit:function(){var t=e.all(".bottomToolbar")._nodes,n,r,i,s=0,o=0;for(r=0;t&&r<t.length;r++)if(t[r].clientWidth>300){n=t[r];break}o=n&&n.clientWidth,i=n&&n.childNodes;for(r=0;i&&r<i.length;r++)i[r].nodeType!==3&&i[r].clientWidth&&(s+=i[r].clientWidth);return s+50>=o?!1:!0},toggleExpandOrCollapseAll:function(){var t=this.msgPane.message,n=u.previewPanePref===0||!t||!t.totalMsgs||t.totalMsgs===1,r=e.one("#btn-togglethread");r&&r[n?"addClass":"removeClass"]("hidden")},toggleCloseButton:function(){var t=this.msgPane.message,n=u.previewPanePref!==1||!t,r=e.one("#btn-closemsg");r&&r[n?"addClass":"removeClass"]("hidden")},previewPaneUIChange:function(t,n){var r=this,i=r.msgList,s=r.msgPane,o,a,l,c,h;r.verticalPreview&&t&&(n!==undefined?!n:!v.MessagesViewVertical.canGoVert())&&r.positionPreview(),e.fire(t?"previewPane:expanded":"previewPane:collapsed",r),r.verticalPreview?r.horizResizer&&r.horizResizer.setDisplay(t):r.vertResizer&&r.vertResizer.setDisplay(t),i.set("fullpane",!t),s.set(k,t),h=r.get("contentToolbar").root,u.convReplyBtnsInTlbr&&h&&(t?(h[r.msgPane.message?"removeClass":"addClass"]("disableReplyGroup"),h.removeClass("hideReplyGroup")):h.addClass("hideReplyGroup")),t&&(o=f.Stopwatch.get(r.statOp),a=s.get(T),l=a&&a.message&&a.message.mid,c=a&&a.fid,c&&l&&(o=b.handleMsgInPreviewStopwatch(o,s,c,l)),s.set(T,a)),o&&o.start(1,"SetDisplay"),u.horzPane=!r.verticalPreview,u.vertPane=r.verticalPreview},togglePreviewPane:function(t,n){var r=this;try{var i=r.msgList,s=r.msgPane,o;if(!i||!s)return;o=!u.previewPanePref,r.previewPaneUIChange(o,n),r.verticalPreview&&r.positionToolbarItems(o),u.previewPanePref=o?r.verticalPreview?1:2:0,t||(u.previewPanePersistedPref=u.previewPanePref,e.fire("update:previewPane",{previewpane:u.previewPanePref})),r.checkPreview(),i.vlist.updateUlSize(),e.one("#inboxcontainer").hasClass("prevPaneVisible")?e.one("#inboxcontainer").removeClass("prevPaneVisible"):e.one("#inboxcontainer").addClass("prevPaneVisible"),e.fire("ws:previewChange",o)}catch(a){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailview-base-mailview:1",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailview-base-mailview:1")}},positionToolbarItems:function(t){var n=this,r,i,s;t&&n.msgList&&(r=document.getElementById("msg-list"),r&&(i=r.offsetWidth),i&&(s=document.getElementById("match-messagelist-sizing"),s&&(s.style.width=i+"px"))),n.checkWidth(),n.resizeEvent||(n.resizeEvent=e.on("windowresize",function(){n.checkWidth()}),n.evt.push(n.resizeEvent))},checkWidth:function(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=this;e.one("#toolbar")&&e.one("#toolbar").hasClass("with-backsearch")?t<1120?e.one("#toolbar").addClass("long-tb"):e.one("#toolbar").removeClass("long-tb"):e.one("#toolbar").removeClass("long-tb")},checkPreview:function(){var e=this,t=u.previewPanePref?!0:!1,n;try{t&&(n=e.verticalPreview?e.horizResizer:e.vertResizer,n&&n.checkDisplay())}catch(r){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailview-base-mailview:2",r,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailview-base-mailview:2")}},switchSize:function(t){for(var n=0;n<r.length;n++)r[n]===t&&(u.msgListDensity=n);e.fire("update:density",{density:t})},getCurrentView:function(){return u.previewPanePref?u.previewPanePref===2?L:A:O},switchView:function(e,t){var n=this,r,i=e===L||e===A,s;switch(e){case L:case A:case O:r=n.getCurrentView(),s=function(){(r===O&&i||r!==O&&!i)&&n.togglePreviewPane(!1,t)},n.verticalPreview&&e===L||!n.verticalPreview&&e===A?n.positionPreview(e===A,s,t):s()}},handleDarlaEvent:function(){var e=this;e.hasMsgList?e.msgList.handleDarlaEvent():e.fire(S,{action:e.darlaActionKey})},triggerDarlaWithAIC:function(t){var n=this,r,i,s;r=g(n.fid),s=t||n.msgPane.message,i=e.mail.ui.common.StringUtils.getSystemFolderInfoName(n.fid,r),n.fire(S,{action:n.darlaActionKey,value:{siteAttr:e.mail.ui.MessagePaneUtils.getAdSiteAttribsFromMesgObj(s,n.fid),foldername:i,message:s}})},goOnMessageDelete:function(){var e=this,t=y.get("userUIPref.goOnMessageDelete");return t==="prevMsg"?"prevMsg":l.enabled("searchresults")&&e.searchQuery&&e.searchQuery.isFromPhotoSRP?!1:t==="msg"},setPPToolbarItems:function(t){var n=this,r=e.one("#toolbar"),i=n.msgPane,s=i.message,o;if(i.isPrevPaneVisible&&!i.isPrevPaneVisible())return;r&&s?(o=r.one("#btn-closemsg"),o&&o[t&&u.previewPanePref===1?"removeClass":"addClass"]("hidden"),o=r.one("#btn-togglethread"),s.totalMsgs&&s.totalMsgs>1&&(o.hasClass("thread-cards-expanded")||(o&&o.removeClass("thread-cards-collapsed"),o&&o.addClass("thread-cards-expanded"),o.setAttribute("title",strings.str_collapse_all_attr),o.one(".icon-text").setContent(strings.str_collapse_all)),o&&o[t&&u.previewPanePref!==0?"removeClass":"addClass"]("hidden"))):(o=r.all("#btn-togglethread, #btn-closemsg"),o&&o.addClass("hidden"))},handleToolbarSelection:function(t){var n=this,r=t?t.dataAction||t.currentTarget._node.getAttribute("data-action"):0,i=t?t.item?t.item:t.currentTarget:0,s=n.msgPane,o=n.msgList,f={append:{}},l,c,h=e.mail.ui.ContextButton,p=n.get("contentToolbar")?n.get("contentToolbar").root:e.one("#pagetoolbar"),d,v=!0,m;if(!r||h&&!h.buttonEnabled({item:i,root:p,action:r}))return;e.fire("mailview:toolbar-action",r);if(n.type==="messagepane"||o&&o.get("selectCount")===1)switch(r){case"edit":f.spid="compose_draft";break;case"reply_sender":case"reply_all":case"forward":f.spid="compose_"+r;break;case"open":f.spid="message_tabpane",f.append.rspns="new";break;case"delete":case"spam":case"sendercompromised":case"phished":case"notspam":case"move":if(n.type==="messagepane"){if(n.goOnMessageDelete())m="message_tabpane";else switch(n.fid){case"Inbox":case"Draft":case"Sent":case"Trash":m="folderview_"+n.fid.toLowerCase();break;
case E:m="folderview_bulk";break;case w:m="folderview_chat";break;default:m="folderview_custom"}f.append.rspns="new",f.spid=m}break;case"print":case"fullheader":case"set_encodings":case"addcontact":f.append.rspns="pop";break;case"prev":case"next":f.spid="message_tabpane";break;case"selectAll-message":case"select-dd":case"sender":case"recipient":case"subject":case"date":case"date-asc":case"date-desc":case"unRead":case"attachment":case"sort-flagged":o&&(t.target=i,o.clickHandler(t)),v=!1}else if(r.indexOf("-view")===-1)switch(r){case"spam":case"sendercompromised":case"phished":break;case"selectAll-message":case"select-dd":case"sender":case"recipient":case"subject":case"date":case"date-asc":case"date-desc":case"unRead":case"attachment":case"sort-flagged":o&&(t.target=i,o.clickHandler(t)),v=!1;break;default:f.append.rspns="pop"}if(i.hasClass("menu-active-item"))d=e.one(".list-view-footer .btn.pressed"),c=i.ancestor(".optionMenu"),l=c.get("id").replace("menu","menusel"),f.append.ltxt=r;else{d=i.ancestor(".list-view-footer"),l=r;if(u.infinitePane)switch(l){case"prev":l="left";break;case"next":l="right"}}f.action=["tlbr_",l,d?"_btm":""].join(""),n.hasMsgList||(f.append.sec=d?"msgReadTlbrBtm":"msgReadTlbr"),r&&(f.append.t3view=r),e.fire("mt:click",f);switch(r){case"prev":case"next":e.use(n._nextprevModule,function(){u.stepMessageAction=r,s&&s.stepMail(r)});break;case"closemsg":n.msgPane&&(n.msgPane.fullView?u.multitask&&!u.tabs?(n.handleTabSwitch(),u.backButtonFull&&e.fire("removePage")):n.set("close",1):(n.msgPane.hasMessage()&&o.vlist.selectAll(0),n.setPPToolbarItems()));break;case L:case A:case O:n.switchView(r);break;case"density-compact":case"density-regular":case"density-open":n.switchSize(r);break;case"themes":e.use("mail-ui-themes",function(e){e.mail.ui.Themes.showThemesDialog()});break;case"addcontact":n.handleDefaultCase({action:r,context:"msg"});break;case"tab":e.use("common-ui-navtabs",function(){a.ui.NavTabs.setTabs(1)});break;case"recent":e.use("common-ui-navtabs",function(){a.ui.NavTabs.setTabs(0)});break;case"mailOptions":e.fire("openOptions",{view:"viewing_email"});break;case"switch_convview":e.fire("setUdbKey",{threading:u.hasConvView===1?-1:1},{success:function(){window.location.reload()},failure:function(){e.use("common-ui-notification-v2",function(e){e.common.ui.NotificationV2.notify(strings.str_modal_convoo_error,{type:"error",close:!0,closeOnExternalClick:!0,closeOnNavClick:!0,duration:5e3,customClass:"link-style",speed:"show-fast"})})}});break;default:v&&n.handleDefaultCase({action:r,item:i,tbAction:!0})}},handleFullscreenNavigation:function(e){var t=this;t.handleToolbarSelection(e)},onFocus:function(){if(!this.hasMsgList)return this.msgPane.onFocus()},sortKeys:function(e){if(this.hasMsgList)switch(e){case 65:return this.msgList.sortList("attachment",null),!0;case 68:return this.msgList.sortList("date",null),!0;case 75:return this.msgList.sortList("unRead",null),!0;case 76:return this.msgList.sortList("sort-flagged",null),!0}return!1},onKeyDown:function(t){function q(){var t=e.one(document.activeElement),n=e.one("#yucs"),r=e.one("#yucs-top-bar");return t&&(n&&n.contains(t)||r&&r.contains(t))?!0:!1}function R(){var t=e.one(document.activeElement),n=e.one("#storm-listnav");return t&&n&&n.contains(t)?!0:!1}var n=this,r=t.keyCode,s,o=t.metaKey,a=t.shiftKey,f=t.ctrlKey,c=t.altKey,h=t.metaKey||t.ctrlKey,p=n.fid==="Draft",d=n.isChat(n.fid),m=!1,g=n.msgPane,y=n.msgList,w=e.UA,E,S,C=e.one("#app-list"),k,M,D=e.UA.ie,j=e.mail.ui.Boss,F,I;r=h?r:i[r]||r,r>=96&&r<=105&&(r-=48);if(j&&j.isActive())return j.handleKeydown({keyCode:r}),!0;if(r===186){_=!0;return}if(_){if(this.sortKeys(r)){_=!1;return}_=!1}if(p&&(r===65&&!h||r===82||r===70||r===68))return!1;if(d&&(!a&&r===65||r===82||r===70||r===68||r===75))return!1;switch(r){case 13:s=t.target.one(".list-view-item.selected")?"open":null;break;case 33:case 34:if(t.ctrlKey)return;case 35:case 36:case 32:case 38:case 40:if(q())return;if((r===38||r===40)&&R())return;case 188:if(o)return;case 190:case 37:case 39:if(!u.infinitePane&&(r===37||r===39))return;if(!y&&(f&&(r===188||r===190)||r===37||r===39))e.use(n._nextprevModule,function(){u.stepMessageAction=r===188||r===37?"prev":"next",g&&g.stepMail(u.stepMessageAction,null,null,!0)});else if(y)y.set("active",1),y._listview._keydown(t);else{g.onKeyDown(t);if(t.keyCode===38||t.keyCode===40)return}t.halt();break;case 46:if(!C||C&&!C.contains(t.target))s=x;break;case 68:!c&&!h&&(a&&l.enabled("folderManagement")?s="move-find-menu":s="move-menu");break;case 75:y?(S=e.one(".list-view-item.selected"),s=S?S.hasClass("unread")?"read":"unread":null):g&&g.onKeyDown(t);break;case 76:y?(S=e.one(".list-view-item.selected"),s=S?S.hasClass("flagged")?"unflagged":"flagged":null):g&&g.onKeyDown(t);break;case 65:!a&&!c&&h?(y.vlist.selectAll(!y.vlist.hasAllSelected()),t.halt()):u.hasConvView?g&&g.onKeyDown(t):(s=a?"":"reply_all",!h&&!c&&(k=D));break;case 82:u.hasConvView?g&&g.onKeyDown(t):a||(s="reply_sender",k=D);break;case 70:u.hasConvView?g&&g.onKeyDown(t):(!c&&!a&&!h?(s="forward",k=D):a&&c&&(m=!0,s="forward",c=!1,t.halt()),(!w.gecko||w.os!=="macintosh")&&!a&&!o&&(a||!h)&&t.preventDefault());break;case 86:if(!n.msgList||!n.msgPane)break;if(o||f||c)break;if(!a)e.use("mail-ui-messagesview-vertical",function(){var e=n.getCurrentView(),t;e===A?t=L:e===L?t=O:(F=v.MessagesViewVertical.canGoVert())?t=A:t=L,n.switchView(t,F)});else if(n.msgList&&u.hasConv){var U=n.msgList._listview.get("selectNew");n.msgList._listview.set("selectNew",!U)}return!0;case 27:var z=e.one(".card-v1 .user-email a");if(z&&z.getStyle("visibility")!=="hidden")e.mail.ContactPopup&&e.mail.ContactPopup.hideMini();else{if(n.type==="messagepane"||n.type==="convpane")return u.multitask&&!u.tabs?n.handleTabSwitch():n.set("close",1),!0;if(e.mail.Tabs.getActiveTab().get("id")==="tabinbox"&&n.msgPane&&n.msgPane.hasMessage())return n.msgList.vlist.selectAll(0),!0;if(j)return j.toggle(null,!0),!0}break;case 220:if(o||f)if(n.type==="messagepane"||n.type==="convpane"
)return u.multitask&&!u.tabs?n.handleTabSwitch():n.set("close",1),!0;break;case 80:if(h&&!c&&!a){t.halt(!0);try{event&&(event.keyCode=0)}catch(W){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailview-base-mailview:3",W,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailview-base-mailview:3")}}!c&&!a&&n.handleDefaultCase({action:"print",item:0});break;case 73:case 84:if(a&&d&&strings.str_cfg_tog_hasSMS){var X=r===84?"reply-sms":"reply-im",V=n.getCurrentMsg();return n.handleUI({action:X},n.fid,n.msgList,V?[V]:null),!0}a&&c&&e.mail.ui.Tray&&e.mail.ui.Tray.toggle();break;case 48:case 49:case 50:case 51:if(r===51&&a&&!f&&!c&&!o){s=x;break};case 52:case 53:case 54:case 55:case 56:case 57:if(r>=49&&r<=57)if(c)switch(r){case 49:case 50:case 51:case 52:case 53:case 54:H||(H=P.all(".nav-item")),B=H.item(r-49);if(B)return e.fire("nav:"+B.getAttribute("data-nav"),t),!0}else if(j&&j.handleKeydown({keyCode:r}))return!0;var $=t.target.ancestor("div",!0);if(o||f||c||a||!$||$.get("id")!=="menu-move"||!strings.str_tog_use_num_accel)break;return e.mail.Controller.Folders.get(null,{success:function(t){var i=t,s,o=[],u,a;a=i?i.length:0;for(u=0;u<a;u++)i[u].isSystem||o.push(i[u]);s=r===48?"Inbox":o[r-49],s=e.Lang.isString(s)?s:s?s.folderInfo.fid:0,s&&n.handlePostAction({action:N,fid:s},n.fid,n.hasMsgList?y:null,n.hasMsgList?null:g.get(T))}}),!0;case 67:if(a&&!(h||c||o||f))return S=y&&y._listview.get("activeItem"),n.isEnableAddToContacts(null,!0,S)&&(S&&S.hasClass("list-view-item-detail")&&(I=y._listview._getIndexN(S)),n.handleDefaultCase({action:"addcontact",context:u.hasConvView?"":"msg",subIndexArr:I})),!0;if(h){var J=e.mail.Tabs.getActiveTab().elContent;if(J){var K,Q,G="",Z,et=J.one(".message-header .lozengeContainer.pressed .lozenge");Z=document.activeElement,et&&(K=et.getAttribute("data-address"),Q=et.getAttribute("data-name"),Q?G=Q+" <"+K+">":G=K,b.initializeCopyText(),b.copyToClipboard(G,null,Z))}}return;default:}return s&&!o&&!f?(M=function(){n.handleDefaultCase({action:s,item:0,forwardAsAttachment:m})},k?setTimeout(M,0):M(),!0):!1},handleTabSwitch:function(){var t=this,n,r=e.contacts.ui.ContactsView,i,s,o;i=t.tab.prevTabId;if(i){s=D.getTabById(i);if(s&&s.widgetType==="search"){D.switchToTab(s),o=s.elContent.one("#msg-list"),o!==null&&e.UA.safari>0&&(o.addClass("toggle-to-force-repaint"),setTimeout(function(){o.removeClass("toggle-to-force-repaint")},1));return}n=r&&i===r.tab.get("id");if(n){D.switchToTab(r.tab);return}}D.switchToTab(D.tabs[0])},ondestroy:function(){var t,n=this;for(t in n.evt)e.detach(n.evt[t])},createRefTab:function(t){var n="",r,i,s,o,a="",f,l,p,v,m={fid:t.fid};u.hasConvView?(l=d.model.ConvStore.Conversations,v=l.getPermCidPart,i=e.mail.ui.ConvView,m.cid=v(t.cid),a=t.subject,r=t.recipients,r&&r.length&&(n=c(h(r[r.length-1].name))),s="convpane",m.tabKey="cid"):(f=d.model.DataStore.Messages,p=f.getPermMidPart,i=e.mail.ui.MessagesView,m.mid=p(t.mid),t.header&&(o=t.header,a=o.subject,n=e.mail.ui.PaneUtils.getName(o.from)),s="messagepane",m.tabKey="mid"),a=a||strings["str_msg-view_tab_no_subject"],a=c(h(a)),e.fire("tab:addRef",{data:m,p_label:n,s_label:a,isRemovable:!0,widgetType:s,init:function(n,r){var s,o=e.mix({msgList:0,message:t,isRemovable:!0},m);s=new i(o),n.widget=s,e.fire("bindContentWidget",{cw:s,tab:n}),r()}})}},!0),e.namespace("mail.ui"),e.mail.ui.MailView=j},"1.0.0",{requires:["mail-ui-basewidget","common-persist-user-data","mail-ui-messagepane-utils","mail-model-datastore","common-utils","mail-common-utils-features","mail-ui-pane-utils"]});


YUI.add("mail-ui-pane-utils",function(e){function h(e){return e.filename?u(a(e.filename)):""}var t=e.mail,n=t.ui,r=e.common,i=e.common.Utils,s=t&&t.Controller?t.Controller.Messages:{},o=i.substitute,u=i.escapeHtml,a=i.unescapeHtml,f=e.Lang.trim,l=r.persist.UserData,c=function(e){var t=e.s||"",n=e.o||0,r=e.f,i=e.a||0;return o(t,n,r,i,strings)};e.namespace("mail.ui").PaneUtils={getBlockedMsgMarkup:function(e,t){var n=e?e.imgAttachments||[]:[],r=e.inboxservices||[],i=l.get("userUIPref.imageBlocking")==="b",o=n.length&&e.blockImages==="all",u=e&&(e.hasBlockedImages||(strings.str_cfg_tog_old_imageblock?o:o&&!s.isCertified(r)&&!(i&&e&&e.flags&&e.flags.inAddressBook)));return u?c({s:t.msg_blocked,o:e}):""},getAttPhotosMarkup:function(e,t,n){var r,i=e?e.imgAttachments||[]:[],s=i.length,o=[],u=e.blockImages==="all"&&!(l.get("userUIPref.imageBlocking")==="b"&&e&&e.flags&&e.flags.inAddressBook)&&!strings.str_cfg_tog_show_imageblock_thumbnail;for(r=0;r<s;r++){var a=i[r];u?a.blocked_images="img":a.blocked_images_else=t.blocked_images_else,strings.str_cfg_tog_show_imageblock_thumbnail&&!a.thumbnailurl&&(a.thumbnailurl=strings.str_cfg_url_imageblock_thumbnail),o.push(c({s:t.attached_photos,o:a,f:{image:function(){return a.thumbnailurl?c({s:t.image,o:a,f:n}):""},filename:function(){return h(a)}}}))}return o.join("")},getAttFilesMarkup:function(e,t){var r,i=e?e.nonImgAttachments||[]:[],s=i.length,o=[];for(r=0;r<s;r++){var u=i[r];o.push(c({s:t.attached_files,o:u,f:{image1:function(){return u.thumbnailurl?c({s:t.image,o:u}):""},type:function(){return n.AttachFileType.getType(u.filename)},filename:function(){return u.filename===".eml"&&(u.filename=strings.str_comp_nosubject+".eml"),h(u)}}}))}return o.join("")},statMissingQtd:function(t){NeoConfig.log_error_yapache&&e.use("comms-log4js",function(){var n=e.comms.log4js.getLogger("errorLogger",1,"ajax");n.log("QTD Missing [YID:"+NeoConfig.loginId+"] [MID:"+t.mid+"] [CID:"+t.cid+"]")})},extractQuotedText:function(t,n,r,i,s){if(t&&t.body){var u,a=[],f,l,c,h,p=0,d,v=[];try{if(t.yqtClassId){u=e.Node.create("<div>"+t.body.display+"</div>"),d=t.yivPrefixNumber||[];if(d.length>0)for(f=0;f<d.length;f++)v.push("."+d[f]+t.yqtClassId);a=u.all(v.join(",")+", ."+t.yqtClassId),a&&a.each(function(t){c=t.get("innerHTML"),h=p?"":o(n,null,null,null,strings),h+=o(r,{quoted_text_body:c},null,null,strings),l=e.Node.create(h),t.replace(l),p++}),t.body.display=u.get("innerHTML")||u.get("textContent")||t.body.display}!i[t.mid]&&s>0&&t.header.subject.indexOf("Fw: ")&&((!t.yqtClassId||!p)&&this.statMissingQtd(t),i[t.mid]=!0)}catch(m){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-mailpane-base-paneutils:1",m,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-mailpane-base-paneutils:1")}}},getName:function(e){var t;return e?(t=f(e.name),u(a(t))||u(a(e.email))||""):""},getAddress:function(e){return e&&e.email?u(a(e.email)):""},getMsgSub:function(e){return e&&e.subject?u(a(e.subject)):strings["str_msg-view_no_subject"]},getMsgSubDir:function(e){var t="";return e&&e.header&&e.header.subjectDir&&(t=" dir='"+e.header.subjectDir+"'"),t},getNameDir:function(e){return NeoConfig.bidi&&e&&e.nameDir?e.nameDir:""},getDataName:function(e){var t="";return e&&e.name!==e.email&&(t=u(a(f(e.name)))),t},createRecipientList:function(e,t,n,r,i,s){var o=[],u=r?Math.min(r,e.length):e.length,a;for(a=0;a<u;a++)o.push(c({s:t,o:i&&i(e[a]),f:n,a:e[a]}));return a=e.length,typeof s===undefined?o.join(","):o.join(s)},isOwnEmail:function(e){return this.allAccounts=this.allAccounts||this.getAllAccountEmails(),this.allAccounts&&this.allAccounts[e]},getAllAccountEmails:function(){var e={},t=(l.get("externalAccounts")||{}).extAccount||[],n=(l.get("aliases")||{}).alias||[],r=(l.get("disposableAddresses")||{}).deaName||[],i=t.concat(n,r),s=l.get("userSendPref"),o,u,a=i.length;e[s.defaultID]=1,e[s.defaultFromAddress]=1;for(u=0;u<a;u++)if(o=i[u].address)e[o]=1;return e}}},"1.0.0",{requires:["mail-controller-messages","common-utils","mail-persist-meta-data"]});


YUI.add("common-utils-stats",function(e){function l(e,t){while(e)e.d=t-e.s,e=e.sb,e=e&&e[e.length-1]}function c(e){function i(e,t){var s=0;while(s<e.length)n=e[s++],r+=t+n.n+":"+n.d+"\n",(n=n.sb)&&i(n,t+"-")}var t=this,n,r="";i([e],r),e.rtComment=r,r=(e.title||"")+r}function h(e,t,n,r){var i=r.sb,s=-1,o=i?i.length-1:-1,u,a,f,l=0,c=0,h={t_done:t};u=r.YCMSGGetEnd&&r.YCMSGGetBegin?r.YCMSGGetEnd-r.YCMSGGetBegin:0,r.isConv&&(u+=r.YCMSGGetEnd2&&r.YCMSGGetBegin2?r.YCMSGGetEnd2-r.YCMSGGetBegin2:0),u&&(h.t1=u);for(;o>=0;o--){var p=i[o].n;if(p==="OMMessageInDOM"||p==="MessageInDOM"){s=i[o].s;break}}s>0&&(h.t4=t,h.t_done=s-r.s);if(a=r.BECallTime)l+=a.curlTime?a.curlTime:0,c+=a.serverTime?a.serverTime:0;if(f=r.BECallTime2)l+=f.curlTime?f.curlTime:0,c+=f.serverTime?f.serverTime:0;return l&&(h.t5=l),c&&(h.t6=c),h.kd5=r.isConv?1:0,h}function p(e,t,n,r){var i={t_done:t};return r.getListEnd&&r.getListBegin&&(i.t1=r.getListEnd-r.getListBegin),i.kd5=NeoConfig.hasConv?1:0,i}function d(e,t,n,r){var i={t_done:t},s;return r.YCMSGGetEnd&&r.YCMSGGetBegin&&(i.t1=r.YCMSGGetEnd-r.YCMSGGetBegin),s=r.BECallTime,s&&s.curlTime&&(i.t5=s.curlTime),s&&s.serverTime&&(i.t6=s.serverTime),i}function v(t,n,r,i){var s=NeoConfig.low_bandwidth?"_lowBW":"",o=i.wasCached&&(e.Lang.isUndefined(i.wasCached2)?!0:i.wasCached2),u=o?"_Cached":"_Uncached";a.rstattrace("profile",t+s+u,n.t_done),typeof n.t1=="number"&&a.rstattrace("profile",t+s+u+"_WSCallTime",n.t1),typeof n.t5=="number"&&a.rstattrace("profile",t+s+u+"_WSCurlTime",n.t5),typeof n.t6=="number"&&a.rstattrace("profile",t+s+u+"_WSServerTime",n.t6)}function m(e,t,n,r){var i=NeoConfig.low_bandwidth?"_lowBW":"",s=r.wasCached?"_Cached":"_Uncached";a.rstattrace("conv",e),a.rstattrace("profile",e+i+s+"_time",t.t_done),typeof t.t1=="number"&&a.rstattrace("profile",e+i+s+"_WSCallTime",t.t1),typeof t.t5=="number"&&a.rstattrace("profile",e+i+s+"_WSCurlTime",t.t5),typeof t.t6=="number"&&a.rstattrace("profile",e+i+s+"_WSServerTime",t.t6),r.wasCached&&a.rstattrace("conv",e+"_Cached")}function g(e,t,n,r){var i="LoadConvExpando";a.rstattrace("conv",e),a.rstattrace("conv",e+"_Cached")}function y(e,t,n,r){a.rstattrace("conv","LoadConvExpando")}function b(t,n,r,i){var s=NeoConfig,o=s.low_bandwidth?"low":NeoConfig.isSSL?"ssl":"non-ssl",u=i.wasCached&&(e.Lang.isUndefined(i.wasCached2)?!0:i.wasCached2)?1:0,a={ssl:{MsgInPreview:[978500342,978500341],MsgInTab:[978500348,978500347]},"non-ssl":{MsgInPreview:[978500340,978500339],MsgInTab:[978500346,978500345]},low:{MsgInPreview:[978500338,978500337],MsgInTab:[978500344,978500343]}};return a[o][t][u]}function w(t,n,r,i){var s={t_done:n},o=i.attType,u="0";return o==="form"?u="1":o==="flash"?u="2":o==="html5"?u="3":o==="flashv2"?u="4":o==="formv2"&&(u="5"),s.ks2=u,e.Lang.isUndefined(i.attSize)||(s.kd2=i.attSize+""),s}function E(t,n,r,i){var s,o,u=0,a={t_done:n};if(i.sb)for(s=0;s<i.sb.length;s++){o=i.sb[s];switch(o.n){case"moduleLoad":a.t1=o.d;break;case"msgSend":a.t2=o.d}}return a.kd4=i.action&&i.action==="retry"?"1":i.action&&i.action==="captcha"?"2":"0",e.Lang.isUndefined(i.bodySize)||(a.kd2=i.bodySize+""),e.Lang.isUndefined(i.attachCount)||(a.kd3=i.attachCount+""),a}function S(t,n,r,i){var s,o,u={t_done:n};if(i.sb)for(s=0;s<i.sb.length;s++){o=i.sb[s];switch(o.n){case"moduleLoad":u.t1=o.d;break;case"initView":u.t2=o.d}}return i.CMGStart&&i.CMGEnd&&(u.t3=i.CMGEnd-i.CMGStart),u.kd4="0",e.Lang.isUndefined(i.CMGSize)||(u.kd2=i.CMGSize+""),e.Lang.isUndefined(i.wasCached)||(u.kd3=i.wasCached?"1":"0"),u}function x(e,t,n,r){var i={reply_sender:978500080,reply_all:978500245,forward:978500078,edit:978500266},s=i[r.action];return s?s:978500077}function T(e,t,n,r){function o(e){var t,n;if(e.sb)for(t=0;t<e.sb.length;t++)n=e.sb[t],i[n.n]=n.d,o(n)}var i={},s={t_done:t};return o(r),s.t1=i.start+i.serverRequest,s.t2=i.renderSearch,i.renderSearchGroups&&(s.t3=i.renderSearchGroups),s.kd2=r.matches,s.ks2=r.source,s}function N(e,t,n,r){var i={results:978500252,refinement:978500222};return i[r.action]}var t=e.namespace("common.Utils"),n=window.NeoConfig&&NeoConfig.RTFirePercentage||0,r={},i={},s,o=function(){return s||new Date},u={Compose:{calcValues:S,calcSpaceId:x},Compose_inline:{},FolderView:{baseSpaceId:978500090,calcValues:p},MsgInPreview:{calcValues:h,rocketStatsExtras:v,calcSpaceId:b},MsgInTab:{calcValues:h,rocketStatsExtras:v,calcSpaceId:b},SendConfirm:{baseSpaceId:978500224,calcValues:E},UpdatesTab:{baseSpaceId:978500277},ConvListExpandCached:{rocketStatsExtras:g},ConvListExpandNotCached:{rocketStatsExtras:y},LoadMessage:{},LoadConv:{calcValues:d,rocketStatsExtras:m},LoadMessageCard:{calcValues:d,rocketStatsExtras:m},LoadConvBatch:{calcValues:d,rocketStatsExtras:m},PreLoadMessage:{rocketStatExtras:v},Search:{calcValues:T,calcSpaceId:N},AttachmentUpload:{baseSpaceId:978500442,calcValues:w}},a=t.Stat={log:function(e,t,n,i){var s,o,f,l="profile";if(e in u){var c=u[e];o=c.calcValues?c.calcValues(e,t,n,i):{t_done:t},window.rt_Done&&(c.baseSpaceId||c.calcSpaceId)&&NeoConfig&&NeoConfig.roundTrip&&(s=c.baseSpaceId||c.calcSpaceId(e,o,n,i),a.rtBeacon(s,o,n)),f=o.kd5?e+"_conv":e,a.rstattrace(l,f,o.t_done),!r[f]&&NeoConfig.roundTrip&&NeoConfig.roundTrip.interactiveDate&&a.rstattrace(l,"TimeToFirst"+f,i.s-NeoConfig.roundTrip.interactiveDate),c.rocketStatsExtras&&c.rocketStatsExtras(f,o,n,i),r[f]=1}}},f=t.Stopwatch=function(t){var n=this;n.n=t,s=n.s=o(),n.start.apply(n,e.Array(arguments,1)),s=0};f.get=function(t){var n=e.Array(arguments,1),r=i[t],o;return n.length&&(o=n.shift(),r&&o&&r.stop(o),r=0,n.shift()&&(r=new f(t),s=r.s,r.start.apply(r,n),s=0),i[t]=r),r},a.rtBeacon=function(e,t,r){var i,s=NeoConfig,o=[],u,a=!1;if(e&&window.rt_LogTime&&Math.random()<n){e+=s.roundTrip.spaceIdOffset,typeof YAHOO=="undefined"&&(YAHOO={}),typeof YAHOO.RT=="undefined"&&(YAHOO.RT={qsvars:{}}),rt_SetSpaceid(e);for(i in t)switch(i.charAt(0)){case"t":rt_LogTime(i,t[i],!0);break;default:rt_AddVar(i,t[i])}for(var f in s.userAdLocations){a=!0;break}u=!s.IsMailPlus&&s.hasAds&&a,o.push("hasAds:"+(u?"1":"0")
),rt_AddVar("kd1",u?1:0),rt_AddVar("ks1",s.cluster),rt_AddVar("ks3",s.expBucketId==="0"?s.isUltThrottled?"NoBucket":"NoUlt":s.expBucketId),s.roundTrip&&s.roundTrip.adComment&&s.roundTrip.adComment.length>0&&(rt_AddVar("ks4",NeoConfig.roundTrip.adComment.join("/")),s.roundTrip.adComment=[]),s.RTTimerComment&&r&&o.push(r),rt_SetComment(o.join(";")),rt_Done()}},a.rstattrace=function(e,t,n){},f.prototype={start:function(e){var t,n,r=this,i=r,s=e,u=arguments,a=0,f=o();typeof s=="number"?a=1:s=-1;while(r.sb&&--s)i=r,r=i.sb,r=r[r.length-1];for(;a<u.length;a++)t=r.sb=r.sb||[],(n=t.length)&&l(i=t[n-1],f),i={n:u[a],s:f},t.push(i)},stop:function(t){var n=this;e.Lang.isNumber(n.d)||(n.n=t||n.n,l(n,o()),c(n),a.log(n.n,n.d,n.rtComment,n))}},t.rocketstats={intlStat:function(){}}},"1.0.0",{});


YUI.add("common-utils",function(e){e.namespace("common.Utils");var t=e.common.Utils,n=e.Object,r=e.Lang,i=r.trim,s=/{{([^{}]*)}}/g;e.mix(t,{NAME:"Utils",isEmpty:function(e){var t;if(e)for(t in e)return!1;return!0},size:function(e){var t,n=0;for(t in e)n++;return n},congruent:function(i,s,o,u){if(!e.Lang.isValue(s))return e.Lang.isValue(i)?!1:!0;var a=i===s||o||t.size(i)===t.size(s),f;return r.isString(i)&&(a=i===s),a&&i!==s&&n.some(i,function(e,n){return f=s[n],a=u&&!!u[n]||(r.isObject(e)?t.congruent(e,f,o):e===f),!a},null,!0),a},diff:function(e,i,s){var o,u=s?e:t.merge({},e);return i&&n.each(u,function(e,n){o=r.isObject(e)?t.diff(e,i[n],!0):e!==i[n],o||delete u[n]},null,!0),(!t.isEmpty(u)||e&&!i)&&u},getSecureURL:function(t){if(t&&t.indexOf("http://")!==-1){var n=e.Lang.trim(t);return n=n.replace(/^http:\/\/[ld]\d?\./,"https://s."),n=n.replace(/^http:\/\//,"https://"),n}return t},extractHostFromUrl:function(e){var t=document.createElement("a");return t.href=e,t.hostname},extractPathFromUrl:function(e){var t=document.createElement("a");return t.href=e,t.pathname},wcopy:function(n,r){var i=n&&(n.length||n.length===0)&&Object.prototype.toString.call(n)==="[object Array]",s,o=n?i?e.clone(n):e.Object(n):n;r=r||{};if(!i)for(s in o)typeof o[s]=="object"&&o[s]&&(o[s]=r[s]?n[s]:t.wcopy(o[s]));return o},merge:function(e,n,i,s,o){var u,a,f;if(r.isObject(n)){e=r.isObject(e)&&e||{};for(u in n){if(s&&!n.hasOwnProperty(u))continue;if(r.isArray(n[u])){a=n[u];if(!e[u]||i)e[u]=[];for(f=0;f<a.length;f++)e[u].push(t.merge(e[u][f],a[f],i,s,o))}else if(r.isObject(n[u]))e[u]||(e[u]={}),e[u]=t.merge(e[u],n[u],i,s,o);else if(i&&e[u]!==n[u]||r.isUndefined(e[u]))if(!o||o&&n[u]!==null)e[u]=n[u]}}else e=n;return e},assert:function(n,r,i,s){n||(r=r||"assertfail",e.use("common-utils-error",function(){var e=s&&s()||"";t.error.report(r+" "+e,1,1,1)}))},report:function(n){NeoConfig.showErrors&&e.use("common-utils-error",function(){t.error.report(n,1,1,1)})},log:function(t,n,r){t&&(e.Lang.isString(t)&&(t={m:t}),e.fire("MailLog",t,n,r))},guid:function(){function e(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),substitute:function(e,n,r,i,o,u,a){if(typeof e!="string")return;return a&&(e=a.str||e,n=a.obj||n,r=a.formatters||r,i=a.args||i,o=a.strings||o,u=a.templates||u),e.replace(s,function(e,f){var l,c,h=t.substitute;return r&&(l=a&&a.formatters?a.formatters[f]:r[f])?l(n,i,a)||"":n&&f in n?(c=n[f],typeof c=="string"&&c.match(s)?h(c,n,r,i,o,u,a):c):o&&f in o?(c=o[f],c.match(s)?h(c,n,r,i,o,u,a):c):u&&f in u?h(u[f].base||u[f],n,r,i,o,u,a):""})},ezSub:function(e,n,r){if(typeof e!="string")return;return e.replace(s,function(e,i){var o,u=t.ezSub;if(n&&i in n)return o=n[i],typeof o=="function"?o(n):typeof o=="boolean"&&r?o?r[i].match(s)?u(r[i],n,r):r[i]:"":typeof o=="number"&&r?o>0?r[i].match(s)?u(r[i],n,r):r[i]:"":typeof o=="string"?o.match(s)?u(o,n,r):o:"";return strings&&i in strings?(o=strings[i],o.match(s)?u(o,n,r):o):""})},regexpEscape:function(e){return e==null?null:(e=""+e,e.replace(/([\^\/.*+?|()[\]{}\\=!:$])/g,"\\$1"))},getNormalizedMessageCount:function(e){return e>9999?"9999+":e},escapeHtml:function(e,t){return e==null?null:(e=""+e,e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/\"/g,"&quot;"),e=e.replace(/\'/g,"&#39;"),e=e.replace(/\\/g,"&#92;"),e=e.replace(/{/g,"&#123;"),e=e.replace(/&(?:amp;)+/g,"&amp;"),t&&(e=e.replace(/&amp;#([A-Za-z0-9]+);/g,"&#$1;")),e)},unescapeHtml:function(e){return e==null?null:(e=""+e,e=e.replace(/&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&quot;/g,'"'),e=e.replace(/&#39;/g,"'"),e=e.replace(/&#92;/g,"\\"),e=e.replace(/&#123;/g,"{"),e)},escapeStringField:function(e){return t.escapeHtml(t.unescapeHtml(e))},escapeEmailObject:function(e){return{email:t.escapeStringField(e.email),name:t.escapeStringField(e.name)}},escapeEmailObjectArray:function(e){var n=e.length,r=[],i=0;for(;i<n;i++)r.push(t.escapeEmailObject(e[i]));return r},remove:function(e){e&&(e.empty().remove(!0),e.remove(!0))},removeHtml:function(e){return e==null?null:(e=""+e,e=e.replace(/<[^>]*>/g,""),e)},isProcessDefaultEnabled:function(e){return e.target.getAttribute("process-default")==="true"},getDataAction:function(e){var t=e.target,n=e.currentTarget,r=t.ancestor(function(e){return e.getAttribute("data-action")||e===n},!0),i=r?r.getAttribute("data-action"):0;return{node:r,action:i}},dateFormatter:function(e,t){return Neo&&Neo.dateFormatter?Neo.dateFormatter(e,t):""},getDateLabel:function(e,t){return Neo&&Neo.getDateLabel?Neo.getDateLabel((new Date).setHours(0,0,0,0),e,t):""},getDateString:function(e){return Neo&&Neo.getDateString?Neo.getDateString(e):""},triggerDarla:function(t,n){!NeoConfig.noDarla&&e.use("mail-ui-darla",function(e){var r=e.mail.ui.darla;r&&r.trigger(t,n)})},loadDarlaAndExecute:function(t,n){var r=NeoConfig.useTictacAds?"tictac-ads-darla":"mail-ui-darla";n?e.use(r,function(){t(e),e.use("mail-track")}):e.use(r,"mail-track",function(){t(e)})},parseQueryString:function(t){var n,r={};return t=t||window.location.search.replace(/^\?/,""),t&&t.length>1&&(n=t.split("?"),r=e.QueryString.parse(n.length>1?n[1]:n[0])),r},sanitizeString:function(e){var t=/[\u0000-\u001f\u007f]/g;return typeof e=="string"?i(e.replace(t,"")):e},mergeQueryString:function(n,r){var i;return e.Lang.isObject(r)&&(i=n.replace(/\?.*$/,""),r=e.merge(t.parseQueryString(n),r),n=i+"?"+e.QueryString.stringify(r)),n},setSelect:function(t,n){typeof t.addClass!="undefined"&&(t=[t]),e.Array.each(t,function(t){var r=e.Node.getDOMNode(t);typeof r.onselectstart=="object"?r.onselectstart=function(){return(window.event.srcElement||window.event.target).tagName==="INPUT"?!0:n}:typeof r.style.MozUserSelect!="undefined"?r.style.MozUserSelect=n?"inherit":"-moz-none":r.onmousedown=function(){return n}})},onDemand:function(t,n){return function(){var r=this,i=arguments;e.use(n,function(){r[t].apply(r,
i)})}},escapeRegexp:function(e){var t=/([\[|\]|\(|\)|])/g;return e.replace(t,"\\$1")},simulateContextMenu:function(t,n){var r,i=2,s,o;return t?(t=t._node?t._node:t,t.ownerDocument.createEvent?(s=e.one(t),o=s.getXY(),n!==!1&&o[1]-e.DOM.docScrollY()<0&&(s.scrollIntoView(),o=s.getXY()),o[1]-=e.DOM.docScrollY(),r=t.ownerDocument.createEvent("MouseEvents"),r.initMouseEvent("contextmenu",!0,!0,t.ownerDocument.defaultView,1,0,0,o[0],o[1],!1,!1,!1,!1,i,null),!t.dispatchEvent(r)):t.ownerDocument.createEventObject?(r=t.ownerDocument.createEventObject(),r.button=i,t.fireEvent("oncontextmenu",r)):!1):!1},isBrowserCORSCapable:function(){return"withCredentials"in new XMLHttpRequest||typeof XDomainRequest!="undefined"},convertToInputFieldText:function(t){var n=e.Node.create("<input></input>");return n.set("value",t),n.get("value")},replaceText:function(e,t){e&&e.setContent(e.getContent().replace(e.get("text"),t))},makeHttpsUrl:function(e){return e&&typeof e=="string"&&(e=e.replace(/^http:/,"https:"),e=e.replace(/:80\//,":443/")),e},debounce:function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)},u=n&&!r;clearTimeout(r),r=setTimeout(o,t),u&&e.apply(i,s)}},parseJSON:function(t){if(!t)return null;try{return e.JSON.parse(t)}catch(n){return typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-utils:1",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-utils:1"),null}},getVal:function(e,t,n){var r=t.split(".");for(var i=0,s=r.length;i<s;i++){var o=r[i];if(!(e!==null&&typeof e=="object"&&o in e))return n;e=e[o]}return e},_parseHeader:function(t){var n=i(t).split("\r\n"),r={};return e.Array.each(n,function(e){var t=i(e).split(":");t[0]!==""&&(r[i(t[0]).toLowerCase()]=i(t[1]))}),r},parseMultiPartResponse:function(t,n){var r=n?i(n):"",s="\r?\n?[-]*"+r+"[-]*\r?\n?",o,u,a,f,l,c,h,p,d,v,m,g,y,b=[];o=new RegExp(s,"igm"),u=t.split(o);for(l=0;l<u.length;l++){a=i(u[l]);if(a&&a!==""&&a!=="--"&&a!=="\r\n"){a=this._parseMultiPartBlockHeader(a);if(/StatusResponse/.test(a)){d=e.JSON.parse(a);if(d.StatusResponse){p=d.StatusResponse.failedRequests.length;if(p>0)for(c=0;c<p;c++)y=d.StatusResponse.failedRequests[c],g=y.id,m=this._getMethodName(g),h=y.error||{code:y.httpCode&&"HTTPError."+y.httpCode||""},f='{ "id" : "'+g+'", "ErrorResponse":'+e.JSON.stringify(h)+', "key" : "'+m+'Response", "'+m+'Response" : '+e.JSON.stringify(y)+', "success": false, "not_requested": false}',b.push(f)}else b.push(a)}else a&&b.push(a)}}return v="["+b.join(",")+"]",v},_parseJSON:function(t){var n,r,i;try{n=e.JSON.parse(t),i={blockJSON:n,filteredBlock:t}}catch(s){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-utils:2",s,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-utils:2"),r=this._sanitizeJSON(t),r?i=this._parseJSON(r):e.fire("MailLog",{m:"batch response parse failed from new parser!",errBlock:t,error:s.message})}return i},_sanitizeJSON:function(t){var n,r,s,o=/\r?\n?<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>\r?\n?/gi,u=/^\{/igm;if(t.match(o))return e.fire("MailLog",{m:"batch response parse failed because of script from new parser"}),e.fire("util:ymstats",{name:"v3_parse_fail",tags:{agent:NeoConfig.browser,part:"json",v3failedcase:"script",farm:NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx"}}),t.replace(o,"");n=i(t).split("\n");if(n.length>1){e.fire("MailLog",{m:"batch response parse failed because of unexpected newline in JSON body"}),e.fire("util:ymstats",{name:"v3_parse_fail",tags:{agent:NeoConfig.browser,part:"json",v3failedcase:"newline",farm:NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx"}});for(s=0;s<n.length;s++){r=i(n[s]);if(r.match(u))return r}}return""},_parseMultiPartBlockHeader:function(t){var n,r,s,o,u,a,f,l,c,h=!1,p,d;if(!t)return;f=t.indexOf("\r\n\r\n");if(f<0)return;return a=t.substr(0,f),u=this._parseHeader(a),n=i(t.substr(f+1)),u&&(r=u["content-requestid"],s=u["status-code"],o=u["content-type"]),r||(e.fire("MailLog",{m:"contentId not found in batch response!",headerText:a,header:u}),e.fire("util:ymstats",{name:"v3_parse_fail",tags:{agent:NeoConfig.browser,part:"header",v3failedcase:"emptyheader",farm:NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx"}})),o&&o.indexOf("application/json")!==-1?(d=this._parseJSON(n),l=d.blockJSON,n=d.filteredBlock,p=this._getMethodName(r),h=this._extractError(l,p),l?h?c='{ "id" : "'+r+'", "key" : "'+p+'Response", "ErrorResponse" : '+e.JSON.stringify(h)+', "success": false}':c='{ "id" : "'+r+'", "key" : "'+p+'Response", "'+p+'Response" : '+n+', "success": true}':(h={code:"parse",message:"JSON Parse Error for unknown reason"},e.fire("util:ymstats",{name:"v3_parse_fail",tags:{agent:NeoConfig.browser,part:"body",v3failedcase:"unknown",farm:NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx"}}),c='{ "id" : "'+r+'", "key" : "'+p+'Response", "ErrorResponse" : '+e.JSON.stringify(h)+', "success": false}')):s!=="200"&&parseInt(s,10)>=400&&o&&o.indexOf("html")!==-1&&(p=this._getMethodName(r),h={code:"HTTPError."+s,message:"Server Error:HTTPError."+s},c='{ "id" : "'+r+'", "key" : "'+p+'Response", "ErrorResponse" : '+e.JSON.stringify(h)+', "success": false}'),c},_extractError:function(e,t){var n;return e?(n=e.result,!n&&e.error?e.error:t==="GetCids"&&n&&n.errors&&n.errors.length?n.errors[0]:!1):{}},_getMethodName:function(e){var t;if(!e)return;return e&&(e.indexOf("LMT_")>=0||e==="listmessagesinthread")?t="ListMessagesInThread":e&&(e.indexOf("GDM_")>=0||e==="getdisplaymessage")?t="GetDisplayMessage":e&&e==="getcids"?t="GetCids":t=e,t},isSSL:function(){return window.location.protocol==="https:"},rand:function(e){return Math.floor(Math.random()*e)},verify:function(e,t){if(e)return;throw new Error(t)},expandList:function(t){var n=[],r,i,s,o;return t=t.split(","),e.Array.each(t,function(e){if(e.indexOf("-")!==-1){o=e.split("-"),r=parseInt(o[0],10),i=parseInt(o[1],10);for(s=r;s<=i;s++)n.push(s)}else n
.push(e)}),n},getFarmsConfig:function(t){var n=[],r=this,i;return e.Object.each(t,function(t,s){i=r.expandList(s),e.Array.each(i,function(e){n[e]=t})}),n},isControlActive:function(t){var n=e.one("html"),r=n.one("body"),i=document.activeElement&&e.one(document.activeElement),s={INPUT:1,TEXTAREA:1,SELECT:1,BUTTON:1};if(n.hasClass("dlg-show")||n.hasClass("themes")||r.hasClass("boss"))return!0;if(i)if(i.ancestor(".optionMenu",!0)||i.ancestor(".modal",!0)||!t&&(i.ancestor('[contenteditable="true"]',!0)||s[i.get("nodeName")]))return!0;return!1}});if(window.hasOwnProperty&&window.hasOwnProperty("getComputedStyle")){var o=window.getComputedStyle,u=window.Window&&window.Window.prototype||Object.getPrototypeOf(window);delete window.getComputedStyle,u.getComputedStyle=function(e,t){return o.call(this||window,e,t)}}},"1.0.0",{requires:["querystring-parse-simple","querystring-stringify-simple","launch-utils"]});


YUI.add("common-utils-apihook",function(e){var t=e.Lang,n=e.common.Utils;n.ApiHook=function(r){var i={};return r.hook=function(e,s,o){var u,a;o=o||10;if(!!s)return n.assert(e&&s),n.assert(t.isObject(s)),n.assert(!t.isArray(s)),u=i[e]=i[e]||[],u=u[o]=u[o]||[],s.hId={o:o,i:u.push(s)-1},s.hId;for(a in e)r.hook(a,e[a],o)},r.unhook=function(e,r){var s,o,u,a;if(r)n.assert(e&&(r||r===0)),n.assert(t.isString(e)&&t.isObject(r)&&t.isNumber(r.o)&&t.isNumber(r.i)),n.assert(i[e]),n.assert(i[e][r.o][r.i].hId==r),i[e][r.o][r.i]=0;else for(s in i){u=i[s];for(o in u){a=u[o];for(r in a)a[r]==e[s]&&(a[r]=0)}}},function(r,s,o,u,a){function b(){function w(e,n){if(t.isString(e))s=e,h=p=0,n&&(r=n,m=i[r]||[]),c=m[0];else{l=l||1;if(t.isFunction(e))return y.abort=function(){var t=e();return l=2,t===undefined?1:t},v("async",r,u),function(e,t,n){return l==1&&(v("resume",r,u),o=e||o,y.abort=g,l=0,t&&(s=t,p=0,h=n||0),b()),l==1};if(e){if(!t.isObject(e)){l=0,o=n||o,b();return}y.abort(),y.abort=function(){return e.abort()}}l=2}}while(h<m.length){c=m[h];while(c&&!l&&p<c.length){f=c[p++];if(f){t.isFunction(f)||(f=f[s]);try{o=f&&f(o,u,w,s)||o}catch(E){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-apihook:1",E,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-apihook:1"),d=["HookFailure",r,s,h,p-1].join("_"),NeoConfig.log_error_yapache&&e.use("common-utils-error",function(){n.error.report(E,"apihook:"+d,1,1,1)})}}}if(l)break;h++,p=0}if(!l){l=2,y.abort=function(){},f=a;if(f){t.isFunction(f)||(f=f[s]);try{f&&f(o,a,s,u)}catch(E){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-common-utils-apihook:2",E,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-common-utils-apihook:2"),d="CbkFailure_"+r+"_"+s,NeoConfig.log_error_yapache&&e.use("common-utils-error",function(){n.error.report(E,"apihook:"+d,1,1,1)})}}}return y}var f,l,c,h=0,p=0,d,v=a&&a.notify||function(){},m=i[r]||[],g=function(){return l=2,1},y={abort:g};return n.assert(t.isFunction(v)),b()}}},"1.0.0",{requires:["common-utils"]});


YUI.add("common-user-session",function(e){var t=e.common,n=t.persist,r,i;t.UserSession={getState:function(){var e=n.getCookie("Y"),t=e&&e.get("l");return{user:t,newuser:t&&t!==i,loggedout:!t}},update:function(){var e=this.getState();i=e.user},same:function(){var e=this.getState();return!e.newuser&&!e.loggedout}},r=NeoConfig.initCookieData||t.UserSession.getState(),i=r.user},"1.0.0",{requires:["common-persist-cookie-data","common-utils"]});


YUI.add("mail-controller-parkqueue",function(e){e.namespace("mail");var t=function(){var e=this;e.parkQueue=[],e.parkIt=0,e.parkTimer=0};e.mix(t.prototype,{park:function(e,t){function i(){if(e.parkIdx===undefined)return;n.parkQueue[e.parkIdx]=0;var t=n.parkQueue.length;while(t--)if(n.parkQueue[t])return;n.parkIt=0}function s(){return}function o(){n.parkTimer=0,n.parkIt&&(n.parkIt=0,n.doUnpark())}var n=this;try{if(e.batch){if(e.batchOps.parkMethod){e.batchOps.resumeCtx&&e.batchOps.resumeCtx.method!==e.method&&e.batchOps.resumeCtx.resumeFn.push({ctx:e,resumeFn:t(s)});return}e.batchOps.parkMethod=e.method}n.parkIt?(e.parkIdx=n.parkQueue.push(e)-1,e.batch&&(e.batchOps.resumeCtx={method:e.method,resumeFn:[]}),e.resume=t(i)):(n.parkTimer&&clearTimeout(n.parkTimer),n.parkTimer=setTimeout(o,3e4)),e.unparkIt=1,n.parkIt=1}catch(r){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-parkqueue:1",r,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-parkqueue:1")}},unpark:function(e,t){var n=this;t!=="pre"&&e.unparkIt&&(e.unparkIt=0,setTimeout(function(){n.doUnpark.apply(n,arguments)},0))},doUnpark:function(){function r(e){return e.parms.msg||e.parms.msgs||!e.parms.prefetch}function i(n){var i,s,o,u=[],a=t.parkQueue.length;while(a--)if((i=t.parkQueue[a])&&(!n||r(i))){t.parkQueue[a]=0;if(n)while(a--)(s=t.parkQueue[a])&&!r(s)&&(t.parkQueue[a]=0);t.parkIt=0,i.batchOps&&i.batchOps.resumeCtx&&i.batchOps.resumeCtx.resumeFn.length>0&&(u=e.clone(i.batchOps.resumeCtx.resumeFn),i.batchOps.resumeCtx=null),i.resume(i.parms,"pre");for(o=0;o<u.length;o++)u[o].resumeFn(u[o].ctx.params,"pre");return 1}n||(t.parkIt=0,t.parkQueue.length=0)}var t=this;try{i(1)||i()}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-parkqueue:2",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-parkqueue:2")}}}),e.mail.ParkQueue=new t});


YUI.add("mail-controller-base",function(e){function m(e,t,n){return{reason:t,data:e,fault:n,code:n&&n.code}}function g(t,n,r,i,s,u,a){function d(e,t,n,r){var i;p.api=e,p.method=t,p.cfg=c&&c[e],p.canLeadToYdod=!1,r&&(p.reason=r);if(t==="FlagMessages"||t==="FlagThreads"){f=n.setFlags;if(f.spam||f.ham||f.sendercompromised||f.phished||f.notmymail)p.cfg=c.spam}p.parms=n;if(typeof n=="object"){l=p.origParms={};for(i in n)l[i]=n[i];l=p.modParms={};for(i in n)l[i]=n[i]}else p.origParms=p.modParms=n;p.cfg&&n[p.batchOps.entity]&&n[p.batchOps.entity].length>250*p.cfg.bs&&(p.canLeadToYdod=!0)}var f,l,c=t.bulkOps,p={controller:t,api:n,method:r,reason:a,cfg:c&&c[n],custom:{},start:0,size:0,batchOps:i,batch:i.batch,getBatch:function(){return p.batch=1,D(i)},newApi:d,opNum:h++,deBatch:1};return o[t.ns].entity&&(p.batchOps.entity=o[t.ns].entity),a||(p.reason=n,s=s||{},!u&&(s.success||s.failure)&&(u=s,s={}),u=u||{}),p.cbk=u,i.cbk||(u=i.cbk=e.Object(u),u.success=u.failure=0),d(n,r,s),p.batchIdx=i.push(p)-1,i.count++,p}function y(e,t,n,r,i,s){n||(n=[],n.count=0,n.waitCnt=0);var u=g(this,e,t,n,r,i,s);return u.abort=o[this.ns].ch(e,"pre",u.parms,u,u.cbk),u.abort}function b(e,t,r,i){if(t.deBatch&&i!=="pre"){var s=t.batchOps;t.deBatch=0,s[t.batchIdx]=0,s.count--,typeof t.waitIdx!="undefined"&&(p[t.waitIdx]=0,s.waitCnt--),n||T("deBatchHook")}}function w(e,t,n,r){if(t.batch&&r!=="pre"){var i,s=t.batchOps,o=s.cbk,u=s.response.result.response[t.batchIdx]={};u[t.method+"Response"]=e,s.envCnt++,s.envCnt===s.length&&o&&(i=o.success,i&&i(u))}}function E(t,r,i){var u,a=0,f=r.batchOps,l=r.method,c=o[r.controller.ns],h=c.noDelay,d=c.isdup,v=function(){p[r.waitIdx]=0,f[r.batchIdx]=0,f.waitCnt--,f.count--},m=function(){u.dups[r.dupIdx]=0};if(d&&(d=d[l]))while(a<p.length)if((u=p[a++])&&u.method===l&&d(u.parms,t,u,r,i)){b(t,r),u.dups=u.dups||[],r.dupIdx=u.dups.push(r)-1,r.resume=i(m);return}f.batch||(f.ready=1),f.waitCnt++;if(f.batch||!h||!h[r.api]){r.waitIdx=p.push(r)-1;if(n||!f.ready||f.waitCnt!==f.count)r.resume=i(v),r.delayed=1;else{x(),s=r,a=0;while(a<f.length)(r=f[a++])&&r.delayed&&(r.delayed=0,r.resume())}}e.fire("BaseController:delayHook",r,n)}function S(){r&&(clearTimeout(r),r=0)}function x(){S(),r=setTimeout(function(){var e=s?s.method:"Unknown";T("resetForceResumeTimer"),i=e},NeoConfig.controllerForceResume||3e4),i=0}function T(t){e.fire("MailLog",{m:"Resume delayed requests",caller:t}),x();var n,r,i,o=0,u=0,a=p.length;while(o<a){r=p[o++];if(r){i=1,n=r.batchOps;if(n.ready&&n.waitCnt===n.count){u=n.length;while(u)r=n[--u],r&&(s=r,p[r.waitIdx]=0,r.delayed=0,r.resume()||(n[r.batchIdx]=0,n.waitCnt--,n.count--));if(n.count!==0&&!n.readonly)return}}}i||(p.length=0),s=0,S()}function N(e,t,n){var r=0,i=t.batchOps,s=function(){return o()},o=function(){while(r<i.length)t=i[r++],t&&(p[t.waitIdx]=0);T("transportHook")};t.resume=n(s),t.parms=e,t.deBatch=0,--i.waitCnt||(o=_(i,i.cbk))}function C(e,t,n,r){var i,s=t.dups;if(s)while(s.length)i=s.shift(),i&&i.resume(e,r)}function k(e,t){var n,r=e.cfg,i=e.parms,s=i[t];if(r&&s&&(e.count=n=s.length))return e.time=n*(e.cost=1e3/r.bs),e.time}function L(e,t){var n,r,i,s,o=0,u=0,a=new Date,f=a-t.bst,l=a-t.st;if(f){t.bst=a,u=800/f-.8,t.ie+=f-1e3,u-=.5*t.ie/l,t.la&&(i=.5*u*u*(1+1/t.la),i=i<-0.5?-0.5:i>.5?.5:i,u+=i),t.la=u;while(e[o])s=e[o++],n=s.cfg,n&&(r=n.bs,r+=r*u,n.min>r&&(r=n.min),n.max<r&&(r=n.max),n.bs=r)}}function A(t,n,r){try{var i,s,o,u=r.body.result,a,f=0,l;NeoConfig.enable_spdy_support?a=r.getResponseHeader("X-Server-Chain")||"":a=r.responseHeaders&&r.responseHeaders["X-Server-Chain"]||"",o=M(r);while(n[f]){i=n[f],i.cnd="success",s=u;if(t)if(NeoConfig.hasConvV3&&r.multipart){for(l=0;l<u.response.length;l++)if(i.origParms.chain&&u.response[l].id===i.origParms.chain.id||!i.origParms.chain&&u.response[l].hasOwnProperty(i.method+"Response")){s=u.response[l];if(s.success||s.not_requested)s=s[i.method+"Response"];else{s=s.ErrorResponse,i.cnd="failure";if(i.bulk)return s}break}}else{s=u.response[f];if(s.success)s=s[i.method+"Response"];else{s=s.ErrorResponse,i.cnd="failure";if(i.bulk)return s}}f++,i.start+=i.size,i.cfg&&i.resp&&i.resp.mid&&s.mid&&(s.mid=i.resp.mid.concat(s.mid)),i.resp=s,e.mix(i.resp,{callPerf:o}),NeoConfig.sessionTracer&&e.mail.model.DataStore.Sessions.addResponse({method:i.method,hostname:a,data:O(i.cnd,i.method,s)}),e.fire("MailLog",{m:"Response",method:i.method,hostname:a,data:O(i.cnd,i.method,i.resp)}),NeoConfig.log_error_yapache&&i.method==="GetDisplayMessage"&&e.mix(i.resp,{allHeadersText:r.allHeadersText||"",request:r.request||"",responseText:r.responseText||""})}}catch(c){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-base:1",c,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-base:1")}}function O(e,t,n){var r,i,s,o;return e==="failure"?n:t==="ListFolders"||t==="ListMessages"?"<filtered>":t==="ListFolderThreads"?n?(!n.folder||!n.conversations?r={LFTErrorResp:n}:r={total:n.folder.total,conv:n.conversations.length},r):"":t==="GetDisplayMessage"?n?(i=n.message[0]?n.message[0].mid:"",o=n.folder&&n.folder.folderInfo?n.folder.folderInfo.fid:"",r={mid:i,fid:o,perf:n.callPerf},r):"":t==="ListMessagesInThread"?n?(s=n.conversation?n.conversation.cid:"",o=n.folder&&n.folder.folderInfo?n.folder.folderInfo.fid:"",r={cid:s,fid:o,perf:n.callPerf},r):"":n}function M(e){var t={},n;return e.curlTime&&(t.curlTime=e.curlTime),e.getResponseHeader&&(n=parseInt(e.getResponseHeader("X-Response-Time"),10)||parseInt(e.getResponseHeader("X-Server-Response-Time"),10))&&(t.serverTime=n),t}function _(t,n){function V(){r=h=l=u=0,y=[],b=[];while(r<t.length){i=t[r++];if(i){d&&i.size&&(d.processed+=i.size);if(i.complete)p[i.waitIdx]=0,t[i.batchIdx]=0,i.resume(i.resp,i.cnd),c[i.method]--;else{k(i,X)&&(u+=i.cost,l+=i.time,h+=i.count);if(!d||!i.size)c[i.method]=c[i.method]||0,c[i.method]++;y.push(i)}}}u&&(R=1e3/u|0),(F=t[0])&&(F=F.cfg)&&F.fixed&&(R=F.fixed,t[0].parms[X].length<R*2.5&&(q=0)),g||(g=1,l<2e3?
R*=9:q&&(g={ie:0,la:0,bn:0},g.bst=g.st=new Date,d={processed:0,total:h})),d&&(d.timeleft=l),j=0,r=0,o=[],z=[];while((i=y[r++])&&(i.cfg||!j)){U=i.parms.chain,E=U||{},E[w=i.method]=C={},M=i.parms,delete M.chain;for(var e in M)M.hasOwnProperty(e)&&(C[e]=M[e]);o.push(E),i.cbk=i.cbk||{},i.cbk.method=i.cbk.method||w,I=E.id||i.parms&&i.parms.id,I&&(i.cbk.id=I),z.push(i.cbk),b.push(i);if(i.cfg){i.size=R,B=S=i.start,S+=R,C[X]=C[X].slice(B,S);if(M[X].length>S){i.bulk=j=1;continue}}i.complete=1}H=o.length,H>1&&(W.batchopcbk=z,D=!0);if(!O){try{d&&n&&(N=n.progress,N&&N(d))}catch(a){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-base:2",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-base:2")}H&&(s=f.net.Transport.request(D?P?"BatchExecuteGDM":"BatchExecute":w,D?{call:o}:C,W,!0))}(O||!H)&&T("transport")}function $(e){var t=b[0]&&b[0].canLeadToYdod,n=b[0]&&a.getVal(b[0],"controller.ydodRequiredDelay"),r=0;return t&&n&&e>0&&(r=n-e),Math.max(0,r)}var r,i,s,o,u,l,h,d,g,y,b,w,E,S,N,C,O,M,_,D,P,H,B,j,F,I="",q=1,R=0,U,z,W=e.Object(n||{}),X=t.entity?t.entity:"mid";return W.success=function(t){var n=0;x(),t&&e.fire("util:ymstats",{name:"webservice_latency",unit:"ms",type:"duration",dataum:t.curlTime,tags:{api:w,farm:NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx",colo:NeoConfig.mailEnv==="prod"?NeoConfig.hostName.split(".")[3]:""}}),L(b,g),A(D,b,t),n=$(t.curlTime),n===0?V():e.later(n,this,V)},W.failure=function(e){e.body&&e.body.result&&A(D,b,e),_(e,"failure")},V(),_=function(e,n){if(!O){e=e||{fault:"aborted"},O=!0,r=0;while(r<t.length)i=t[r++],i&&(p[i.waitIdx]=0,i.complete=1,i.cnd!=="success"&&(i.cnd=n||"aborted",i.resp=m(e,v.failed,e.fault)));n!=="aborted"&&V(),s&&s.abort(),T("abort")}},_}function D(t){var r=t.intf;if(r)return r;var i,s,u,a;r=t.intf={execute:function(r){return t.ready=1,t.cbk=r,e.fire("BaseController:execute",t,n,p),n||T("makeBatch"),{abort:function(){var e=0;while(e<t.length)a=t[e++],a&&a.abort()}}},setAsReadOp:function(e){t.readonly=e||!1}},t.envCnt=0,t.response={error:null,result:{response:[]}};for(i in o){s=o[i].batchable;if(s){r[i]=e.Object(r),r[i].ns=i,r[i].bulkOps=l[i].bulkOps;for(u in s)r[i][u]=e.bind(y,r[i],u,s[u],t)}}return t.batch=1,t.count=t.length,t.waitCnt=0,r}function P(t,n,r){function a(){var n;if(r.status===500||r.status===400){i=r.fault.code,NeoConfig.hasConvV3&&!r.body&&(r.body=e.JSON.parse(r.responseText),i=r.body.code,u=r.body.message);if(/SessionIdReissue/.test(i)||/Reissuing session ID/.test(u))s=402;else if(/Credentials/.test(i)||/Credentials/.test(u))s=401,n={stat:i+"_"+o.method}}t.callDefault(s,n,1)}var i,s=null,o,u;if((o=r.callback)&&o.service==="mail")return e.use("mail-error",function(e){f.Error?f.Error.handle(t,n,r):a()}),t.isdone()||t.async(a)}var t,n,r,i,s,o={},u=e.common.net.Error,a=e.common.Utils,f=e.mail,l=f.Controller={},c={},h=0,p=[],d={fixParms:2,cacheCheck:4,dupcheck:12,optimistic:14,gdmDelay:16,delay:18,transport:20,deBatch:2,unpark:4,dupcbk:6,cache:8,resume:10,envelope:12,usercbk:30},v={notfound:1,moved:2,request:3,failed:4,baddata:5,wserror:6,_reservedIdx:20};l.extend=function(n,r){var i,s,u,f=l[n];f||(f=l[n]=e.clone(t),f.ns=n,o[n]={},o[n].ch=a.ApiHook(f)),r=r||{},r.ch=o[n].ch,r.order=d,e.mix(o[n],r,0,0,0,1),s=r&&r.passthru;if(s)for(i in s)f[i]=e.bind(y,f,i,s[i],0),f.hook(i,{pre:E},d.delay),f.hook(i,{pre:N},d.transport),f.hook(i,C,1),f.hook(i,b,d.deBatch),f.hook(i,w,d.envelope);u=r&&r.batchable;if(u)for(i in u)s[i]||(f.hook(i,{pre:E},d.delay),f.hook(i,{pre:N},d.transport),f.hook(i,b,d.deBatch),f.hook(i,w,d.envelope));return f},l.batch=function(){return D([])},t={Error:v,abort:function(e){e&&e.abort()},_error:m},u.onError(P)},"1.0.0",{requires:["mail-net-transport","common-net-error-base","common-utils","common-utils-apihook"]});


YUI.add("mail-controller-messages",function(e){function F(t){e.use("mail-debug",function(){confirm("Y! Internal: Found invalid message query param.\nPlease click OK to send for Y!Mail Engineering diagnosis.")&&n.Debug.emailIssue(t)})}function q(e,t,n){var r,i;if(t==="Draft")return"none";switch(e){case"0":i="none";break;default:i="all"}return strings.str_cfg_tog_old_imageblock?e==="b"&&(i=t==="%40B%40Bulk"?"all":"none"):(t==="%40B%40Bulk"&&(i="all"),e==="b"&&n&&(r=n.flags)&&r.inAddressBook&&(i="none")),i}function R(t){e.fire("util:ymstats",{name:t,unit:"requests",type:"gauge",dataum:1,tags:{bandwidth:NeoConfig.bandwidthMode?NeoConfig.bandwidthMode:"broadband",isMailPlus:NeoConfig.hasAds?0:1}})}function U(e){var t,n,r,i,s;if(e.batch&&e.batchOps&&(s=e.origParms.chain)&&(n=e.batchOps.response)&&s.dependency&&n.result&&(r=n.result.response))for(t=0;t<r.length;t++)if(r[t]&&(i=r[t].ListMessagesInThreadResponse)&&i.chainedLMTMsg&&i.chainedLMTId===s.dependency[0])return i;return null}function z(e,t,n){function r(){k[t.parkIdx]=0;var e=k.length;while(e--)if(k[e])return;L=0}function i(){A=0,L&&(L=0,X())}if(NeoConfig.hasConvPerf){f.park(t,n);return}L?(t.parkIdx=k.push(t)-1,t.resume=n(r)):(A&&clearTimeout(A),A=setTimeout(i,3e4)),t.unparkIt=1,L=1}function W(e,t,n,r){if(NeoConfig.hasConvPerf){f.unpark(t,r);return}r!=="pre"&&t.unparkIt&&(t.unparkIt=0,setTimeout(X,0))}function X(){function e(e){var t,n,r=k.length;while(r--)if((t=k[r])&&(!e||t.parms.msg)){k[r]=0;if(e)while(r--)(n=k[r])&&!n.parms.msg&&(k[r]=0);return L=0,t.resume(t.parms,"pre"),1}e||(L=0,k.length=0)}e(1)||e()}function V(t,n,r){function O(e,t){var n,r=c(e.mid),o=t&&t.truncateAt,u;return n=!t||!r||s.congruent(t,r,!0,{truncateAt:1}),n&&(u=i.get(m,e))&&u.part&&(!u.isTruncated||o&&r.truncateAt>o||u.isTruncated&&typeof o=="undefined")&&u}function D(e){var n=e.mid,r=c(n),i=NeoConfig.low_bandwidth||parseInt(NeoConfig.noLiveWords,10)===1||strings.str_cfg_tog_disable_livewords?"none":"inline",o;return S.lw&&(i=S.lw==="1"?"inline":"none"),o=r?s.merge({},r):{fid:m,prime:t.cachekey,enableRetry:!0,textToHtml:!0,urlDetection:!0,emailDetection:!0,qtAnnotate:{enable:!0},emailComposeUrl:"mailto:%e%",truncateAt:h,charsetHint:"",annotateOption:{annotateText:i},bidiDetection:NeoConfig.bidi},e.charset&&(o.charsetHint=e.charset),NeoConfig.mentos_enabled&&(o.MessageHeaders=["Authentication-Results","X-Rocket-Track"]),b&&s.merge(o,b,!0),u.isNumber(o.truncateAt)||delete o.truncateAt,delete o.midRequest,o}function H(e,n){var r=e.mid,i=c(r),o=i&&i.midRequest,u=o?s.merge({},o):{blockImages:q(L,m==="$(fid)"?t.ofid:m,e),restrictCSS:!0,expandCIDReferences:!0,enableWarnings:!0,bidiDetection:NeoConfig.bidi};return b&&s.merge(u,b.midRequest||{},!0),u.mid=r,u.cachekey=e.cachekey||t.cachekey,u.cachekey||(u.cachekey=n?"PrimeOther":"Other"),u}function I(e){var t=c(e.mid),n=t&&t.midRequest.cachekey||"Neighbors";return v[n]||(v[n]=0),v[n]++,n}function z(){F("GDM Multi primeMsg bad param:\n\n"+e.JSON.stringify(y||{}))}function W(){var e,t,n;for(o=0;f&&o<f.length;o++){l=f[o];if(!l)continue;s.assert(!NeoConfig.isInternal||l.mid,"badparam-get",1,z),C&&C.no_scroll_to_msg&&delete C.no_scroll_to_msg,t=C.midRequest&&C.midRequest.blockImages=="none",n=O(l,C),e=!n||t;if(l.mid&&e){A||(g++,R(B));if(E&&s.congruent(E,D(l),!0)||(E=D(l)))a<P?x.push(H(l,!1)):N.push(H(l,!1).mid),a++}else n&&(R(j),d=I(l),p[l.mid]|=1,T.push(n))}}var o,a=0,f=t.msgs,l,m=t.fid,y=t.prefetch,b=t.ovparams,w=t.chain,E,x=[],T=[],N=[],C=b,k=n.custom,L=e.common.persist.UserData.get("userUIPref.imageBlocking"),A=n.parkIdx!==undefined;if(!(t&&t.fid&&(t.msgs||t.message&&t.message.length||t.chain&&t.chain.dependency))){r("failure");var U=e.JSON.stringify(t||{});return s.netError("GDMBadParams:multi:"+U+":"+NeoConfig.loginId),e.fire("MailLog",{m:"GDMBadParams:multi",info:U,id:NeoConfig.loginId}),s.assert(!NeoConfig.isInternal,"badparam-get",1,function(){F("GDM Bad param sent:\n\n"+U)}),_(t,M.request)}n.cbk&&(n.cbk.respProps={wasCached:!0}),W();if(x.length<=0&&T.length>0)return r("success"),T;if(E){n.cbk&&n.cbk.respProps&&(n.cbk.respProps.wasCached=!1),n.cachedMsgs=T,s.assert(x.length),E.message=x,E.skippedMessage=N,k.rparams=s.merge({},E);for(o=0;o<x.length;o++)delete x[o].cachekey}return w&&E&&(E.chain=w),E&&x.length?E:r("nomsgs")}function $(t,n,r){function K(t,n){var r,o=c(t.mid),u=n&&n.truncateAt,a;return r=!n||!o||s.congruent(n,o,!0,{truncateAt:1}),e.log(r&&(a=i.get(l,t))&&a.part&&(!a.isTruncated||u&&o.truncateAt>u||a.isTruncated&&typeof u=="undefined")&&a,t.mid),r&&(a=i.get(l,t))&&a.part&&(!a.isTruncated||u&&o.truncateAt>u||a.isTruncated&&typeof u=="undefined")&&a}function Q(e){var n=e.mid,r=c(n),i=NeoConfig.low_bandwidth||parseInt(NeoConfig.noLiveWords,10)===1||strings.str_cfg_tog_disable_livewords?"none":"inline",o;return S.lw&&(i=S.lw==="1"?"inline":"none"),o=r?s.merge({},r):{fid:l,prime:t.cachekey,enableRetry:!0,textToHtml:!0,urlDetection:!0,emailDetection:!0,qtAnnotate:{enable:!0},emailComposeUrl:"mailto:%e%",truncateAt:h,charsetHint:"",annotateOption:{annotateText:i},bidiDetection:NeoConfig.bidi},e.charset&&(o.charsetHint=e.charset),NeoConfig.mentos_enabled&&(o.MessageHeaders=["Authentication-Results","X-Rocket-Track"]),w&&s.merge(o,w,!0),u.isNumber(o.truncateAt)||delete o.truncateAt,delete o.midRequest,o}function G(e,n){var r=e.mid,i=c(r),o=i&&i.midRequest,u=o?s.merge({},o):{blockImages:q($,l==="$(fid)"?t.ofid:l,e),restrictCSS:!0,expandCIDReferences:!0,enableWarnings:!0,bidiDetection:NeoConfig.bidi};return w&&s.merge(u,w.midRequest||{},!0),u.mid=r,u.cachekey=e.cachekey||t.cachekey,u.cachekey||(u.cachekey=n?"PrimeOther":"Other"),u}function Y(e){var t=c(e.mid),n=t&&t.midRequest.cachekey||"Neighbors";return v[n]||(v[n]=0),v[n]++,n}function Z(){F("GDM Prefetch bad param:\n\n"+e.JSON.stringify(b||{}))}var o,a,f=0,l=t.fid,y=t.msg,b=!t.dontCache&&t.prefetch,w=t.ovparams,E=t.chain,C=E&&E.parameter&&E.parameter[0].destination,k,L=[],A,D=!!t.noCache,P,H=n.custom,I=null,z,W,X,V,$=e.common.persist.UserData.get("userUIPref.imageBlocking"
),J=n.parkIdx!==undefined;y&&b&&(a=e.clone(t),a.msg=null,t.prefetch=null,b=null,setTimeout(function(){O.get(a,{suppressCodes:["*"]})},0)),C&&C.match(/\.mid$/)&&(I=U(n),I&&(P=I.chainedLMTMsg,l=P.sourceFolderInfo.fid,b?b=[P]:y=t.msg=P),I||(P={},b?b=[{mid:N}]:(y=t.msg={},y.mid=N)));if(!(t&&t.fid&&(t.msg&&t.msg.mid||t.prefetch||t.message&&t.message.length||t.chain&&t.chain.dependency)))return r("failure"),W=n.cbk&&n.cbk.errorPosition||0,X=e.clone(t||{}),e.mix(X,{errorPos:W,conv:NeoConfig.hasConvView}),V=e.JSON.stringify(X),s.netError("GDMBadParams:singl:"+V+":"+NeoConfig.loginId),e.fire("MailLog",{m:"GDMBadParams:singl",info:V,id:NeoConfig.loginId}),s.assert(!NeoConfig.isInternal,"badparam-get",1,function(){F("GDM Bad param sent:\n\n"+V)}),_(t,M.request);if(y){T=x(),A=!D&&K(y,w);if(A)return J&&(m--,g--),d=Y(y),p[A.mid]|=1,s.traceMsg(["CachedMessage: ","MID => ",A.mid," | ","Cache => ",d," | ","Algorithm => ",NeoConfig.preCacheModule||"unknown"].join("")),n.cbk&&(n.cbk.respProps={wasCached:!0}),r("success"),R(j),A;J||(++m,R(B)),n.cbk&&(n.cbk.respProps={wasCached:!1});if(t.cacheOnly)return r("failure"),_(y,M.notfound);J||g++,k=Q(y),L=[G(y,!0)],n.cbk&&(n.cbk.urlParams={debugmid:y.mid||"",cachekey:t.cachekey||""}),n.batch&&n.cbk&&(n.cbk.suppressNotification=!0)}for(o=0;b&&o<b.length;o++){z=b[o];if(z){s.assert(!NeoConfig.isInternal||z.mid,"badparam-get",1,Z);if(z.mid&&!K(z,w)){J||g++;if(k&&s.congruent(k,Q(z),!0)||(k=Q(z))){if(!(f<10))break;L.push(G(z,!1)),f++}}}}if(k){s.assert(L.length),k.message=L,H.rparams=s.merge({},k);for(o=0;o<L.length;o++)delete L[o].cachekey}return E&&k&&(k.chain=E),k&&L.length?k:r("nomsgs")}function J(t,n){function q(t){var n,r,s,o,u=C||[],a=t.mid,f=i.isSearchMid(a,E);if(!e.Lang.isArray(u))return null;for(n=0;n<u.length;n++){r=u[n],o=r.sourceFolderInfo&&r.sourceFolderInfo.fid||E;if(a===r.mid||f&&l(a)===l(r.mid))break;if(a===N){u.length!==1&&e.fire("MailLog",{m:"Batch chaining expects only one mid",length:u.length,curmid:r.mid}),x=u[n],t.mid=u[n].mid;break}if(i.hasMoved(a,r.mid,E,E)){(s=o!==E)||i.flush(E);break}}return n===u.length?null:{pos:n,key:t,fid:f&&E||o,msg:r,moved:s}}function U(t){var n=t.search(/<script[^>]*>/i),r,i,s,o,u={};if(n>=0){r=t.length,i=Math.max(t.search(/<\/script>/i),r),s=n!==0||i!==r?t.substring(n,i):t,o=/\bYAHOO\.Shortcuts\.mailCategories\s*=\s*(.*);/.exec(s);if(o&&o[1])try{u.categories=e.JSON.parse(o[1])}catch(a){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:2",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:2"),u.categories={}}o=/\bYAHOO\.Shortcuts\.annotationSet\s*=\s*({[\s\S]*?})\s*;/.exec(s);if(o&&o[1])try{u.annotations=e.JSON.parse(o[1])}catch(a){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:3",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:3"),u.annotations=null}return u}return null}var o,u,a,f,h,d,v,m,g,b,w=n.origParms,E=w.fid,x,T=!w.dontCache,C=t.message||t,k=t.code,L,A,_,P,B=[],j=n.custom.rparams,F=j&&j.skippedMessage,I=j&&j.message;for(o=0;o<w.msgs.length;o++)F&&F.length?F.indexOf(w.msgs[o].mid)<0&&B.push(w.msgs[o]):B.push(w.msgs[o]);if(I&&(C||k)){delete j.message;for(o=0;o<B.length;o++)if(n.cachedMsgs)for(h=0;h<n.cachedMsgs.length;h++)B[o].mid===n.cachedMsgs[h].mid&&(B[o]=n.cachedMsgs[h]);for(o=0;o<I.length;o++){f=!0,L=m=null,d=q(I[o]);if(d){L=d.msg,d.moved&&(i.remove(E,I[o]),i.set(d.fid,L,"move"),m=M.moved),_=e.clone(j),_.midRequest=I[o];if(T){!w.forceCache&&(v=i.get(d.fid,L))&&(v.part&&s.congruent(c(L.mid),_,!0)?(L=v,f=!1):v.flags&&(L.flags=v.flags));if(f){i.set(d.fid,L,n.reason,!0,function(e){return O._process(e,d),e},_),p[L.mid]&&st(),p[L.mid]=0,y++,R(H),L=i.get(d.fid,L);if(L.extend)for(u in L.extend)delete L.extend[u];else L.extend={};L.body&&L.body.display&&(L.extend.shortcuts=U(L.body.display))}}else L._param=_,O._process(L,d),i.extend(L)}else m=M.wserror;m===M.wserror&&(g=G(I[o],k,E),b=g?g.code:"NotFound",A="GDM_Code_"+b+"_"+(w.cachekey||""),P=I[o].mid,e.use("common-utils-error",function(e){var i=Z(w.cachekey,g),s,o,u,a,f,l=[i,i+"_"+A,"E_getdisplaymessage"],c={convpane:"CONVREAD",messagepane:"MESSAGEREAD",search:"SEARCH",convlist:"CONVLIST",messagelist:"MESSAGELIST"},h=(new Date).getTime();s=NeoConfig.mailEnv!=="dev"?NeoConfig.hostName.split(".")[3]:"",a=Y(w.cachekey,g),e.fire("util:ymstats",{name:a?"client_error":"ue_client_error",tags:{api:"GetDisplayMessage",tae:4,code:b,farm:NeoConfig.farm.substr(1),colo:s,httpStatusCode:"200"}}),b==="ERROR"&&(f=K(x,t),e.fire("util:ymstats",{name:"GDM_CODE_ERROR",tags:{fid:f==="custom"?"custom":E,folderType:f,prime:a?0:1,mrd:S.umid&&S.action&&S.action==="showLetter"?1:0,farm:NeoConfig.farm.substr(1),conv:NeoConfig.hasConvView}})),w.cachekey==="Prime"&&(o=e.mail.Tabs.getActiveTab().widgetType,u=c[o]?c[o]:o,e.fire("stat:webservice_fail",{tab:u,tae:"4",api:"GetDisplayMessage",message:b,visible:Y(w.cachekey,g)?"no":"yes"})),t.yid=D,t.isGetMulti=1,t.ua=navigator.userAgent,t.conv=NeoConfig.hasConvView?1:0,t.pp=NeoConfig.previewPanePref?1:0,t.tid=h,t.build=NeoConfig.buildNumber,t.errorPos=n.cbk&&n.cbk.errorPosition||299,t.chained=P==="$(mid)"?1:0,g&&delete t.responseText,e.fire("MailLog",{m:(a?"":"UE_")+"DEBUG_TAE:4:GetDisplayMessage:"+b+":"+NeoConfig.farm,api:"GetDisplayMessage",reason:b,errinfo:t},1,"tae4"),NeoConfig.sessionTracer&&r.Sessions.log(h)}));for(a=0;a<B.length;a++){if(L&&B[a].mid===L.mid){B[a]=L;break}B[a].mid===P&&(B[a].msgPermDeleted=et(g))}}}else for(o=0;o<t.length;o++)B[o].mid===t[o].mid&&(B[o]=t[o]);return B}function K(e,t){return t&&t.folder&&t.folder.folderInfo?e&&i.isSearchMid(e.mid,t.folder.folderInfo.fid)?"search":t.folder.isSystem?"system":"custom":"missing"}function Q(t,n,o){function z(t){var n,r,s,o,u=C||[],a=t.mid,f=i.isSearchMid(a,E);if(!e.Lang.isArray(u))return null;for(n=0;n<u.length;n++){r=u[n],o=r.sourceFolderInfo&&r.sourceFolderInfo
.fid||E;if(a===r.mid||f&&l(a)===l(r.mid))break;if(a===N){u.length!==1&&e.fire("MailLog",{m:"Batch chaining expects only one mid",length:u.length,curmid:r.mid}),x=u[n],t.mid=u[n].mid;break}if(i.hasMoved(a,r.mid,E,E)){(s=o!==E)||i.flush(E);break}}return n===u.length?null:{pos:n,key:t,fid:f&&E||o,msg:r,moved:s}}function W(t){var n=t.search(/<script[^>]*>/i),r,i,s,o,u={};if(n>=0){r=t.length,i=Math.max(t.search(/<\/script>/i),r),s=n!==0||i!==r?t.substring(n,i):t,o=/\bYAHOO\.Shortcuts\.mailCategories\s*=\s*(.*);/.exec(s);if(o&&o[1])try{u.categories=e.JSON.parse(o[1])}catch(a){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:4",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:4"),u.categories={}}o=/\bYAHOO\.Shortcuts\.annotationSet\s*=\s*({[\s\S]*?})\s*;/.exec(s);if(o&&o[1])try{u.annotations=e.JSON.parse(o[1])}catch(a){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:5",a,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:5"),u.annotations=null}return u}return null}var a,f,h,d,v,m,g,b,w=n.origParms,E=w.fid,x=w.msg,T=!w.dontCache,C=t.message,k=t.code,L,A,P,B,j=n.custom.rparams,F,I=j&&j.message,q=null;if(I&&(C||k)){delete j.message,x||(q=U(n))&&q.chainedLMTMsg&&(x=q.chainedLMTMsg);for(a=0;a<I.length;a++){h=!0,L=m=null,d=z(I[a]);if(d){L=d.msg,d.moved&&(L.moved=!0),P=e.clone(j),P.midRequest=I[a],P.fid==="$(fid)"&&(P.fid=n.resp.folder.folderInfo.fid),d.fid==="$(fid)"&&(d.fid=n.resp.folder.folderInfo.fid);if(T){!w.forceCache&&(v=i.get(d.fid,L))&&(v.part&&s.congruent(c(L.mid),P,!0)?(L=v,h=!1):v.flags&&(L.flags=v.flags));if(h){i.set(d.fid,L,n.reason,!0,function(e){return O._process(e,d),e},P),p[L.mid]&&st(),p[L.mid]=0,y++,R(H),L=i.get(d.fid,L);if(L.extend)for(f in L.extend)delete L.extend[f];else L.extend={};L.body&&L.body.display&&(L.extend.shortcuts=W(L.body.display))}}else L._param=P,O._process(L,d),i.extend(L)}else m=M.wserror;m===M.wserror&&(L={debug_mid:I[a].mid||""},g=G(I[a],k,E),b=g?g.code:"NotFound",A="GDM_Code_"+b+"_"+(w.cachekey||""),B=I[a].mid,e.use("common-utils-error",function(e){var i=Z(w.cachekey,g),s,o,a,f,l,c=i+"_"+A+"_MRD",h=(new Date).getTime(),p={convpane:"CONVREAD",messagepane:"MESSAGEREAD",search:"SEARCH",convlist:"CONVLIST",messagelist:"MESSAGELIST"},d=!1;if(S.umid&&S.action){S.umid=S.umid.replace(/ /g,"+");if(x&&S.action==="showLetter"&&S.umid===x.mid){if(u.isUndefined(S.referer)||u.isUndefined(S.src)||S.referer==="unknown"&&S.src==="unknown")L.isBlockableMRD=d=!0;t.requestSrc="MRD:"+(S.src||"unknown")+":"+(S.referer||"unknown")}}a=NeoConfig.mailEnv!=="dev"?NeoConfig.hostName.split(".")[3]:"",f=Y(w.cachekey,g),e.fire("util:ymstats",{name:f?"client_error":"ue_client_error",tags:{api:"GetDisplayMessage",tae:4,code:b,farm:NeoConfig.farm.substr(1),colo:a,httpStatusCode:"200"}}),b==="ERROR"&&(l=K(x,t),e.fire("util:ymstats",{name:"GDM_CODE_ERROR",tags:{fid:l==="custom"?"custom":E,folderType:l,prime:f?0:1,mrd:S.umid&&S.action&&S.action==="showLetter"?1:0,farm:NeoConfig.farm.substr(1),conv:NeoConfig.hasConvView}})),w.cachekey==="Prime"&&(s=e.mail.Tabs.getActiveTab().widgetType,o=p[s]?p[s]:s,e.fire("stat:webservice_fail",{tab:o,tae:"4",api:"GetDisplayMessage",message:b,visible:Y(w.cachekey,g)?"no":"yes"})),t.yid=D,t.isGetMulti=0,t.ua=navigator.userAgent,t.conv=NeoConfig.hasConvView?1:0,t.pp=NeoConfig.previewPanePref?1:0,t.tid=h,t.build=NeoConfig.buildNumber,t.chained=B==="$(mid)"?1:0,t.errorPos=n.cbk&&n.cbk.errorPosition||299,g&&delete t.responseText,e.fire("MailLog",{m:(f?"":"UE_")+"DEBUG_TAE:4:GetDisplayMessage:"+b+":"+NeoConfig.farm,api:"GetDisplayMessage",reason:b,errinfo:t},1,"tae4"),NeoConfig.sessionTracer&&r.Sessions.log(h)})),x&&I[a].mid===x.mid&&(F={err:m,msg:L})}}else w.chain&&!x&&(x=t);n.resp&&n.resp.callPerf&&n.cbk&&(n.cbk.respProps=n.cbk.respProps||{},n.cbk.respProps.callPerf=n.resp.callPerf);if(F)return F.err?(o("failure"),_(F.msg,m,g)):(p[F.msg.mid]|=1,F.msg);x||o("noprime")}function G(e,t,n){var r,s,o=e.mid,u=t&&t.length||0;if(o==="$(mid)"&&u===1)return t[0];for(s=0;s<u;s++){r=t[s];if((o===r.mid||i.isSearchMid(o,n)&&l(o)===l(r.mid))&&r.code!=="WARN")return r}}function Y(e,t){return e!=="Prime"||et(t)}function Z(e,t){return Y(e,t)?"TAE4":"UE_ALERT_TAE4"}function et(e){return e&&e.code&&(e.code.indexOf("MessageIdsDeleted")!==-1||e.code.indexOf("MessageNotFoundInNonBulk")!==-1)}function tt(e,t,n){var r=e.startInfo,i=u.isNumber;if(NeoConfig.hasConv||NeoConfig.grid||NeoConfig.vertPane)e.responseFields={messages:{all:!0}};if(i(r)&&r<0)return n("failure"),_(e,M.request);t.cbk.stopwatch&&(t.cbk.stopwatch.getListBegin=new Date)}function nt(t,n,r){n.cbk.stopwatch&&(n.cbk.stopwatch.getListEnd=new Date);var o=t.folder,u=o.folderInfo.fid,f=t.messageInfo,l,c,h,p=f?f.length:0,d,v;for(v=0;v<p;v++){d=f[v];if(d&&d.errorflag==="true"){c=1;break}}if(c)return r("failure"),_(n.parms,M.baddata);n.parms&&(h=t.startInfo+n.parms.numInfo>=o.total?t.startInfo+f.length<o.total:f.length<n.parms.numInfo,h&&(o.total=t.startInfo+f.length,w||(w=1),e.use("common-utils-error",function(){s.error.report("MsgCtrl_E_ListCorrupt_Total: yid: "+D)}))),n.parms&&n.parms.maxMessagesToScanForContacts&&(n.reason="ruefc"),u==="%40C%40Chats"&&(l=[],e.Array.each(f,function(t){var n=e.Array.some(t.inboxservices||[],function(e){if(e.name==="src")return e.value==="mmc"?o.total--:l.push(t),!0});n||o.total--}),t.messageInfo=f=l),o&&!n.batch&&!t.startInfo&&a.Folders.set(o,null,n.reason),i.syncHeaders(u,f),n.parms&&!n.parms.autoCheckMail&&setTimeout(function(){it(u,t.messageInfo)},500)}function rt(t,n,r,i){var s,o,u,f,l=i||{},c,h=[],p,d=[],v=[],m=0;for(c=0;c<t.length;c++)p=r(t[c])||n.failure("Valid fid was not found in getMultipleMessages."),h[p]||(h[p]=[],d.push(p)),h[p].push(t[c]);n&&(n.respProps={wasCached:!0}),s=a.batch(),f=function(r,i,s,a){var f,l=[],h=[],p,g;v=v.concat(r),e.fire("MessageController:getMultipleMessagesSuccess"
,v),m++,i&&i.respProps&&n&&(n.respProps.wasCached=n.respProps.wasCached&&i.respProps.wasCached,a&&a.resp&&a.resp.callPerf&&!n.respProps.callPerf&&(n.respProps.callPerf=a.resp.callPerf)),g=v.length;if(m===d.length){f=[];for(c=0;c<g;c++)if(v[c].data&&v[c].data.msg)for(p=0;p<v[c].data.msg.length;p++)f[v[c].data.msg[p].mid]=v[c].data.msg[p];else f[v[c].mid]=v[c];for(c=0;c<t.length;c++)u=f[t[c].mid]||"",o=u.body||"",o?l.push(u):h.push(u);n&&n.success(l,h)}};for(c=0;c<d.length;c++)s.Messages.getMulti({fid:d[c],msgs:h[d[c]],cachekey:"Prime",ovparams:l},f);s.execute({suppressCodes:["*"]}),e.fire("MessageController:getMultipleMessages",t)}function it(e,t){var n=NeoConfig.msgCacheUnread.split(","),r=n[0],i=n[1],s=x()-T,o={Trash:1,"%40B%40Bulk":1};if(r>0&&i>0&&s<i*60*1e3){var u=0,a,f=(new Date).getTime()/1e3-18e3,l=[];while(r>0&&u<t.length){a=t[u++];if(!(a&&!a.flags.isRead&&f<a.receivedDate&&!o[e])||!a.flags.inAddressBook&&NeoConfig.prefetchMsgsCheckMail!==1)break;l.push(a),r--}l.length>0&&O.get({fid:e,msg:null,prefetch:l,cachekey:"List"},{suppressCodes:["*"]})}}function st(){for(var e in p)(p[e]&3)===1&&(p[e]|=2,b++)}var t,n=e.mail,r=n.model.DataStore,i=r.Messages,s=e.common.Utils,o=s.ymmastats,u=e.Lang,a=n.Controller,f=n.ParkQueue,l=i.getPermMidPart,c=i.getParam,h=NeoConfig.truncateAt||5e4,p={},d,v={Neighbors:0},m=0,g=0,y=0,b=0,w=0,E=NeoConfig.msgCacheInterval||3e4,S=s.parseQueryString()||{},x=function(){return(new Date).getTime()},T=x(),N=NeoConfig.hasConvV3?"$(mid)":"_chainedbatch",C={passthru:{send:"SendMessage",get:"GetDisplayMessage",getMulti:"GetDisplayMessage",list:"ListMessages",search:"SearchMessages",save:"SaveMessage",scan:"VirusScanAttachments"},isdup:{ListMessages:function(e,t){return e&&t&&e.fid===t.fid&&e.numInfo===t.numInfo&&e.sortKey===t.sortKey&&e.sortOrder===t.sortOrder&&e.startInfo===t.startInfo}},noDelay:{get:1}},k=[],L=0,A=0,O,M,_,D="[NONE]",P=10,H="msg_cache_add",B="msg_cache_miss",j="msg_cache_hit";C.batchable=C.passthru,C.entity="mid",O=a.extend("Messages",C),M=O.Error,_=O._error,t=C.order;try{D=NeoConfig.userDataObj.userSendPref.loggedInAlias}catch(I){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-controller-messages:1",I,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-controller-messages:1")}O.bulkOps={remove:{bs:100,min:100,max:1e3},flag:{bs:100,min:100,max:1e3},move:{bs:100,min:100,max:1e3},spam:{bs:20,min:20,max:50,fixed:20}},NeoConfig.forceDS||(O.bulkOps.flag={bs:300,min:300,max:1e3},O.bulkOps.move={bs:300,min:300,max:1e3}),O.ydodRequiredDelay=1200,e.mix(O,{_process:function(){},_preset:function(t){var n=NeoConfig.low_bandwidth||parseInt(NeoConfig.noLiveWords,10)===1||strings.str_cfg_tog_disable_livewords?"none":"inline";S.lw&&(n=S.lw==="1"?"inline":"none");var r=t.fid,s=t.msgObj,o={fid:r,enableRetry:!0,textToHtml:!0,urlDetection:!0,emailDetection:!0,emailComposeUrl:"mailto:%e%",truncateAt:h,charsetHint:"",annotateOption:{annotateText:n},qtAnnotate:{enable:!0},bidiDetection:NeoConfig.bidi,midRequest:t.request||{blockImages:q(e.common.persist.UserData.get("userUIPref.imageBlocking"),r,s),restrictCSS:!0,expandCIDReferences:!0,enableWarnings:!0,bidiDetection:NeoConfig.bidi,cachekey:"launch"}};s&&s.part&&s.flags&&i.set(r,s,"launch",!0,function(e){return O._process(e,{fid:r,key:o.midRequest,msg:s}),e},o)},isCertified:function(t){var n=/images|all/;return e.Array.some(t,function(e){return e.name==="allow"&&n.test(e.value)})},getQueryParams:function(e,t){var n=c(e.mid)||e._param;return t&&n&&n[t]||n},getAttachmentUrl:function(e,t,n,r,i){var s="/ya/download";e==="INBOX"&&(e="Inbox"),i&&(i=i.replace(/\?/g,"x"),i=encodeURIComponent(i));var o=(new Date).getTime().toString(),u;return t=encodeURIComponent(t),u=[NeoConfig.launch_protocol,location.hostname,s,"?fid=",encodeURIComponent(e),"&mid=",t,"&pid=",n,"&tnef=",r,"&YY=",o],i&&u.push("&file_name=",i),u.push("&appid=YahooMailNeo"),u.join("")},getMultipleMessages:rt},!0),O.hook("get",{pre:$},t.cacheCheck),O.hook("get",{success:Q},t.cache),O.hook("getMulti",{pre:V},t.cacheCheck),O.hook("getMulti",{success:J},t.cache),O.hook("list",{pre:tt,success:nt}),O.hook("get",{pre:z},t.gdmDelay),O.hook("get",W,t.unpark),NeoConfig.hasConvPerf&&(O.hook("getMulti",{pre:z},t.gdmDelay),O.hook("getMulti",W,t.unpark)),setInterval(function(){var e,t=NeoConfig.preCacheAlgorithm||0;for(e in v)v[e]=0;st(),m=y=g=b=0},E),e.use("mail-controller-processbody"),e.namespace("mail.test.controller"),e.mail.test.controller.Messages={cacheMsg:it}},"1.0.0",{requires:["launch-utils","ymma-stats","mail-controller-parkqueue","mail-controller-base","mail-controller-folders","common-persist-user-data"]});


YUI.add("mail-controller-folders",function(e){"use strict";function S(e,t,n){var r;n&&n.failure&&(r=n.failure)!==undefined&&r(l._error(e,t),n.args)}function x(e,t){var n;t&&t.success&&(n=t.success)!==undefined&&n(e,t.args)}function T(t){var n=NeoConfig.checkmailExt?{forced:!1,accountId:""}:{},r,i;r=e.common.Utils.settings.value("checkMailInterval"),r||(r=3),t=t||NeoConfig.chkFolders,t=t||r,i=t,t*=m;if(NeoConfig.isTestMail||NeoConfig.isRecordMode)t=m*10;e.fire("MailLog",{m:"mail-controller-folders.triggerCheckMail",info:"Scheduling auto checkmail every "+i+" minute(s)"}),l.yTimerObj&&l.yTimerObj.cancel&&l.yTimerObj.cancel(),l.yTimerObj=e.later(t,null,function(){e.fire("MailLog",{m:"mail-controller-folders.triggerCheckMail",info:"Running auto checkmail after "+i+" minute(s)"}),d++,l.refresh(n,{suppressCodes:["*"],backgroundLogs:["*"],success:function(){e.fire("nav:refreshCalendar"),l.triggerCheckMail()},failure:function(){e.fire("MailLog",{m:"mail-controller-folders.triggerCheckMail",info:"Server failure, network down?"}),l.triggerCheckMail()}})},[])}function N(e,t){var n=e&&e.length,i=l.Error,s=e,o;return t!==undefined&&(s=t+e),n?n>40?o=i.oversize:u.getByName(s)||b.hasOwnProperty(e.toLowerCase())||b.hasOwnProperty(e)?o=i.exists:r.isFolderNameValid(e)||(o=i.baddata):o=i.empty,o}function C(e,t){var n,r,i,s,o,u=e&&(e.folder||[e]);for(n=0;u&&n<u.length;n++)r=u[n],r&&(s=r.folderInfo)&&(i=s.fid)?(s.fid=i=i.replace(/%2f/g,"%5c"),o=y[i],o&&(s.name=o)):t&&t.push(r);return t.length===0&&e}function k(e,t,n){var r;if(t.reason==="get"){r=u.get(e);if(r)return n("success"),r;t.reason="refresh",e={bidiDetection:NeoConfig.bidi}}else e={fid:e};return e}function L(t,n,r){var i=t&&t.forced||d>=NeoConfig.resetUnseenMsgsRefreshLimit?!0:!1,s={resetMessengerUnseen:i},o,u,l=[],c,h,p,v,m;i&&(d=0),s.bidiDetection=NeoConfig.bidi;if(t&&typeof t.accountId=="string"){c=n.cbk||{},v=t.accountId,m=function(t){var n,r,i,s,o=[],u;if((n=t.fetchResults)&&(i=n.length)){for(r=0;r<i;r++)(s=n[r].status)!=="success"&&o.push({userName:l[r].userName,status:s,server:l[r].address||l[r].server});o.length&&e.use("mail-error",function(e){u=e.mail.Error,u&&u.extFetchError(o)})}};if(E&&E.length){for(u=0;u<E.length;u++)p=E[u],f(p.username)&&f(p.server)&&(v===""||v===p.address)&&l.push({protocol:p.protocol,userName:p.username,server:p.server});l.length&&(r(),h=e.clone(c),h.failure=null,h.success=m,o=a.batch().Folders,o.fetchExtMail({externalAccounts:l},h),o.refresh(s,c,n.reason),o.execute({suppressCodes:c&&c.suppressCodes||[]}))}}return s}function A(t,n,r){var i=n.reason,s=n.origParms,o=n.api==="refresh"||i==="refresh",a;o&&(t.folder.sort(function(e,t){var n=e.isSystem,r=t.isSystem;return n&&!r?-1:!n&&r?1:t&&t.folderInfo?e.folderInfo.name.localeCompare(t.folderInfo.name):-1}),e.common.Utils.features.enabled("emitCheckmailData")&&(a=u.getFoldersByAccount(),e.Array.forEach(a,function(n){if(n.folderInfo.fid!=="Inbox")return;e.Array.forEach(t.folder,function(t){if(t.folderInfo.fid!==n.folderInfo.fid)return;e.fire("checkmail",{reason:i,fid:t.folderInfo.fid,oldUnreadCount:n.unread,newUnreadCount:t.unread})})})),l.set(t,null,i));if(n.api==="get")return o&&!(t=u.get(s))?(r("failure"),l._error(s,l.Error.notfound)):t}function O(e,t){var n,r=t.reason,i=t.origParms;n=r.match(/\.([\w\W]+)/),n=n&&n[1]||r,/^create/.test(r)?u.add(e,n):/^remove/.test(r)?u.remove(i.fid,n):/^rename/.test(r)&&u.rename({folderInfo:i},e,n),u.flush()}function M(e,t,r){var i,s,o=n.wcopy(t);e=n.sanitizeString(f(e)),i=N(e),o&&(o.success=o.failure=null),i?l.callFailure(e,i,t):(s=a.batch().Folders,s.create({name:e,bidiDetection:NeoConfig.bidi},function(e,n,r){var i=t&&t[r];i&&setTimeout(function(){i(e,n)},0)},"create"+(r?"."+r:"")),s.refresh({}),s.execute(o))}function _(e,t,r){var i=a.batch().Folders,s=n.wcopy(t);s&&(s.success=s.failure=null),i.remove({fid:e},t,"remove"+(r?"."+r:"")),i.refresh({}),i.execute(s)}function D(e,t,r){var i,s,o=n.wcopy(t);e.name=e&&e.name?n.sanitizeString(f(e.name)):"",e.bidiDetection=NeoConfig.bidi,i=N(e.name),o&&(o.success=o.failure=null),i?l.callFailure(e.name,i,t):(s=a.batch().Folders,s.rename(e,t,"rename"+(r?"."+r:"")),s.refresh({}),s.execute(o))}function P(e,t,n){var r=[];e=C(e,r),e?(u.set(e,n),l.callSuccess(e,t)):l.callFailure(r,l.baddata,t)}function H(t,r,i){var s,a=0,f=0,l,c=i==="remove",h=c&&!r,p=i==="move"||i==="add",d=c&&-1||p&&1||0,v,m,g=u.get(t);if(g){e.log("ds:folder handling message event, reason "+i+" orig unread = "+g.unread+" total  = "+g.total+" size = "+g.size);for(s=0;s<r.length;s++){v=r[s],l=v.flags&&v.flags.isRead,o.isNumber(l)&&(p?a+=l?0:1:c?a+=l?0:-1:a+=l?-1:1);if(p||c)f+=v.header&&v.header.size||0}c&&(f=-f),u.set(m={folderInfo:{fid:t},unread:h?0:g.unread+a,total:h?0:g.total+r.length*d,size:h?0:g.size+f},"ds:msg:"),n.assert(m.unread>=0&&m.total>=0,"neg-folder-cnt",1,function(){e.use("common-utils-error",function(){n.netError(["NegFolderCount fid:",t,i].join(";"))}),e.fire("MailLog",{m:"NegFolderCount fid:"+t,unread_count:m.unread,total_count:m.total,reason:i})})}}function B(t,n,r){function l(e){if(!n||e!==n)s&&n!=="%40B%40Bulk"&&(s.total+=f[e].total,s.unread+=f[e].unread),a&&(a.total-=f[e].total,a.unread-=f[e].unread,u.set(a,"ds:conv:"))}var i,s,o,a,f={};for(i=0;i<r.length;i++)j(f,r[i]);n&&(s=e.clone(u.get(n)));for(o in f){a=e.clone(u.get(o));switch(t){case"Sent":o==="Sent"&&l(o,n);break;case"Trash":case"%40B%40Bulk":l(o,n);break;case"Draft":o==="Draft"&&l(o,n);break;default:o!=="Sent"&&o!=="Draft"&&l(o,n)}}s&&(s.unread!==u.get(n).unread||s.total!==u.get(n).total)&&u.set(s,"ds:conv:")}function j(e,t){var n,r;if(t.msgCountsByFolder)for(r=0;r<t.msgCountsByFolder.length;r++){n=t.msgCountsByFolder[r].fid;if(n==="@B@Bulk"||n==="Bulk%20Mail"&&t.flags&&t.flags.isSpam)n="%40B%40Bulk";e[n]=e[n]||{total:0,unread:0},e[n].total+=t.msgCountsByFolder[r].total,e[n].unread+=t.msgCountsByFolder[r].unread}}function F(n,r){if(e.Lang.isUndefined(r)||e.Lang.isUndefined(r.isRead))return;e.Array.each(n,function(n){var i=n.fid;if(i==="Draft")return;e.Array.each
(n.msgCountsByFolder,function(e){var i=u.get(e.fid==="Bulk%20Mail"&&n.flags&&n.flags.isSpam?"%40B%40Bulk":e.fid),s=t.model.ConvStore.Conversations,o=s.isCached(e.fid,n),a;if(i===null||e.fid==="Draft"||o)return;a=e.unread||e.total,r.isRead===0?i.unread+=a:i.unread-=a,i.unread=i.unread<0?0:i.unread,u.set(i,"ds:conv:",1)})})}var t=e.mail,n=e.common.Utils,r=e.mail.ui.FolderUtils,i=t.model.DataStore,s=e.common.persist.UserData,o=e.Lang,u=i.Folders,a=t.Controller,f=o.trim,l,c,h,p,d=0,v,m=6e4,g="%40S%40Search",y={"%40B%40Bulk":strings.spam||"Spam","%40C%40Chats":strings.str_nav_conversations||"Conversations",Draft:strings.str_nav_drafts||"Drafts"},b={},w={passthru:{refresh:"ListFolders",empty:"EmptyFolder",get:"ListFolders"},batchable:{create:"CreateFolder",refresh:"ListFolders",rename:"RenameFolder",remove:"RemoveFolder",fetchExtMail:"FetchExternalMail"}},E=(s.get("externalAccounts")||{}).extAccount;l=a.extend("Folders",w),c=l.Error,p=c._reservedIdx,b[strings.str_folder_reserved_inbox]=b[strings.str_folder_reserved_conversations]=b[strings.str_folder_reserved_drafts]=b[strings.str_folder_reserved_sent]=b[strings.str_folder_reserved_spam]=b[strings.str_folder_reserved_trash]=b[strings.str_folder_reserved_search]=b[strings.str_folder_reserved_inbox_lower]=b[strings.str_folder_reserved_conversations_lower]=b[strings.str_folder_reserved_drafts_lower]=b[strings.str_folder_reserved_sent_lower]=b[strings.str_folder_reserved_spam_lower]=b[strings.str_folder_reserved_trash_lower]=b[strings.str_folder_reserved_search_lower]=b[strings.str_folder_reserved_inbox_upper]=b[strings.str_folder_reserved_conversations_upper]=b[strings.str_folder_reserved_drafts_upper]=b[strings.str_folder_reserved_sent_upper]=b[strings.str_folder_reserved_spam_upper]=b[strings.str_folder_reserved_trash_upper]=b[strings.str_folder_reserved_search_upper]=1,h={success:O},l.hook({create:h,remove:h,rename:h,empty:{pre:k,success:function(t,r){n.assert(r.parms&&r.parms.fid),NeoConfig.hasConv?e.mail.model.ConvStore.Conversations.remove(r.parms.fid,null,!1):i.Messages.remove(r.parms.fid,null,!0)}},get:{pre:k,success:A},refresh:{pre:L,success:A}}),e.mix(l,{yTimerObj:v,callFailure:S,callSuccess:x,triggerCheckMail:T,validateName:N,validateFolders:C,create:M,remove:_,rename:D,set:P,_updateFolderUnreadCounts:F,_updateConvCountsOnMove:B}),e.common.Utils.features.enabled("foldersv3")&&e.use("mail-controller-folders-v3"),e.mix(c,{empty:p++,oversize:p++,exists:p++}),e.on("debug:cm",function(t){e.fire("MailLog",{m:"About to trigger auto checkmail through debug menu"}),l.triggerCheckMail(t)}),e.on("ds:msg:change",function(e,t,r,i,s){var o,u;if(e===g)for(o=0;o<r.length;o++)(u=r[o].sourceFolderInfo&&r[o].sourceFolderInfo.fid)&&H(u,[i[o]],s),n.assert(u);else H(e,i,s)}),e.on("ds:conv:change",function(e,t,n,r,i,s){var o,u;e==="msg:add"?(o=i[0]&&i[0].length?i[0][0].fid:null,u=i[0],o&&o==="Draft"&&H(o,u,"add")):e==="conv_flag"&&NeoConfig.checkMailListFix&&F(t,s&&s.flags)}),e.on("ds:msg:remove",function(e,t,r,i,s){var o,u,a="remove";if(e===g)for(o=0;o<t.length;o++)u=t[o].sourceFolderInfo&&t[o].sourceFolderInfo.fid&&s.reason!=="savedraft",u&&H(u,[t[o]],a),n.assert(u);else H(e,t,a)}),e.on("ds:conv:remove",function(e,t,n,r){B(e,r,t)}),e.on("net:suspended",function(){l.yTimerObj&&l.yTimerObj.cancel(),e.fire("MailLog",{m:"Session suspended, auto checkmail suspended"})}),e.on("net:resumed",function(){e.fire("MailLog",{m:"Session resumed, restarting auto checkmail"}),l.triggerCheckMail()}),e.on("compose:rte:active",function(){l.yTimerObj&&l.yTimerObj.cancel(),e.fire("MailLog",{m:"Focus is on RTE, auto checkmail suspended"})}),e.on("compose:rte:blur",function(){e.fire("MailLog",{m:"Focus is NOT on RTE, restarting auto checkmail"}),l.triggerCheckMail()}),e.on("net:online",function(){e.fire("MailLog",{m:"Network is back online, restarting auto checkmail"}),l.triggerCheckMail()}),e.on("net:offline",function(){l.yTimerObj&&l.yTimerObj.cancel(),e.fire("MailLog",{m:"Network is offline, auto checkmail suspended"})}),e.once(NeoConfig.tictac?"tictacs-loaded:ws:postLoad":"ws:postLoad",function(){NeoConfig.checkmailExt&&E?l.triggerCheckMail(10):l.triggerCheckMail()})},"1.0.0",{requires:["mail-common-utils-features","mail-model-datastore","mail-controller-base","common-persist-user-data","mail-common-utils-settings","mail-ui-folder-utils"]});


YUI.add("mail-controller-processbody",function(e){e.namespace("mail.Controller");var t=e.common.Utils,n=function(){function r(e,t){e&&(t&&t.fid==="%40C%40Chats"||e.sourceFolderInfo&&e.sourceFolderInfo.fid==="%40C%40Chats"?(i(e),(e.body||(e.body={}))&&(e.body.display||(e.body.display="")),e.conversationBody=e.part[0].text):t&&t.fid==="%40B%40Bulk"?(e=a(e),u(e,t)):u(e,t))}function i(e){e.body=e.body||{stationery:"",inlineAttachments:[],isPlainText:0},e.imgAttachments=e.imgAttachments||[],e.nonImgAttachments=e.nonImgAttachments||[],e.attachments=e.attachments||[],e.isTruncated=!1,e.yivPrefixNumber=[],e.hasForwardedMsg=!1}function s(e,t){e.attachments=e.attachments.concat(t.attachments||[]),e.imgAttachments=e.imgAttachments.concat(t.imgAttachments||[]),e.nonImgAttachments=e.nonImgAttachments.concat(t.nonImgAttachments||[]),e.isTruncated=t.isTruncated||e.isTruncated,e.body.inlineAttachments=e.body.inlineAttachments.concat(t.body&&t.body.inlineAttachments||[]),t.body&&t.body.display&&(e.body.display=[e.body.display,t.body.display].join("")),e.yivPrefixNumber=e.yivPrefixNumber.concat(t.yivPrefixNumber||[])}function o(e){if(e)return{from:t.escapeEmailObject(e.from),subject:t.escapeStringField(e.subject),to:t.escapeEmailObjectArray(e.to),cc:t.escapeEmailObjectArray(e.cc),bcc:t.escapeEmailObjectArray(e.bcc),replyto:t.escapeEmailObjectArray(e.replyto),xapparentlyto:t.escapeStringField(e.xapparentlyto)}}function u(t,n){var r=/\<div[^>]+?yahoo_quoted[^>]+?display:none[^>]+?>/g;t.cookedHeader=o(t.header);if(t.part){var u=0,a=t.part,l;i(t);while(l=a[u++])f(t,l,n),s(t,l)}(t.body||(t.body={}))&&(t.body.display||(t.body.display="")),t.hasForwardedMsg&&(t.body.display=[strings.str_comp_reply_fwdHeader,"<br/><br/>",t.body.display].join("")),t.body&&t.body.display&&e.Lang.isString(t.body.display)&&(t.body.display=t.body.display.replace(r,function(e){return e.replace("display:none","")}),v(t.body))}function a(t){var n,r;if(t.part){var i=0,s=t.part,o;while(o=s[i])o.type==="text"&&(n=e.Node.create('<div id="__testMsg">'+o.text+"</div>"),r=n.all("a"),r.removeAttribute("href"),r.addClass("removed-link"),t.part[i].text=n.get("innerHTML")),i++}return t}function f(e,t,n){t.size||(t.size=t.size||0);var r=t.isTruncated&&(t.disposition==="inline"||!t.disposition)&&!t.referencedInline&&(t.subtype==="plain"||t.subtype==="html");t.isTruncated=r;switch(t.type){case"text":c(e,t,n);break;case"image":h(e,t,n);break;case"message":p(e,t,n);break;default:d(e,t,n)}}function l(e,t){t.filename||(t.filename=t.partId+".txt"),e.attachments.push(t),e.nonImgAttachments.push(t)}function c(e,t){if(typeof t.text=="string"||t.disposition==="attachment"||t.disposition==="inline")t.disposition!=="inline"&&!!t.disposition||!!t.referencedInline||t.subtype!=="plain"&&t.subtype!=="html"?l(e,t):typeof e.body.display=="undefined"?(e.body.display=t.text,e.body.isPlainText=t.subtype==="plain"):e.body.display+="<br />"+t.text}function h(e,t,r){var i=(t.subtype||"").toLowerCase(),s=i in n||0;t.referencedInline||s||d(e,t),t.filename||(t.filename=strings.str_nav_left_untitled+t.partId+"."+t.subtype),s&&(t.isDisplayable=!0,e.imgAttachments.push(t),e.attachments.push(t))}function p(e,t,n){var r=(t.subtype||"").toLowerCase(),i,o;if(r==="rfc822"){if(t.partId!=="TEXT"||e.part.length===2)e.attachments.push(t),e.nonImgAttachments.push(t);t.disposition===""&&(e.hasForwardedMsg=!0);if(o=t.message)t.filename||(i=o.header.subject.substring(0,240)||strings.str_comp_nosubject,t.filename=i+".eml"),u(o,n),s(e,o)}}function d(e,t){var n=(t.subtype||"").toLowerCase(),r=(t.type||"").toLowerCase(),i=t.attachments,s,o,u=0,a=e.attachments,f=e.nonImgAttachments;if(r==="application"&&n==="ms-tnef"&&i&&i.length){s=i.length;for(u;u<s;u++)o=i[u],o&&o.name&&(o.filename=o.name,o.partId=t.partId,o.tnefId=o.id);f=e.nonImgAttachments=f.concat(i)}else t.filename||(t.filename=strings.str_nav_left_untitled+t.partId),a.push(t),f.push(t)}function v(e){var t=e.display,n='<div id="STATIONERY_STYLE">',r,i,s;/id="STATIONERY_STYLE/.test(t)&&(t=t.replace(/div\s*id="STATIONERY_STYLE"/,'div id="STATIONERY_STYLE"'),r=t.indexOf(n),r>-1&&(i=t.indexOf("</div>",r),s=t.substring(r+n.length,i),t=t.substring(0,r)+t.substring(i+6),e.display=t,e.stationery=s))}strings=window.strings||{forwarded_msg_attached:"Note: Forwarded message is attached.",str_nav_left_untitled:"untitled"};var n={jpg:1,jpe:1,pjpg:1,pjpe:1,pjpeg:1,bmp:1,jpeg:1,png:1,gif:1,tiff:1,"x-png":1};e.mix(e.mail.Controller.Messages,{_process:function(e,t){e&&!e.body&&r(e,t)}},!0)};new n},"1.0.0",{requires:["common-utils","common-utils-stats"]});


YUI.add("mail-model-datastore",function(e){function g(e,t){var n,r,i;if(h.isObject(e)){r=e.extend=e.extend||{},i=t&&t.extend||{};for(n in i)r[n]||(r[n]={},p.merge(r[n],i[n]))}}function y(t){try{e.fire.apply(e,t)}catch(n){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-model-datastore:1",n,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-model-datastore:1"),e.use("common-utils-error",function(){p.error.report("datastore error for "+t[0],n,1,1,1)})}}e.namespace("mail.model");var t="ds:folder:",n="ds:msg:",r="ds:conv:",i="ds:account:",s="invalidarg",o="change",u="add",a="rename",f="remove",l="%40S%40Search",c=e.mail,h=e.Lang,p=e.common.Utils,d=function(){return{extend:{}}},v=50,m=c.model.DataStore={};e.mix(m,{Sessions:function(){function o(e){t.length<n?t.push(e):(t.shift(),t.push(e))}function u(e,t){o({type:e,ts:new Date,data:t})}function a(e){u("request",e)}function f(e){u("response",e)}function l(e){u("step",e)}function c(){t=[]}function h(n){var o=[],u=1,a={request:">Req ",response:"<Res ",step:"<st>"},f;r||e.use("comms-log4js",function(e){r=e.comms.log4js.getLogger("sessionLogger",1,"ajax",{maxCount:5})}),e.Array.each(t,function(e){s.isObject(e.data)?f=i.stringify(e.data):f=e.data;var t=[a[e.type],NeoConfig.windowId+" ",u++ +" (",e.ts.toTimeString().substr(0,8),'/"tid":'+n+") ",f];o.push(t.join(""))}),r.log(o.join("\n"))}var t=[],n=parseInt(NeoConfig.sessionTracerCount,10),r,i=e.JSON,s=e.Lang;return{addRequest:a,addResponse:f,step:l,log:h,reset:c}}()}),e.mix(m,{Folders:function(){function r(e){return h.isString(e)?e:e&&e.folderInfo&&e.folderInfo.fid}function i(e){try{return h.isObject(e)&&r(e)}catch(t){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-model-datastore:2",t,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-model-datastore:2")}return!1}function v(e){return e&&e.folder&&h.isArray(e.folder)}function b(e,t,r){var i=n,s,o,u;for(o=0,u=i.length;o<u;o++){s=i[o];if(r&&e===s.folderInfo.name||e===s.folderInfo.fid)return t?o:s}return t?-1:null}function w(i){var o=!i||h.isObject(i)&&p.isEmpty(i),u=d(),a,f,l,c;if(o){f=[];for(l in n)f.push(p.wcopy(n[l],u));a=f.length?f:null}else(c=r(i))||e.error(t+"get:"+s),a=p.wcopy(b(c),u);return a}function E(e){var t=n,r=t.length,i=[],s;for(s=0;s<r;s++)t[s].acctId===e&&i.push(t[s]);return i}function S(e){var t=n,r=t.length,i=c.ui.FolderUtils,s,o;for(o=0;o<r;o++){s=t[o];if(s.acctId===e&&s.types[0]===i.InboxFolderType)return s.folderInfo.fid}}function x(e){return p.wcopy(b(e,!1,!0),d())}function T(e){return p.wcopy(b(e,!1,!1),d())}function N(u,a,f){function B(e){for(var t=0,n=e.length;t<n;t++)if(b(e[t].folderInfo.fid,!0)===-1)return!0}function j(o,u){p.assert(i(o));var a=r(o),c,h={},d,v;if(O&&u)return;if(a&&a!==l){if(O)v=o,c=p.merge({},o),n.push(c);else{d=b(a,!0);if(d===-1){if(u)return;e.error(t+"set:"+s)}h=n[d]||h,v=f?o:p.diff(o,h),v&&(NeoConfig.imapIn?(v=F(v),c=p.wcopy(h),c=p.merge(c,v,!0,!1,!0)):(c=f?{}:p.wcopy(h),c=p.merge(c,v,!0)),!u&&n.splice(d,1,c))}v&&(g(c,h),k.push(p.wcopy(c,C)),M&&M.push(h),_&&_.push(v))}else L.push(o)}function F(e){return e.hasOwnProperty("isSystem")&&(e.isSystem=null),e.folderInfo&&e.folderInfo.hasOwnProperty("name")&&(e.folderInfo.name=null),e.folderInfo&&e.folderInfo.hasOwnProperty("index")&&(e.folderInfo.index=null),e}var h,w,S,x,T=u.numberOfFolders,N,C=d(),k=[],L=[],O=n.length===0,M=!O&&[],_=!O&&[],D,P,H;!i(u)&&!(x=v(u))&&e.error(t+"set:"+s);if(x){h=u.folder,S=h.length,N=!O&&T&&(T!==n.length||B(u.folder));if(N){for(w=0;w<S;w++)j(h[w],N);k.length&&y([t+o,M,k,_,a]),A(),O=!0,k=[],L=[],M=_=!1}for(w=0;w<S;w++)j(h[w])}else j(u);var I=e.mail.Tabs&&e.mail.Tabs.getActiveTab();if(I&&I.widget&&I.widget.fid){var q=!1;for(w=0;w<k.length;w++)k[w]&&k[w].folderInfo&&k[w].folderInfo.fid===I.widget.fid&&(q=!0)}if(a==="refresh"||a==="autorefresh")NeoGV.cancelViewBeacon=!0;return NeoConfig.imapIn&&M===!1&&(D=c.ui.FolderUtils,P=m.Accounts.getCurrentAccount(),H=P?P.id:D.PrimaryAcctId,k=E(H)),k.length&&y([t+o,M,k,_,a]),L}function C(i,o){r(i)||e.error(t+"add:"+s),n.push(p.merge({},i)),y([t+u,i,o])}function k(i,o,u){var f=r(i),l=b(f,!0),c=n[l];(!f||!c)&&e.error(t+"rename:"+s),p.merge(o,c),n.splice(l,1,o),y([t+a,c,p.wcopy(o,d()),u])}function L(i,o){var u=r(i),a=b(u,!0);(!u||a===-1)&&e.error(t+"remove:"+s),n.splice(a,1),y([t+f,h.isObject(i)?i:{folderInfo:{fid:u}},o])}function A(){n.length=0}var n=[];return{get:w,getByName:x,set:N,remove:L,rename:k,add:C,extend:g,flush:A,getFoldersByAccount:E,getPrimaryFolderByAccount:S,getByFid:T}}()}),NeoConfig.imapIn&&e.mix(m,{Accounts:function(){function a(e){n=e.imapInAccounts||[],o=e.primaryAccount[0],n.push(o),r=o}function l(e){n.push(e),y([i+u,e])}function c(e){var t=d(e.id);t>-1&&(n[t]=e),y([i+"update",e])}function h(){return o}function p(r){var o=r.id,u=d(o);!o||u===-1?e.error(t+"remove:"+s):(n.splice(u,1),y([i+f,r]))}function d(e){var t;for(t=0;t<n.length;t++)if(e===n[t].id)return t;return-1}function v(){return n}function m(e){var t=d(e);t===-1?r=o:r=n[t],y(["imapin:currentAccountSet",r])}function g(){return r}var n=[],r,o;return e.on("imapin:accountAdded",l),e.on("imapin:accountRemoved",p),e.on("imapin:accountUpdated",c),{get:v,set:a,create:l,remove:p,update:c,findAccount:d,getPrimaryAccount:h,setCurrentAccount:m,getCurrentAccount:g}}()}),e.mix(m,{Messages:function(){function S(e){var t;return e&&h.isString(e)?t={mid:e}:(t=h.isObject(e)&&e.mid&&e,x(t)),t}function x(e){e&&e.inReplyTo&&(e.inReplyToV3MsgRef=e.inReplyTo,e.inReplyTo=void 0)}function T(t,r,o){var u,a,f,l,c,v,g=h.isString(r)||!r?r:r.mid;(!t||!g)&&e.error(n+"get:"+s),u=i[t]||{},a=u[g];if(o&&a&&a.part){c=m.olist,v=c.length;for(f=0;f<v;f++)if(c[f].fid===t&&c[f].mid===g){l=c.splice(f,1),c.push(l[0]);break}}if(!a&&z(g)){g=U(g);for(l in u)if(U(l)===g){a=u[l];break}}return p.wcopy(a,d())}function N(){return i}function C(t,r){var o,u,a=h.isString(r)||!r?r:r.mid;return(!t||!a)&&e.error(n+"get:"+s),o=i[t]||
{},!!(u=o[a])&&!!u.part}function k(t,r,a,f,l,c){function _(e,n){var r,s,o,u,a;(r=S(e))?(u=r.mid,i[t]=i[t]||{},s=i[t][u]||{},a=p.diff(r,s),a&&(o=f?{}:p.wcopy(s,A),o=p.merge(o,f?r:a,!0),w=w&&(p.isEmpty(s)||a.part&&!s.part),s.snippet&&(o.snippet=s.snippet),b&&(s.cid&&(o.cid=s.cid),s.sourceFolderInfo&&(o.sourceFolderInfo=p.wcopy(s.sourceFolderInfo)),!s.header&&o.header&&s.receivedDate&&(o.header.receivedDate=s.receivedDate),s.inReplyTo&&(o.inReplyTo=s.inReplyTo),s.inReplyToV3MsgRef&&(o.inReplyToV3MsgRef=s.inReplyToV3MsgRef),s.mimeMsgId&&(o.mimeMsgId=s.mimeMsgId)),!M&&J(t,l?l(o):o,w,n),g(o,s),C.push(p.wcopy(o,A)),N.push(s),L.push(a))):k.push(e)}var v,w=f,E=h.isArray(r),x=E?r:[r],T=h.isArray(c)?c:[c],N=[],C=[],k=[],L=[],A=d(),O,M;if("Sent"===t&&"add"===a&&h.isString(r)||NeoConfig.noCache===1)m.sync[t]=M=!0;t||e.error(n+"set:"+s);for(v=0;v<x.length;v++)_(x[v],T[v]);return C.length&&(O=[n+(w?u:o),t],O=O.concat(w?[C,a]:[N,C,L,a]),y(O)),k}function L(e,t){var n,r,s,o=m.sync,u,a;if(o[e]&&(s=i[e])&&t){for(n=0;n<t.length;n++)r=s[t[n].mid],r&&(r.flags?r.flags=t[n].flags:s[t[n].mid]=q(e,t[n]));o[e]=0}u=E[e];if(u)for(n=0;n<t.length;n++)a=u[U(t[n].mid)],a&&p.merge(t[n],a,!0)}function A(e,t){var n,r;r=i[e]=i[e]||{},n=r[t.mid],n?n.flags?n.header?(t.cid&&(n.cid=t.cid),t.receivedDate&&(n.header.receivedDate=t.receivedDate),t.snippet&&(n.snippet=t.snippet),n.flags=t.flags):r[t.mid]=t:r[t.mid]=q(e,t):r[t.mid]=t}function O(e,t){var n,r;r=i[e]=i[e]||{},n=r[t.mid],n&&n.header&&(t.cid&&(n.cid=t.cid),t.newmsg&&!n.header.receivedDate&&(n.header.receivedDate=t.newmsg.receivedDate))}function M(e,t,n){var r,s,o,u=m.olist;r=i[e];if(r&&r[t]){o=r[t].part;if(!n||!o){delete r[t];for(s=0;s<u.length;s++)if(u[s].fid===e&&u[s].mid===t){u.splice(s,1);break}}}}function _(t,n,r){var i,s,o,u,a=0;for(i in n)s=t[i]=n[i],r&&i in r&&(o=r[i],typeof o=="object"?(u={},t[i]=e.Object(u),a|=_(u,s,o)):s!==o&&(a=1,t[i]=o));for(i in r)i in n||(o=r[i],typeof o=="object"?(u={},t[i]=e.Object(u),a|=_(u,{},o)):(a=1,t[i]=o));return a}function D(t,r,s,u){var a,f,l,c=e.clone(s,1),v=s.flags,m=0,g=d(),b=[],w=[],E=[];v&&v.isSpam&&delete c.flags.isRead,h.isArray(r)||(r=[r]),i[t]=i[t]||{};for(;m<r.length;m++){f={};if(typeof r[m]!="string"&&_(f,a=i[t][r[m].mid]||r[m],s)){i[t][a.mid]=f,b.push(a),a.flags.isRead?w.push(c):w.push(s);for(l in g)f[l]=g[l];E.push(p.wcopy(f,g))}}b.length&&y([n+o,t,b,E,w,u])}function P(e,t,r,s,u,a){var f,l,h,v,m,g,b,E=[],S=[],x=d(),T=[],N=0;f=i[e]=i[e]||{};while(l=r[N]){h=s[N++],m={mid:h,srcMid:l,folderInfo:{fid:t}},g={},_(g,w[l]||{},m),v=U(h),c[v]&&(c[v].fid=t),delete w[l],g.extend={},E.push({});for(b in x)g[b]=x[b];S.push(p.wcopy(g,x)),T.push(m)}y([n+o,t,E,S,T,u,e,a]),window.CollectGarbage&&window.CollectGarbage()}function H(t,r,o,u,a){var l,c,p,d,v,g,b,E,x=[],T=m.olist,N=!r||h.isArray(r)?r:[r];t||e.error(n+"remove:"+s),l=i[t];if(!N){delete i[t],c=0;while(c<T.length)T[c].fid===t?T.splice(c,1):c++}else for(c=0;c<N.length;c++){g=S(N[c]),E=g.mid,(b=l&&l[E])&&delete l[E];for(p=0;p<T.length;p++)if(T[p].fid===t&&T[p].mid===E){T.splice(p,1);break}b&&b.header&&(d=g.header)&&(v=d.size)&&(b.header.size=v),b=b||g,w[E]=b,x.push(b)}y([n+f,t,x.length&&x,o,u,a])}function B(e){i={},m={olist:[],max:v,sync:{}},e&&(w={})}function j(e){b=e}function F(e){var t,r,s,o;for(t in i){r=i[t];for(s in r)(o=r[s].extend)&&delete o[e]}y([n+"flushExt",e])}function I(e){this.mid=e}function q(e,t){function n(n){return t.mid&&z(t.mid,e)&&n.replace(/\^_/g,"")||n}function r(e){var t=e&&e[0];return t?{email:t.email||t.address||"",name:t.name||t.displayname||""}:e}var i,s=0;if(t&&t.mid){for(i in t)s++;if(s===1)return new I(t.mid||"")}t=t||{};var o=t.subject||"",u=t.from,a=t.toEmail,f={mid:t.mid||"",cid:t.cid||"",flags:t.flags||{},fromConnection:t.fromConnection||{},folderInfo:t.folderInfo||{},sourceFolderInfo:t.sourceFolderInfo||{},inboxservices:t.inboxservices||{},snippet:t.snippet||"",header:{from:u?r(u):{email:"",name:""},to:[],subject:n(o),subjectDir:NeoConfig.bidi&t.subjectDir?t.subjectDir:"",xapparentlyto:t.xapparentlyto||"",snippet:t.snippet||"",externalPopServer:t.externalPopServer||"",receivedDate:t.receivedDate||t.date||"",size:t.size||0}};return f.fid=K(t)||e,a&&(f.header.to[0]={name:a,email:""}),t.mimeMsgId&&(f.mimeMsgId=t.mimeMsgId),t.inReplyTo&&(f.inReplyTo=t.inReplyTo),t.inReplyToV3MsgRef&&(f.inReplyToV3MsgRef=t.inReplyToV3MsgRef),f.cookedHeader={from:u?p.escapeEmailObject(f.header.from):"",subject:o?p.escapeStringField(f.header.subject):"",to:a?p.escapeEmailObjectArray(f.header.to):[]},f}function R(e,t){t=t||{};var n=t?t.header||{}:{},r={mid:t.mid||"",cid:t.cid||"",flags:t.flags||{},from:n.from||"",fromConnection:t.fromConnection||{},folderInfo:{fid:e||"",name:""},sourceFolderInfo:t.sourceFolderInfo||{},toEmail:n.to?n.to.name||n.to[0]&&(n.to[0].name||n.to[0].email)||"":"",subject:n.subject||"",xapparentlyto:n.xapparentlyto||"",externalPopServer:n.externalPopServer||"",snippet:t.snippet||"",receivedDate:n.receivedDate};return t.inReplyTo&&(r.inReplyTo=t.inReplyTo),t.inReplyToV3MsgRef&&(r.inReplyToV3MsgRef=t.inReplyToV3MsgRef),t.mimeMsgId&&(r.mimeMsgId=t.mimeMsgId),r}function U(t){return h.isString(t)?t.substr(t.lastIndexOf("_")):(e.fire("MailLog",{m:"Invalid mid during getPermMidPart: "+t}),t)}function z(e,t){return/^1_0_/.test(e)||t===l}function W(e,t,n,r){return!z(e,n)&&!z(t,r)&&e!==t&&U(e)===U(t)}function X(e,t,n){var r=i[e],s;for(s in r){if(!r[s].flags)return 0;r[s].flags[t]=n}return 1}function V(e,t){var n=m.olist,r=n.length,s,o,u,a;o=e.folderInfo.fid,a=i[o];if(a){delete i[o],u=t.folderInfo.fid,i[u]=a;for(s=0;s<r;s++)n[s].fid===o&&(n[s].fid=u)}}function $(t,i,s,o){var u,a,f,l,c,p=e.common.Utils.features.enabled("foldersv3");if(o===n||o===r)return;for(u=0;s&&u<s.length;u++){f=s[u],a=i[u],l=a.folderInfo.fid;if(!h.isUndefined(f.total)||!h.isUndefined(f.unread)){c=f.unread===a.total||f.unread===0?a.unread?0:1:undefined;if(!NeoConfig.hasConvView||c!==undefined)X(l,"isRead",c),m.sync[l]=c===undefined}p?(!h.isUndefined(f.unread)||!h.isUndefined(f.total))&&y([n+"flush"
,l,s,o]):h.isUndefined(f.unread)&&h.isUndefined(f.total)&&h.isUndefined(f.size)||y([n+"flush",l,s,o])}}function J(e,t,n,r){var s,o=t.mid,u=U(o),a=m.olist,f,l;n&&(a.length>=m.max&&(s=a.shift(),p.assert(i[s.fid]),i[s.fid]&&(f=i[s.fid][s.mid],f&&(f.cid&&b&&b.hit(f.cid,s.fid)?i[s.fid][s.mid]=R(s.fid,f):delete i[s.fid][s.mid]))),a.push({fid:e,mid:t.mid})),r&&r.charsetHint&&(l=t.header)&&(E[e]=E[e]||{},E[e][u]=l),i[e][o]=t,c[u]=r}function K(e){return e.fid||e.sourceFolderInfo&&e.sourceFolderInfo.fid||e.folderInfo&&e.folderInfo.fid}var i={},c={},m={olist:[],max:v,sync:{}},b=null,w={},E={};return I.prototype={flags:{},fromConnection:{},folderInfo:{},sourceFolderInfo:{},inboxservices:{},header:{from:{email:"",name:""},to:[],subject:"",subjectDir:"",xapparentlyto:"",snippet:"",externalPopServer:"",receivedDate:"",size:0},cookedHeader:{from:{email:"",name:""},to:[],subject:""}},e.on(t+a,V),e.on(t+o,$),{get:T,getAll:N,set:k,move:P,update:D,remove:H,extend:g,flush:B,flushExt:F,toMessage:q,toMessageInfo:R,getPermMidPart:U,hasMoved:W,isSearchMid:z,isCached:C,syncHeaders:L,syncConvHeader:A,syncConvInfo:O,removeConvMsg:M,setConvStore:j,applyDiff:_,cacheSize:function(e){!isNaN(e)&&e>0&&(m.max=e)},getParam:function(e){return c[U(e)]}}}()})},"1.0.0",{requires:["common-utils","json-stringify","event-custom","mail-common-utils-features","mail-ui-folder-utils"]});


YUI.add("mail-net-transport",function(e){e.namespace("mail.net"),e.mail.net.Transport=function(){function g(t,n,i){var s,o=e.JSON.stringify,u="badparam_",a,f;i?f=b(n):(delete n.api,f={method:t,params:[n]}),s=o(f)||"";if(!/method/.test(s))a=s===""?"empty_":"nomethod_";else if(t==="GetDisplayMessage"||t==="MoveMessage"||t==="FlagMessage")if(!s.match(/\"mid\"/)||s.match(/\"mid\":\"\"/)||s.match(/\"mid\":\[\]/))a="nomid_";return a&&(a=u+a+t,r.assert(0,u,1,function(){return NeoConfig.isInternal&&window.alert(["Bad param sent:",t,a,"Pl. contact yahoo-mail-dev-support@yahoo-inc.com"].join(" ")),[a,s,"params",n?o(r.merge({},n)):n].join(" ")})),s}function y(e,t){var n;if((e==="BatchExecute"||e==="BatchExecuteGDM")&&t.call)for(n=0;n<t.call.length;n++)if("ListMessagesInThread"in t.call[n])return!0;return!1}function b(e){var t,n,r,i={},s={requests:[]};for(t=0;t<e.call.length;t++)n=e.call[t],r=w(n.id,n.api,n[n.api]),i[n.id]=r,n.dependency||s.requests.push(r);for(t=0;t<e.call.length;t++)n=e.call[t],n.dependency&&E(i[n.id],i[n.dependency[0]],n.filter);return s}function w(e,t,n){return{id:e,uri:"/ws/mail/v2.0/jsonrpc",method:"POST",payloadType:"embedded",payload:{method:t,params:[n]}}}function E(e,t,n){n&&(t.filters=n),t.requests=parent.requests||[],t.requests.push(e)}function S(e){function t(e){var t,n={};for(t in e)e[t]!==undefined&&(n[t]=e[t]);return n}var r=["&o=json"],i=n.formatQueryParams(t(e),!0);return i.length&&r.push("&",i),r.join("")}function x(e,t,n){if(!e.id)return t[n];for(var r=0;r<t.length;r++)if(e.id===t[r].id)return t[r];return t[n]}function T(t,r){function o(){var t=u.result.response,n,r,i,o,a=[],f;for(f=0;f<t.length;f++)n=t[f],o=d.batchopcbk[f]||{},r=null,!n.success&&!n.not_requested?(n.not_requested,r=n.ErrorResponse||{},r.status=500,r.fault=s(r.code||"Server.MalformedFault",r.string,{idx:f})):d.isV3||o.method&&(i=N(n[o.method+"Response"]),i&&(r={fault:i,code:i.code,status:200})),r&&(r.callback=e.mix((d.isV3?x(n,d.batchopcbk,f):o)||{},{suppressCodes:d.suppressCodes,service:"mail",serviceCredType:"strict",exceptCodes:d.exceptCodes,suppressLogs:d.suppressLogs,exceptLogs:d.exceptLogs},!1),r.fault&&(r.fault.id=n.id||""),a.push(r));return a.length&&s("BatchItemError",null,a)}var u=r.body||{},a,f=r.fault,l=m(t.request.url),c,h=r.status,p=r.responseText||"",d=r.callback;NeoConfig.hasConvV3&&!e.Object.isEmpty(u)&&(u=e.JSON.parse(r.responseText));if(f)f.code===i.parse&&(p.match(/<code>Server.ServiceTemporarilyUnavailable<\/code>/)?f.code="Server.ServiceTemporarilyUnavailable":(c=r.allHeadersText,c=c.indexOf("system.hostname")>-1?"-mail":"-unk",f.code="Server."+(f.detail.respTxt===""?"NoResponse":(a=n.isHtml(r))?"HTMLResponse":"Malformed")+c,f.subcode=a));else{if(u.error||u.fault)u=u.error||u.fault;h===500?(f=s(u.code||"Server.MalformedFault",u.message,u.detail||r),r.body=u):h===200&&(l?r.body={result:u}:d.batchopcbk?f=o():u.result&&(f=N(u.result))),r.fault=f}}function N(e){var t;if(!e)return;return e.returnCodes&&e.returnCodes.length?(t=e.returnCodes[0],t.partialFault=!0):e.error&&e.error.length&&(t=e.error[0],t.partialFault=!0),t}function C(e,t,n){var r={},i,s,o,u,f=!1,h=!1,b=a,w=n&&n.appid||"YahooMailNeo";t=t||{};if(!e)throw new Error("CascadeMethod");if(t.call)for(o=0;o<t.call.length;o++)u=t.call[o],u&&u.SendMessage&&u.SendMessage.headers&&(r.headers=u.SendMessage.headers,delete u.SendMessage.headers);else r.headers=t.headers,delete t.headers;NeoConfig.hasConvV3&&(h=y(e,t)),b=h?p:a,i=r.url=(d[e]||b).replace(/_APPID_/,w)+(h?"":e);if(NeoConfig.isTestMail){switch(e){case"SetMetaData":case"SetUserData":return}i=i.replace(/\/ws\/[^\?]*/,"/neo/testWS"),i=r.url=i+"&testId="+NeoConfig.testId+"&fakeReqNum="+v++}if(e===l||e===c)i=r.url=i+"&prime="+(t.prime==="Prime"?"1":"0"),delete t.prime;else if((e==="BatchExecute"||e==="BatchExecuteGDM")&&t.call)for(o=0;o<t.call.length;o++)u=l in t.call[o]?l:c in t.call[o]?c:null,u&&(f||(i=r.url=i+"&prime="+(t.call[o][u].prime==="Prime"?"1":"0"),f=!0),delete t.call[o][u].prime);return m(i)&&(s=S(t),i.length+s.length>=2048?s=null:r.url+=s),s||(r.post=function(n){return g(e==="BatchExecuteGDM"?"BatchExecute":e,n||t,h)}),r.callback=O(n,e,t,h),r.useV3=h,r}function k(e,t){var n=o.format[t.callback.responseType];n&&n(e,t)}function L(t){var n,i,s;s=t.status;if(s===200)try{NeoConfig.enable_spdy_support?i=t.getResponseHeader("Content-Type").split("boundary=")[1]:i=t.responseHeaders["Content-Type"].split("boundary=")[1],n=r.parseMultiPartResponse(t.responseText,i),t.responseText=A(n),t.multipart=1}catch(o){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-net-transport:1",o,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-net-transport:1"),e.fire("MailLog",{m:"Can't parse MultiPartResponse",errMsg:o.message,respHeader:t.responseHeaders})}return t}function A(t){var n,r,i={},s,o,u,a=[],f,l,c;try{n=t&&e.JSON.parse(t)}catch(h){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-net-transport:2",h,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-net-transport:2"),e.fire("MailLog",{m:"JSON Parse error in formatV3Response!",error:h.message,respText:parseInt(NeoConfig.log_error_response,10)===1?t:"filtered"}),e.fire("util:ymstats",{name:"v3_parse_fail",tags:{agent:NeoConfig.browser,part:"v3format",v3failedcase:"format",farm:NeoConfig.farm?NeoConfig.farm.substr(1):"xxxx"}})}f=n.length,i={error:null,result:{response:[]}};for(o=0;o<f;o++){c=n[o],u=c.id,s={};if(c.ErrorResponse){if(a[u])continue;l=c.ErrorResponse,s.ErrorResponse=l,a[u]=!0}else l=c[c.key],s[c.key]=l.result||l.error;s.id=u,s.success=c.success,s.not_requested=c.not_requested||!1,i.result.response.push(s)}return r=e.JSON.stringify(i),r}function O(t,n,r,i){return t||(t={}),e.mix(t,{responseType:"json",method:n,service:"mail",serviceCredType:"strict",isV3:i,formatter:o.formatter,parseMultiPartResponse:o.parseMultiPartResponse,suppressCodes:[],exceptCodes:[],suppressLogs:[],exceptLogs
:[],timeout:NeoConfig.mailwstimeout},!1),t}function M(e){return o.queue?o.queue(e):e}var t=e.common.net,n=t.SessionMgr,r=e.common.Utils,i=t.Error,s=n.makeFaultObject,o,u="/jsonrpc?appid=_APPID_&m=",a="/ws/mail/v2.0"+u,f="/ws/mailPreferences/v1"+u,l="GetDisplayMessage",c="ListMessagesInThread",h="?appid=_APPID_",p="/ws/v3/batch"+h,d={GetUserPreferences:f,SetUserPreferences:f},v=1,m=function(e){return/formrpc/.test(e)};return o={request:function(e,t,r,i){var s,o=C(e,t,r),u,a;if(!o)return;u=o.headers||{},s=M(n.request(o.url,o.post,o.callback,o.post?"POST":"GET",null,null,o.useV3)),u.Accept="application/json, multipart/form-data";for(a in u)s.setHeader(a,u[a]);i&&s.send()},formatter:k,parseMultiPartResponse:L,formatV3Response:A,format:{json:T}},o}();var t=e.common.persist.NeoData.get("mailnetQueue");(t||typeof t=="undefined")&&e.use("mail-net-queue",function(){}),NeoConfig.enable_etp&&NeoConfig.isInternal&&e.fire("util:ymstats",{name:"mail_etp",tags:{browser:NeoConfig.browser,host:NeoConfig.hostName}}),e.use("mail-net-diag")},"1.0.0",{requires:["ymma-stats","common-net-sessionmgr","json-stringify","common-persist-neo-data"]});


YUI.add("mail-net-queue",function(e){function p(e,t){return t&&e==="BatchExecute"?!1:!h[e]}function d(e,t){t=t||{};var n=t.method,r=/prime=0/.test(e.request.url);u||(s=s||t.service==="mail"&&p(n,r))}function v(t,n){var f,h=n.service==="mail"?!0:!1,d=u?h:h&&p(n.method);u&&h&&t.tries===1&&(o--,r("total request is "+o)),n=n||{},r("request is complete");if(d){r("Setting _serverLocked to false in _onSessionComplete"),s=!1;if(i.length>0){if(u&&i[0].blockingRequest&&o!==0){r({m:"Cannot run blocking request, wait for all requests to finish",totalReq:o});return}f=i.shift(),f.blockingRequest&&(a=!1),e.fire(l,f,i.length),r({m:"Dequeuing "+f.url}),u?o<c&&(o++,r("total request is "+o),o===c&&(r("Setting _serverLocked to true in _onSessionComplete"),s=!0),r({m:"Sending the request out of the browser, _onSessionComplete",totalReq:o,serverLocked:s}),i.length===0&&(a=!1),f.send()):(r({m:"Sending the request out of the browser, _onSessionComplete",totalReq:o,serverLocked:s}),f.send())}}}function m(t,n,l,h){h&&o>0&&(a=!0,t.blockingRequest=!0,r("queuing because of blocking request")),!u&&p(n)&&(s||i.length>0)||u&&(s||a)&&l==="mail"?(r({m:"Queued "+n,request:t.request}),i.push(t),e.fire(f,t,i.length)):(u&&l==="mail"&&(o++,o===c&&(s=!0),r({m:"Sending the request out of the browser",totalReq:o,cascadeMethod:n})),t.send())}function g(t,n){var s,o;for(s=0,o=i.length;s<o;s++)if(t.id===i[s].id){r("Abort - removed from queue "+n),i.splice(s,1),r("Dequeuing on abort "+n),e.fire(l,t,i.length,!0);return}t&&(r("wasn't in the queue, so call abort on netobj "+n),t.abort())}function y(e){function t(e){this.send=function(){m(e,this._callback.method,this._callback.service,this.blockingRequest)},this.abort=function(){g(e,this._callback.method)}}return t.prototype=e,new t(e)}var t=e.mail.net.Transport,n=e.common.Utils,r=n.log,i=[],s=!1,o=0,u=NeoConfig.parallelRequests||!1,a=!1,f="mailnet:queue",l="mailnet:dequeue",c=5,h={GetDisplayMessage:1,GetMessage:1};e.on("net:start",d),e.on("net:complete",v),e.on("net:abort",v),e.mix(t,{queue:y},!0)},"1.0.0",{requires:["mail-net-transport"]});


YUI.add("mail-net-diag",function(e){e.namespace("mail.net"),e.mail.net.Diag=function(){function r(e){return e&&e.service==="mail"}function i(e,n){return r(n)&&{log:[o(e,n),"Request :",t.stringify(e.request).substring(0,500)].join(" ")}}function s(e,n){var i=n.callback,s,o,u,a="request.time.total";try{r(i)&&n.responseHeaders&&(NeoConfig.enable_spdy_support?s=n.getResponseHeader("X-Ywsc-Debug"):s=n.responseHeaders["X-Ywsc-Debug"],s=s&&s.length?t.parse(s):{},s[a]||(NeoConfig.enable_spdy_support?s[a]=n.getResponseHeader("X-Response-Time"):s[a]=n.responseHeaders["X-Response-Time"]),u&&u>1e3&&(u='<span style="color:red">'+u+"</span>"),o={log:t.stringify(s),dbgui:["ws :",u||"X"," ms"].join("")})}catch(f){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-net-diag:1",f,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-net-diag:1")}return o||""}function o(e,n){function i(e){var n;try{return(n=e.postdata)&&t.parse(n).params[0]}catch(r){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-net-diag:2",r,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-net-diag:2")}}if(r(n)){var s,o=e.request,u,a,f,l,c,h="";if(f=n.batchop)c="<br/> ---",h=f.join(c);else if(h==="ListMessages")h=(a=o.url.match(/startInfo=(\d)+/))&&a[0];else if(h==="GetDisplayMessage"&&(l=(u=i(o))&&u.message))for(s=0;l&&s<l.length;s++)h+=" "+l[s].mid;return h}}var t=e.JSON,n=e.common.net.Diag;n.addLogger("net:start",i),n.addLogger("net:end",s)}()},"1.0.0",{requires:["common-net-diag","json-stringify","json-parse"]});


YUI.add("mail-ui-messagepane-utils",function(e){function r(e){e&&(e.hRenderedEvent&&e.hRenderedEvent.detach(),delete e.hRenderedEvent)}function i(t,n){var r,i,s,o,u,a=[],f,l,c,h=[];if(t&&!NeoConfig.targetingOptOut&&NeoConfig.intl==="us"&&!NeoConfig.partnerType){if(t.extend&&t.extend.shortcuts){r=t.extend.shortcuts.categories;if(e.Lang.isArray(r)){u=r.length;for(o=0;o<u;o++)f=r[o][0],a.push(f)}i=t.extend.shortcuts.annotations;for(o in i)s=i[o],s&&s.text&&s.capAbtScore>.5&&h.push(i[o].text)}a=a.join(","),n!=="Draft"&&n!=="%40C%40Chats"&&n!=="Sent"&&(t.header&&t.header.from&&t.header.from.email?(c=t.header.from.email.split("@"),l=c[1]):t.chainedLMTMsg&&t.chainedLMTMsg.from&&t.chainedLMTMsg.from.email?(c=t.chainedLMTMsg.from.email.split("@"),l=c[1]):t.msgs&&t.msgs[0]&&t.msgs[0].header&&t.msgs[0].header.from&&t.msgs[0].header.from.email?(c=t.msgs[0].header.from.email.split("@"),l=c[1]):t.from&&t.from.email&&(c=t.from.email.split("@"),l=c[1]))}return{category:a,domain:l,terms:h}}function s(t,s,o,u){var a,f;if(!t||t.mid!==u)t=n.Stopwatch.get("MsgInPreview","MsgInPreviewAbort",1),t.title="MsgInPreview Stopwatch\n",t.mid=u,t.isConv=NeoConfig.hasConvView,t.hRenderedEvent&&t.hRenderedEvent.detach(),t.hMsgReadAppEvent&&t.hMsgReadAppEvent.detach(),s&&(a=e.mail.model.DataStore.Folders.get(o),f=e.mail.ui.common.StringUtils.getSystemFolderInfoName(o,a),t.hRenderedEvent=s.once("renderComplete",function(){var a;r(t),t.stop(),n.Stopwatch.get("MsgInPreview",0),NeoConfig.low_bandwidth?a="msgread_reading_pane_low":NeoConfig.isSSL?a="msgread_reading_pane_ssl":a="msgread_reading_pane",s&&s.get("active")&&s.fire("darlaEvent",{action:a,value:{siteAttr:i(e.mail.model.DataStore.Messages.get(o,u),o),foldername:f}})}));return t}function o(t){if(e.contacts&&e.contacts.utils&&e.contacts.api){var n=e.contacts,r=n.utils,i=n.api,s=e.common.persist.UserData;return!t||t===""?1:s.isUsersEmailAddress(t)||r.isEmailKnown(t,!0)?1:r.areContactsLoaded()?0:(i.load(),1)}return 1}function u(t){var n,r,i=800;return!t||!t.getDOMNode()?!1:(n=t.getDOMNode().textContent,n===null?!1:n.length<i?!0:(r=e.Node.create(t.getDOMNode().innerHTML),r.all("style").remove(),n=r.getDOMNode().textContent,n.length<i?!0:!1))}function a(t){var n=!0;return t?(e.Array.each(t,function(e){if(e&&e.disposition==="attachment")return;e&&e.type==="text"&&(e.subtype==="plain"?n=n&&!0:n=n&&!1)}),n):!1}function f(e){var t=e.getDOMNode(),n=t.querySelectorAll&&t.querySelectorAll("*[style]")||[],r=0,i;for(r=0;r<n.length;r++)i=n[r].attributes.getNamedItem("style"),i.value=i.value.replace(/([^a-z-])height\s*:|^height\s*:/gi,"$1min-height:"),i.value=i.value.replace(/white-space\s*?:\s*?pre\s*?;|white-space\s*?:\s*?pre\s*?$/gi,"white-space:pre-wrap;"),i.value=i.value.replace(/display:none/gi,"")}function l(t){var n=e.Node.create('<div id="__process_markup">'+t+"</div>");return f(n),"<div class='email-wrapped'>"+n.get("innerHTML")+"</div>"}e.namespace("mail.ui.MessagePaneUtils");var t=e.mail.ui.MessagePaneUtils,n=e.common.Utils;e.mix(t,{getAdSiteAttribsFromMesgObj:i,handleMsgInPreviewStopwatch:s,cleanUpStopwatch:r,isKnownEmailAddress:o,plainTextMessage:a,processBodyMarkup:l,hasOnlyNonDisplayableContent:u})},"1.0.0",{requires:["common-utils-stats","mail-ui-messagepane-utils-shared"]});


YUI.add("mail-ui-messagepane-utils-shared",function(e){function n(e){var t="",n,r,i,s,o=e.toLowerCase(),u;if(o.indexOf("http://")===0||o.indexOf("https://")===0||o.indexOf("ftp://")===0)return"";o.indexOf("mailto:")===0&&(e=e.substring(7)),n=e.indexOf("?"),n>-1&&(e=e.substring(0,n));if(e&&e.length){r=/\s*([^@ ;,<>]+@[^@ ;,<>]+\.[^@^? ;,<>]+)*/ig,i=e.match(r);for(u=0;u<i.length;u++)s=i[u].replace(/^\s+/,""),s.length&&(t+=t.length?","+s:s)}return t}function r(e){var t="";if(e&&e.length){var n=/^(http:\/\/opi.yahoo.com\/online\?u=[a-zA-Z0-9.@_]+)/i,r=e.match(n);t=r?r[r.length-1]:""}return t}function i(e){var t="",n="",r=e&&e.all("tt");r&&!r.isEmpty()?n=r.get("innerHTML").join(""):n=e&&e.get("innerHTML");if(n&&n.length){n=n.replace(/&amp;/gi,"&");var i=/^(http:\/\/mrd.mail.yahoo.com\/)(\w+)\?*(.*)/i;t=n.match(i)?n:!1}return t}function s(e){var t={},n,r,i,s,o,u,a;if(e.extend&&e.extend.shortcuts&&e.extend.shortcuts.annotations){s=e.extend.shortcuts.annotations,n=/(day\w+)|(date\w+)|(month\w+)|(time_only)/;for(u in s)r=s[u],r&&r.type&&r.type[0]&&(o=r.type[0].match(n),o&&(t[u]=s[u]));t.mid=e.mid,t.fid=e.fid}else if(e.annotation){s=e.annotation,n=/(day\w+)|(date\w+)|(month\w+)|(time_only)/;for(u in s){i=s[u],o=u.match(n);if(o)for(a=0;a<i.length;a++)t[i[a].id]=i[a]}t.mid=e.messageid,t.fid=e.folderid}return t}function o(t,o,u){var a=o||t&&(t.one(".tripane.content")||t.one(".message.content")),f=a&&a.all(".yshortcuts"),l;NeoConfig.livewordEventEnabled&&u&&(u.extend||u.annotation)&&(l=s(u)),f&&f.each(function(t){var s=t.get("innerHTML"),o=n(s),u,a,f,c,h;if(o&&o.length){u=t.get("parentNode");if(u.get("tagName")!=="A"||!u.hasAttribute("ymailto")){a=[],a.push('<a href="mailto:'+o+'" '),a.push('target="_blank" ymailto="mailto:'+o+'" rel="nofollow">'),a.push('<span id="'+t.get("id")+'" class="yshortcuts">'),a.push(s),a.push("</span></a>"),f=e.Node.create(a.join(""));try{t.replace(f)}catch(p){typeof globals!="undefined"&&globals.report?globals.report("caughterror:..-build-mail-ui-messagepane-shared:1",p,"TRY_CATCH",1,1,1):window.console&&console.log&&console.log("caughterror:..-build-mail-ui-messagepane-shared:1")}}}else if(l&&l[t.get("id")]){if(!t.hasAttribute("data-action")||t.get("data-action")!=="calevent")t.setAttribute("data-action","calevent"),t.setAttribute("mid",l.mid),t.setAttribute("fid",l.fid),t.setAttribute("title",strings.str_msg_addevent_tooltip),t.addClass("ycalshortcuts")}else c=r(s),c?(a=[],a.push('<span id="'+t.get("id")+'" class="yshortcuts">'),a.push('<img src="'+c+'" alt="'+c+'"/>'),a.push("</span>"),f=e.Node.create(a.join("")),t.replace(f)):(h=i(t),h&&(a=[],a.push('<a href="#" target="_blank" rel="nofollow">'),a.push('<span id="'+t.get("id")+'" class="yshortcuts">'),a.push(s),a.push("</span></a>"),f=e.Node.create(a.join("")),f.setAttribute("ymrd",h),t.replace(f)))})}function u(t){var n=t?e.one(t).one("body"):e.one("body");if(!n.one("#copyText")){var r=500;n.append('<input type = "text" value = "" style = "opacity: 0;  filter: alpha(opacity = 0); position:absolute; width:1px; height: 1px; left:'+r+'px;" id = "copyText">')}}function a(t,n,r){var i=n?e.one(n).one("body"):e.one("body"),s=i.one("#copyText");s._node.value=t,s.setY(i.get("scrollTop")+20),s.focus(),s.select(),setTimeout(function(){r&&r.focus()},200)}e.namespace("mail.ui.MessagePaneUtils");var t=e.mail.ui.MessagePaneUtils;e.mix(t,{extractEmailAddress:n,extractOPILink:r,extractMRDLink:i,getDateAnnotations:s,convertShortcuts:o,initializeCopyText:u,copyToClipboard:a})},"1.0.0");


YUI.add("mail-ui-common-string-utils",function(e){e.namespace("mail.ui.common.StringUtils");var t=e.mail.ui.common.StringUtils;e.mix(t,{getSystemFolderName:function(e,t,n){switch(e){case"Inbox":if(n)return strings.str_nav_email_from_ctcts;return strings.str_nav_inbox;case"Draft":return strings.str_nav_drafts;case"Trash":return strings.str_nav_trash;case"Sent":return strings.str_nav_sent;case"%40B%40Bulk":return strings.str_nav_spam;case"%40C%40Chats":if(NeoConfig.hasConv)return strings.str_nav_IM;return strings.str_nav_conversations;case"%40S%40Search":return strings.str_tabs_search}return t?decodeURIComponent(t):""},getSystemFolderInfoName:function(n,r,i){return t.getSystemFolderName(n,e.common.Utils.getVal(r,"folderInfo.name"),i)},getTabName:function(e){switch(e){case"tabcalendar":return strings.str_tabs_calendar;case"tabcontacts":return strings.str_tabs_contacts;case"tabnotepad":return strings.str_tabs_notepad;default:return""}},getSortKeyString:function(e){switch(e){case"date":case"date-asc":case"date-desc":return strings.str_menu_view_sortby_date;case"unRead":return strings.str_menu_view_sortby_unread;case"sender":return strings.str_menu_view_sortby_sender;case"recipient":return strings.str_menu_view_sortby_recipient;case"relevance":return strings.str_menu_view_sortby_relevance;case"subject":return strings.str_menu_view_sortby_subject;case"attachment":case"attachmentcount":return strings.str_menu_view_sortby_attachment;case"sort-flagged":return strings.str_menu_view_sortby_flagged;default:return strings.str_menu_view_sortby_btn}}})},"1.0.0",{requires:["common-utils"]});


YUI.add("mail-ui-navkeys",function(e){e.namespace("mail.ui");var t=window.Mousetrap;t.bind(["command+shift+l","ctrl+shift+l"],function(){e.common.Utils.features.enabled("listenr")&&e.fire("Listenr:launch")},"keydown"),t.bind("shift+m",function(){e.fire("checkmail:pressed",!0)},"keydown"),t.bind("m",function(){e.fire("checkmail:pressed",!1)},"keydown"),t.bind("n",function(t){setTimeout(function(){var t={};e.fire("newMessage",t)},0);var n=new e.DOMEventFacade(t,t.currentTarget);n.preventDefault()},"keydown"),t.bind("b",function(){var t=e.one("#btn-delete");t&&t.focus()},"keydown"),t.bind(";",function(){e.fire("openOptions")},"keydown"),t.bind("s",function(t){var n=new e.DOMEventFacade(t,t.currentTarget);n.preventDefault(),e.common.Utils.features.enabled("search")?e.fire("search:focus"):e.use("mail-ui-searchbar",function(e){e.mail.ui.SearchBar.focus()})},"keydown"),t.bind("?",function(){e.use("mail-ui-shortcuts-dialog",function(e){e.mail.ui.ShortcutsDialog.show()})},"keydown"),t.bind("ctrl+shift+l",function(){e.fire("printLog")},"keydown"),t.bind("c",function(t){var n=e.one("#custom-folders li.selected:hover"),r=new e.DOMEventFacade(t,t.currentTarget);n&&(r.currentTarget=n,e.fire("#custom-folders.li:keydown",r))},"keydown"),t.bind("e",function(t){var n=e.one("#custom-folders li:hover"),r=e.one("#storm-listnav li.sysfolder:hover"),i=new e.DOMEventFacade(t,t.currentTarget);r&&(i.currentTarget=r,e.fire("#storm-listnav li.sysfolder:keydown",i)),n&&(i.currentTarget=n,e.fire("#custom-folders.li:keydown",i))},"keydown"),t.bind(["command+shift+e","ctrl+shift+e"],function(t){var n=new e.DOMEventFacade(t,t.currentTarget);n.preventDefault(),n.target.getAttribute("id")==="menu-move"?e.fire("msgsview:movetonewfolder"):e.fire("newfolder:pressed")}),t.bind(["command+shift+,","command+shift+/","ctrl+shift+,","ctrl+shift+/"],function(t){e.use("common-ui-dialog-helper",function(e){var n=e.common.ui.DialogHelper,r=[],i,s,o=[];NeoGV.sp&&(o.push("SpaceId:"),o.push(NeoGV.sp),o.push(" "),r.push(o.join(" ")));for(s in NeoGV.ads)NeoGV.ads.hasOwnProperty(s)&&(i=[],i.push("Position:"),i.push(s),i.push(" "),i.push("BookingID:"),i.push(NeoGV.ads[s].bookId),r.push(i.join(" ")));NeoGV.keywords&&r.push("Keywords: "+NeoGV.keywords),n.alert({modal_classes:"lg",hd:"Ad Information",bd:"<pre>"+(r.length>0?r.join("\n"):"No items to display in this view")+"</pre>"}),t.preventDefault()})}),t.bind("esc",function(t){var n=new e.DOMEventFacade(t,t.currentTarget);n.preventDefault()},"keydown"),t.bind("backspace",function(t){var n=new e.DOMEventFacade(t,t.currentTarget);n.preventDefault()},"keydown")},"1.0.0",{requires:["mail-controller-folders","event-custom-complex","mail-common-utils-features"]});


YUI.add("mail-ui-searchbar",function(e){var t=function(){function i(){return NeoConfig&&NeoConfig.searchField||e.one(n)}function s(){var e=i();e&&e.focus()}function o(t,n){var s=t||i().get("value"),o=!1,u;n&&n.typeTag&&typeof s=="string"&&(o=!0,u={keyword:s,typeTag:n.typeTag}),r.isSet?e.fire(r.event,{query:s}):e.fire("search:input",{newSearch:!0,query:o?u:s})}function u(e){!e.mode||e.mode==="default"?(r.isSet=!1,r.event=""):(r.isSet=!0,r.event=e.event||"omsearch:input")}function a(){if(Neo.searchBtnClicked){var t="",n=NeoConfig.searchField;n&&(t=n.get("value")),t&&e.Global.fire("ucs:verticalSearchAction",{query:t}),Neo.searchBtnClicked=!1}}function f(){e.on("search:config",u),e.on("fireSearch",o);var t=i(),n=NeoConfig.searchSuggestionsEntityMatch;e.Global.on("ucs:verticalSearchAction",function(t){function r(t){var r;NeoConfig.currentQuery=t.query;var s;n&&e.mail.ui.EntitySearch&&e.mail.ui.EntitySearch.findExactMatch&&(s=e.mail.ui.EntitySearch.findExactMatch(t.query)),s&&i?e.fire("searchSuggestion:start",{type:"entity",id:s.id,typeTag:"search_uhr_btn"}):o(t.query,{typeTag:"search_uh_box_click"}),e.fire("mt:click",{action:"mail_search",spid:"search_results"}),r=new e.EventTarget,r.publish("ucs:mailSearch",{broadcast:2,emitFacade:!0}),r.fire("ucs:mailSearch")}var i=!0,s=arguments;if(e.Tictac&&!e.Tictac.contactdetails)i=!1;else if(!e.Tictac){e.once("tictacs-loaded:ws:postLoad",function(){r.apply(undefined,s)});return}r(t)}),e.Global.once("ucs:uhSearchInterfaceReady",a),t&&(t.once("focus",function(){e.use("mail-ui-mailSearchController","mail-ui-advancedSearchController","mail-ui-searchGroupsController","mail-ui-searchListController","mail-ui-toolbarController","contacts-api","contacts-api-utils","stylesheet","mail-ui-messageaction","mail-ui-inboxmenu-base","mail-common-inline-edit","_shared_module_search_with_snippet_rollup")}),t.on("keydown",function(e){switch(e.keyCode){case 65:(e.ctrlKey||e.metaKey)&&e.stopPropagation()}})),NeoConfig.bidi&&t&&t.on("focus",function(){!t.bidiTextEntry&&e.Plugin.BidiTextEntry&&t.plug(e.Plugin.BidiTextEntry)}),strings.str_cfg_tog_show_search_desc&&e.use("mail-ui-searchdesc",function(e){e.mail.ui.SearchDesc.bindSearchDesc()})}function l(){f()}var t=this,n="input.yucs-search-input, #UHSearchBox",r={event:"",isSet:!1};e.mix(t,{render:l,getSearchField:i,focus:s})};e.namespace("mail.ui"),e.mail.ui.SearchBar=new t},"1.0.0",{requires:["common-utils","node-pluginhost","ac-entity-search"]});


YUI.add("mail-ui-folder-utils",function(e){var t=/[@#$%&*?\/;\'\":\[\]\{\}<>|\\\~\n\r\f\t]+/,n=/[\/\n\r\f\t]+/,r="TRASH",i="BULK",s="DRAFT",o="INBOX",u="SENT",a="USER",f="INVISIBLE",l="1",c=e.common.Utils.escapeHtml;e.namespace("mail.ui").FolderUtils={isFolderNameValid:function(r){return e.common.Utils.features.enabled("foldersv3")?!n.test(r):!t.test(r)},getSystemFolderForFid:function(e){var t={Inbox:strings.str_folder_reserved_inbox,Draft:strings.str_folder_reserved_drafts,Sent:strings.str_folder_reserved_sent,"@B@Bulk":strings.str_folder_reserved_spam,Trash:strings.str_folder_reserved_trash};return t[e]||e},SpamFolderType:i,TrashFolderType:r,DraftFolderType:s,InboxFolderType:o,SentFolderType:u,UserFolderType:a,PrimaryAcctId:l,SystemFolderTypes:[o,u,s,r,i],VisibleFolderTypes:[o,u,s,r,i,a],InvisibleFolderTypes:[f],getFolderDir:function(t,n){var r=t.dir;return r||(e.Intl&&e.Intl.detectDirection?r=e.Intl.detectDirection(n,NeoConfig.isRTL?"rtl":"ltr"):r=""),r},getEscapedFullName:function(e,t){var n=c(e);return NeoConfig.bidi&&(t==="ltr"?n="\u202a"+n+"\u202c":t==="rtl"&&(n="\u202b"+n+"\u202c")),n}}},"1.0.0",{requires:["common-utils","mail-common-utils-features"]});


YUI.add("ac-entity-search",function(e){function r(e){var r=null,i=null,s=0,o=0,u=[],a=e.toLowerCase(),f=e.length;if(n&&e.length)for(r in t)if(t.hasOwnProperty(r)){i=t[r],s=i.matchNames.length;for(o=0;o<s;++o)if(i.matchNames[o].indexOf(a)===0){u.push({data:i,highlightLen:f});break}}return u}function i(e){var r=e.toLowerCase(),i=null,s=0,o=0,u=!1,a="",f=null,l=null;if(n&&e.length)for(i in t)if(t.hasOwnProperty(i)){f=t[i],o=f.matchNames.length;for(s=0;s<o;++s){a=f.matchNames[s];if(a===r){l=f,u=!0;break}}if(u)break}return l}var t=e.common.Utils.settings.value("searchSuggestionsEntities")||[],n=NeoConfig.searchSuggestionsEntityMatch;e.namespace("mail.ui"),e.mail.ui.EntitySearch={findPrefixMatches:r,findExactMatch:i}},"1.0.0",{requires:["mail-common-utils-settings"]});


YUI.add("_shared_module_message_prompt",function(e){e.namespace("ui.Templates"),e.ui.Templates._shared_module_message_prompt={base:"<h2>{{str_msg-view_click_above}}</h2>"}},"1.0.0");


YUI.add("minty_module_toolbar_inbox",function(e){e.namespace("ui.Templates"),e.ui.Templates.minty_module_toolbar_inbox={base:'<div class="switcher shaded hidden"> <span class="btn left {{has_im_else}}" id="main-btn-new"><a title="{{compose_str}}" href="{{global_url_base}}/minty/page/compose" data-action="compose" draggable="false">{{compose_str}}</a></span>{{has_im}}</div>',has_im_else:"right",has_im:'<span class="btn right menu" id="btn-new" data-action="menu"><a href="#" title="{{str_toolbar_comp_menu_toggle_attr}}" draggable="false"><b></b></a></span>'}},"1.0.0");


window.strings=strings;};
