YUI.add("tictac-contactdetails-strings",function(a){a.namespace("Tictac.contactdetails").strings={str_apr:"Apr",str_aug:"Aug",str_comp_attach_size_byte:"B",str_comp_attach_size_kb:"KB",str_comp_attach_size_mb:"MB",str_customer_service:"<div>Customer Service</div> <div>{{phone}}</div>",str_dec:"Dec",str_delivered_shipments:"Delivered purchases from {{entity_name}}",str_delivered_str2_range_without_year:"{{str_delivery_month_from}} {{str_delivery_day_from}} - {{str_delivery_month_to}} {{str_delivery_day_to}}",str_delivered_str2_range_with_year:"{{str_delivery_month_from}} {{str_delivery_day_from}}, {{str_delivery_year_from}} - {{str_delivery_month_to}} {{str_delivery_day_to}}, {{str_delivery_year_to}}",str_delivered_str2_without_year:"{{str_delivery_month}} {{str_delivery_day}}",str_delivered_str2_with_year:"{{str_delivery_month}} {{str_delivery_day}}, {{str_delivery_year}}",str_documents:"Documents",str_estimated_delivery_str1:"Estimated Delivery",str_estimated_delivery_str1_via:"Estimated Delivery via {{shipper}}",str_estimated_delivery_str2_range_without_year:"{{str_delivery_month_from}} {{str_delivery_day_from}} - {{str_delivery_month_to}} {{str_delivery_day_to}}",str_estimated_delivery_str2_range_with_year:"{{str_delivery_month_from}} {{str_delivery_day_from}}, {{str_delivery_year_from}} - {{str_delivery_month_to}} {{str_delivery_day_to}}, {{str_delivery_year_to}}",str_estimated_delivery_str2_without_year:"{{str_delivery_month}} {{str_delivery_day}}",str_estimated_delivery_str2_with_year:"{{str_delivery_month}} {{str_delivery_day}}, {{str_delivery_year}}",str_feb:"Feb",str_friday:"Friday",str_header_contactname_from:"From {{contactname}}",str_header_contactname_to_from:"To/From {{contactname}}",str_header_contactname_to:"To {{contactname}}",str_help_page:"{{entity_name}} Help Page",str_jan:"Jan",str_jul:"Jul",str_jun:"Jun",str_mar:"Mar",str_may:"May",str_messages_from_entity:"Showing messages exchanged with {{name}}.com",str_messages:"Messages",str_monday:"Monday",str_no_filename:"No Filename",str_no_subject:"No Subject",str_nov:"Nov",str_oct:"Oct",str_often_cced:"Often CC'ed",str_photos:"Photos",str_photos_sent_from:"<b>Photos</b> from {{name}}",str_photos_sent_to:"<b>Photos</b> to {{name}}",str_recent_shipments:"Purchases in transit from {{entity_name}}",str_saturday:"Saturday",str_search_instead_for:"Search instead for <span>{{query}}</span>",str_sent_from:"from {{name}}",str_sent_to:"to {{name}}",str_sep:"Sep",str_sunday:"Sunday",str_thursday:"Thursday",str_today:"Today",str_tomorrow:"Tomorrow",str_tuesday:"Tuesday",str_wednesday:"Wednesday",str_with_name:"with {{name}}",last:null}},"1.0.0");"use strict";YUI.add("tictac-contactdetails-utils",function(a){function b(a){return{cbfn:function(b){var c=b.get("header");c.to=a,b.set("header",c)}}}a.namespace("Tictac.contactdetails").utils={restoreToolbarAndMsgs:function(b){var c=a.one("#shellinner"),d=a.one("#toolbar");if(c.prepend(d),b=b||a.one("#entity-purchase-history-card")){var e=b.ancestor("#msg-list");e.removeClass("related-products")}},moveToolbarAndMsgs:function(b){var c=a.one("#toolbar");if(b=b||a.one("#entity-purchase-history-card")){var d=b.ancestor(".list-view-items"),e=d.one(".list-view-item"),f=b.ancestor("#msg-list");f.addClass("related-products"),d.insertBefore(c,e)}},createLogFnWithModuleName:function(b){var c=function(c,d){a.log.call(this,c,d,b)};return c},where:function(b,c,d){var e,f,g,h=0,i=b.length,j=!1,k=[];if(d>0)for(h=0;i>h;h+=1){e=b[h],j=!1;for(f in c)if(c.hasOwnProperty(f)&&(g=e[f],j=a.Lang.isUndefined(g)||g!==c[f]))break;if(!j&&(k.push(e),k.length===d))break}return k},pluck:function(a,b){var c,d=0,e=a.length,f=[];for(d=0;e>d;d+=1)c=a[d][b],void 0!==c&&f.push(c);return f},sendEmailTo:function(a){yui.fire("newMessage",b(a))},removeMoneyBall:function(){var b=a.one("#dd_search_results_container").ancestor("#msg-list")||a.one("#dd_search_results_container").ancestor("#msg-list-no-result");b&&b.addClass("hide-money-ball")}}},"1.0.0",{requires:[]});"use strict";YUI.add("tictac-contactdetails-stats",function(a){var b=new a.Tictac.base.Stats({name:"contactdetails",ymma:{documents_rendered:!0,document:!0,photos_rendered:!0,photo:!0,frequentlyemailedcontacts_rendered:!0,frequentlyemailedcontact:!0,moredetails:!0,showall_attachment:!0,showall_photo:!0,showall_message:!0,showall_other:!0,showmore_attachment:!0,showmore_photo:!0,showmore_message:!0,showmore_other:!0,search_complete:!0,search_reset:!0,contact_rendered:!0,start_abContact:!0,start:!0,start_xContact:!0,search_instead_clicked:!0,tabClicked_all:!0,tabClicked_from:!0,tabClicked_to:!0,twitter_clicked:!0,facebook_clicked:!0,linkedin_clicked:!0,twitter_timeline_rendered:!0,facebook_rendered:!0,twitter_rendered:!0,linkedin_rendered:!0}}),c=new a.Tictac.base.Stats({name:"entitydetails",ymma:{relatedproductoffered:!0,entityview_rendered:!0,hasshipment:!0,message:!0,searchinstead:!0,delivered:!0,recent:!0,trackingnumber:!0,relatedproductcount:!0,relatedproduct:!0,relatedproductstitle:!0,relatedproductsthumbnail:!0}});a.namespace("Tictac.contactdetails").Stats=b,a.namespace("Tictac.contactdetails").EntityStats=c},"1.0.0",{requires:["tictac-base-stats"]});"use strict";YUI.add("tictac-contactdetails-mainController",function(a){function b(b){g?(f=g,b(g)):a.use("tictac-contactdetails-abContactController",function(a){f=g=new a.Tictac.contactdetails.ABContactController,b(g)})}function c(b){h?(f=h,b(h)):a.use("tictac-contactdetails-xContactController",function(a){f=h=new a.Tictac.contactdetails.XContactController,b(h)})}function d(a,b){a.go(b)}function e(){function b(a){var b=yui.one("#menu-conv-view"),c=b&&b.one('[data-action="density-regular"]'),d=c&&c.ancestor(".menu-group");d&&(a?d.removeClass("disabled"):d.addClass("disabled"))}function c(b){b?a.one("body").removeClass("smartmail-contactdetails-gallery-view"):a.one("body").addClass("smartmail-contactdetails-gallery-view")}function d(){b(!0)}function e(){b(!1)}function g(){b(!1)}var h;yui.on("search:input",function(a){h=a,a&&!a.showDDWithSearchResults&&(e(),c(!0))}),yui.before("searchSuggestion:start",function(){g(),c(!0)}),yui._cdNavSwHndlr||(yui._cdNavSwHndlr=yui.on("navigation:switch",function(a){!a||"searchNav"!==a.type&&"empty-search"!==a.type?h&&h.showDDWithSearchResults||(d(),c(!0)):h&&h.showDDWithSearchResults?(g(),f&&"message"!==f.currentGalleryType&&c(!1)):(e(),c(!0))})),yui._cdTabBlurHndlr||(yui._cdTabBlurHndlr=yui.on("tabBlur",function(a){a&&a.widget&&a.widget.type&&"search"===a.widget.type&&(d(),c(!0))}))}var f,g=null,h=null,i=a.Tictac.contactdetails.Stats;yui.on("searchSuggestion:start",function(e){switch(e.type){case"abContact":b(a.rbind(d,this,e)),i.stat("start_abContact"),i.stat("start");break;case"xContact":c(a.rbind(d,this,e)),i.stat("start_xContact"),i.stat("start")}}),e()},"1.0.0",{requires:["event-base","tictac-contactdetails-utils","tictac-contactdetails-stats","mail-common-utils-features"]});/*
YUI 3.16.0 (build 3.16.0-ym16)
Copyright 2015 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dataschema-base",function(e,t){var n=e.Lang,r={apply:function(e,t){return t},parse:function(t,r){if(r.parser){var i=n.isFunction(r.parser)?r.parser:e.Parsers[r.parser+""];i&&(t=i.call(this,t))}return t}};e.namespace("DataSchema").Base=r,e.namespace("Parsers")},"3.16.0",{requires:["base"]});
/*
YUI 3.16.0 (build 3.16.0-ym16)
Copyright 2015 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dataschema-json",function(e,t){var n=e.Lang,r=n.isFunction,i=n.isObject,s=n.isArray,o=e.DataSchema.Base,u;u={getPath:function(e){var t=null,n=[],r=0;if(e){e=e.replace(/\[\s*(['"])(.*?)\1\s*\]/g,function(e,t,i){return n[r]=i,".@"+r++}).replace(/\[(\d+)\]/g,function(e,t){return n[r]=parseInt(t,10)|0,".@"+r++}).replace(/^\./,""),t=e.split(".");for(r=t.length-1;r>=0;--r)t[r].charAt(0)==="@"&&(t[r]=n[parseInt(t[r].substr(1),10)])}return t},getLocationValue:function(e,t){var n=0,r=e.length;for(;n<r;n++){if(!(i(t)&&e[n]in t)){t=undefined;break}t=t[e[n]]}return t},apply:function(t,n){var r=n,s={results:[],meta:{}};if(!i(n))try{r=e.JSON.parse(n)}catch(o){return s.error=o,s}return i(r)&&t?(s=u._parseResults.call(this,t,r,s),t.metaFields!==undefined&&(s=u._parseMeta(t.metaFields,r,s))):s.error=new Error("JSON schema parse failure"),s},_parseResults:function(e,t,n){var r=u.getPath,i=u.getLocationValue,o=r(e.resultListLocator),a=o?i(o,t)||t[e.resultListLocator]:t;return s(a)?s(e.resultFields)?n=u._getFieldValues.call(this,e.resultFields,a,n):n.results=a:e.resultListLocator&&(n.results=[],n.error=new Error("JSON results retrieval failure")),n},_getFieldValues:function(t,n,i){var s=[],a=t.length,f,l,c,h,p,d,v,m,g=[],y=[],b=[],w,E;for(f=0;f<a;f++)c=t[f],h=c.key||c,p=c.locator||h,d=u.getPath(p),d&&(d.length===1?g.push({key:h,path:d[0]}):y.push({key:h,path:d,locator:p})),v=r(c.parser)?c.parser:e.Parsers[c.parser+""],v&&b.push({key:h,parser:v});for(f=n.length-1;f>=0;--f){E={},w=n[f];if(w){for(l=y.length-1;l>=0;--l){d=y[l],m=u.getLocationValue(d.path,w);if(m===undefined){m=u.getLocationValue([d.locator],w);if(m!==undefined){g.push({key:d.key,path:d.locator}),y.splice(f,1);continue}}E[d.key]=o.parse.call(this,u.getLocationValue(d.path,w),d)}for(l=g.length-1;l>=0;--l)d=g[l],E[d.key]=o.parse.call(this,w[d.path]===undefined?w[l]:w[d.path],d);for(l=b.length-1;l>=0;--l)h=b[l].key,E[h]=b[l].parser.call(this,E[h]),E[h]===undefined&&(E[h]=null);s[f]=E}}return i.results=s,i},_parseMeta:function(e,t,n){if(i(e)){var r,s;for(r in e)e.hasOwnProperty(r)&&(s=u.getPath(e[r]),s&&t&&(n.meta[r]=u.getLocationValue(s,t)))}else n.error=new Error("JSON meta data retrieval failure");return n}},e.DataSchema.JSON=e.mix(u,o)},"3.16.0",{requires:["dataschema-base","json"]});
/*
YUI 3.16.0 (build 3.16.0-ym16)
Copyright 2015 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dataschema-xml",function(e,t){var n=e.Lang,r={1:!0,9:!0,11:!0},i;i={apply:function(e,t){var n=t,s={results:[],meta:{}};return n&&r[n.nodeType]&&e?(s=i._parseResults(e,n,s),s=i._parseMeta(e.metaFields,n,s)):s.error=new Error("XML schema parse failure"),s},_getLocationValue:function(t,n){var r=t.locator||t.key||t,s=n.ownerDocument||n,o,u,a=null;try{o=i._getXPathResult(r,n,s);while(u=o.iterateNext())a=u.textContent||u.value||u.text||u.innerHTML||u.innerText||null;return e.DataSchema.Base.parse.call(this,a,t)}catch(f){}return null},_getXPathResult:function(t,r,i){if(!n.isUndefined(i.evaluate))return i.evaluate(t,r,i.createNSResolver(r.ownerDocument?r.ownerDocument.documentElement:r.documentElement),0,null);var s=[],o=t.split(/\b\/\b/),u=0,a=o.length,f,l,c,h;try{try{i.setProperty("SelectionLanguage","XPath")}catch(p){}s=r.selectNodes(t)}catch(p){for(;u<a&&r;u++){f=o[u];if(f.indexOf("[")>-1&&f.indexOf("]")>-1)l=f.slice(f.indexOf("[")+1,f.indexOf("]")),l--,r=r.children[l],h=!0;else if(f.indexOf("@")>-1)l=f.substr(f.indexOf("@")),r=l?r.getAttribute(l.replace("@","")):r;else if(-1<f.indexOf("//"))l=r.getElementsByTagName(f.substr(2)),r=l.length?l[l.length-1]:null;else if(a!=u+1)for(c=r.childNodes.length-1;0<=c;c-=1)f===r.childNodes[c].tagName&&(r=r.childNodes[c],c=-1)}r&&(n.isString(r)?s[0]={value:r}:h?s[0]={value:r.innerHTML}:s=e.Array(r.childNodes,0,!0))}return{index:0,iterateNext:function(){if(this.index>=this.values.length)return undefined;var e=this.values[this.index];return this.index+=1,e},values:s}},_parseField:function(e,t,n){var r=e.key||e,s;e.schema?(s={results:[],meta:{}},s=i._parseResults(e.schema,n,s),t[r]=s.results):t[r]=i._getLocationValue(e,n)},_parseMeta:function(e,t,r){if(n.isObject(e)){var s,o=t.ownerDocument||t;for(s in e)e.hasOwnProperty(s)&&(r.meta[s]=i._getLocationValue(e[s],o))}return r},_parseResult:function(e,t){var n={},r;for(r=e.length-1;0<=r;r--)i._parseField(e[r],n,t);return n},_parseResults:function(e,t,r){if(e.resultListLocator&&n.isArray(e.resultFields)){var s=t.ownerDocument||t,o=e.resultFields,u=[],a,f,l=0;if(e.resultListLocator.match(/^[:\-\w]+$/)){f=t.getElementsByTagName(e.resultListLocator);for(l=f.length-1;l>=0;--l)u[l]=i._parseResult(o,f[l])}else{f=i._getXPathResult(e.resultListLocator,t,s);while(a=f.iterateNext())u[l]=i._parseResult(o,a),l+=1}u.length?r.results=u:r.error=new Error("XML schema result nodes retrieval failure")}return r}},e.DataSchema.XML=e.mix(i,e.DataSchema.Base)},"3.16.0",{requires:["dataschema-base"]});
/*
YUI 3.16.0 (build 3.16.0-ym16)
Copyright 2015 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dataschema-array",function(e,t){var n=e.Lang,r={apply:function(e,t){var i=t,s={results:[],meta:{}};return n.isArray(i)?e&&n.isArray(e.resultFields)?s=r._parseResults.call(this,e.resultFields,i,s):s.results=i:s.error=new Error("Array schema parse failure"),s},_parseResults:function(t,r,i){var s=[],o,u,a,f,l,c,h,p;for(h=r.length-1;h>-1;h--){o={},u=r[h],a=n.isObject(u)&&!n.isFunction(u)?2:n.isArray(u)?1:n.isString(u)?0:-1;if(a>0)for(p=t.length-1;p>-1;p--)f=t[p],l=n.isUndefined(f.key)?f:f.key,c=n.isUndefined(u[l])?u[p]:u[l],o[l]=e.DataSchema.Base.parse.call(this,c,f);else a===0?o=u:o=null;s[h]=o}return i.results=s,i}};e.DataSchema.Array=e.mix(r,e.DataSchema.Base)},"3.16.0",{requires:["dataschema-base"]});
/*
YUI 3.16.0 (build 3.16.0-ym16)
Copyright 2015 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("dataschema-text",function(e,t){var n=e.Lang,r=n.isString,i=n.isUndefined,s={apply:function(e,t){var n=t,i={results:[],meta:{}};return r(t)&&e&&r(e.resultDelimiter)?i=s._parseResults.call(this,e,n,i):i.error=new Error("Text schema parse failure"),i},_parseResults:function(t,n,s){var o=t.resultDelimiter,u=r(t.fieldDelimiter)&&t.fieldDelimiter,a=t.resultFields||[],f=[],l=e.DataSchema.Base.parse,c,h,p,d,v,m,g,y,b;n.slice(-o.length)===o&&(n=n.slice(0,-o.length)),c=n.split(t.resultDelimiter);if(u)for(y=c.length-1;y>=0;--y){p={},d=c[y],h=d.split(t.fieldDelimiter);for(b=a.length-1;b>=0;--b)v=a[b],m=i(v.key)?v:v.key,g=i(h[m])?h[b]:h[m],p[m]=l.call(this,g,v);f[y]=p}else f=c;return s.results=f,s}};e.DataSchema.Text=e.mix(s,e.DataSchema.Base)},"3.16.0",{requires:["dataschema-base"]});
"use strict";YUI.add("tictac-base-batch-transport",function(a){function b(b){var c=h(b).split("\r\n"),d={};return a.Array.each(c,function(a){var b=h(a),c=b.indexOf(":"),e=b.substring(0,c),f=b.substring(c+1);d[h(e)]=h(f)}),d}function c(c,d){var e,f,i,j,k,l=d?h(d):"",m="\r?\n?[-]*"+l+"[-]*\r?\n?",n={};return f=new RegExp(m,"igm"),i=c.split(f),a.Array.each(i,function(a){""!==a&&"--"!==a&&"\r\n"!==a&&(e=a.indexOf("\r\n\r\n"),j=b(a.substr(0,e)),k=h(a.substr(e+1)),-1!==j["Content-Type"].indexOf("application/json")&&(k=g.parseJSON(k)),n[j["Content-RequestId"]]={header:j,body:k})}),n}function d(a){var b,d;return 200===a.status&&(d=a.getResponseHeader("Content-Type").split("boundary=")[1],b=c(a.responseText,d)),b}function e(b,c,f,h){var l=[NeoConfig.launch_protocol,location.hostname,"/ws/v3/batch","?appid=YahooMailNeo","&wssid="+i.getWssid(),"&windowid="+NeoConfig.windowId,"&r="+(new Date).getTime(),"&ymreqid="+a.common.net.Session.genReqID()].join("");return h&&(l+=h),f=f||{},a.io(l,{method:"POST",data:a.JSON.stringify(b),headers:a.mix({Accept:"application/json, multipart/form-data","Content-Type":"application/json"},f),timeout:k,on:{success:function(a,b){var e=d(b);c.success(a,b,e)},failure:function(d,f){var h,k,l,m=g.parseJSON(f.responseText),n=a.Object.getValue(m,["error","code"]);return-1!==a.Array.indexOf([107,"EC-4003"],n)?(l=a.Object.getValue(m,["error","details","wssid"]),l||(h=m.error.detail.url,k=h.match(j),l=k.length>1?k[1]:i.getWssid()),NeoConfig.wssid=l,i.setWssid(l),b.requests[1]&&"GetAttachment"===b.requests[1].id&&(b.requests[1].uri=b.requests[1].uri.replace(j,"&wssid="+l)),void e(b,c)):-1!==a.Array.indexOf([108,"EC-4008"],n)?(a.once("net:reloginSuccessful",function(){e(b,c)}),void a.common.net.Error.simpleRelogin()):void(c.fail&&c.fail(d,f))},progress:function(a,b){var e=d(b);c.progress(a,b,e)}}})}var f=a.Tictac,g=f.base.utils,h=a.Lang.trim,i=a.common.net.SessionMgr,j=/[\&|\?]wssid=([^\&\#]+)/,k=25e3;a.namespace("Tictac.base").BatchTransport={send:e}},"1.0.0",{requires:["tictac-base-utils","io","common-net-sessionmgr"]});"use strict";YUI.add("tictac-contactdetails-entityMapping",function(a){var b={amazon:{displayName:"Amazon.com",name:"Amazon",phone:"1 (888) 280-3321",web:"http://www.amazon.com/gp/help/customer/display.html",link:"http://www.amazon.com/",twitter:"https://twitter.com/AmazonHelp",facebook:"https://www.facebook.com/Amazon",query:"",id:"amazon"},ebay:{displayName:"eBay.com",name:"eBay",phone:"1 (866) 540-3229",web:"http://ocsnext.ebay.com/ocs/home?",link:"http://www.ebay.com/",twitter:"https://twitter.com/eBay",facebook:"https://www.facebook.com/eBay",query:"",id:"ebay"}};a.namespace("Tictac.contactdetails").EntityMapping=b},"1.0.0",{requires:[]});YUI.add("tictac-contactdetails-rollups",function(a){a.namespace("Tictac.contactdetails.rollups"),a.Tictac.contactdetails.rollups.entity_contact_detail=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="entitydetails-card">    <div class="contactdetails-entity-logo" data-entity="',(f=c.name)?f=f.call(b,{hash:{},data:e}):(f=b.name,f=typeof f===h?f.apply(b):f),g+=i(f)+'"></div>    <div class="contactdetails-entity-text">        <div class="contactdetails-entity-name"><a href="',(f=c.link)?f=f.call(b,{hash:{},data:e}):(f=b.link,f=typeof f===h?f.apply(b):f),g+=i(f)+'" target="_newtab">',(f=c.displayName)?f=f.call(b,{hash:{},data:e}):(f=b.displayName,f=typeof f===h?f.apply(b):f),g+=i(f)+'</a></div>        <div class="contactdetails-entity-web"><a href="',(f=c.web)?f=f.call(b,{hash:{},data:e}):(f=b.web,f=typeof f===h?f.apply(b):f),g+=i(f)+'" target="_newtab">',(f=c.help_page_str)?f=f.call(b,{hash:{},data:e}):(f=b.help_page_str,f=typeof f===h?f.apply(b):f),g+=i(f)+'</a></div>        <div class="contactdetails-entity-phone">',(f=c.customer_service_str)?f=f.call(b,{hash:{},data:e}):(f=b.customer_service_str,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+="</div>    </div></div>"}),a.Tictac.contactdetails.rollups.photos=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"hidden"}function g(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-header" data-action="header">',d=c.unless.call(a,a.isGalleryView,{hash:{},inverse:y.noop,fn:y.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isGalleryView,{hash:{},inverse:y.noop,fn:y.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+='</div><div class="tictac-contactdetails-header-rule"></div><ul class="tictac-contactdetails-thumb-flow cf" data-filter="from"></ul>',d=c.unless.call(a,a.isGalleryView,{hash:{},inverse:y.noop,fn:y.program(22,s,b),data:b}),(d||0===d)&&(e+=d),e}function h(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-header-title" title="',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===w?d.apply(a):d),(d||0===d)&&(e+=d),e+=" ",(d=c.sentString)?d=d.call(a,{hash:{},data:b}):(d=a.sentString,d=typeof d===w?d.apply(a):d),e+=x(d)+'">    ',d=c.if.call(a,a.isAllQuery,{hash:{},inverse:y.program(7,j,b),fn:y.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+="</div>"}function i(a,b){var d,e="";return e+='<a href="#">',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===w?d.apply(a):d),(d||0===d)&&(e+=d),e+="</a>"}function j(a,b){var d,e="";return e+='<a href="#">',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===w?d.apply(a):d),(d||0===d)&&(e+=d),e+="</a> ",(d=c.sentString)?d=d.call(a,{hash:{},data:b}):(d=a.sentString,d=typeof d===w?d.apply(a):d),e+=x(d)}function k(a,b){var d,e="";return e+='<div class="tictac-contactdetails-header-filter"><span class="contactname">    <span>',(d=c.header_contactname_str)?d=d.call(a,{hash:{},data:b}):(d=a.header_contactname_str,d=typeof d===w?d.apply(a):d),e+=x(d)+'</span></span><div class="tictac-contactdetails-search-types">    ',d=c.if.call(a,a.isEntitySearch,{hash:{},inverse:y.noop,fn:y.program(10,l,b),data:b}),(d||0===d)&&(e+=d),e+="    ",d=c.unless.call(a,a.isEntitySearch,{hash:{},inverse:y.noop,fn:y.program(12,m,b),data:b}),(d||0===d)&&(e+=d),e+='    <div class="tictac-contactdetails-filters">        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isFromQuery,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+=" ",d=c.if.call(a,a.fromFilterDisabled,{hash:{},inverse:y.noop,fn:y.program(17,p,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="from" href="#">From</a>        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isToQuery,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="to" href="#">To</a>        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isAllQuery,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="all" href="#">All</a>    ',d=c.if.call(a,a.refinementOn,{hash:{},inverse:y.noop,fn:y.program(19,q,b),data:b}),(d||0===d)&&(e+=d),e+="    </div></div></div>"}function l(a,b){var d,e="";return e+='    <a class="contactdetails-entity-search-instead" href="#">Search instead for all messages containing "<span>',(d=c.searchTerms)?d=d.call(a,{hash:{},data:b}):(d=a.searchTerms,d=typeof d===w?d.apply(a):d),e+=x(d)+'</span>"</a>    '}function m(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasMessages,{hash:{},inverse:y.noop,fn:y.program(13,n,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isMessage,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-messages" href="#">Messages</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasDocs,{hash:{},inverse:y.noop,fn:y.program(13,n,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isAttachment,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-documents" href="#">Documents</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasPhotos,{hash:{},inverse:y.noop,fn:y.program(13,n,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isPhoto,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-photos" href="#">Photos</a>    '}function n(a,b){return" disabled"}function o(a,b){return" active"}function p(a,b){return"disabled"}function q(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-refinement ',d=c.if.call(a,a.appliedRefinements,{hash:{},inverse:y.noop,fn:y.program(20,r,b),data:b}),(d||0===d)&&(e+=d),e+='" data-action="refinement" href="#">Refine</a>    '}function r(a,b){return"active"}function s(a,b){return'<a class="tictac-contactdetails-more" data-action="more" href="#">See all</a>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var t,u,v="",w="function",x=this.escapeExpression,y=this,z=c.blockHelperMissing;return v+='<div class="smartmail-contactdetails-photos smartmail-contactdetails-base ',t=c.unless.call(b,b.isGalleryView,{hash:{},inverse:y.noop,fn:y.program(1,f,e),data:e}),(t||0===t)&&(v+=t),v+='">',u={hash:{},inverse:y.noop,fn:y.program(3,g,e),data:e},(t=c.notEmpty)?t=t.call(b,u):(t=b.notEmpty,t=typeof t===w?t.apply(b):t),c.notEmpty||(t=z.call(b,t,u)),(t||0===t)&&(v+=t),v+="</div>"}),a.Tictac.contactdetails.rollups.entity_purchase_history=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='    <a class="contactdetails-entity-search-instead" href="#">Search instead for all messages containing "<span>',(d=c.searchTerms)?d=d.call(a,{hash:{},data:b}):(d=a.searchTerms,d=typeof d===o?d.apply(a):d),e+=p(d)+'</span>"</a>    '}function g(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasMessages,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isMessage,{hash:{},inverse:q.noop,fn:q.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-messages" href="#">Messages</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasDocs,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isAttachment,{hash:{},inverse:q.noop,fn:q.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-documents" href="#">Documents</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasPhotos,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isPhoto,{hash:{},inverse:q.noop,fn:q.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-photos" href="#">Photos</a>    '}function h(a,b){return" disabled"}function i(a,b){return" active"}function j(a,b){return"disabled"}function k(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-refinement ',d=c.if.call(a,a.appliedRefinements,{hash:{},inverse:q.noop,fn:q.program(11,l,b),data:b}),(d||0===d)&&(e+=d),e+='" data-action="refinement" href="#">Refine</a>    '}function l(a,b){return"active"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n="",o="function",p=this.escapeExpression,q=this;return n+='<div class="smartmail-entitydetails">    <div id="entity-purchase-history-card" class="hidden">        <div class="purchase-history hidden">            <div class="purchase-history-label">',(m=c.recent_shipments_from_entity_str)?m=m.call(b,{hash:{},data:e}):(m=b.recent_shipments_from_entity_str,m=typeof m===o?m.apply(b):m),n+=p(m)+'</div>            <ul class="purchase-history-list purchase-history-list-recent">            </ul>        </div>        <div class="purchase-history hidden">            <div class="purchase-history-label">',(m=c.delivered_shipments_from_entity_str)?m=m.call(b,{hash:{},data:e}):(m=b.delivered_shipments_from_entity_str,m=typeof m===o?m.apply(b):m),n+=p(m)+'</div>            <ul class="purchase-history-list purchase-history-list-delivered">            </ul>        </div>        <div class="show-more hidden"><div class="show-more-inner">Show more</div></div>    </div>    <div class="email-search-results-header">        <div class="smartmail-contactdetails-base">            <div class="tictac-contactdetails-header" data-action="header">                <div class="tictac-contactdetails-header-filter">                    <span class="contactname">    <span>',(m=c.header_contactname_str)?m=m.call(b,{hash:{},data:e}):(m=b.header_contactname_str,m=typeof m===o?m.apply(b):m),n+=p(m)+'</span></span><div class="tictac-contactdetails-search-types">    ',m=c.if.call(b,b.isEntitySearch,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(m||0===m)&&(n+=m),n+="    ",m=c.unless.call(b,b.isEntitySearch,{hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e}),(m||0===m)&&(n+=m),n+='    <div class="tictac-contactdetails-filters">        <a class="tictac-contactdetails-filter',m=c.if.call(b,b.isFromQuery,{hash:{},inverse:q.noop,fn:q.program(6,i,e),data:e}),(m||0===m)&&(n+=m),n+=" ",m=c.if.call(b,b.fromFilterDisabled,{hash:{},inverse:q.noop,fn:q.program(8,j,e),data:e}),(m||0===m)&&(n+=m),n+='" data-filter="from" href="#">From</a>        <a class="tictac-contactdetails-filter',m=c.if.call(b,b.isToQuery,{hash:{},inverse:q.noop,fn:q.program(6,i,e),data:e}),(m||0===m)&&(n+=m),n+='" data-filter="to" href="#">To</a>        <a class="tictac-contactdetails-filter',m=c.if.call(b,b.isAllQuery,{hash:{},inverse:q.noop,fn:q.program(6,i,e),data:e}),(m||0===m)&&(n+=m),n+='" data-filter="all" href="#">All</a>    ',m=c.if.call(b,b.refinementOn,{hash:{},inverse:q.noop,fn:q.program(10,k,e),data:e}),(m||0===m)&&(n+=m),n+="    </div></div>                </div>            </div>        </div>    </div></div>"}),a.Tictac.contactdetails.rollups.contactdetails=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return" abContact"}function g(a,b){return" xContact"}function h(a,b){return"xRichContact"}function i(a,b){var d,e="";return e+='        <div class="business-card-info">            <div class="xheader">                ',d=c.if.call(a,a.imageUrl,{hash:{},inverse:C.noop,fn:C.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+='                <div class="business-card-name">',(d=c.displayName)?d=d.call(a,{hash:{},data:b}):(d=a.displayName,d=typeof d===A?d.apply(a):d),e+=B(d)+"</div>                ",d=c.if.call(a,a.title,{hash:{},inverse:C.noop,fn:C.program(10,k,b),data:b}),(d||0===d)&&(e+=d),e+='            </div>            <div class="xfields">                ',d=c.if.call(a,a.email,{hash:{},inverse:C.noop,fn:C.program(12,l,b),data:b}),(d||0===d)&&(e+=d),e+="                ",d=c.if.call(a,a.phone,{hash:{},inverse:C.noop,fn:C.program(14,m,b),data:b}),(d||0===d)&&(e+=d),e+="                ",d=c.if.call(a,a.im,{hash:{},inverse:C.noop,fn:C.program(16,n,b),data:b}),(d||0===d)&&(e+=d),e+="                ",d=c.if.call(a,a.isCorp,{hash:{},inverse:C.noop,fn:C.program(18,o,b),data:b}),(d||0===d)&&(e+=d),e+="                ",d=c.if.call(a,a.facebook,{hash:{},inverse:C.noop,fn:C.program(20,p,b),data:b}),(d||0===d)&&(e+=d),e+="                ",d=c.if.call(a,a.linkedin,{hash:{},inverse:C.noop,fn:C.program(22,q,b),data:b}),(d||0===d)&&(e+=d),e+="                ",d=c.if.call(a,a.twitter,{hash:{},inverse:C.noop,fn:C.program(24,r,b),data:b}),(d||0===d)&&(e+=d),e+="            </div>        </div>    "}function j(a,b){var d,e="";return e+='                     <div class="business-card-image" style="background-image: url(',(d=c.imageUrl)?d=d.call(a,{hash:{},data:b}):(d=a.imageUrl,d=typeof d===A?d.apply(a):d),e+=B(d)+')"></div>                '}function k(a,b){var d,e="";return e+='                    <div class="business-card-title">',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a.title,d=typeof d===A?d.apply(a):d),e+=B(d)+"</div>                "}function l(a,b){var d,e="";return e+='                    <div class="xcontact-field business-card-details-email" data-email="',(d=c.email)?d=d.call(a,{hash:{},data:b}):(d=a.email,d=typeof d===A?d.apply(a):d),e+=B(d)+'" title="',(d=c.email)?d=d.call(a,{hash:{},data:b}):(d=a.email,d=typeof d===A?d.apply(a):d),e+=B(d)+'">                        <i class="icon icon-compose-mail"></i><span>',(d=c.email)?d=d.call(a,{hash:{},data:b}):(d=a.email,d=typeof d===A?d.apply(a):d),e+=B(d)+"</span>                    </div>                "}function m(a,b){var d,e="";return e+='                    <div class="xcontact-field business-card-phone" title="',(d=c.phone)?d=d.call(a,{hash:{},data:b}):(d=a.phone,d=typeof d===A?d.apply(a):d),e+=B(d)+'">                        <i class="icon icon-mobile-phone"></i><span>',(d=c.phone)?d=d.call(a,{hash:{},data:b}):(d=a.phone,d=typeof d===A?d.apply(a):d),e+=B(d)+"</span>                    </div>                "}function n(a,b){var d,e="";return e+='                    <div class="xcontact-field business-card-im" data-value="',(d=c.im)?d=d.call(a,{hash:{},data:b}):(d=a.im,d=typeof d===A?d.apply(a):d),e+=B(d)+'" title="',(d=c.im)?d=d.call(a,{hash:{},data:b}):(d=a.im,d=typeof d===A?d.apply(a):d),e+=B(d)+'">                        <i class="icon icon-messenger"></i><span>',(d=c.im)?d=d.call(a,{hash:{},data:b}):(d=a.im,d=typeof d===A?d.apply(a):d),e+=B(d)+"</span>                    </div>                "}function o(a,b){var d,e="";return e+='                    <div class="xcontact-field backyard" data-value="',(d=c.corpUserId)?d=d.call(a,{hash:{},data:b}):(d=a.corpUserId,d=typeof d===A?d.apply(a):d),e+=B(d)+'">                        <i class="icon icon-logo-backyard"></i><span>Backyard profile</span>                    </div>                '}function p(a,b){var d,e="";return e+='                    <div class="xcontact-field facebook" data-value="',(d=c.facebook)?d=d.call(a,{hash:{},data:b}):(d=a.facebook,d=typeof d===A?d.apply(a):d),e+=B(d)+'">                       <i class="icon icon-logo-facebook"></i><span>Facebook profile</span>                    </div>                '}function q(a,b){var d,e="";return e+='                    <div class="xcontact-field linkedin" data-value="',(d=c.linkedin_url)?d=d.call(a,{hash:{},data:b}):(d=a.linkedin_url,d=typeof d===A?d.apply(a):d),e+=B(d)+'">                        <i class="icon icon-logo-linkedin"></i><span>Linkedin profile</span>                    </div>                '}function r(a,b){var d,e="";return e+='                    <div class="xcontact-field twitter" data-value="',(d=c.twitter)?d=d.call(a,{hash:{},data:b}):(d=a.twitter,d=typeof d===A?d.apply(a):d),e+=B(d)+'" title="@',(d=c.twitter)?d=d.call(a,{hash:{},data:b}):(d=a.twitter,d=typeof d===A?d.apply(a):d),e+=B(d)+'">                        <i class="icon icon-twitter"></i><span>@',(d=c.twitter)?d=d.call(a,{hash:{},data:b}):(d=a.twitter,d=typeof d===A?d.apply(a):d),e+=B(d)+"</span>                    </div>                "}function s(a,b){var d,e,f="";return f+="        ",d=c.if.call(a,a.imageUrl,{hash:{},inverse:C.noop,fn:C.program(27,t,b),data:b}),(d||0===d)&&(f+=d),f+='        <div class="business-card-info">            <div class="business-card-name">',(d=c.displayName)?d=d.call(a,{hash:{},data:b}):(d=a.displayName,d=typeof d===A?d.apply(a):d),f+=B(d)+"</div>            ",e={hash:{},inverse:C.noop,fn:C.program(29,u,b),data:b},(d=c.preferredEmailAddresses)?d=d.call(a,e):(d=a.preferredEmailAddresses,d=typeof d===A?d.apply(a):d),c.preferredEmailAddresses||(d=D.call(a,d,e)),(d||0===d)&&(f+=d),f+="            ",d=c.if.call(a,a.primaryPhoneNumber,{hash:{},inverse:C.noop,fn:C.program(31,v,b),data:b}),(d||0===d)&&(f+=d),f+='            <a class="business-card-details-more">More details</a>            ',d=c.if.call(a,a.isContact,{hash:{},inverse:C.noop,fn:C.program(33,w,b),data:b}),(d||0===d)&&(f+=d),f+="        </div>    "}function t(a,b){var d,e="";return e+='             <div class="business-card-image" style="background-image: url(',(d=c.imageUrl)?d=d.call(a,{hash:{},data:b}):(d=a.imageUrl,d=typeof d===A?d.apply(a):d),e+=B(d)+')"></div>        '}function u(a,b){var c="";return c+='            <div class="business-card-details-more-detail business-card-details-email" data-email="'+B(typeof a===A?a.apply(a):a)+'">'+B(typeof a===A?a.apply(a):a)+"</div>            "}function v(a,b){var d,e="";return e+='            <div class="business-card-details-more-detail">',(d=c.primaryPhoneNumber)?d=d.call(a,{hash:{},data:b}):(d=a.primaryPhoneNumber,d=typeof d===A?d.apply(a):d),e+=B(d)+"</div>             "}function w(a,b){var d,e="";return e+='            <a class="business-card-details-more-detail open-contact-card" data-contactId="',(d=c.contactId)?d=d.call(a,{hash:{},data:b}):(d=a.contactId,d=typeof d===A?d.apply(a):d),e+=B(d)+'">View in Yahoo Contacts</a>            '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var x,y,z="",A="function",B=this.escapeExpression,C=this,D=c.blockHelperMissing;return z+='<div class="smartmail-contactdetails">    <div class="business-card ',y={hash:{},inverse:C.noop,fn:C.program(1,f,e),data:e},(x=c.abContact)?x=x.call(b,y):(x=b.abContact,x=typeof x===A?x.apply(b):x),c.abContact||(x=D.call(b,x,y)),(x||0===x)&&(z+=x),y={hash:{},inverse:C.noop,fn:C.program(3,g,e),data:e},(x=c.xContact)?x=x.call(b,y):(x=b.xContact,x=typeof x===A?x.apply(b):x),c.xContact||(x=D.call(b,x,y)),(x||0===x)&&(z+=x),z+=" ",y={hash:{},inverse:C.noop,fn:C.program(5,h,e),data:e},(x=c.showRichData)?x=x.call(b,y):(x=b.showRichData,x=typeof x===A?x.apply(b):x),c.showRichData||(x=D.call(b,x,y)),(x||0===x)&&(z+=x),z+='" data-contactId="',(x=c.contactId)?x=x.call(b,{hash:{},data:e}):(x=b.contactId,x=typeof x===A?x.apply(b):x),z+=B(x)+'" data-name="',(x=c.displayName)?x=x.call(b,{hash:{},data:e}):(x=b.displayName,x=typeof x===A?x.apply(b):x),z+=B(x)+'" title="',(x=c.displayName)?x=x.call(b,{hash:{},data:e}):(x=b.displayName,x=typeof x===A?x.apply(b):x),z+=B(x)+'">    ',x=c.if.call(b,b.showRichData,{hash:{},inverse:C.program(26,s,e),fn:C.program(7,i,e),data:e}),(x||0===x)&&(z+=x),z+="    </div></div>"}),a.Tictac.contactdetails.rollups.other=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="style=\"background-image: url('",(d=c.thumbnailurl)?d=d.call(a,{hash:{},data:b}):(d=a.thumbnailurl,d=typeof d===j?d.apply(a):d),e+=k(d)+"')\" "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return i+='<li tabindex="0" class="tictac-contactdetails-file" data-id="',(g=c.aid)?g=g.call(b,{hash:{},data:e}):(g=b.aid,g=typeof g===j?g.apply(b):g),i+=k(g)+'" title="',(g=c.subject)?g=g.call(b,{hash:{},data:e}):(g=b.subject,g=typeof g===j?g.apply(b):g),i+=k(g)+'">    <div class="tictac-contactdetails-files-lite tictac-contactdetails-others-icon" ',h={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(g=c.has_thumbnail)?g=g.call(b,h):(g=b.has_thumbnail,g=typeof g===j?g.apply(b):g),c.has_thumbnail||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+='"></div>    <div class="tictac-contactdetails-files-lite tictac-contactdetails-files-name">',(g=c.subject)?g=g.call(b,{hash:{},data:e}):(g=b.subject,g=typeof g===j?g.apply(b):g),i+=k(g)+"</div></li>"}),a.Tictac.contactdetails.rollups.entity_related_products_items=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='<div class="related-products-label">Related Products    <span>from Yahoo Shopping</span></div><ul class="related-products-list">    ',e={hash:{},inverse:m.noop,fn:m.program(2,g,b),data:b},(d=c.related)?d=d.call(a,e):(d=a.related,d=typeof d===k?d.apply(a):d),c.related||(d=n.call(a,d,e)),(d||0===d)&&(f+=d),f+="</ul>"}function g(a,b){var d,e="";return e+='    <li class="related-products-item" >        <div class="related-products-item-image related-products-url" style="background-image: url(\'',(d=c.image)?d=d.call(a,{hash:{},data:b}):(d=a.image,d=typeof d===k?d.apply(a):d),e+=l(d)+'\')" data-url="',d=c.if.call(a,a.url,{hash:{},inverse:m.program(5,i,b),fn:m.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+='">        </div>        <div class="related-products-item-presentation">            <div class="related-products-title related-products-url" data-url="',d=c.if.call(a,a.url,{hash:{},inverse:m.program(5,i,b),fn:m.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+='">',(d=c.title)?d=d.call(a,{hash:{},data:b}):(d=a.title,d=typeof d===k?d.apply(a):d),e+=l(d)+'</div>            <div class="related-products-rating" data-rating="',(d=c.rating)?d=d.call(a,{hash:{},data:b}):(d=a.rating,d=typeof d===k?d.apply(a):d),e+=l(d)+'">                <span data-star="one"></span>                <span data-star="two"></span>                <span data-star="three"></span>                <span data-star="four"></span>                <span data-star="five"></span>            </div>            <div class="related-products-price">',(d=c.priceStartsFrom)?d=d.call(a,{hash:{},data:b}):(d=a.priceStartsFrom,d=typeof d===k?d.apply(a):d),e+=l(d)+"</div>        </div>    </li>    "}function h(a,b){var d;return(d=c.url)?d=d.call(a,{hash:{},data:b}):(d=a.url,d=typeof d===k?d.apply(a):d),d||0===d?d:""}function i(a,b){return"http://shopping.yahoo.com/"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j=c.if.call(b,b.related,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),j||0===j?j:""}),a.Tictac.contactdetails.rollups.contactdetails_onboarding=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="<div id=\"contactDetailsRightRailOnboarding\" class='searchtooltip yui3-tooltips'>    <div class='tooltip-arrow-right'>        <div class='inner-arrow-right'></div>    </div>    <div class='modal tooltips-text' tabindex='0'>        <h2 class='modal-hd'> <span class='tutorial-btn close' title='Close'></span> </h2>        <div class=\"modal-bd\">            <div class=\"bd\">                <div class=\"ac-title\">Recent files at a glance</div>                            <div class=\"ac-text\" >See the latest documents and photos in this area. <a href=\"#\" data-url=\"https://",(f=c.intl)?f=f.call(b,{hash:{},data:e}):(f=b.intl,f=typeof f===h?f.apply(b):f),g+=i(f)+'.overview.mail.yahoo.com/features/new-search">Learn more</a></div>            </div>        </div>    </div></div>'}),a.Tictac.contactdetails.rollups.entity_purchase_history_item=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return" purchase-delivered-item"}function g(a,b){return"hidden"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j=this,k="function",l=this.escapeExpression;return i+='<li class="purchase-history-item purchase-history-item-hover',h=c.if.call(b,b.isDeliverdedOrder,{hash:{},inverse:j.noop,fn:j.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='" data-mid="',(h=c.mid)?h=h.call(b,{hash:{},data:e}):(h=b.mid,h=typeof h===k?h.apply(b):h),i+=l(h)+'" data-fid="',(h=c.fid)?h=h.call(b,{hash:{},data:e}):(h=b.fid,h=typeof h===k?h.apply(b):h),i+=l(h)+'">    <div class="purchase-history-item-name"><div class="purchase-history-item-name-inner">',(h=c.name)?h=h.call(b,{hash:{},data:e}):(h=b.name,h=typeof h===k?h.apply(b):h),i+=l(h)+'</div></div>    <div class="purchase-history-item-image" style="background-image: url(\'',(h=c.image)?h=h.call(b,{hash:{},data:e}):(h=b.image,h=typeof h===k?h.apply(b):h),i+=l(h)+'\')">        <img style="display:none" src="',(h=c.image)?h=h.call(b,{hash:{},data:e}):(h=b.image,h=typeof h===k?h.apply(b):h),i+=l(h)+'"  onerror="this.parentNode.parentNode.className = this.parentNode.parentNode.className.replace(\'purchase-history-item-hover\',\'purchase-history-item-image-broken\')">    </div>                        <div class="purchase-history-item-delivery">        <span class="purchase-history-estimated-delivery">',(h=c.estimatedDeliveryViaShipper)?h=h.call(b,{hash:{},data:e}):(h=b.estimatedDeliveryViaShipper,h=typeof h===k?h.apply(b):h),i+=l(h)+'</span>        <span class="purchase-history-item-expected-arrival">',(h=c.expectedArrival)?h=h.call(b,{hash:{},data:e}):(h=b.expectedArrival,h=typeof h===k?h.apply(b):h),i+=l(h)+'</span>        <div class="purchase-history-item-delivered" title="Delivered ',(h=c.expectedArrival)?h=h.call(b,{hash:{},data:e}):(h=b.expectedArrival,h=typeof h===k?h.apply(b):h),i+=l(h)+'"><div class="purchase-history-item-delivered-str1">Delivered</div> <div class="purchase-history-item-delivered-str2">',(h=c.expectedArrival)?h=h.call(b,{hash:{},data:e}):(h=b.expectedArrival,h=typeof h===k?h.apply(b):h),i+=l(h)+'</div></div>    </div>    <div class="purchase-history-tracking" data-type="',(h=c.shipper)?h=h.call(b,{hash:{},data:e}):(h=b.shipper,h=typeof h===k?h.apply(b):h),i+=l(h)+'">        <div class="purchase-history-tracking-inner purchase-history-tracking-inner-link ',h=c.unless.call(b,b.trackingUrl,{hash:{},inverse:j.noop,fn:j.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+='" data-link="',(h=c.trackingUrl)?h=h.call(b,{hash:{},data:e}):(h=b.trackingUrl,h=typeof h===k?h.apply(b):h),i+=l(h)+'">Track Package</div>            </div></li>'}),a.Tictac.contactdetails.rollups.filter=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='            <div class="tictac-contactdetails-search-instead" data-query="',(d=c.searchInsteadQuery)?d=d.call(a,{hash:{},data:b}):(d=a.searchInsteadQuery,d=typeof d===p?d.apply(a):d),e+=q(d)+'">                ',(d=c.search_instead_str)?d=d.call(a,{hash:{},data:b}):(d=a.search_instead_str,d=typeof d===p?d.apply(a):d),(d||0===d)&&(e+=d),e+="            </div>            "}function g(a,b){var d,e="";return e+='    <a class="contactdetails-entity-search-instead" href="#">Search instead for all messages containing "<span>',(d=c.searchTerms)?d=d.call(a,{hash:{},data:b}):(d=a.searchTerms,d=typeof d===p?d.apply(a):d),e+=q(d)+'</span>"</a>    '}function h(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasMessages,{hash:{},inverse:r.noop,fn:r.program(6,i,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isMessage,{hash:{},inverse:r.noop,fn:r.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-messages" href="#">Messages</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasDocs,{hash:{},inverse:r.noop,fn:r.program(6,i,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isAttachment,{hash:{},inverse:r.noop,fn:r.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-documents" href="#">Documents</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasPhotos,{hash:{},inverse:r.noop,fn:r.program(6,i,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isPhoto,{hash:{},inverse:r.noop,fn:r.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-photos" href="#">Photos</a>    '}function i(a,b){return" disabled"}function j(a,b){return" active"}function k(a,b){return"disabled"}function l(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-refinement ',d=c.if.call(a,a.appliedRefinements,{hash:{},inverse:r.noop,fn:r.program(13,m,b),data:b}),(d||0===d)&&(e+=d),e+='" data-action="refinement" href="#">Refine</a>    '}function m(a,b){return"active"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var n,o="",p="function",q=this.escapeExpression,r=this;return o+='<div class="smartmail-contactdetails-base">        <div class="tictac-contactdetails-header" data-action="header">            ',n=c.if.call(b,b.searchInsteadQuery,{hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e}),(n||0===n)&&(o+=n),o+='            <div class="tictac-contactdetails-header-filter">                <span class="contactname">    <span>',(n=c.header_contactname_str)?n=n.call(b,{hash:{},data:e}):(n=b.header_contactname_str,n=typeof n===p?n.apply(b):n),o+=q(n)+'</span></span><div class="tictac-contactdetails-search-types">    ',n=c.if.call(b,b.isEntitySearch,{hash:{},inverse:r.noop,fn:r.program(3,g,e),data:e}),(n||0===n)&&(o+=n),o+="    ",n=c.unless.call(b,b.isEntitySearch,{hash:{},inverse:r.noop,fn:r.program(5,h,e),data:e}),(n||0===n)&&(o+=n),o+='    <div class="tictac-contactdetails-filters">        <a class="tictac-contactdetails-filter',n=c.if.call(b,b.isFromQuery,{hash:{},inverse:r.noop,fn:r.program(8,j,e),data:e}),(n||0===n)&&(o+=n),o+=" ",n=c.if.call(b,b.fromFilterDisabled,{hash:{},inverse:r.noop,fn:r.program(10,k,e),data:e}),(n||0===n)&&(o+=n),o+='" data-filter="from" href="#">From</a>        <a class="tictac-contactdetails-filter',n=c.if.call(b,b.isToQuery,{hash:{},inverse:r.noop,fn:r.program(8,j,e),data:e}),(n||0===n)&&(o+=n),o+='" data-filter="to" href="#">To</a>        <a class="tictac-contactdetails-filter',n=c.if.call(b,b.isAllQuery,{hash:{},inverse:r.noop,fn:r.program(8,j,e),data:e}),(n||0===n)&&(o+=n),o+='" data-filter="all" href="#">All</a>    ',n=c.if.call(b,b.refinementOn,{hash:{},inverse:r.noop,fn:r.program(12,l,e),data:e}),(n||0===n)&&(o+=n),o+="    </div></div>            </div>        </div></div>"}),a.Tictac.contactdetails.rollups.messages=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-header" data-action="header">',d=c.unless.call(a,a.isGalleryView,{hash:{},inverse:x.noop,fn:x.program(2,g,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isGalleryView,{hash:{},inverse:x.noop,fn:x.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+='</div><div class="tictac-contactdetails-header-rule"></div><ul class="tictac-contactdetails-files-flow" data-filter="from"></ul>',d=c.unless.call(a,a.isGalleryView,{hash:{},inverse:x.noop,fn:x.program(20,r,b),data:b}),(d||0===d)&&(e+=d),e}function g(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-header-title" title="',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===v?d.apply(a):d),(d||0===d)&&(e+=d),e+=" ",(d=c.sentString)?d=d.call(a,{hash:{},data:b}):(d=a.sentString,d=typeof d===v?d.apply(a):d),e+=w(d)+'">',d=c.if.call(a,a.isAllQuery,{hash:{},inverse:x.program(5,i,b),fn:x.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="</div>"}function h(a,b){var d,e="";return e+='<a href="#">',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===v?d.apply(a):d),(d||0===d)&&(e+=d),e+="</a>"}function i(a,b){var d,e="";return e+='<a href="#">',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===v?d.apply(a):d),(d||0===d)&&(e+=d),e+="</a> ",(d=c.sentString)?d=d.call(a,{hash:{},data:b}):(d=a.sentString,d=typeof d===v?d.apply(a):d),e+=w(d)}function j(a,b){var d,e="";return e+='<div class="tictac-contactdetails-header-filter"><span class="contactname">    <span>',(d=c.header_contactname_str)?d=d.call(a,{hash:{},data:b}):(d=a.header_contactname_str,
d=typeof d===v?d.apply(a):d),e+=w(d)+'</span></span><div class="tictac-contactdetails-search-types">    ',d=c.if.call(a,a.isEntitySearch,{hash:{},inverse:x.noop,fn:x.program(8,k,b),data:b}),(d||0===d)&&(e+=d),e+="    ",d=c.unless.call(a,a.isEntitySearch,{hash:{},inverse:x.noop,fn:x.program(10,l,b),data:b}),(d||0===d)&&(e+=d),e+='    <div class="tictac-contactdetails-filters">        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isFromQuery,{hash:{},inverse:x.noop,fn:x.program(13,n,b),data:b}),(d||0===d)&&(e+=d),e+=" ",d=c.if.call(a,a.fromFilterDisabled,{hash:{},inverse:x.noop,fn:x.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="from" href="#">From</a>        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isToQuery,{hash:{},inverse:x.noop,fn:x.program(13,n,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="to" href="#">To</a>        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isAllQuery,{hash:{},inverse:x.noop,fn:x.program(13,n,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="all" href="#">All</a>    ',d=c.if.call(a,a.refinementOn,{hash:{},inverse:x.noop,fn:x.program(17,p,b),data:b}),(d||0===d)&&(e+=d),e+="    </div></div></div>"}function k(a,b){var d,e="";return e+='    <a class="contactdetails-entity-search-instead" href="#">Search instead for all messages containing "<span>',(d=c.searchTerms)?d=d.call(a,{hash:{},data:b}):(d=a.searchTerms,d=typeof d===v?d.apply(a):d),e+=w(d)+'</span>"</a>    '}function l(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasMessages,{hash:{},inverse:x.noop,fn:x.program(11,m,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isMessage,{hash:{},inverse:x.noop,fn:x.program(13,n,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-messages" href="#">Messages</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasDocs,{hash:{},inverse:x.noop,fn:x.program(11,m,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isAttachment,{hash:{},inverse:x.noop,fn:x.program(13,n,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-documents" href="#">Documents</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasPhotos,{hash:{},inverse:x.noop,fn:x.program(11,m,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isPhoto,{hash:{},inverse:x.noop,fn:x.program(13,n,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-photos" href="#">Photos</a>    '}function m(a,b){return" disabled"}function n(a,b){return" active"}function o(a,b){return"disabled"}function p(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-refinement ',d=c.if.call(a,a.appliedRefinements,{hash:{},inverse:x.noop,fn:x.program(18,q,b),data:b}),(d||0===d)&&(e+=d),e+='" data-action="refinement" href="#">Refine</a>    '}function q(a,b){return"active"}function r(a,b){return'<a class="tictac-contactdetails-more" data-action="more" href="#">See all</a>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var s,t,u="",v="function",w=this.escapeExpression,x=this,y=c.blockHelperMissing;return u+='<div class="smartmail-contactdetails-docs smartmail-contactdetails-messages smartmail-contactdetails-base hidden">',t={hash:{},inverse:x.noop,fn:x.program(1,f,e),data:e},(s=c.notEmpty)?s=s.call(b,t):(s=b.notEmpty,s=typeof s===v?s.apply(b):s),c.notEmpty||(s=y.call(b,s,t)),(s||0===s)&&(u+=s),u+="</div>"}),a.Tictac.contactdetails.rollups.attachments=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"hidden"}function g(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-header" data-action="header">',d=c.unless.call(a,a.isGalleryView,{hash:{},inverse:y.noop,fn:y.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isGalleryView,{hash:{},inverse:y.noop,fn:y.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+='</div><div class="tictac-contactdetails-header-rule"></div><ul class="tictac-contactdetails-files-flow" data-filter="from"></ul>',d=c.unless.call(a,a.isGalleryView,{hash:{},inverse:y.noop,fn:y.program(22,s,b),data:b}),(d||0===d)&&(e+=d),e}function h(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-header-title" title="',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===w?d.apply(a):d),(d||0===d)&&(e+=d),e+=" ",(d=c.sentString)?d=d.call(a,{hash:{},data:b}):(d=a.sentString,d=typeof d===w?d.apply(a):d),e+=x(d)+'">',d=c.if.call(a,a.isAllQuery,{hash:{},inverse:y.program(7,j,b),fn:y.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+="</div>"}function i(a,b){var d,e="";return e+='<a href="#">',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===w?d.apply(a):d),(d||0===d)&&(e+=d),e+="</a>"}function j(a,b){var d,e="";return e+='<a href="#">',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===w?d.apply(a):d),(d||0===d)&&(e+=d),e+="</a> ",(d=c.sentString)?d=d.call(a,{hash:{},data:b}):(d=a.sentString,d=typeof d===w?d.apply(a):d),e+=x(d)}function k(a,b){var d,e="";return e+='<div class="tictac-contactdetails-header-filter"><span class="contactname">    <span>',(d=c.header_contactname_str)?d=d.call(a,{hash:{},data:b}):(d=a.header_contactname_str,d=typeof d===w?d.apply(a):d),e+=x(d)+'</span></span><div class="tictac-contactdetails-search-types">    ',d=c.if.call(a,a.isEntitySearch,{hash:{},inverse:y.noop,fn:y.program(10,l,b),data:b}),(d||0===d)&&(e+=d),e+="    ",d=c.unless.call(a,a.isEntitySearch,{hash:{},inverse:y.noop,fn:y.program(12,m,b),data:b}),(d||0===d)&&(e+=d),e+='    <div class="tictac-contactdetails-filters">        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isFromQuery,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+=" ",d=c.if.call(a,a.fromFilterDisabled,{hash:{},inverse:y.noop,fn:y.program(17,p,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="from" href="#">From</a>        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isToQuery,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="to" href="#">To</a>        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isAllQuery,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="all" href="#">All</a>    ',d=c.if.call(a,a.refinementOn,{hash:{},inverse:y.noop,fn:y.program(19,q,b),data:b}),(d||0===d)&&(e+=d),e+="    </div></div></div>"}function l(a,b){var d,e="";return e+='    <a class="contactdetails-entity-search-instead" href="#">Search instead for all messages containing "<span>',(d=c.searchTerms)?d=d.call(a,{hash:{},data:b}):(d=a.searchTerms,d=typeof d===w?d.apply(a):d),e+=x(d)+'</span>"</a>    '}function m(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasMessages,{hash:{},inverse:y.noop,fn:y.program(13,n,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isMessage,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-messages" href="#">Messages</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasDocs,{hash:{},inverse:y.noop,fn:y.program(13,n,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isAttachment,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-documents" href="#">Documents</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasPhotos,{hash:{},inverse:y.noop,fn:y.program(13,n,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isPhoto,{hash:{},inverse:y.noop,fn:y.program(15,o,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-photos" href="#">Photos</a>    '}function n(a,b){return" disabled"}function o(a,b){return" active"}function p(a,b){return"disabled"}function q(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-refinement ',d=c.if.call(a,a.appliedRefinements,{hash:{},inverse:y.noop,fn:y.program(20,r,b),data:b}),(d||0===d)&&(e+=d),e+='" data-action="refinement" href="#">Refine</a>    '}function r(a,b){return"active"}function s(a,b){return'<a class="tictac-contactdetails-more" data-action="more" href="#">See all</a>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var t,u,v="",w="function",x=this.escapeExpression,y=this,z=c.blockHelperMissing;return v+='<div class="smartmail-contactdetails-docs smartmail-contactdetails-base ',t=c.unless.call(b,b.isGalleryView,{hash:{},inverse:y.noop,fn:y.program(1,f,e),data:e}),(t||0===t)&&(v+=t),v+='">',u={hash:{},inverse:y.noop,fn:y.program(3,g,e),data:e},(t=c.notEmpty)?t=t.call(b,u):(t=b.notEmpty,t=typeof t===w?t.apply(b):t),c.notEmpty||(t=z.call(b,t,u)),(t||0===t)&&(v+=t),v+="</div>"}),a.Tictac.contactdetails.rollups.photo=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"has-thumb"}function g(a,b){var d;return(d=c.error_class)?d=d.call(a,{hash:{},data:b}):(d=a.error_class,d=typeof d===m?d.apply(a):d),n(d)}function h(a,b){var d,e="";return e+="style=\"background-image: url('",(d=c.thumbnailurl)?d=d.call(a,{hash:{},data:b}):(d=a.thumbnailurl,d=typeof d===m?d.apply(a):d),e+=n(d)+"')\" "}function i(a,b){var d,e="";return e+='    <div class="photo-overlay">        <p class="photo-filename">',(d=c.filename)?d=d.call(a,{hash:{},data:b}):(d=a.filename,d=typeof d===m?d.apply(a):d),e+=n(d)+'</p>        <p class="photo-size">',(d=c.filesize)?d=d.call(a,{hash:{},data:b}):(d=a.filesize,d=typeof d===m?d.apply(a):d),e+=n(d)+'</p>        <p class="photo-date">',(d=c.dateStr)?d=d.call(a,{hash:{},data:b}):(d=a.dateStr,d=typeof d===m?d.apply(a):d),(d||0===d)&&(e+=d),e+='</p>    </div>    <div class="tictac-contactdetails-gallery-download"></div>    <div class="tictac-contactdetails-gallery-email"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this,p=c.blockHelperMissing;return l+='<li tabindex="0" class="tictac-contactdetails-thumb ',k={hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e},(j=c.has_thumbnail)?j=j.call(b,k):(j=b.has_thumbnail,j=typeof j===m?j.apply(b):j),c.has_thumbnail||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+=" ",k={hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e},(j=c.has_error)?j=j.call(b,k):(j=b.has_error,j=typeof j===m?j.apply(b):j),c.has_error||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+='" ',k={hash:{},inverse:o.noop,fn:o.program(5,h,e),data:e},(j=c.has_thumbnail)?j=j.call(b,k):(j=b.has_thumbnail,j=typeof j===m?j.apply(b):j),c.has_thumbnail||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+=' data-id="',(j=c.aid)?j=j.call(b,{hash:{},data:e}):(j=b.aid,j=typeof j===m?j.apply(b):j),l+=n(j)+'" data-type="',(j=c.filetype)?j=j.call(b,{hash:{},data:e}):(j=b.filetype,j=typeof j===m?j.apply(b):j),l+=n(j)+'" title="',(j=c.filename)?j=j.call(b,{hash:{},data:e}):(j=b.filename,j=typeof j===m?j.apply(b):j),l+=n(j)+" (",(j=c.filesize)?j=j.call(b,{hash:{},data:e}):(j=b.filesize,j=typeof j===m?j.apply(b):j),l+=n(j)+')">    ',j=c.if.call(b,b.isInGalleryView,{hash:{},inverse:o.noop,fn:o.program(7,i,e),data:e}),(j||0===j)&&(l+=j),l+="</li>"}),a.Tictac.contactdetails.rollups.filter_widget=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='    <a class="contactdetails-entity-search-instead" href="#">Search instead for all messages containing "<span>',(d=c.searchTerms)?d=d.call(a,{hash:{},data:b}):(d=a.searchTerms,d=typeof d===o?d.apply(a):d),e+=p(d)+'</span>"</a>    '}function g(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasMessages,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isMessage,{hash:{},inverse:q.noop,fn:q.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-messages" href="#">Messages</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasDocs,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isAttachment,{hash:{},inverse:q.noop,fn:q.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-documents" href="#">Documents</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasPhotos,{hash:{},inverse:q.noop,fn:q.program(4,h,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isPhoto,{hash:{},inverse:q.noop,fn:q.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-photos" href="#">Photos</a>    '}function h(a,b){return" disabled"}function i(a,b){return" active"}function j(a,b){return"disabled"}function k(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-refinement ',d=c.if.call(a,a.appliedRefinements,{hash:{},inverse:q.noop,fn:q.program(11,l,b),data:b}),(d||0===d)&&(e+=d),e+='" data-action="refinement" href="#">Refine</a>    '}function l(a,b){return"active"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n="",o="function",p=this.escapeExpression,q=this;return n+='<span class="contactname">    <span>',(m=c.header_contactname_str)?m=m.call(b,{hash:{},data:e}):(m=b.header_contactname_str,m=typeof m===o?m.apply(b):m),n+=p(m)+'</span></span><div class="tictac-contactdetails-search-types">    ',m=c.if.call(b,b.isEntitySearch,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(m||0===m)&&(n+=m),n+="    ",m=c.unless.call(b,b.isEntitySearch,{hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e}),(m||0===m)&&(n+=m),n+='    <div class="tictac-contactdetails-filters">        <a class="tictac-contactdetails-filter',m=c.if.call(b,b.isFromQuery,{hash:{},inverse:q.noop,fn:q.program(6,i,e),data:e}),(m||0===m)&&(n+=m),n+=" ",m=c.if.call(b,b.fromFilterDisabled,{hash:{},inverse:q.noop,fn:q.program(8,j,e),data:e}),(m||0===m)&&(n+=m),n+='" data-filter="from" href="#">From</a>        <a class="tictac-contactdetails-filter',m=c.if.call(b,b.isToQuery,{hash:{},inverse:q.noop,fn:q.program(6,i,e),data:e}),(m||0===m)&&(n+=m),n+='" data-filter="to" href="#">To</a>        <a class="tictac-contactdetails-filter',m=c.if.call(b,b.isAllQuery,{hash:{},inverse:q.noop,fn:q.program(6,i,e),data:e}),(m||0===m)&&(n+=m),n+='" data-filter="all" href="#">All</a>    ',m=c.if.call(b,b.refinementOn,{hash:{},inverse:q.noop,fn:q.program(10,k,e),data:e}),(m||0===m)&&(n+=m),n+="    </div></div>"}),a.Tictac.contactdetails.rollups.twitterfeeds=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='    <iframe target="_blank" allowtransparency="true" frameborder="0" vspace="0" hspace="0"         style="background-color: transparent; width: 100%; height: 100%; " id="twitterTimeline"         src="https://s.yimg.com/tq/contactdetails/150310181010/html/twitterWidget_en-US.html?twitterId=',(d=c.twitter)?d=d.call(a,{hash:{},data:b}):(d=a.twitter,d=typeof d===i?d.apply(a):d),e+=j(d)+'"></iframe>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='<div class="smartmail-contactdetails-twitterfeeds smartmail-contactdetails-base">    ',g=c.if.call(b,b.twitter,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="</div>"}),a.Tictac.contactdetails.rollups.attachment=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d;return(d=c.error_class)?d=d.call(a,{hash:{},data:b}):(d=a.error_class,d=typeof d===m?d.apply(a):d),n(d)}function g(a,b){return"is-doc"}function h(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-files-gallery tictac-contactdetails-files-gallery-name">        <div class="tictac-contactdetails-files-gallery tictac-contactdetails-files-icon-large"><div data-type="',(d=c.subtype)?d=d.call(a,{hash:{},data:b}):(d=a.subtype,d=typeof d===m?d.apply(a):d),e+=n(d)+'"></div></div>        <div class="file-name-size">            <div class="file-name">                <div>',(d=c.filenameWithoutExtension)?d=d.call(a,{hash:{},data:b}):(d=a.filenameWithoutExtension,d=typeof d===m?d.apply(a):d),e+=n(d)+"</div><div>",(d=c.filenameExtension)?d=d.call(a,{hash:{},data:b}):(d=a.filenameExtension,d=typeof d===m?d.apply(a):d),e+=n(d)+'</div>            </div>            <div class="file-size">',(d=c.filesize)?d=d.call(a,{hash:{},data:b}):(d=a.filesize,d=typeof d===m?d.apply(a):d),e+=n(d)+'</div>        </div><!--     --><div class="file-subject-date">            <div class="file-subject">',(d=c.subject)?d=d.call(a,{hash:{},data:b}):(d=a.subject,d=typeof d===m?d.apply(a):d),e+=n(d)+'</div>            <div class="file-date">',(d=c.dateStr)?d=d.call(a,{hash:{},data:b}):(d=a.dateStr,d=typeof d===m?d.apply(a):d),(d||0===d)&&(e+=d),e+='</div>        </div>    </div><!-- --><div class="tictac-contactdetails-files-gallery tictac-contactdetails-gallery-download"><a href="#">Download</a></div>    '}function i(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-files-lite tictac-contactdetails-files-icon" data-type="',(d=c.subtype)?d=d.call(a,{hash:{},data:b}):(d=a.subtype,d=typeof d===m?d.apply(a):d),e+=n(d)+'"><div></div></div><!-- --><div class="tictac-contactdetails-files-lite tictac-contactdetails-files-name">        <div>',(d=c.filenameWithoutExtension)?d=d.call(a,{hash:{},data:b}):(d=a.filenameWithoutExtension,d=typeof d===m?d.apply(a):d),e+=n(d)+"</div><div>",(d=c.filenameExtension)?d=d.call(a,{hash:{},data:b}):(d=a.filenameExtension,d=typeof d===m?d.apply(a):d),e+=n(d)+'</div>    </div><!-- --><div class="tictac-contactdetails-files-lite tictac-contactdetails-files-other">',(d=c.dateStr)?d=d.call(a,{hash:{},data:b}):(d=a.dateStr,d=typeof d===m?d.apply(a):d),(d||0===d)&&(e+=d),e+="</div>    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this,p=c.blockHelperMissing;return l+='<li tabindex="0" class="',k={hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e},(j=c.has_error)?j=j.call(b,k):(j=b.has_error,j=typeof j===m?j.apply(b):j),c.has_error||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+=" ",k={hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e},(j=c.isDoc)?j=j.call(b,k):(j=b.isDoc,j=typeof j===m?j.apply(b):j),c.isDoc||(j=p.call(b,j,k)),(j||0===j)&&(l+=j),l+=' tictac-contactdetails-file" data-id="',(j=c.aid)?j=j.call(b,{hash:{},data:e}):(j=b.aid,j=typeof j===m?j.apply(b):j),l+=n(j)+'" title="',(j=c.filename)?j=j.call(b,{hash:{},data:e}):(j=b.filename,j=typeof j===m?j.apply(b):j),l+=n(j)+" (",(j=c.filesize)?j=j.call(b,{hash:{},data:e}):(j=b.filesize,j=typeof j===m?j.apply(b):j),l+=n(j)+')">    ',j=c.if.call(b,b.isInGalleryView,{hash:{},inverse:o.program(7,i,e),fn:o.program(5,h,e),data:e}),(j||0===j)&&(l+=j),l+="</li>"}),a.Tictac.contactdetails.rollups.others=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"hidden"}function g(a,b){var d,e="";return e+='    <div class="tictac-contactdetails-header" data-action="header">    <div class="tictac-contactdetails-header-title" title="',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===v?d.apply(a):d),(d||0===d)&&(e+=d),e+=" ",(d=c.sentString)?d=d.call(a,{hash:{},data:b}):(d=a.sentString,d=typeof d===v?d.apply(a):d),e+=w(d)+'">',d=c.if.call(a,a.isAllQuery,{hash:{},inverse:x.program(6,i,b),fn:x.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="</div>",d=c.if.call(a,a.isGalleryView,{hash:{},inverse:x.noop,fn:x.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+='</div><div class="tictac-contactdetails-header-rule"></div><ul class="tictac-contactdetails-files-flow" data-filter="from"></ul>',d=c.unless.call(a,a.isGalleryView,{hash:{},inverse:x.noop,fn:x.program(21,r,b),data:b}),(d||0===d)&&(e+=d),e}function h(a,b){var d,e="";return e+='<a href="#">',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===v?d.apply(a):d),(d||0===d)&&(e+=d),e+="</a>"}function i(a,b){var d,e="";return e+='<a href="#">',(d=c.viewTypeString)?d=d.call(a,{hash:{},data:b}):(d=a.viewTypeString,d=typeof d===v?d.apply(a):d),(d||0===d)&&(e+=d),e+="</a> ",(d=c.sentString)?d=d.call(a,{hash:{},data:b}):(d=a.sentString,d=typeof d===v?d.apply(a):d),e+=w(d)}function j(a,b){var d,e="";return e+='<div class="tictac-contactdetails-header-filter"><span class="contactname">    <span>',(d=c.header_contactname_str)?d=d.call(a,{hash:{},data:b}):(d=a.header_contactname_str,d=typeof d===v?d.apply(a):d),e+=w(d)+'</span></span><div class="tictac-contactdetails-search-types">    ',d=c.if.call(a,a.isEntitySearch,{hash:{},inverse:x.noop,fn:x.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+="    ",d=c.unless.call(a,a.isEntitySearch,{hash:{},inverse:x.noop,fn:x.program(11,l,b),data:b}),(d||0===d)&&(e+=d),e+='    <div class="tictac-contactdetails-filters">        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isFromQuery,{hash:{},inverse:x.noop,fn:x.program(14,n,b),data:b}),(d||0===d)&&(e+=d),e+=" ",d=c.if.call(a,a.fromFilterDisabled,{hash:{},inverse:x.noop,fn:x.program(16,o,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="from" href="#">From</a>        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isToQuery,{hash:{},inverse:x.noop,fn:x.program(14,n,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="to" href="#">To</a>        <a class="tictac-contactdetails-filter',d=c.if.call(a,a.isAllQuery,{hash:{},inverse:x.noop,fn:x.program(14,n,b),data:b}),(d||0===d)&&(e+=d),e+='" data-filter="all" href="#">All</a>    ',d=c.if.call(a,a.refinementOn,{hash:{},inverse:x.noop,fn:x.program(18,p,b),data:b}),(d||0===d)&&(e+=d),e+="    </div></div></div>"}function k(a,b){var d,e="";return e+='    <a class="contactdetails-entity-search-instead" href="#">Search instead for all messages containing "<span>',(d=c.searchTerms)?d=d.call(a,{hash:{},data:b}):(d=a.searchTerms,d=typeof d===v?d.apply(a):d),e+=w(d)+'</span>"</a>    '}function l(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasMessages,{hash:{},inverse:x.noop,fn:x.program(12,m,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isMessage,{hash:{},inverse:x.noop,fn:x.program(14,n,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-messages" href="#">Messages</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasDocs,{hash:{},inverse:x.noop,fn:x.program(12,m,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isAttachment,{hash:{},inverse:x.noop,fn:x.program(14,n,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-documents" href="#">Documents</a>        <a class="tictac-contactdetails-search-type',d=c.unless.call(a,a.hasPhotos,{hash:{},inverse:x.noop,fn:x.program(12,m,b),data:b}),(d||0===d)&&(e+=d),d=c.if.call(a,a.isPhoto,{hash:{},inverse:x.noop,fn:x.program(14,n,b),data:b}),(d||0===d)&&(e+=d),e+='"data-action="more-photos" href="#">Photos</a>    '}function m(a,b){return" disabled"}function n(a,b){return" active"}function o(a,b){return"disabled"}function p(a,b){var d,e="";return e+='        <a class="tictac-contactdetails-refinement ',d=c.if.call(a,a.appliedRefinements,{hash:{},inverse:x.noop,fn:x.program(19,q,b),data:b}),(d||0===d)&&(e+=d),e+='" data-action="refinement" href="#">Refine</a>    '}function q(a,b){return"active"}function r(a,b){}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var s,t,u="",v="function",w=this.escapeExpression,x=this,y=c.blockHelperMissing;return u+='<div class="smartmail-contactdetails-others smartmail-contactdetails-base ',s=c.unless.call(b,b.isGalleryView,{hash:{},inverse:x.noop,fn:x.program(1,f,e),data:e}),(s||0===s)&&(u+=s),u+='">',t={hash:{},inverse:x.noop,fn:x.program(3,g,e),data:e},(s=c.notEmpty)?s=s.call(b,t):(s=b.notEmpty,s=typeof s===v?s.apply(b):s),c.notEmpty||(s=y.call(b,s,t)),(s||0===s)&&(u+=s),u+="</div>"}),a.Tictac.contactdetails.rollups.message=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d;return(d=c.error_class)?d=d.call(a,{hash:{},data:b}):(d=a.error_class,d=typeof d===l?d.apply(a):d),m(d)}function g(a,b){return"    "}function h(a,b){var d,e="";return e+='        <div class="tictac-contactdetails-files-lite tictac-contactdetails-files-name">',(d=c.subject)?d=d.call(a,{hash:{},data:b}):(d=a.subject,d=typeof d===l?d.apply(a):d),e+=m(d)+'</div>        <div class="tictac-contactdetails-files-lite tictac-contactdetails-files-other">',(d=c.dateStr)?d=d.call(a,{hash:{},data:b}):(d=a.dateStr,d=typeof d===l?d.apply(a):d),(d||0===d)&&(e+=d),e+="</div>    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+='<li tabindex="0" class="',j={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(i=c.has_error)?i=i.call(b,j):(i=b.has_error,i=typeof i===l?i.apply(b):i),c.has_error||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+=' tictac-contactdetails-file tictac-contactdetails-msg" data-id="',(i=c.aid)?i=i.call(b,{hash:{},data:e}):(i=b.aid,i=typeof i===l?i.apply(b):i),k+=m(i)+'" title="',(i=c.subject)?i=i.call(b,{hash:{},data:e}):(i=b.subject,i=typeof i===l?i.apply(b):i),k+=m(i)+'">    ',i=c.if.call(b,b.isInGalleryView,{hash:{},inverse:n.program(5,h,e),fn:n.program(3,g,e),data:e}),(i||0===i)&&(k+=i),k+="</li>"}),a.Tictac.contactdetails.rollups.entity_related_products=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="related-products">    <div class="entitydetails-card">    <div class="contactdetails-entity-logo" data-entity="',(f=c.name)?f=f.call(b,{hash:{},data:e}):(f=b.name,f=typeof f===h?f.apply(b):f),g+=i(f)+'"></div>    <div class="contactdetails-entity-text">        <div class="contactdetails-entity-name"><a href="',(f=c.link)?f=f.call(b,{hash:{},data:e}):(f=b.link,f=typeof f===h?f.apply(b):f),g+=i(f)+'" target="_newtab">',(f=c.displayName)?f=f.call(b,{hash:{},data:e}):(f=b.displayName,f=typeof f===h?f.apply(b):f),g+=i(f)+'</a></div>        <div class="contactdetails-entity-web"><a href="',(f=c.web)?f=f.call(b,{hash:{},data:e}):(f=b.web,f=typeof f===h?f.apply(b):f),g+=i(f)+'" target="_newtab">',(f=c.help_page_str)?f=f.call(b,{hash:{},data:e}):(f=b.help_page_str,f=typeof f===h?f.apply(b):f),g+=i(f)+'</a></div>        <div class="contactdetails-entity-phone">',(f=c.customer_service_str)?f=f.call(b,{hash:{},data:e}):(f=b.customer_service_str,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='</div>    </div></div>    <div id="related-products">    </div></div>'})},"1.0.0",{requires:["handlebars-base"]});YUI.add("tictac-base-rollups",function(a){a.namespace("Tictac.base.rollups"),a.Tictac.base.rollups.rte_storm_color=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"title='No color'"}function g(a,b){return"    <a class='icon icon-none'></a>    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j+='<li unselectable="on" style="background-color: ',(h=c.color)?h=h.call(b,{hash:{},data:e}):(h=b.color,h=typeof h===k?h.apply(b):h),j+=l(h)+';" ',i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.transparent)?h=h.call(b,i):(h=b.transparent,h=typeof h===k?h.apply(b):h),c.transparent||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+=' data-value="',(h=c.color)?h=h.call(b,{hash:{},data:e}):(h=b.color,h=typeof h===k?h.apply(b):h),j+=l(h)+'" role="presentation">    ',i={hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e},(h=c.transparent)?h=h.call(b,i):(h=b.transparent,h=typeof h===k?h.apply(b):h),c.transparent||(h=n.call(b,h,i)),(h||0===h)&&(j+=h),j+='<a href="#" role="menuitem" tabindex="-1"></a></li>'}),a.Tictac.base.rollups.confirm_dialog=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'data-mover="true"'}function g(a,b){return"hidden"}function h(a,b){var d,e="";return e+='<p class="description">',(d=c.description)?d=d.call(a,{hash:{},data:b}):(d=a.description,d=typeof d===o?d.apply(a):d),e+=p(d)+"</p>"}function i(a,b){var d,e="";return e+='<div class="alert-icon"><img src="',(d=c.iconSrc)?d=d.call(a,{hash:{},data:b}):(d=a.iconSrc,d=typeof d===o?d.apply(a):d),e+=p(d)+'" alt="',(d=c.iconAlt)?d=d.call(a,{hash:{},data:b}):(d=a.iconAlt,d=typeof d===o?d.apply(a):d),e+=p(d)+'"/></div>'}function j(a,b){var d,e,f="";return f+='        <button type="button" class="left right default btn" data-action="continue">',(d=c.okLabel)?d=d.call(a,{hash:{},data:b}):(d=a.okLabel,d=typeof d===o?d.apply(a):d),f+=p(d)+'</button>        <button type="button" class="left right ',e={hash:{},inverse:q.noop,fn:q.program(3,g,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===o?d.apply(a):d),c.hideCancel||(d=r.call(a,d,e)),(d||0===d)&&(f+=d),f+=' btn" data-action="cancel">',(d=c.cancelLabel)?d=d.call(a,{hash:{},data:b}):(d=a.cancelLabel,d=typeof d===o?d.apply(a):d),f+=p(d)+"</button>    "}function k(a,b){return'    <div data-resizer="true"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var l,m,n="",o="function",p=this.escapeExpression,q=this,r=c.blockHelperMissing;return n+='<div class="modal xxl base-dialog hidden"><h2 class="modal-hd" ',m={hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e},(l=c.movable)?l=l.call(b,m):(l=b.movable,l=typeof l===o?l.apply(b):l),c.movable||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+=">    ",(l=c.title)?l=l.call(b,{hash:{},data:e}):(l=b.title,l=typeof l===o?l.apply(b):l),n+=p(l)+'    <span class="icon close ',m={hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e},(l=c.hideClose)?l=l.call(b,m):(l=b.hideClose,l=typeof l===o?l.apply(b):l),c.hideClose||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='" data-action="cancel" data-move="false" title="Close"></span></h2>',m={hash:{},inverse:q.noop,fn:q.program(5,h,e),data:e},(l=c.hasDescription)?l=l.call(b,m):(l=b.hasDescription,l=typeof l===o?l.apply(b):l),c.hasDescription||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='<div class="modal-bd">    ',m={hash:{},inverse:q.noop,fn:q.program(7,i,e),data:e},(l=c.iconSrc)?l=l.call(b,m):(l=b.iconSrc,l=typeof l===o?l.apply(b):l),c.iconSrc||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+='    <p class="error-msg hidden"></p>    <div class="confirm-body">',(l=c.message)?l=l.call(b,{hash:{},data:e}):(l=b.message,l=typeof l===o?l.apply(b):l),(l||0===l)&&(n+=l),n+='</div></div><div class="modal-ft">    ',m={hash:{},inverse:q.program(9,j,e),fn:q.noop,data:e},(l=c.hideButtons)?l=l.call(b,m):(l=b.hideButtons,l=typeof l===o?l.apply(b):l),c.hideButtons||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+="    ",m={hash:{},inverse:q.noop,fn:q.program(11,k,e),data:e},(l=c.resizable)?l=l.call(b,m):(l=b.resizable,l=typeof l===o?l.apply(b):l),c.resizable||(l=r.call(b,l,m)),(l||0===l)&&(n+=l),n+="</div></div>"}),a.Tictac.base.rollups.richselect_button=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return"neo-tooltip"}function g(a,b){return'<span class="arrow-down"></span>'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<button aria-haspopup="true" data-value="',(h=c.value)?h=h.call(b,{hash:{},data:e}):(h=b.value,h=typeof h===j?h.apply(b):h),i+=k(h)+'" data-name="',(h=c.name)?h=h.call(b,{hash:{},data:e}):(h=b.name,h=typeof h===j?h.apply(b):h),i+=k(h)+'" class="small richselect ',h=c.if.call(b,b.tooltip,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='" type="button" title="',(h=c.tooltip)?h=h.call(b,{hash:{},data:e}):(h=b.tooltip,h=typeof h===j?h.apply(b):h),i+=k(h)+'">    <span class="btn-text">',(h=c.buttonText)?h=h.call(b,{hash:{},data:e}):(h=b.buttonText,h=typeof h===j?h.apply(b):h),i+=k(h)+"</span>    ",h=c.if.call(b,b.showArrow,{hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+="</button>"}),a.Tictac.base.rollups.dialog_view=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'data-mover="true"'}function g(a,b){return"hidden"}function h(a,b){var d,e="";return e+='<p class="description">',(d=c.description)?d=d.call(a,{hash:{},data:b}):(d=a.description,d=typeof d===n?d.apply(a):d),e+=o(d)+"</p>"}function i(a,b){var d,e,f="";return f+='        <button type="button" class="left right default btn" data-action="continue">',(d=c.okLabel)?d=d.call(a,{hash:{},data:b}):(d=a.okLabel,d=typeof d===n?d.apply(a):d),f+=o(d)+'</button>        <button type="button" class="left right ',e={hash:{},inverse:p.noop,fn:p.program(3,g,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===n?d.apply(a):d),c.hideCancel||(d=q.call(a,d,e)),(d||0===d)&&(f+=d),f+=' btn" data-action="cancel">',(d=c.cancelLabel)?d=d.call(a,{hash:{},data:b}):(d=a.cancelLabel,d=typeof d===n?d.apply(a):d),f+=o(d)+"</button>    "}function j(a,b){return'    <div data-resizer="true"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m="",n="function",o=this.escapeExpression,p=this,q=c.blockHelperMissing;return m+='<div class="modal xxl base-dialog hidden"><h2 class="modal-hd" ',l={hash:{},inverse:p.noop,fn:p.program(1,f,e),data:e},(k=c.movable)?k=k.call(b,l):(k=b.movable,k=typeof k===n?k.apply(b):k),c.movable||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+=">    ",(k=c.title)?k=k.call(b,{hash:{},data:e}):(k=b.title,k=typeof k===n?k.apply(b):k),m+=o(k)+'    <span class="icon close ',l={hash:{},inverse:p.noop,fn:p.program(3,g,e),data:e},(k=c.hideClose)?k=k.call(b,l):(k=b.hideClose,k=typeof k===n?k.apply(b):k),c.hideClose||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+='" data-action="cancel" data-move="false" title="Close"></span></h2>',l={hash:{},inverse:p.noop,fn:p.program(5,h,e),data:e},(k=c.hasDescription)?k=k.call(b,l):(k=b.hasDescription,k=typeof k===n?k.apply(b):k),c.hasDescription||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+='<div class="modal-bd"></div><div class="modal-ft">    ',l={hash:{},inverse:p.program(7,i,e),fn:p.noop,data:e},(k=c.hideButtons)?k=k.call(b,l):(k=b.hideButtons,k=typeof k===n?k.apply(b):k),c.hideButtons||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+="    ",l={hash:{},inverse:p.noop,fn:p.program(9,j,e),data:e},(k=c.resizable)?k=k.call(b,l):(k=b.resizable,k=typeof k===n?k.apply(b):k),c.resizable||(k=q.call(b,k,l)),(k||0===k)&&(m+=k),m+="</div></div>"}),a.Tictac.base.rollups.rte_toolbar=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'    <button aria-haspopup="true" class="small rte-color-back left right neo-tooltip"        title="Set text highlight color" type="button" data-action="color-back"><span class="btn-text">Text highlight color</span></button>    </li>    '}function g(a,b){return'    <li class="unselected rte-list-type">    <button aria-haspopup="true" class="small rte-bulleted left right neo-tooltip"        title="Bulleted List" type="button" data-action="bulleted"><span class="btn-text">Bulleted List</span></button>    </li>    <li class="unselected rte-list-type">    <button aria-haspopup="true" class="small rte-numbered left right neo-tooltip"        title="Numbered List" type="button" data-action="numbered"><span class="btn-text">Numbered List</span></button>    </li>    '}function h(a,b){return'    <li class="unselected rte-layout">    <button aria-haspopup="true" class="small rte-indent left right neo-tooltip"        title="Indent More" type="button" data-action="indent"><span class="btn-text">Indent More</span></button>    </li>    <li class="unselected rte-layout">    <button aria-haspopup="true" class="small rte-align-left left right neo-tooltip"        title="Align Left" type="button" data-action="align-left"><span class="btn-text">Align Left</span></button>    </li>      <li class="unselected rte-layout">    <button aria-haspopup="true" class="small rte-align-center left right neo-tooltip"        title="Align Center" type="button" data-action="align-center"><span class="btn-text">Align Center</span></button>    </li>      '}function i(a,b){return'    <li class="unselected">    <button aria-haspopup="true" class="small rte-link left right neo-tooltip"        title="Insert Link" type="button" data-action="link"><span class="btn-text">Insert Link</span></button>    </li>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m=this,n="function",o=c.blockHelperMissing;return l+='<ul class="rte-toolbar">    <li class="unselected rte-font-select"></li>    <li class="unselected rte-fontsize-select"></li>    <li class="unselected">    <button class="small rte-bold left neo-tooltip" title="Bold" type="button"        data-action="bold"><span class="btn-text">Bold</span></button>    </li>    <li class="unselected">    <button class="small rte-italic neo-tooltip" title="Italicize" type="button"        data-action="italic"><span class="btn-text">Italic</span></button>    </li>    <li class="unselected">    <button aria-haspopup="true" class="small rte-color left right neo-tooltip"        title="Set text color" type="button" data-action="color"><span class="btn-text">Text color</span></button>    </li>    <li class="unselected">    ',k={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(j=c.showBackgroundColor)?j=j.call(b,k):(j=b.showBackgroundColor,j=typeof j===n?j.apply(b):j),c.showBackgroundColor||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",k={hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e},(j=c.showLists)?j=j.call(b,k):(j=b.showLists,j=typeof j===n?j.apply(b):j),c.showLists||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",k={hash:{},inverse:m.noop,fn:m.program(5,h,e),data:e},(j=c.showLayout)?j=j.call(b,k):(j=b.showLayout,j=typeof j===n?j.apply(b):j),c.showLayout||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="    ",k={hash:{},inverse:m.noop,fn:m.program(7,i,e),data:e},(j=c.showLink)?j=j.call(b,k):(j=b.showLink,j=typeof j===n?j.apply(b):j),c.showLink||(j=o.call(b,j,k)),(j||0===j)&&(l+=j),l+="</ul>"}),a.Tictac.base.rollups.dialog_footer=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='        <button type="button" class="left right default btn" data-action="continue">',(d=c.okLabel)?d=d.call(a,{hash:{},data:b}):(d=a.okLabel,d=typeof d===l?d.apply(a):d),f+=m(d)+'</button>        <button type="button" class="left right ',e={hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b},(d=c.hideCancel)?d=d.call(a,e):(d=a.hideCancel,d=typeof d===l?d.apply(a):d),c.hideCancel||(d=o.call(a,d,e)),(d||0===d)&&(f+=d),f+=' btn" data-action="cancel">',(d=c.cancelLabel)?d=d.call(a,{hash:{},data:b}):(d=a.cancelLabel,d=typeof d===l?d.apply(a):d),f+=m(d)+"</button>    "}function g(a,b){return"hidden"}function h(a,b){return'    <div data-resizer="true"></div>    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+='</div><div class="modal-ft">    ',j={hash:{},inverse:n.program(1,f,e),fn:n.noop,data:e},(i=c.hideButtons)?i=i.call(b,j):(i=b.hideButtons,i=typeof i===l?i.apply(b):i),c.hideButtons||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+="    ",j={hash:{},inverse:n.noop,fn:n.program(4,h,e),data:e},(i=c.resizable)?i=i.call(b,j):(i=b.resizable,i=typeof i===l?i.apply(b):i),c.resizable||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+="</div></div>"}),a.Tictac.base.rollups.richselect_option=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li class="richselect-option" unselectable="on" tabindex="0" data-index="',(f=c.index)?f=f.call(b,{hash:{},data:e}):(f=b.index,f=typeof f===h?f.apply(b):f),g+=i(f)+'" style="',(f=c.css)?f=f.call(b,{hash:{},data:e}):(f=b.css,f=typeof f===h?f.apply(b):f),g+=i(f)+'" data-value="',(f=c.value)?f=f.call(b,{hash:{},data:e}):(f=b.value,f=typeof f===h?f.apply(b):f),g+=i(f)+'">',(f=c.text)?f=f.call(b,{hash:{},data:e}):(f=b.text,f=typeof f===h?f.apply(b):f),g+=i(f)+"</li>"}),a.Tictac.base.rollups.richselect_menu=a.Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="richselect-menu optionMenu hidden" tabindex="-1"></div>'}),a.Tictac.base.rollups.rte_color=a.Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<li unselectable="on" class="rte-color-selection" role="presentation" data-action="forecolor" data-value="',(f=c.color)?f=f.call(b,{hash:{},data:e}):(f=b.color,f=typeof f===h?f.apply(b):f),g+=i(f)+'" style="background-color: ',(f=c.color)?f=f.call(b,{hash:{},data:e}):(f=b.color,f=typeof f===h?f.apply(b):f),g+=i(f)+';">    <a unselectable="on" href="#" role="menuitem" tabindex="-1"></a></li>'}),a.Tictac.base.rollups.dialog_header=a.Handlebars.template(function(a,b,c,d,e){function f(a,b){return'data-mover="true"'}function g(a,b){return"hidden"}function h(a,b){var d,e="";return e+='<p class="description">',(d=c.description)?d=d.call(a,{hash:{},data:b}):(d=a.description,d=typeof d===l?d.apply(a):d),e+=m(d)+"</p>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l="function",m=this.escapeExpression,n=this,o=c.blockHelperMissing;return k+='<div class="modal xxl base-dialog hidden"><h2 class="modal-hd" ',j={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(i=c.movable)?i=i.call(b,j):(i=b.movable,i=typeof i===l?i.apply(b):i),c.movable||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+=">    ",(i=c.title)?i=i.call(b,{hash:{},data:e}):(i=b.title,i=typeof i===l?i.apply(b):i),k+=m(i)+'    <span class="icon close ',j={hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e},(i=c.hideClose)?i=i.call(b,j):(i=b.hideClose,i=typeof i===l?i.apply(b):i),c.hideClose||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+='" data-action="cancel" data-move="false" title="Close"></span></h2>',j={hash:{},inverse:n.noop,fn:n.program(5,h,e),data:e},(i=c.hasDescription)?i=i.call(b,j):(i=b.hasDescription,i=typeof i===l?i.apply(b):i),c.hasDescription||(i=o.call(b,i,j)),(i||0===i)&&(k+=i),k+='<div class="modal-bd">'})},"1.0.0",{requires:["handlebars-base"]});"use strict";YUI.add("tictac-base-viewutils",function(a){var b=a.Tictac.base.rollups,c=a.Tictac.base.strings,d=a.one("html");a.namespace("Tictac.base").ViewUtils={alert:function(a){return a.hideCancel=!0,a.title="undefined"==typeof a.title?c.str_conv_dialog_alert:a.title,this.confirm(a)},confirm:function(d){function e(){a.Array.each(w,function(a){a&&a.detach&&a.detach()}),d&&d.refocusNode?d.refocusNode.focus():x&&x.focus()}function f(b){a.later(0,null,function(){n=l.one("input[value='']"),n||(n=l.one("textarea")),n?n.focus():b&&b.focus()})}function g(b){var c;d&&d.focusNodeSelector?(c=a.one(d.focusNodeSelector),c&&c.focus()):f(b)}function h(b){var c=l.one(".error-msg");b?(c.setHTML(a.Escape.html(b)),c.removeClass("hidden")):(v.hideModalBacker(),e(),l.remove(!0))}function i(a){if(9===a.keyCode){var b=l.one("input, textarea, button, a"),c=l.one('.modal-ft [data-action="cancel"]')||l.one('.modal-ft [data-action="continue"]');document.activeElement!==c.getDOMNode()||a.shiftKey?document.activeElement===b.getDOMNode()&&a.shiftKey&&((c||l).focus(),a.halt()):((b||l).focus(),a.halt())}}function j(b){var e,f,g=l.one(".error-msg");if(g.addClass("hidden"),d.callback){e=l.one("form"),e&&(e=v.serializeForm(e));try{d.async?(v.showModalBacker(),d.callback(e,function(a){h(a),v.hideModalBacker()})):h(d.callback(e))}catch(i){a.log("Error caught when invoking OK callback: "+i.message,"warn","viewutils"),f=c.str_msgr_server_error_1}}else h();b.preventDefault()}function k(a){e(),d.cancelCallback&&d.cancelCallback(),v.hideModalBacker(),l.remove(!0),a.preventDefault()}var l,m,n,o,p,q,r,s,t,u,v=this,w=[],x=document.activeElement;return d.title="undefined"==typeof d.title?c.str_conv_dialog_confirm:d.title,d.showButtons=!0,d.okLabel=d.okLabel||c.str_ok,d.cancelLabel=d.cancelLabel||c.str_cancel,l=a.Node.create(b.confirm_dialog(d)),l.all("input.bidi-auto-detection").each(function(b){b.plug(a.Plugin.BidiTextEntry).setAttribute("dir",a.Intl.detectDirection(b.get("value")))}),d.movable=!0,d.cssClass&&l.addClass(d.cssClass),p=l.one('button[data-action="continue"]'),q=l.one('button[data-action="cancel"]'),s=l.one(".modal-ft").all("button"),w.push(l.on("keydown",i)),w.push(a.on("resize",function(){v.limitToViewport(l)},window)),w.push(l.all('[data-action="continue"]').on("click",j)),w.push(l.all('[data-action="cancel"]').on("click",k)),t=this.showModalBacker()+1,l.setStyle("zIndex",t),l.removeClass("hidden"),u=a.one("div.modal"),u&&!u.hasClass("hidden")&&l.addClass("opaque"),l.addClass("confirm-dialog"),a.one(document.body).append(l),m=l.getDOMNode(),d.left?a.Tictac.base.isRTL?l.setStyle("right",d.left):l.setStyle("left",d.left):(o=-m.offsetWidth/2,a.Tictac.base.isRTL?l.setStyle("marginRight",o+"px"):l.setStyle("marginLeft",o+"px")),d.top?l.setStyle("top",d.top):(r=-m.offsetHeight/2,l.setStyle("marginTop",r+"px")),d.rearrangeCallback&&d.rearrangeCallback(),w.push(l.on("keydown",function(a){13===a.keyCode?a.target!==q&&j(a):27===a.keyCode&&k(a)})),this.limitToViewport(l),g(p),l},limitToViewport:function(a){if(!a.hasClass("hidden")){var b,c,d,e,f,g=this.getWindowSize();e=a.one("div.base-dialog-body"),e&&e.setStyle("height","auto"),b={left:a.get("offsetLeft"),top:a.get("offsetTop"),width:a.get("clientWidth"),height:a.get("clientHeight")},b.right=b.left+b.width,b.bottom=b.top+b.height,b.left<0?c="0px":b.right>g.width&&(c=g.width-b.width+"px"),g.height-b.height<=50?(d="25px",e&&(f=e.get("region"),e.setStyle("height",g.height-(b.height-f.height)-50+"px"))):b.top<g.scrollTop?d="0px":b.bottom>g.height+g.scrollTop&&(d=g.height-b.height+"px"),a.setStyle("maxHeight",g.height-50+"px"),c&&(a.setStyle("left",c),a.setStyle("marginLeft","0px"),a.setStyle("marginRight","0px")),d&&(a.setStyle("top",d),a.setStyle("marginTop","0px"))}},getWindowSize:function(){var a,b,c=document.body.scrollTop,d=document.body.scrollHeight;return a=window,b="inner","innerWidth"in window||(b="client",a=document.documentElement||document.body),{height:a[b+"Height"],width:a[b+"Width"],scrollTop:c,scrollHeight:d}},showModalBacker:function(){var b=a.Node.create("<div class='modal-backing-div'></div>");return b.on("click",function(a){a.halt()}),b.on("mousedown",function(a){a.halt()}),b.on("mouseup",function(a){a.halt()}),a.one(".modal-backing-div")&&b.addClass("stacked"),a.one(document.body).append(b),d.addClass("dlg-show"),this.bringToFront(b)},hideModalBacker:function(){var b,c,e=a.all(".modal-backing-div"),f=null;if(e.size()){for(b=0,c=e.size();c>b;b++)f?e.item(b).getComputedStyle("zIndex")>f.getComputedStyle("zIndex")&&(f=e.item(b)):f=e.item(b);f.remove(!0),1===e.size()&&d.removeClass("dlg-show")}},bringToFront:function(b){var c=a.all(".base-dialog, .modal-backing-div, #yucs-top-bar, .yucs-fl-left"),d=29e3;return c.each(function(a){if(b!==a){var c=+a.getStyle("zIndex");!isNaN(c)&&c>=d&&(d=c+1)}}),b.setStyle("zIndex",d),d},serializeForm:function(b){var c,d={};if(b.one)c=b;else{if(c=document.forms[b]||document.getElementById(b),!c)return null;c=a.Node(c)}return c.get("elements").each(function(a){var b=a.get("name")||a.getAttribute("data-name"),c=a.get("type").toLowerCase();switch(c){case"text":case"hidden":case"textarea":case"password":d[b]=a.get("value");break;case"radio":case"checkbox":a.get("checked")===!0&&(d[b]=a.get("value"));break;case"select-one":a.all("option").each(function(a){a.get("selected")&&(d[b]=a.get("value"))});break;case"button":a.hasClass("richselect")&&b&&(d[b]=a.getAttribute("data-value"))}}),d},disableSelection:function(b){var c=b.getDOMNode();b.setStyle("WebkitUserSelect","none"),b.setStyle("MozUserSelect","none"),b.setStyle("msUserSelect","none"),b.setStyle("userSelect","none"),a.UA.ie&&a.UA.ie<=8&&(c.__onselectstart__=c.onselectstart,c.__ondragstart__=c.ondragstart,c.onselectstart=function(){return!1},c.ondragstart=function(){return!1})},enableSelection:function(b){var c=b.getDOMNode();b.setStyle("WebkitUserSelect","text"),b.setStyle("MozUserSelect","text"),b.setStyle("msUserSelect","text"),b.setStyle("userSelect","text"),a.UA.ie&&a.UA.ie<=8&&(c.onselectstart=c.__onselectstart__,c.ondragstart=c.__ondragstart__)}}},"1.0.0",{requires:["tictac-base-rollups","tictac-base-strings","comms-bidi-textentry","comms-intl-bidi","base-viewutils-css"]});YUI.add("underscore", function () {
    (function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,v=e.reduce,h=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.3";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduce===v)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduceRight===h)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?-1!=n.indexOf(t):E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2);return w.map(n,function(n){return(w.isFunction(t)?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t){return w.isEmpty(t)?[]:w.filter(n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var F=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=F(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index<t.index?-1:1}),"value")};var k=function(n,t,r,e){var u={},i=F(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return k(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return k(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:F(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i};var I=function(){};w.bind=function(n,t){var r,e;if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));if(!w.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));I.prototype=n.prototype;var u=new I;I.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},w.bindAll=function(n){var t=o.call(arguments,1);return 0==t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length)for(;a--&&(o=S(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&S(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return S(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),w.isFunction=function(n){return"function"==typeof n},w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return void 0===n},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+(0|Math.random()*(t-n+1))};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};T.unescape=w.invert(T.escape);var M={escape:RegExp("["+w.keys(T.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(T.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(M[n],function(t){return T[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=""+ ++N;return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){r=w.defaults({},r,w.templateSettings);var e=RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,a,o){return i+=n.slice(u,o).replace(D,function(n){return"\\"+B[n]}),r&&(i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(i+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),a&&(i+="';\n"+a+"\n__p+='"),u=o+t.length,t}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=Function(r.variable||"obj","_",i)}catch(o){throw o.source=i,o}if(t)return a(t,w);var c=function(n){return a.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+i+"}",c},w.chain=function(n){return w(n).chain()};var z=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(window);
});YUI.add("backbone", function () {
// Backbone.js 0.9.10
// (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://backbonejs.org
(function(){var n=this,B=n.Backbone,h=[],C=h.push,u=h.slice,D=h.splice,g;g="undefined"!==typeof exports?exports:n.Backbone={};g.VERSION="0.9.10";var f=n._;!f&&"undefined"!==typeof require&&(f=require("underscore"));g.$=n.jQuery||n.Zepto||n.ender;g.noConflict=function(){n.Backbone=B;return this};g.emulateHTTP=!1;g.emulateJSON=!1;var v=/\s+/,q=function(a,b,c,d){if(!c)return!0;if("object"===typeof c)for(var e in c)a[b].apply(a,[e,c[e]].concat(d));else if(v.test(c)){c=c.split(v);e=0;for(var f=c.length;e<
f;e++)a[b].apply(a,[c[e]].concat(d))}else return!0},w=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);break;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0]);break;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1]);break;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);break;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},h=g.Events={on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events=
{});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!q(this,"once",a,[b,c])||!b)return this;var d=this,e=f.once(function(){d.off(a,e);b.apply(this,arguments)});e._callback=b;this.on(a,e,c);return this},off:function(a,b,c){var d,e,t,g,j,l,k,h;if(!this._events||!q(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;g=a?[a]:f.keys(this._events);j=0;for(l=g.length;j<l;j++)if(a=g[j],d=this._events[a]){t=[];if(b||
c){k=0;for(h=d.length;k<h;k++)e=d[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&t.push(e)}this._events[a]=t}return this},trigger:function(a){if(!this._events)return this;var b=u.call(arguments,1);if(!q(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&w(c,b);d&&w(d,arguments);return this},listenTo:function(a,b,c){var d=this._listeners||(this._listeners={}),e=a._listenerId||(a._listenerId=f.uniqueId("l"));d[e]=a;a.on(b,"object"===typeof b?this:c,this);
return this},stopListening:function(a,b,c){var d=this._listeners;if(d){if(a)a.off(b,"object"===typeof b?this:c,this),!b&&!c&&delete d[a._listenerId];else{"object"===typeof b&&(c=this);for(var e in d)d[e].off(b,c,this);this._listeners={}}return this}}};h.bind=h.on;h.unbind=h.off;f.extend(g,h);var r=g.Model=function(a,b){var c,d=a||{};this.cid=f.uniqueId("c");this.attributes={};b&&b.collection&&(this.collection=b.collection);b&&b.parse&&(d=this.parse(d,b)||{});if(c=f.result(this,"defaults"))d=f.defaults({},
d,c);this.set(d,b);this.changed={};this.initialize.apply(this,arguments)};f.extend(r.prototype,h,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return f.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e,g,p,j,l,k;if(null==a)return this;"object"===typeof a?(e=a,c=b):(e={})[a]=b;c||(c={});
if(!this._validate(e,c))return!1;g=c.unset;p=c.silent;a=[];j=this._changing;this._changing=!0;j||(this._previousAttributes=f.clone(this.attributes),this.changed={});k=this.attributes;l=this._previousAttributes;this.idAttribute in e&&(this.id=e[this.idAttribute]);for(d in e)b=e[d],f.isEqual(k[d],b)||a.push(d),f.isEqual(l[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete k[d]:k[d]=b;if(!p){a.length&&(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,k[a[b]],c)}if(j)return this;
if(!p)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,f.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=void 0;return this.set(b,f.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!f.isEmpty(this.changed):f.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._changing?
this._previousAttributes:this.attributes,e;for(e in a)if(!f.isEqual(d[e],b=a[e]))(c||(c={}))[e]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success;a.success=function(a,d,e){if(!a.set(a.parse(d,e),e))return!1;b&&b(a,d,e)};return this.sync("read",this,a)},save:function(a,b,c){var d,e,g=this.attributes;
null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;if(d&&(!c||!c.wait)&&!this.set(d,c))return!1;c=f.extend({validate:!0},c);if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=f.extend({},g,d));void 0===c.parse&&(c.parse=!0);e=c.success;c.success=function(a,b,c){a.attributes=g;var k=a.parse(b,c);c.wait&&(k=f.extend(d||{},k));if(f.isObject(k)&&!a.set(k,c))return!1;e&&e(a,b,c)};a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=
g);return a},destroy:function(a){a=a?f.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(a,b,e){(e.wait||a.isNew())&&d();c&&c(a,b,e)};if(this.isNew())return a.success(this,null,a),!1;var e=this.sync("delete",this,a);a.wait||d();return e},url:function(){var a=f.result(this,"urlRoot")||f.result(this.collection,"url")||x();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},
isNew:function(){return null==this.id},isValid:function(a){return!this.validate||!this.validate(this.attributes,a)},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=f.extend({},this.attributes,a);var c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,b||{});return!1}});var s=g.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this.models=[];this._reset();this.initialize.apply(this,
arguments);a&&this.reset(a,f.extend({silent:!0},b))};f.extend(s.prototype,h,{model:r,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){a=f.isArray(a)?a.slice():[a];b||(b={});var c,d,e,g,p,j,l,k,h,m;l=[];k=b.at;h=this.comparator&&null==k&&!1!=b.sort;m=f.isString(this.comparator)?this.comparator:null;c=0;for(d=a.length;c<d;c++)(e=this._prepareModel(g=a[c],b))?(p=this.get(e))?b.merge&&(p.set(g===
e?e.attributes:g,b),h&&(!j&&p.hasChanged(m))&&(j=!0)):(l.push(e),e.on("all",this._onModelEvent,this),this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e)):this.trigger("invalid",this,g,b);l.length&&(h&&(j=!0),this.length+=l.length,null!=k?D.apply(this.models,[k,0].concat(l)):C.apply(this.models,l));j&&this.sort({silent:!0});if(b.silent)return this;c=0;for(d=l.length;c<d;c++)(e=l[c]).trigger("add",e,this,b);j&&this.trigger("sort",this,b);return this},remove:function(a,b){a=f.isArray(a)?a.slice():[a];
b||(b={});var c,d,e,g;c=0;for(d=a.length;c<d;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:0},
b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){if(null!=a)return this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[a.id||a.cid||a[this._idAttr]||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");
a||(a={});f.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(f.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return f.invoke(this.models,"get",a)},update:function(a,b){b=f.extend({add:!0,merge:!0,remove:!0},b);b.parse&&(a=this.parse(a,b));var c,d,e,g,h=[],j=[],l={};f.isArray(a)||(a=a?[a]:[]);if(b.add&&!b.remove)return this.add(a,b);d=0;for(e=a.length;d<e;d++)c=a[d],g=this.get(c),
b.remove&&g&&(l[g.cid]=!0),(b.add&&!g||b.merge&&g)&&h.push(c);if(b.remove){d=0;for(e=this.models.length;d<e;d++)c=this.models[d],l[c.cid]||j.push(c)}j.length&&this.remove(j,b);h.length&&this.add(h,b);return this},reset:function(a,b){b||(b={});b.parse&&(a=this.parse(a,b));for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models.slice();this._reset();a&&this.add(a,f.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=
a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success;a.success=function(a,d,e){a[e.update?"update":"reset"](d,e);b&&b(a,d,e)};return this.sync("read",this,a)},create:function(a,b){b=b?f.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(a,b,f){f.wait&&c.add(a,f);d&&d(a,b,f)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models.length=
0;this._byId={}},_prepareModel:function(a,b){if(a instanceof r)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?!1:c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=
b)),this.trigger.apply(this,arguments))},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=f.isFunction(b)?b:function(a){return a.get(b)};return f.sortedIndex(this.models,a,d,c)}});f.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){s.prototype[a]=function(){var b=
u.call(arguments);b.unshift(this.models);return f[a].apply(f,b)}});f.each(["groupBy","countBy","sortBy"],function(a){s.prototype[a]=function(b,c){var d=f.isFunction(b)?b:function(a){return a.get(b)};return f[a](this.models,d,c)}});var y=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,F=/(\(\?)?:\w+/g,G=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;f.extend(y.prototype,h,{initialize:function(){},route:function(a,b,c){f.isRegExp(a)||
(a=this._routeToRegExp(a));c||(c=this[b]);g.history.route(a,f.bind(function(d){d=this._extractParameters(a,d);c&&c.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));this.trigger("route",b,d);g.history.trigger("route",this,b,d)},this));return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes)for(var a,b=f.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])},_routeToRegExp:function(a){a=a.replace(H,"\\$&").replace(E,"(?:$1)?").replace(F,
function(a,c){return c?a:"([^/]+)"}).replace(G,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var m=g.History=function(){this.handlers=[];f.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,J=/msie [\w.]+/,K=/\/$/;m.started=!1;f.extend(m.prototype,h,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,
b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=this.location.pathname;var c=this.root.replace(K,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(z,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=f.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.options.pushState||
!this.history||!this.history.pushState);a=this.getFragment();var b=document.documentMode,b=J.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(I,"/");b&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!b)g.$(window).on("hashchange",this.checkUrl);
else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(z,""),this.history.replaceState({},document.title,
this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},
loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&
(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new m;var A=g.View=function(a){this.cid=f.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},L=/^(\S+)\s*(.*)$/,M="model collection el id attributes className tagName events".split(" ");
f.extend(A.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=f.result(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);
if(!c)throw Error('Method "'+a[b]+'" does not exist');var d=b.match(L),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);if(""===d)this.$el.on(e,c);else this.$el.on(e,d,c)}}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},f.result(this,"options"),a));f.extend(this,f.pick(a,M));this.options=a},_ensureElement:function(){if(this.el)this.setElement(f.result(this,"el"),!1);else{var a=f.extend({},f.result(this,"attributes"));
this.id&&(a.id=f.result(this,"id"));this.className&&(a["class"]=f.result(this,"className"));a=g.$("<"+f.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});var N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=N[a];f.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var e={type:d,dataType:"json"};c.url||(e.url=f.result(b,"url")||x());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))e.contentType="application/json",
e.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{});if(c.emulateHTTP&&("PUT"===d||"DELETE"===d||"PATCH"===d)){e.type="POST";c.emulateJSON&&(e.data._method=d);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(h)return h.apply(this,arguments)}}"GET"!==e.type&&!c.emulateJSON&&(e.processData=!1);var m=c.success;c.success=function(a){m&&m(b,a,c);b.trigger("sync",b,a,c)};
var j=c.error;c.error=function(a){j&&j(b,a,c);b.trigger("error",b,a,c)};a=c.xhr=g.ajax(f.extend(e,c));b.trigger("request",b,a,c);return a};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};r.extend=s.extend=y.extend=A.extend=m.extend=function(a,b){var c=this,d;d=a&&f.has(a,"constructor")?a.constructor:function(){return c.apply(this,arguments)};f.extend(d,c,b);var e=function(){this.constructor=d};e.prototype=c.prototype;d.prototype=new e;a&&f.extend(d.prototype,a);d.__super__=c.prototype;return d};
var x=function(){throw Error('A "url" property or function must be specified');}}).call(window);}, "", {requires: ["underscore"]});YUI.add("tictac-base-view",function(a){"use strict";function b(b){var c=this;c.options=b||{},c.attributes={},c._previous={},b.parent?(c.parent=b.parent,"string"==typeof c.parent?c.parent=a.one(c.parent):c.parent.one||(c.parent=a.one(c.parent))):b.nextSibling||b.prevSibling||(c.parent=a.one("body")),b.model?c.model=b.model:c.collection=b.collection,c._listeners=[],_.extend(c,Backbone.Events),c.initialize&&c.initialize(b),c.constructor.plugins&&_.each(c.constructor.plugins,function(a){a.initialize(c)}),c._destroyed=!1}b.prototype={events:{},template:"<div></div>",get:function(a){return this.attributes[a]},set:function(a,b){b!==this.attributes[a]&&(this._previous[a]=this.attributes[a],this.attributes[a]=b,this.trigger("change:"+a,this))},previous:function(a){return this._previous[a]},createDOMNode:function(){return a.Node.create(this.template)},render:function(){var b,c=this;if(c.rendered)throw new Error("Render called twice for view object");c.node=c.createDOMNode(),c.options.container&&(b="string"==typeof c.options.container?a.Node.create(c.options.container):c.options.container,b.append(c.node),c.node=b),a.UA.ie>0&&c.node.setAttribute("unselectable","on"),c.options.attributes&&c.node.setAttrs(c.options.attributes),c.node.addClass("base-view"),a.Tictac.base.isRTL&&c.node.addClass("base-bidi"),a.UA.ie>0?(c.node.addClass("IE"),7===a.UA.ie&&navigator.userAgent.indexOf("Trident/")>0?(c.node.addClass("IE8"),c.node.addClass("IE8Compat")):c.node.addClass("IE"+a.UA.ie)):a.UA.gecko>0?c.node.addClass("FF"):a.UA.webkit>0&&c.node.addClass("Webkit"),c.parent?c.options.index?c.parent.insert(c.node,c.options.index):c.parent.append(c.node):c.options.prevSibling?c.options.prevSibling.insert(c.node,"after"):c.options.nextSibling.insert(c.node,"before"),c._attachEvents(),c.postRender&&c.postRender(),c.visible=!c.node.hasClass("hidden"),c.rendered=!0,c.trigger("render",c)},_attachEvents:function(){var b,c,d,e,f=this;for(b in f.events)if(f.events.hasOwnProperty(b)){if(d=f.events[b],!d||!f[d]){a.log("Error - attempted to map an event to a callback that does not exist","error","view");continue}b=b.split(" "),e=b.shift(),c=b.join(" "),f._listeners.push(f.node.delegate(e,a.bind(f[d],f),c))}if(f._listeners.push(f.node.on("focus",f._onFocus)),f._listeners.push(f.node.on("blur",f._onBlur)),a.UA.ie&&a.UA.ie<9){var g='input[type="checkbox"], input[type="radio"]';f._listeners.push(f.node.delegate("click",f._ie8ChangeEvtWorkaround,g))}},show:function(){var a=this;a.node&&a.node.removeClass("hidden"),a.visible=!0,a.trigger("show",a)},hide:function(){this.isVisible()&&(this.node.addClass("hidden"),this.visible=!1,this.trigger("hide",this))},isVisible:function(){return this.visible},destroy:function(){for(this.onDestroy&&this.onDestroy(),this.node&&(this.node.remove(),this.node.destroy(!0),delete this.node);this._listeners.length;)this._listeners.pop().detach();this.trigger("destroy",this),this.off(),this._destroyed=!0},_ie8ChangeEvtWorkaround:function(a){a.target.blur(),a.target.focus()},_onFocus:function(b){var c=b.target.getDOMNode(),d=c.parentNode;"LABEL"===d.nodeName&&a.one(d).addClass("focus")},_onBlur:function(b){var c=b.target.getDOMNode(),d=c.parentNode;"LABEL"===d.nodeName&&a.one(d).removeClass("focus")}},b.extend=Backbone.Model.extend,a.namespace("Tictac.base").View=b},"@VERSION@",{requires:["node","tictac-base-css","tictac-base-viewutils","backbone"]});"use strict";YUI.add("tictac-base-mailutils",function(a){var b={"att.net":!0,"ameritech.net":!0,"btinternet.com":!0,"btopenworld.com":!0,"demobroadband.com":!0,"ovi.com":!0,"flash.net":!0,"nl.rogers.com":!0,"nvbell.net":!0,"pacbell.net":!0,"prodigy.net":!0,"rogers.com":!0,"sbcglobal.net":!0,"snet.net":!0,"swbell.net":!0,"talk21.com":!0,"verizon.net":!0,"wans.net":!0,"ymail.com":!0,"rocketmail.com":!0,"yahoo-inc.com":!0},c={ad:!0,ae:!0,af:!0,ag:!0,ai:!0,al:!0,am:!0,an:!0,ao:!0,aq:!0,ar:!0,as:!0,at:!0,au:!0,aw:!0,az:!0,ba:!0,bb:!0,bd:!0,be:!0,bf:!0,bg:!0,bh:!0,bi:!0,bj:!0,bm:!0,bn:!0,bo:!0,br:!0,bs:!0,bt:!0,bv:!0,bw:!0,by:!0,bz:!0,ca:!0,cc:!0,cf:!0,cg:!0,ch:!0,ci:!0,ck:!0,cl:!0,cm:!0,cn:!0,co:!0,cr:!0,cs:!0,cu:!0,cv:!0,cx:!0,cy:!0,cz:!0,de:!0,dj:!0,dk:!0,dm:!0,"do":!0,dz:!0,ec:!0,ee:!0,eg:!0,eh:!0,es:!0,et:!0,fi:!0,fj:!0,fk:!0,fm:!0,fo:!0,fr:!0,fx:!0,ga:!0,gb:!0,gd:!0,ge:!0,gh:!0,gi:!0,gl:!0,gp:!0,gq:!0,gf:!0,gm:!0,gn:!0,gr:!0,gt:!0,gu:!0,gw:!0,gy:!0,hk:!0,hm:!0,hn:!0,hr:!0,ht:!0,hu:!0,id:!0,ie:!0,il:!0,"in":!0,io:!0,iq:!0,ir:!0,is:!0,it:!0,jm:!0,jo:!0,jp:!0,ke:!0,kg:!0,kh:!0,ki:!0,km:!0,kn:!0,kp:!0,kr:!0,kw:!0,ky:!0,kz:!0,la:!0,lb:!0,lc:!0,li:!0,lk:!0,lr:!0,ls:!0,lt:!0,lu:!0,lv:!0,ly:!0,ma:!0,mc:!0,md:!0,mg:!0,mh:!0,ml:!0,mm:!0,mn:!0,mo:!0,mp:!0,mq:!0,mr:!0,ms:!0,mt:!0,mu:!0,mv:!0,mw:!0,mx:!0,my:!0,mz:!0,na:!0,nc:!0,ne:!0,nf:!0,ng:!0,ni:!0,nl:!0,no:!0,np:!0,nr:!0,nt:!0,nu:!0,nz:!0,om:!0,pa:!0,pe:!0,pf:!0,pg:!0,ph:!0,pk:!0,pl:!0,pm:!0,pn:!0,pt:!0,pr:!0,pw:!0,py:!0,qa:!0,re:!0,ro:!0,ru:!0,rw:!0,sa:!0,sb:!0,sc:!0,sd:!0,se:!0,sg:!0,sh:!0,si:!0,sj:!0,sk:!0,sl:!0,sm:!0,sn:!0,so:!0,sr:!0,st:!0,su:!0,sv:!0,sy:!0,sz:!0,tc:!0,td:!0,tf:!0,tg:!0,th:!0,tj:!0,tk:!0,tm:!0,tn:!0,to:!0,tp:!0,tr:!0,tt:!0,tv:!0,tw:!0,tz:!0,ua:!0,ug:!0,uk:!0,um:!0,us:!0,uy:!0,uz:!0,va:!0,vc:!0,ve:!0,vg:!0,vi:!0,vn:!0,vu:!0,wf:!0,ws:!0,ye:!0,yu:!0,za:!0,zm:!0,zr:!0,zw:!0},d={aero:!0,asia:!0,biz:!0,com:!0,edu:!0,gov:!0,info:!0,jobs:!0,mil:!0,mobi:!0,museum:!0,name:!0,net:!0,org:!0,co:!0};a.namespace("Tictac.base").mailutils={openMessage:function(a){var b=a.fid.replace?a.fid.replace("%2F","%5C").replace("%2f","%5c"):a.fid,c={fid:b,msg:{mid:a.mid,fid:b}};a&&a.name&&(c[a.name]=!0),window.yui.fire("openMessage",c)},rotateAds:function(b,c,d){var e={type:"a",name:"VISIBLE",evt:{sp:b,npv:!c,trace:d||"tictac"}},f=window.yui||a;f.fire("darlaEvent",{action:e})},getYahooIdFromEmail:function(a){function e(a){var c,d=!1,f=-1;return a?(c=a.split("."),d=c.length>2,d&&(f=a.indexOf("."),-1!==f)?(a=a.slice(f+1),e(a)):b[a]?!0:!1):!1}function f(a){if(!a)return!1;var b=a.split(".");return"yahoo"!==b[0]?!1:b.length>3?!1:b.length>2&&c[b[2]]?d[b[1]]:2===b.length?d[b[1]]||c[b[1]]:!1}var g,h,i;if(i=a.toLowerCase().split("@"),g=i[0],h=i[1],e(h))g=a;else{if(!f(h))return;"yahoo.cn"===h&&(g=a)}return g.length<4||g.length>32?void 0:g},isOutlook:function(a){return a.indexOf("@outlook.")>-1||a.indexOf("@hotmail.com")>-1||a.indexOf("@live.com")>-1||a.indexOf("@msn.com")>-1?!0:void 0},isAOL:function(a){return a.indexOf("@aol.com")>-1?!0:void 0},isGmail:function(a){return a.indexOf("@gmail.com")>-1||a.indexOf("@google.com")>-1?!0:void 0},getFontFamilies:function(){var b=a.Tictac.base.strings,c=[],d=[{value:b.str_rte_font_arial_attr,name:b.str_rte_font_modern},{value:b.str_rte_font_verdana_attr,name:b.str_rte_font_modernwide},{value:b.str_rte_font_times_attr,name:b.str_rte_font_classic},{value:b.str_rte_font_bookman_attr,name:b.str_rte_font_classicwide},{value:b.str_rte_font_courier_attr,name:b.str_rte_font_courier},{value:b.str_rte_font_garamond_attr,name:b.str_rte_font_garamond},{value:b.str_rte_font_lucida_attr,name:b.str_rte_font_lucida}];return window.strings&&window.strings.str_cfg_intl_fonts&&(c=a.JSON.parse(window.strings.str_cfg_intl_fonts)),d.concat(c)},getFontFamiliesByFont:function(){var b=a.Tictac.base.strings,c={};return c[b.str_rte_font_modern]=b.str_rte_font_arial_attr,c[b.str_rte_font_modernwide]=b.str_rte_font_verdana_attr,c[b.str_rte_font_classic]=b.str_rte_font_times_attr,c[b.str_rte_font_classicwide]=b.str_rte_font_bookman_attr,c[b.str_rte_font_courier]=b.str_rte_font_courier_attr,c[b.str_rte_font_garamond]=b.str_rte_font_garamond_attr,c[b.str_rte_font_lucida]=b.str_rte_font_lucida_attr,c},isValidEmailAddress:function(a){var b=/^[A-Z0-9\.\_\-\+]+@([A-Z0-9\-]+\.)+[A-Z]{2,13}$/i;return b.test(a)}}},"1.0.0",{requires:["tictac-base-strings","json-parse"]});"use strict";YUI.add("tictac-contactdetails-entityContactView",function(a){function b(){var b=a.one("#dd_search_results_container").ancestor("#msg-list")||a.one("#dd_search_results_container").ancestor("#msg-list-no-result");b&&b.addClass("show-entity-search-view")}var c=a.Tictac.contactdetails.rollups,d=a.Tictac.base.mailutils,e=a.Tictac.base.utils,f=a.Tictac.contactdetails.strings,g=a.Tictac.base.utils.subs,h=a.Tictac.contactdetails.EntityStats,i=a.Tictac.contactdetails.utils,j=a.Tictac.base.View.extend({initialize:function(a){this.entityInfo=a,this.isToQuery=this.entityInfo.isToQuery,b(),this._event=[],this.recentRendered=0,this.deliveredRendered=0},onDestroy:function(){i.restoreToolbarAndMsgs(this.node),a.Array.each(this._event,function(b){a.detach(b)}),this._event=[]},createDOMNode:function(){return this.entityInfo.recent_shipments_from_entity_str=g(f.str_recent_shipments,{entity_name:this.entityInfo.name}),this.entityInfo.delivered_shipments_from_entity_str=g(f.str_delivered_shipments,{entity_name:this.entityInfo.name}),this.entityInfo.isEntitySearch=!0,this.entityInfo.refinementOn=!!NeoConfig.nav&&a.one("#dd_search_results_container_top")&&a.one("#dd_search_results_container_top").ancestor().one(".refinements"),this.entityInfo.contactName=this.entityInfo.name,this.entityInfo.refineTop=NeoConfig.refineTop&&this.entityInfo.hasSearchResult,a.Node.create(c.entity_purchase_history(this.entityInfo))},onClickContactEmail:function(){},onClickSearchInstead:function(){var a={query:{keyword:this.entityInfo.searchTerms},displayQueryInSearchBar:!1,prefilterRefinements:!1,addToRecentSearches:!1};yui.fire("search:input",a)},_getDateStr:function(a,b,c){function d(a){var b,c,d=a?new Date(a):new Date;return d.setHours(0,0,0,0),b=new Date(d),b.setDate(b.getDate()-b.getDay()),c=new Date(d),c.setDate(c.getDate()-c.getDay()+7),[b,c]}function g(a){return[f.str_sunday,f.str_monday,f.str_tuesday,f.str_wednesday,f.str_thursday,f.str_friday,f.str_saturday][a]}function h(a){return[f.str_jan,f.str_feb,f.str_mar,f.str_apr,f.str_may,f.str_jun,f.str_jul,f.str_aug,f.str_sep,f.str_oct,f.str_nov,f.str_dec][a]}var i,j,k,l,m,n,o,p=this._getDateObj(a,c);return null===p?"":(k=new Date,k.setHours(0,0,0,0),p instanceof Date?(l=new Date(k.getTime()+864e5),m=new Date(k.getTime()-864e5),i=p,j=d(),i.getTime()===k.getTime()?f.str_today:i.getTime()===l.getTime()?f.str_tomorrow:i.getTime()===m.getTime()?f.yesterday:i>j[0]&&i<=j[1]?g(i.getDay()):i.getFullYear()!==k.getFullYear()?b?e.subs(f.str_estimated_delivery_str2_with_year,{str_delivery_month:h(i.getMonth()),str_delivery_day:i.getDate(),str_delivery_year:i.getFullYear()}):e.subs(f.str_delivered_str2_with_year,{str_delivery_month:h(i.getMonth()),str_delivery_day:i.getDate(),str_delivery_year:i.getFullYear()}):b?e.subs(f.str_estimated_delivery_str2_without_year,{str_delivery_month:h(i.getMonth()),str_delivery_day:i.getDate()}):e.subs(f.str_delivered_str2_without_year,{str_delivery_month:h(i.getMonth()),str_delivery_day:i.getDate()})):p instanceof Object?(n=p.from,o=p.to,n.getFullYear()===k.getFullYear()&&o.getFullYear()===k.getFullYear()?b?e.subs(f.str_estimated_delivery_str2_range_without_year,{str_delivery_month_from:h(n.getMonth()),str_delivery_day_from:n.getDate(),str_delivery_month_to:h(o.getMonth()),str_delivery_day_to:o.getDate()}):e.subs(f.str_delivered_str2_range_without_year,{str_delivery_month_from:h(n.getMonth()),str_delivery_day_from:n.getDate(),str_delivery_month_to:h(o.getMonth()),str_delivery_day_to:o.getDate()}):b?e.subs(f.str_estimated_delivery_str2_range_with_year,{str_delivery_month_from:h(n.getMonth()),str_delivery_day_from:n.getDate(),str_delivery_year_from:n.getFullYear(),str_delivery_month_to:h(o.getMonth()),str_delivery_day_to:o.getDate(),str_delivery_year_to:n.getFullYear()}):e.subs(f.str_delivered_str2_range_with_year,{str_delivery_month_from:h(n.getMonth()),str_delivery_day_from:n.getDate(),str_delivery_year_from:n.getFullYear(),str_delivery_month_to:h(o.getMonth()),str_delivery_day_to:o.getDate(),str_delivery_year_to:n.getFullYear()})):void 0)},_getDateObj:function(a,b){try{var c,d,e,f,g,h,i,j=new Date(b),k=j.getFullYear();return d=new Date,d.setHours(0,0,0,0),-1===a.indexOf("-")?(e=new Date(d.getTime()+864e5),f=new Date(d.getTime()-864e5),c=new Date(a.match(/\d/g).length>3?a:a+" "+k),c instanceof Date&&isFinite(c)?c:a):(i=a.split("-"),g=new Date(i[0].match(/\d/g).length>3?i[0]:i[0]+" "+k),h=new Date(i[1].match(/\d/g).length>3?i[1]:i[1]+" "+k),g instanceof Date&&isFinite(g)&&h instanceof Date&&isFinite(h)?{from:g,to:h}:a)}catch(l){return null}},_isPastDate:function(a,b){var c,d=new Date,e=this._getDateObj(a,b);return null===e?!0:(d.setHours(0,0,0,0),e instanceof Date?d>e:e instanceof Object?(c=e.to,d>c):!0)},parseItems:function(b){function c(a,b){var c=a.date instanceof Date?a.date:a.date instanceof Object?a.date.from:void 0,d=b.date instanceof Date?b.date:b.date instanceof Object?b.date.from:void 0;return c===d?0:void 0===c?-1:void 0===d?1:c>d?1:d>c?-1:void 0}var d,e,h,i,j,k,l=this,m=b.fids?b.fids:{};this.delivered=[],this.recent=[];for(var n=0;b&&b.hits&&n<b.hits.length;n++)for(var o=b.hits[n].extractionresult,p=b.hits[n].mid,q=m[b.hits[n].fnum],r=1e3*b.hits[n].date,s=0;s<o.schemas.length;s++)if(e=o.schemas[s],"ParcelDelivery"===e.id){e=e.schema,h=e.carrier?e.carrier.name:"",j="",k="",-1!==h.toLowerCase().indexOf("ups")?(i="UPS",j="http://wwwapps.ups.com/WebTracking/track"+"?track=yes&trackNums={{trackingNumber}}".replace("{{trackingNumber}}",e.trackingNumber)):-1!==h.toLowerCase().indexOf("usps")?(j="https://tools.usps.com/go/TrackConfirmAction_input"+"?qtc_tLabels1={{trackingNumber}}".replace("{{trackingNumber}}",e.trackingNumber),i="USPS"):-1!==h.toLowerCase().indexOf("fedex")?(j="http://www.fedex.com/Tracking"+"?action=track&tracknumbers={{trackingNumber}}".replace("{{trackingNumber}}",e.trackingNumber),i="Fedex"):-1!==h.toLowerCase().indexOf("ontrac")&&(j="http://www.ontrac.com/trackingdetail.asp"+"?tracking={{trackingNumber}}".replace("{{trackingNumber}}",e.trackingNumber),i="OnTrac"),!j&&e.trackingUrl&&(j=e.trackingUrl),k=i?g(f.str_estimated_delivery_str1_via,{shipper:i}):f.str_estimated_delivery_str1;var t={orderNumber:e.partOfOrder?e.partOfOrder.orderNumber:"",streetAddress:e.deliveryAddress?e.deliveryAddress.streetAddress:"",expectedArrival:e.expectedArrival?this._getDateStr(e.expectedArrival.replace(/\./g,","),!1,r):"",date:e.expectedArrival?this._getDateObj(e.expectedArrival.replace(/\./g,","),r):"",name:e.itemShipped?e.itemShipped.name:"",image:e.itemShipped?e.itemShipped.image:"",url:e.itemShipped?e.itemShipped.url:"",mid:p,fid:q,shipper:i,trackingNumber:e.trackingNumber,estimatedDeliveryViaShipper:k,trackingUrl:j};d||(d=t.name),l._isPastDate(e.expectedArrival)?this.delivered.push(t):this.recent.push(t)}else a.log("unexpected schema ",e.id,e);return this.delivered.sort(c),this.delivered.reverse(),this.recent.sort(c),(this.recent.length||this.delivered.length)&&(l.node.one("#entity-purchase-history-card").removeClass("hidden"),this.recent.length?this.recent.length/this.lineSize>1?this.showItems("recent",2):(this.showItems("recent"),this.showItems("delivered",1)):this.showItems("delivered",2),(this.recentRendered<this.recent.length||this.deliveredRendered<this.delivered.length)&&this.node.one(".show-more").removeClass("hidden")),d},showItems:function(b,d){var e,f=this[b],g=this[b+"Rendered"],h=this.node.one(".purchase-history-list-"+b),i=this;h.ancestor(".purchase-history").removeClass("hidden"),e=void 0===d?f.length:(Math.floor(g/this.lineSize)+d)*this.lineSize,a.Array.each(f.slice(g,e),function(a){"delivered"===b&&(a.isDeliverdedOrder=!0),h.append(c.entity_purchase_history_item(a)),i.hasShipmentCards=!0}),this[b+"Rendered"]=e},postRender:function(){var b=this;this._event.push(a.on("windowresize",function(){b._calculateWidth()})),this._calculateWidth(),h.stat("entityview_rendered"),b.hasShipmentCards&&h.stat("hasshipment"),this._event.push(a.on("click",function(){b.hasShipmentCards&&h.stat("message")},".show-entity-search-view .list-view-item")),this._event.push(a.on("click",function(){h.stat("searchinstead")},".contactdetails-entity-search-instead")),this._event.push(a.on("click",function(a){b.toggleFromTo(a.currentTarget.hasClass("contactdetails-search-to")),a.halt()},".contactdetails-search"))},toggleFromTo:function(a){var b={type:"entity",id:this.entityInfo.id,isToQuery:a};yui.fire("searchSuggestion:start",b)},showMore:function(){this.recentRendered<this.recent.length?this.showItems("recent",1):this.deliveredRendered<this.delivered.length&&this.showItems("delivered",1),this.recentRendered>=this.recent.length&&this.deliveredRendered>=this.delivered.length&&this.node.one(".show-more").hide()},_calculateWidth:function(){var b=a.one("#dd_search_results_container_top").get("clientWidth")-30;this.lineSize=Math.floor(b/180)},onThumbnailClicked:function(a){if(!a.target.ancestor(".purchase-history-tracking")){var b=a.currentTarget,c=b.getAttribute("data-mid"),e=b.getAttribute("data-fid");d.openMessage({mid:c,fid:e}),a.currentTarget.hasClass("purchase-delivered-item")?h.stat("delivered"):h.stat("recent")}},onTrackingNumberClicked:function(a){var b,c;a.target.ancestor(".purchase-history-tracking")&&(c=a.currentTarget.getAttribute("data-link"),c&&(b=window.open(c,"_blank"),b.focus()),h.stat("trackingnumber"))},handleheaderBtn:function(b){var c,d,e=b.target,f=e.getAttribute("data-action");switch(f){case"refinement":if(c=a.one("#dd_search_results_container_top").ancestor().one(".refinements"),!c)break;d=e.hasClass("active"),d?(c.setStyle("display","none"),c.addClass("hidden"),e.removeClass("active")):(c.setStyle("display","block"),c.removeClass("hidden"),e.addClass("active"))}},toggleFromToFilter:function(a){var b=this,c=a.currentTarget.getAttribute("data-filter"),d=!!b.isToQuery;d!==("to"===c)&&(b.node.all(".tictac-contactdetails-filter").each(function(a){a.removeClass("active")}),a.currentTarget.addClass("active"),b.toggleFromTo("to"===c))},events:{"click .contactdetails-entity-search-instead":"onClickSearchInstead","click li.purchase-history-item":"onThumbnailClicked","click .show-more":"showMore","click .tictac-contactdetails-refinement":"handleheaderBtn","click .purchase-history-tracking-inner":"onTrackingNumberClicked","click .tictac-contactdetails-filter":"toggleFromToFilter","click .contactdetails-entity-email":"onClickContactEmail"}});a.namespace("Tictac.contactdetails").EntityContactView=j},"1.0.0",{requires:["tictac-contactdetails-rollups","tictac-base-view","node","tictac-base-utils","contactdetails-css","tictac-base-mailutils","tictac-base-utils","event","tictac-contactdetails-stats"]});